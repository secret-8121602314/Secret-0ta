import{j as e,r as a,R as Ce}from"./react-vendor-BZRXxuJQ.js";import{s as Q,u as O,l as H,a as he,b as ue,n as X,c as Y,q as oe,t as ee,d as Fe,e as te}from"./gaming-services-CkFQyOwT.js";import{a as Ae}from"./core-services-sHekN4Fr.js";import{s as me}from"./auth-Da-vLZGV.js";import{t as P}from"./services-DFNjQf9R.js";import{m as l,A as $,u as Le}from"./framer-vendor-CJux3ooU.js";import{G as Ee}from"./modals-oMqNwZiz.js";import{g as se}from"./features-BKz__Gv4.js";const Be=({className:d="",size:n="md",spin:m=!1,spinOnce:o=!1,bounce:M=!1,userTier:f,isOnTrial:h=!1,onClick:b})=>{const N={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16",xl:"w-24 h-24"},j=()=>{const k=[];return M&&k.push("bounce 2s infinite"),o?k.push("spin-once 2s ease-in-out forwards"):m&&k.push("spin 6s linear infinite"),k.length>0?k.join(", "):"none"},S=(()=>{if(h)return se("/images/icons/pro.png");switch(f){case"vanguard_pro":return se("/images/icons/vanguard.png");case"pro":return se("/images/icons/pro.png");case"free":return se("/images/icons/free.png");default:return se("/images/otagon-logo.png")}})(),F=f?`Otagon ${f} Logo`:"Otagon Logo",g=e.jsx("img",{src:S,alt:F,className:`${N[n]} ${d}`,style:{filter:"drop-shadow(0 0 24px rgba(255, 140, 0, 0.3))",objectFit:"contain",animation:j()}});return b?e.jsx("button",{onClick:b,className:"focus:outline-none hover:scale-105 transition-transform cursor-pointer","aria-label":"Open Gaming Explorer",type:"button",children:g}):g},Me=[{id:"latest_news",title:"Latest Gaming News",description:"Breaking news from the gaming world",prompt:"What are the latest gaming news and announcements from the past week? Include major game reveals, studio updates, and industry news.",gradient:"from-[#E53A3A] to-[#D98C1F]",icon:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"})})},{id:"trending_games",title:"Trending Games",description:"Games everyone is talking about",prompt:"What games are currently trending and most popular right now? Include games people are playing, discussing, and streaming the most.",gradient:"from-[#FF4D4D] to-[#FFAB40]",icon:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})},{id:"upcoming_releases",title:"Upcoming Releases",description:"Games releasing soon",prompt:"What are the most anticipated upcoming game releases in the next 3 months? Include release dates, platforms, and why they are exciting.",gradient:"from-[#8B5CF6] to-[#3B82F6]",icon:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})},{id:"new_reviews",title:"New Reviews",description:"Latest game reviews and scores",prompt:"What are the latest major game reviews? Include review scores, critical reception, and key points from recent game releases.",gradient:"from-[#06B6D4] to-[#10B981]",icon:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}],Se=[{id:"action",name:"Action",query:"best action games 2024"},{id:"rpg",name:"RPG",query:"best rpg games 2024"},{id:"adventure",name:"Adventure",query:"best adventure games"},{id:"shooter",name:"Shooter",query:"best shooter games 2024"},{id:"indie",name:"Indie",query:"best indie games 2024"},{id:"strategy",name:"Strategy",query:"best strategy games"}],De=({user:d,onOpenGameInfo:n,onSendNewsQuery:m,onSwitchToLibraryTab:o,isGroundingEnabled:M,onRequestGroundingConfirmation:f})=>{var de;const[h,b]=a.useState([]),[N,j]=a.useState(!1),[w,S]=a.useState([]),[F,g]=a.useState(!1),[k,v]=a.useState([]),[G,A]=a.useState(!1),[E,D]=a.useState("action"),[B,p]=a.useState({}),[C,c]=a.useState(!1),[L,_]=a.useState(""),[z,R]=a.useState(!1),[W,I]=a.useState(()=>Q.getGames()),[t,r]=a.useState([]),u=a.useRef(null),x=a.useMemo(()=>O.get().libraryStats,[]),T=a.useMemo(()=>H.getByCategory("own").slice(0,6),[]),V=a.useMemo(()=>H.getByCategory("favorite").slice(0,6),[]);a.useEffect(()=>{(async()=>{try{const i=new Date,{data:y,error:q}=await me.from("igdb_home_cache").select("cache_key, data, expires_at").in("cache_key",["featured_games","new_releases","highest_rated","categories"]).gt("expires_at",i.toISOString());if(!q&&y&&y.length>0){console.log("[GamingExplorerHome] Using global Supabase cache");const J=new Map(y.map(le=>[le.cache_key,le.data])),ae=J.get("featured_games");ae&&b(ae);const re=J.get("new_releases");re&&S(re);const Z=J.get("highest_rated");Z&&v(Z);const K=J.get("categories");K&&p(K),j(!1),g(!1),A(!1),c(!1);return}}catch(i){console.error("[GamingExplorerHome] Error loading cache:",i)}console.log("[GamingExplorerHome] Fetching fresh IGDB data"),j(!0),g(!0),A(!0),c(!0);try{const i=await oe("popular",12);b(i.slice(0,8)),j(!1);const y=await oe("recent_releases",10);S(y.slice(0,6)),g(!1);const q=await oe("top_rated",12);v(q.slice(0,8)),A(!1),console.log("[GamingExplorerHome] Fetching genre-specific games");const ae=[{key:"action",queryType:"genre_action"},{key:"rpg",queryType:"genre_rpg"},{key:"adventure",queryType:"genre_adventure"},{key:"shooter",queryType:"genre_shooter"},{key:"indie",queryType:"genre_indie"},{key:"strategy",queryType:"genre_strategy"}].map(async({key:ye,queryType:Ne})=>{const ke=await oe(Ne,12);return[ye,ke.slice(0,8)]}),re=await Promise.all(ae),Z=Object.fromEntries(re);p(Z);const K=new Date,le=new Date(K.getTime()+1440*60*1e3),ne=new Date(K.getTime()+10080*60*1e3),we=[{cache_key:"featured_games",data:i.slice(0,8),expires_at:ne.toISOString()},{cache_key:"new_releases",data:y.slice(0,6),expires_at:le.toISOString()},{cache_key:"highest_rated",data:q.slice(0,8),expires_at:ne.toISOString()},{cache_key:"categories",data:Z,expires_at:ne.toISOString()}];await me.from("igdb_home_cache").upsert(we,{onConflict:"cache_key"}),console.log("[GamingExplorerHome] Cached to Supabase: new_releases = 1d, featured/highest_rated/categories = 7d")}catch(i){console.error("Error fetching games:",i)}finally{j(!1),c(!1)}})()},[]);const U=a.useCallback(s=>{if(_(s),u.current&&clearTimeout(u.current),s.trim().length<2){r([]),R(!1);return}R(!0),u.current=setTimeout(async()=>{try{const i=await he(s);r(i)}catch(i){console.error("Search error:",i),r([])}finally{R(!1)}},200)},[]);a.useEffect(()=>()=>{u.current&&clearTimeout(u.current)},[]);const ge=a.useCallback(s=>{Q.add(s),I(Q.getGames()),n(s,s.name),_(""),r([])},[n]),pe=a.useCallback(async s=>{if(s.preventDefault(),!(!L.trim()||z)){R(!0);try{const i=await ue(L.trim());i?(Q.add(i),I(Q.getGames()),n(i,i.name),_(""),r([])):P.warning(`No game found for "${L}"`)}catch(i){console.error("Search error:",i),P.error("Failed to search for game")}finally{R(!1)}}},[L,z,n]),fe=a.useCallback(s=>{E===s.id?D(null):D(s.id)},[E]),be=a.useCallback(async s=>{await X.getAsync(s.id)&&console.log("[GamingExplorerHome] Using cached news from Supabase/localStorage for:",s.id);const y=X.canGenerate(d.id,s.id);if(!y.allowed&&y.nextAvailableAt){const q=Math.ceil((y.nextAvailableAt-Date.now())/36e5);P.warning(`You can generate ${s.title} again in ${q} hours`);return}if(!M&&f){f(s.prompt);return}X.logGeneration(d.id,s.id),m?m(s.prompt):P.info("Please use this feature from the main app")},[d.id,m,M,f]),je=a.useCallback(s=>!X.canGenerate(d.id,s).allowed,[d.id]),ve=a.useCallback(s=>{const i=X.canGenerate(d.id,s);if(i.allowed||!i.nextAvailableAt)return null;const y=Math.ceil((i.nextAvailableAt-Date.now())/(3600*1e3));return y<=1?"Available in <1h":`Available in ${y}h`},[d.id]);return e.jsxs("div",{className:"p-4 lg:p-6 space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 py-2",children:[e.jsxs(l.button,{onClick:()=>o==null?void 0:o("own"),whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex flex-col items-center gap-1 px-4 py-2 rounded-xl hover:bg-white/5 transition-colors cursor-pointer group",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("svg",{className:"w-4 h-4 text-[#D98C1F]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),e.jsx("span",{className:"text-lg sm:text-xl font-bold text-white",children:x.ownedCount})]}),e.jsx("span",{className:"text-[10px] sm:text-xs text-neutral-400 group-hover:text-neutral-300",children:"Owned"})]}),e.jsx("div",{className:"w-px h-8 bg-neutral-700/50"}),e.jsxs(l.button,{onClick:()=>o==null?void 0:o("favorite"),whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex flex-col items-center gap-1 px-4 py-2 rounded-xl hover:bg-white/5 transition-colors cursor-pointer group",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("svg",{className:"w-4 h-4 text-yellow-500",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),e.jsx("span",{className:"text-lg sm:text-xl font-bold text-white",children:x.favoritesCount})]}),e.jsx("span",{className:"text-[10px] sm:text-xs text-neutral-400 group-hover:text-neutral-300",children:"Favorites"})]}),e.jsx("div",{className:"w-px h-8 bg-neutral-700/50"}),e.jsxs(l.button,{onClick:()=>o==null?void 0:o("own"),whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex flex-col items-center gap-1 px-4 py-2 rounded-xl hover:bg-white/5 transition-colors cursor-pointer group",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-lg sm:text-xl font-bold text-white",children:x.completedCount})]}),e.jsx("span",{className:"text-[10px] sm:text-xs text-neutral-400 group-hover:text-neutral-300",children:"Completed"})]}),e.jsx("div",{className:"w-px h-8 bg-neutral-700/50"}),e.jsxs(l.button,{onClick:()=>o==null?void 0:o("wishlist"),whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex flex-col items-center gap-1 px-4 py-2 rounded-xl hover:bg-white/5 transition-colors cursor-pointer group",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("svg",{className:"w-4 h-4 text-pink-500",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),e.jsx("span",{className:"text-lg sm:text-xl font-bold text-white",children:x.wishlistCount})]}),e.jsx("span",{className:"text-[10px] sm:text-xs text-neutral-400 group-hover:text-neutral-300",children:"Wishlist"})]})]}),e.jsxs("form",{onSubmit:pe,className:"relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:L,onChange:s=>U(s.target.value),placeholder:"Search for any game...",className:"w-full px-4 py-3 pl-12 bg-[#1C1C1C] border border-[#424242]/50 rounded-xl text-[#F5F5F5] placeholder-[#6B7280] focus:outline-none focus:border-[#E53A3A]/50 focus:ring-1 focus:ring-[#E53A3A]/30 transition-all",inputMode:"search",autoComplete:"off"}),e.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-[#6B7280]",children:z?e.jsxs("svg",{className:"w-5 h-5 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",strokeWidth:2,className:"opacity-25"}),e.jsx("path",{strokeWidth:2,d:"M12 2a10 10 0 0110 10",className:"opacity-75"})]}):e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),L&&!z&&e.jsx("button",{type:"submit",className:"absolute right-2 top-1/2 -translate-y-1/2 px-4 py-1.5 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white text-sm font-medium rounded-lg hover:opacity-90 transition-opacity",children:"Search"})]}),e.jsx($,{children:L.length>=2&&t.length>0&&e.jsx(l.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full left-0 right-0 mt-2 bg-[#1C1C1C] border border-[#424242]/50 rounded-xl overflow-hidden shadow-xl z-50 max-h-96 overflow-y-auto",children:t.map((s,i)=>{var y;return e.jsxs(l.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:i*.03},onClick:()=>ge(s),className:"w-full p-3 flex gap-3 items-center hover:bg-[#2A2A2A] transition-colors text-left border-b border-[#424242]/30 last:border-0",children:[(y=s.cover)!=null&&y.url?e.jsx("img",{src:Y(s.cover.url,"cover_small"),alt:s.name,className:"w-10 h-14 object-cover rounded flex-shrink-0"}):e.jsx("div",{className:"w-10 h-14 bg-[#2A2A2A] rounded flex-shrink-0 flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-[#424242]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-[#F5F5F5] truncate",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[s.first_release_date&&e.jsx("span",{className:"text-xs text-[#8F8F8F]",children:new Date(s.first_release_date*1e3).getFullYear()}),s.aggregated_rating&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-[#424242]",children:"â€¢"}),e.jsxs("span",{className:"text-xs text-[#10B981] font-medium",children:[Math.round(s.aggregated_rating),"%"]})]})]})]})]},s.id)})})})]}),T.length>0&&e.jsxs("section",{children:[e.jsxs("h2",{className:"text-lg font-bold text-[#F5F5F5] mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-6 bg-gradient-to-b from-[#E53A3A] to-[#D98C1F] rounded-full"}),"Your Collection"]}),e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8 2xl:grid-cols-10 gap-2 lg:gap-3",children:T.map(s=>{var i,y;return e.jsxs(l.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>s.igdbData&&n(s.igdbData,s.gameName),className:"relative aspect-[3/4] rounded-lg overflow-hidden group",children:[(y=(i=s.igdbData)==null?void 0:i.cover)!=null&&y.url?e.jsx("img",{src:Y(s.igdbData.cover.url,"cover_big"),alt:s.gameName,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-[#2A2A2A] flex items-center justify-center",children:e.jsx("span",{className:"text-[#8F8F8F] text-xs text-center px-1",children:s.gameName})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-end p-2",children:e.jsx("span",{className:"text-white text-xs font-medium line-clamp-2",children:s.gameName})})]},s.id)})})]}),V.length>0&&e.jsxs("section",{children:[e.jsxs("h2",{className:"text-lg font-bold text-[#F5F5F5] mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-6 bg-gradient-to-b from-[#FFD700] to-[#FFA500] rounded-full"}),"Your Favorites"]}),e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8 2xl:grid-cols-10 gap-2 lg:gap-3",children:V.map(s=>{var i,y;return e.jsxs(l.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>s.igdbData&&n(s.igdbData,s.gameName),className:"relative aspect-[3/4] rounded-lg overflow-hidden group",children:[(y=(i=s.igdbData)==null?void 0:i.cover)!=null&&y.url?e.jsx("img",{src:Y(s.igdbData.cover.url,"cover_big"),alt:s.gameName,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-[#2A2A2A] flex items-center justify-center",children:e.jsx("span",{className:"text-[#8F8F8F] text-xs text-center px-1",children:s.gameName})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-end p-2",children:e.jsx("span",{className:"text-white text-xs font-medium line-clamp-2",children:s.gameName})}),e.jsx("div",{className:"absolute top-2 right-2 text-yellow-400",children:"â˜…"})]},s.id)})})]}),W.length>0&&e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h2",{className:"text-lg font-bold text-[#F5F5F5] flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-6 bg-gradient-to-b from-[#06B6D4] to-[#0891B2] rounded-full"}),"Recently Searched"]}),e.jsx("button",{onClick:()=>{Q.clear(),I([])},className:"text-xs text-[#6B7280] hover:text-[#E53A3A] transition-colors",children:"Clear All"})]}),e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8 2xl:grid-cols-10 gap-2 lg:gap-3",children:W.map(s=>{var i;return e.jsxs(l.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>n(s,s.name),className:"relative aspect-[3/4] rounded-lg overflow-hidden group",children:[(i=s.cover)!=null&&i.url?e.jsx("img",{src:Y(s.cover.url,"cover_big"),alt:s.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-[#2A2A2A] flex items-center justify-center",children:e.jsx("span",{className:"text-[#8F8F8F] text-xs text-center px-1",children:s.name})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-end p-2",children:e.jsx("span",{className:"text-white text-xs font-medium line-clamp-2",children:s.name})}),e.jsx("div",{className:"absolute top-2 right-2 text-[#06B6D4]",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]},s.id)})})]}),e.jsxs("section",{children:[e.jsxs("h2",{className:"text-lg font-bold text-[#F5F5F5] mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-6 bg-gradient-to-b from-[#10B981] to-[#06B6D4] rounded-full"}),"New Releases",e.jsx("span",{className:"text-xs text-[#8F8F8F] font-normal",children:"(Last 30 Days)"})]}),F?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"w-8 h-8 border-2 border-[#10B981] border-t-transparent rounded-full animate-spin"})}):w.length>0?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8 2xl:grid-cols-10 gap-2 lg:gap-3",children:w.map(s=>{var i;return e.jsxs(l.button,{whileHover:{scale:1.03,y:-4},whileTap:{scale:.98},onClick:()=>n(s,s.name),className:"bg-[#1C1C1C] rounded-xl overflow-hidden border border-[#424242]/40 hover:border-[#10B981]/50 transition-all text-left",children:[e.jsxs("div",{className:"aspect-[3/4] relative overflow-hidden",children:[(i=s.cover)!=null&&i.url?e.jsx("img",{src:Y(s.cover.url,"cover_big"),alt:s.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-[#2A2A2A]"}),e.jsx("div",{className:"absolute top-2 left-2 bg-gradient-to-r from-[#10B981] to-[#06B6D4] px-2 py-0.5 rounded text-[10px] font-bold text-white",children:"FRESH"}),s.aggregated_rating&&e.jsxs("div",{className:"absolute top-2 right-2 bg-black/70 px-1.5 py-0.5 rounded text-[10px] font-bold text-[#10B981]",children:[Math.round(s.aggregated_rating),"%"]})]}),e.jsx("div",{className:"p-2",children:e.jsx("h3",{className:"font-medium text-[#F5F5F5] text-xs line-clamp-1",children:s.name})})]},s.id)})}):e.jsx("div",{className:"text-center py-6 text-[#8F8F8F] text-sm",children:"Loading new releases..."})]}),e.jsxs("section",{children:[e.jsxs("h2",{className:"text-lg font-bold text-[#F5F5F5] mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-6 bg-gradient-to-b from-[#FFD700] to-[#FFA500] rounded-full"}),"Highest Rated",e.jsx("span",{className:"text-xs text-[#8F8F8F] font-normal",children:"(All Time)"})]}),G?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"w-8 h-8 border-2 border-[#FFD700] border-t-transparent rounded-full animate-spin"})}):k.length>0?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 gap-2 lg:gap-4",children:k.map(s=>{var i;return e.jsxs(l.button,{whileHover:{scale:1.02,y:-4},whileTap:{scale:.98},onClick:()=>n(s,s.name),className:"bg-[#1C1C1C] rounded-xl overflow-hidden border border-[#424242]/40 hover:border-[#FFD700]/50 transition-all text-left",children:[e.jsxs("div",{className:"aspect-[3/4] relative overflow-hidden",children:[(i=s.cover)!=null&&i.url?e.jsx("img",{src:Y(s.cover.url,"cover_big"),alt:s.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-[#2A2A2A]"}),e.jsx("div",{className:"absolute top-2 left-2 bg-gradient-to-r from-[#FFD700] to-[#FFA500] px-2 py-0.5 rounded text-[10px] font-bold text-black",children:"â˜… TOP"}),s.aggregated_rating&&e.jsxs("div",{className:"absolute top-2 right-2 bg-black/70 px-2 py-1 rounded text-xs font-bold text-[#FFD700]",children:[Math.round(s.aggregated_rating),"%"]})]}),e.jsx("div",{className:"p-2",children:e.jsx("h3",{className:"font-medium text-[#F5F5F5] text-xs line-clamp-1",children:s.name})})]},s.id)})}):e.jsx("div",{className:"text-center py-6 text-[#8F8F8F] text-sm",children:"Loading highest rated games..."})]}),e.jsxs("section",{children:[e.jsxs("h2",{className:"text-lg font-bold text-[#F5F5F5] mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-6 bg-gradient-to-b from-[#3B82F6] to-[#8B5CF6] rounded-full"}),"Featured Games"]}),N?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"w-8 h-8 border-2 border-[#E53A3A] border-t-transparent rounded-full animate-spin"})}):h.length>0?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 gap-2 lg:gap-4",children:h.map(s=>{var i;return e.jsxs(l.button,{whileHover:{scale:1.02,y:-4},whileTap:{scale:.98},onClick:()=>n(s,s.name),className:"bg-[#1C1C1C] rounded-xl overflow-hidden border border-[#424242]/40 hover:border-[#E53A3A]/50 transition-all text-left",children:[e.jsxs("div",{className:"aspect-[3/4] relative overflow-hidden",children:[(i=s.cover)!=null&&i.url?e.jsx("img",{src:Y(s.cover.url,"cover_big"),alt:s.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-[#2A2A2A]"}),s.aggregated_rating&&e.jsxs("div",{className:"absolute top-2 right-2 bg-black/70 px-2 py-1 rounded text-xs font-bold text-[#10B981]",children:[Math.round(s.aggregated_rating),"%"]})]}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"font-medium text-[#F5F5F5] text-sm line-clamp-1",children:s.name}),s.genres&&e.jsx("p",{className:"text-xs text-[#6B7280] mt-1 line-clamp-1",children:s.genres.slice(0,2).map(y=>y.name).join(" â€¢ ")})]})]},s.id)})}):e.jsx("div",{className:"text-center py-8 text-[#8F8F8F]",children:"Browse categories below to discover games"})]}),e.jsxs("section",{children:[e.jsxs("h2",{className:"text-lg font-bold text-[#F5F5F5] mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-6 bg-gradient-to-b from-[#10B981] to-[#059669] rounded-full"}),"Browse Categories"]}),e.jsx("div",{className:"grid grid-cols-3 sm:flex sm:flex-wrap gap-2 mb-4",children:Se.map(s=>{var y;const i=((y=B[s.id])==null?void 0:y.length)||0;return e.jsxs("button",{onClick:()=>fe(s),className:`px-2 sm:px-4 py-2 rounded-xl text-xs sm:text-sm font-medium transition-all flex items-center justify-center sm:justify-start gap-1 sm:gap-2 ${E===s.id?"bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white shadow-lg":"bg-[#1C1C1C] text-[#8F8F8F] hover:bg-[#2A2A2A] hover:text-[#CFCFCF] border border-[#424242]/40"}`,style:E===s.id?{boxShadow:"0 4px 12px rgba(229, 58, 58, 0.25)"}:{},children:[e.jsx("span",{className:"truncate",children:s.name}),i>0&&e.jsx("span",{className:`text-[10px] sm:text-xs px-1 sm:px-1.5 py-0.5 rounded-full flex-shrink-0 ${E===s.id?"bg-white/25":"bg-[#424242]"}`,children:i})]},s.id)})}),C&&!Object.keys(B).length&&e.jsx("div",{className:"flex items-center justify-center py-6",children:e.jsx("div",{className:"w-6 h-6 border-2 border-[#E53A3A] border-t-transparent rounded-full animate-spin"})}),E&&((de=B[E])==null?void 0:de.length)>0&&e.jsx(l.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 gap-2 lg:gap-4",children:B[E].map(s=>{var i;return e.jsxs(l.button,{whileHover:{scale:1.02,y:-4},whileTap:{scale:.98},onClick:()=>n(s,s.name),className:"bg-[#1C1C1C] rounded-xl overflow-hidden border border-[#424242]/40 hover:border-[#E53A3A]/50 text-left transition-all",children:[e.jsxs("div",{className:"aspect-[3/4] relative overflow-hidden",children:[(i=s.cover)!=null&&i.url?e.jsx("img",{src:Y(s.cover.url,"cover_big"),alt:s.name,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"}):e.jsx("div",{className:"w-full h-full bg-[#2A2A2A] flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-[#424242]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"})})}),s.aggregated_rating&&e.jsxs("div",{className:`absolute top-2 right-2 px-2 py-1 rounded-lg text-xs font-bold bg-black/80 backdrop-blur-sm ${s.aggregated_rating>=75?"text-[#10B981]":s.aggregated_rating>=50?"text-[#F59E0B]":"text-[#EF4444]"}`,children:[Math.round(s.aggregated_rating),"%"]})]}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"font-medium text-[#F5F5F5] text-sm line-clamp-1",children:s.name}),s.genres&&e.jsx("p",{className:"text-xs text-[#6B7280] mt-1 line-clamp-1",children:s.genres.slice(0,2).map(y=>y.name).join(" â€¢ ")})]})]},s.id)})}),!E&&!C&&Object.keys(B).length>0&&e.jsxs("div",{className:"text-center py-6 text-[#8F8F8F]",children:[e.jsx("svg",{className:"w-8 h-8 mx-auto mb-2 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),"Select a category to browse games"]})]}),e.jsxs("section",{children:[e.jsxs("h2",{className:"text-lg font-bold text-[#F5F5F5] mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-6 bg-gradient-to-b from-[#FF4D4D] to-[#FFAB40] rounded-full"}),"Gaming News"]}),e.jsx("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:Me.map(s=>{const i=je(s.id),y=ve(s.id);return e.jsxs(l.button,{whileHover:i?void 0:{scale:1.02},whileTap:i?void 0:{scale:.98},onClick:()=>be(s),disabled:i,className:`relative overflow-hidden rounded-xl p-3 sm:p-5 text-left transition-all ${i?"opacity-60":""}`,children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${s.gradient} opacity-20`}),e.jsx("div",{className:"absolute inset-0 bg-[#1C1C1C]/80"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2 sm:mb-3",children:[e.jsx("div",{className:`p-1.5 sm:p-2 rounded-lg bg-gradient-to-br ${s.gradient}`,children:e.jsx("div",{className:"w-5 h-5 sm:w-8 sm:h-8",children:s.icon})}),i&&y&&e.jsx("span",{className:"text-[10px] sm:text-xs text-[#FF4D4D] bg-[#2A2A2A] px-1.5 sm:px-2 py-0.5 sm:py-1 rounded-full",children:y})]}),e.jsx("h3",{className:"font-semibold text-[#F5F5F5] text-sm sm:text-base mb-0.5 sm:mb-1 line-clamp-1",children:s.title}),e.jsx("p",{className:"text-xs sm:text-sm text-[#8F8F8F] line-clamp-2 hidden sm:block",children:s.description}),!i&&e.jsx("div",{className:"mt-2 sm:mt-3 text-[10px] sm:text-xs text-[#10B981]",children:"Tap to ask AI"})]}),e.jsx("div",{className:`absolute inset-0 rounded-xl border-2 border-transparent ${i?"":"hover:border-[#E53A3A]/50"} transition-colors`})]},s.id)})})]})]})},ie={console:{gradient:"from-[#3B82F6] to-[#1D4ED8]",bgGradient:"from-[#3B82F6]/10 to-[#1D4ED8]/10",emoji:"ðŸŽ®",label:"Console",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})},game:{gradient:"from-[#E53A3A] to-[#D98C1F]",bgGradient:"from-[#E53A3A]/10 to-[#D98C1F]/10",emoji:"ðŸ•¹ï¸",label:"Game",icon:e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})},pc_build:{gradient:"from-[#10B981] to-[#059669]",bgGradient:"from-[#10B981]/10 to-[#059669]/10",emoji:"ðŸ–¥ï¸",label:"PC Build",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})})},album:{gradient:"from-[#8B5CF6] to-[#6D28D9]",bgGradient:"from-[#8B5CF6]/10 to-[#6D28D9]/10",emoji:"ðŸ“¸",label:"Photos",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})},gameplay_session:{gradient:"from-[#F59E0B] to-[#D97706]",bgGradient:"from-[#F59E0B]/10 to-[#D97706]/10",emoji:"ðŸŽ¬",label:"Session",icon:e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}},Ge=({event:d,isExpanded:n,onToggle:m,onDelete:o})=>{var b,N;const M=a.useRef(null),f=Le(M,{once:!0,margin:"-50px"}),h=ie[d.type];return e.jsxs(l.div,{ref:M,initial:{opacity:0,x:-20,scale:.98},animate:f?{opacity:1,x:0,scale:1}:{},transition:{duration:.35,ease:"easeOut"},className:"relative group",children:[e.jsx("div",{className:"absolute -left-[34px] sm:-left-[40px] top-4 sm:top-5 z-10",children:e.jsxs(l.div,{initial:{scale:0},animate:f?{scale:1}:{},transition:{delay:.15,type:"spring",stiffness:300},className:"relative flex items-center justify-center",children:[e.jsx("div",{className:`absolute w-5 h-5 sm:w-6 sm:h-6 rounded-full bg-gradient-to-br ${h.gradient} opacity-30 blur-[3px]`}),e.jsx("div",{className:`relative w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full bg-gradient-to-br ${h.gradient} ring-2 ring-[#1a1a1a]`})]})}),e.jsxs(l.div,{whileHover:{scale:1.01},whileTap:{scale:.995},transition:{type:"spring",stiffness:400,damping:30},className:`relative overflow-hidden bg-gradient-to-br ${h.bgGradient} backdrop-blur-sm rounded-xl sm:rounded-2xl border border-[#424242]/30 hover:border-[#424242]/60 transition-all cursor-pointer shadow-sm hover:shadow-md`,onClick:m,children:[e.jsx("div",{className:`absolute top-0 left-0 right-0 h-0.5 sm:h-1 bg-gradient-to-r ${h.gradient}`}),e.jsxs("div",{className:"p-3 sm:p-4 lg:p-5",children:[e.jsxs("div",{className:"flex items-start gap-3 sm:gap-4",children:[e.jsx(l.div,{whileHover:{rotate:3,scale:1.05},className:`flex-shrink-0 p-2 sm:p-2.5 rounded-xl bg-gradient-to-br ${h.gradient} text-white shadow-md [&>svg]:w-4 [&>svg]:h-4 sm:[&>svg]:w-5 sm:[&>svg]:h-5`,children:h.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0 space-y-1.5",children:[e.jsx("h4",{className:"font-semibold text-[#F5F5F5] text-[15px] sm:text-base lg:text-lg leading-snug line-clamp-2",children:d.title}),e.jsx("span",{className:"inline-block text-[10px] sm:text-[11px] font-medium px-2 py-0.5 sm:py-1 rounded-full bg-[#424242]/40 text-[#CFCFCF] tracking-wide uppercase",children:h.label})]}),((N=(b=d.igdbData)==null?void 0:b.cover)==null?void 0:N.url)&&e.jsx(l.img,{initial:{opacity:0},animate:{opacity:1},src:Y(d.igdbData.cover.url,"cover_small"),alt:d.title,className:"w-11 h-[60px] sm:w-14 sm:h-[76px] object-cover rounded-lg shadow-lg flex-shrink-0 ring-1 ring-black/20"})]}),d.description&&e.jsx("p",{className:"text-[13px] sm:text-sm text-[#8F8F8F] line-clamp-2 mt-2 sm:mt-2.5 leading-relaxed",children:d.description})]})]}),e.jsx($,{children:n&&e.jsxs(l.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.25},className:"mt-4 sm:mt-5 pt-4 sm:pt-5 border-t border-[#424242]/30 overflow-hidden",children:[d.specs&&Object.keys(d.specs).length>0&&e.jsxs("div",{className:"mb-4 sm:mb-5",children:[e.jsxs("h5",{className:"text-xs sm:text-sm font-semibold text-[#CFCFCF] mb-2.5 sm:mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Specs"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-2.5",children:Object.entries(d.specs).map(([j,w])=>e.jsxs("div",{className:"bg-[#0A0A0A]/60 rounded-lg px-3 py-2 sm:py-2.5",children:[e.jsx("span",{className:"text-[#8F8F8F] text-[10px] sm:text-xs uppercase tracking-wider",children:j}),e.jsx("p",{className:"text-[#F5F5F5] font-medium truncate text-xs sm:text-sm mt-0.5",children:w})]},j))})]}),d.photos&&d.photos.length>0&&e.jsxs("div",{className:"mb-4 sm:mb-5",children:[e.jsxs("h5",{className:"text-xs sm:text-sm font-semibold text-[#CFCFCF] mb-2.5 sm:mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Photos"]}),e.jsx("div",{className:"flex gap-2.5 sm:gap-3 overflow-x-auto pb-2 scrollbar-hide -mx-1 px-1",children:d.photos.map((j,w)=>e.jsx(l.img,{whileHover:{scale:1.03},whileTap:{scale:.98},src:j,alt:`${d.title} photo ${w+1}`,className:"w-[72px] h-[72px] sm:w-24 sm:h-24 object-cover rounded-lg sm:rounded-xl flex-shrink-0 ring-1 ring-white/10"},w))})]}),e.jsxs("button",{onClick:j=>{j.stopPropagation(),o()},className:"flex items-center gap-2 px-3 py-2 text-xs sm:text-sm text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-all",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Remove Event"]})]})})]}),e.jsx(l.div,{animate:{rotate:n?180:0},transition:{duration:.2},className:"absolute bottom-2 right-2 sm:bottom-3 sm:right-3 p-1.5 rounded-full bg-[#2a2a2a]/60 text-[#8F8F8F] opacity-60 sm:opacity-0 group-hover:opacity-100 transition-all",children:e.jsx("svg",{className:"w-3.5 h-3.5 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})},He=({user:d})=>{var I;const[n,m]=a.useState(()=>ee.getAll()),[o,M]=a.useState(null),[f,h]=a.useState(!1),[b,N]=a.useState(null),[j,w]=a.useState(null),[S,F]=a.useState(null),g=a.useRef(null),[k,v]=a.useState(!1),G=O.get(),A=new Date().getFullYear(),E=G.gamingStartYear||A-10,D=a.useMemo(()=>{const t=[];for(let r=A;r>=E;r--)t.push(r);return t},[A,E]),B=a.useMemo(()=>{const t={};return n.forEach(r=>{t[r.year]||(t[r.year]=[]),t[r.year].push(r)}),t},[n]),p=a.useMemo(()=>{const t=A-E,r=n.filter(V=>V.type==="console").length,u=n.filter(V=>V.type==="game").length,x=Fe.getAll().length,T=n.length;return{yearsGaming:t,consoleCount:r,gameCount:u,sessionCount:x,totalEvents:T}},[n,A,E]),[C,c]=a.useState(A);a.useEffect(()=>{const t=new IntersectionObserver(u=>{u.forEach(x=>{if(x.isIntersecting){const T=parseInt(x.target.getAttribute("data-year")||"");isNaN(T)||c(T)}})},{threshold:.5,root:g.current});return document.querySelectorAll("[data-year]").forEach(u=>t.observe(u)),()=>t.disconnect()},[n]);const L=a.useCallback(t=>{M(t);const r=document.getElementById(`timeline-year-${t}`);r&&r.scrollIntoView({behavior:"smooth",block:"start"})},[]),_=a.useCallback(t=>{N(t),h(!0)},[]),z=a.useCallback(t=>{ee.deleteEvent(t),m(ee.getAll()),F(null)},[]),R=a.useCallback(t=>{if(!b)return;const r=j||t.year||A;ee.addEvent({type:b,eventDate:`${r}-01-01`,year:r,title:t.title||"Untitled",description:t.description,specs:t.specs,photos:t.photos,igdbGameId:t.igdbGameId,igdbData:t.igdbData}),m(ee.getAll()),h(!1),w(null),N(null),v(!0)},[b,j,A]),W=n.length>0;return e.jsxs("div",{className:"flex h-full bg-[#0A0A0A]",children:[e.jsxs("div",{className:"hidden lg:flex flex-col w-24 bg-gradient-to-b from-[#1C1C1C] to-[#0A0A0A] border-r border-[#424242]/40 overflow-hidden",children:[e.jsx("div",{className:"p-3 border-b border-[#424242]/40",children:e.jsx("p",{className:"text-xs text-[#8F8F8F] text-center font-medium",children:"Timeline"})}),e.jsx("div",{className:"flex-1 overflow-y-auto py-2 px-2 space-y-1",children:D.map(t=>{var x;const r=(((x=B[t])==null?void 0:x.length)||0)>0,u=C===t;return e.jsxs(l.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>L(t),className:`relative w-full py-2 text-sm rounded-lg transition-all ${u?"bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white font-medium shadow-lg":r?"text-[#F5F5F5] hover:bg-[#2A2A2A]":"text-[#6B7280] hover:bg-[#1C1C1C] hover:text-[#8F8F8F]"}`,children:[t,r&&!u&&e.jsx("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 w-2 h-2 rounded-full bg-[#E53A3A]"})]},t)})})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[e.jsx("div",{className:"flex-shrink-0 z-20 bg-[#0A0A0A]/95 backdrop-blur-md border-b border-[#424242]/40",children:e.jsx("div",{className:"px-3 sm:px-4 py-3 sm:py-4",children:e.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:flex sm:flex-wrap sm:items-center sm:justify-center sm:gap-6",children:[e.jsxs(l.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row items-center gap-1 sm:gap-2 bg-[#1C1C1C]/50 sm:bg-transparent rounded-xl p-2 sm:p-0",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg sm:rounded-xl bg-gradient-to-br from-[#E53A3A]/20 to-[#D98C1F]/20 flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-[#E53A3A]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("p",{className:"text-lg sm:text-xl font-bold text-[#F5F5F5]",children:p.yearsGaming}),e.jsx("p",{className:"text-[10px] sm:text-xs text-[#8F8F8F]",children:"Years"})]})]}),e.jsx("div",{className:"hidden sm:block w-px h-10 bg-[#424242]"}),e.jsxs(l.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.1},className:"flex flex-col sm:flex-row items-center gap-1 sm:gap-2 bg-[#1C1C1C]/50 sm:bg-transparent rounded-xl p-2 sm:p-0",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg sm:rounded-xl bg-gradient-to-br from-[#3B82F6]/20 to-[#1D4ED8]/20 flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-[#3B82F6]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("p",{className:"text-lg sm:text-xl font-bold text-[#F5F5F5]",children:p.consoleCount}),e.jsx("p",{className:"text-[10px] sm:text-xs text-[#8F8F8F]",children:"Consoles"})]})]}),e.jsx("div",{className:"hidden sm:block w-px h-10 bg-[#424242]"}),e.jsxs(l.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex flex-col sm:flex-row items-center gap-1 sm:gap-2 bg-[#1C1C1C]/50 sm:bg-transparent rounded-xl p-2 sm:p-0",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg sm:rounded-xl bg-gradient-to-br from-[#D98C1F]/20 to-[#B45309]/20 flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-[#D98C1F]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})})}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("p",{className:"text-lg sm:text-xl font-bold text-[#F5F5F5]",children:p.totalEvents}),e.jsx("p",{className:"text-[10px] sm:text-xs text-[#8F8F8F]",children:"Milestones"})]})]}),e.jsx("div",{className:"hidden sm:block w-px h-10 bg-[#424242]"}),e.jsxs(l.button,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.3},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>h(!0),className:"hidden sm:flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white font-medium rounded-xl shadow-lg hover:shadow-xl transition-all",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("span",{children:"Add Event"})]})]})})}),e.jsx("div",{className:"lg:hidden flex-shrink-0 z-10 bg-[#0A0A0A] border-b border-[#424242]/40 px-4 py-2",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsxs("select",{value:o||C||"",onChange:t=>L(Number(t.target.value)),className:"w-full appearance-none bg-[#1C1C1C] text-[#F5F5F5] rounded-lg px-4 py-2.5 pr-10 border border-[#424242]/60 focus:outline-none focus:border-[#E53A3A]",children:[e.jsx("option",{value:"",disabled:!0,children:"Jump to year..."}),D.map(t=>{var r;return e.jsxs("option",{value:t,children:[t," ",(r=B[t])!=null&&r.length?`(${B[t].length} events)`:""]},t)})]}),e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-[#8F8F8F]",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),e.jsx(l.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>h(!0),className:"flex items-center justify-center px-4 py-2.5 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white font-medium rounded-lg shadow-lg",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]})}),e.jsxs("div",{ref:g,className:"flex-1 overflow-y-auto min-h-0",children:[!W&&e.jsxs(l.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"flex flex-col items-center justify-center py-16 px-4",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-[#E53A3A]/20 to-[#D98C1F]/20 flex items-center justify-center mb-6",children:e.jsx("svg",{className:"w-12 h-12 text-[#E53A3A]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),e.jsx("h3",{className:"text-xl font-bold text-[#F5F5F5] mb-2",children:"Start Your Gaming Journey"}),e.jsx("p",{className:"text-[#8F8F8F] text-center max-w-md mb-6",children:"Record your gaming milestones, consoles, PC builds, and memorable moments. Your timeline is waiting!"}),e.jsx(l.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>h(!0),className:"px-6 py-3 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white font-medium rounded-xl shadow-lg hover:shadow-xl transition-shadow",children:"Add Your First Event"})]}),W&&e.jsxs("div",{className:"relative px-4 sm:px-6 lg:px-8 py-5 sm:py-6",children:[e.jsx("div",{className:"absolute left-[18px] sm:left-[34px] lg:left-[42px] top-0 bottom-0 flex flex-col items-center",children:e.jsx("div",{className:"w-0.5 sm:w-[2px] h-full rounded-full bg-gradient-to-b from-[#E53A3A] via-[#E53A3A]/40 via-50% to-[#2a2a2a]/60 relative",children:e.jsx("div",{className:"absolute inset-0 w-full h-full bg-gradient-to-b from-[#E53A3A] via-[#E53A3A]/20 to-transparent blur-sm opacity-50"})})}),k&&(()=>{const t=D.filter(u=>{var x;return(((x=B[u])==null?void 0:x.length)||0)>0}),r=D.length-t.length;return r>0?e.jsxs(l.button,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},onClick:()=>v(!1),className:"mb-4 ml-10 sm:ml-16 lg:ml-[72px] inline-flex items-center gap-2 px-3 py-1.5 text-xs font-medium text-[#8F8F8F] hover:text-[#F5F5F5] bg-[#1C1C1C] hover:bg-[#252525] border border-[#424242]/40 rounded-lg transition-all",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),"Show ",r," empty year",r>1?"s":""]}):null})(),e.jsx($,{mode:"popLayout",children:D.filter(t=>{var r;return!k||(((r=B[t])==null?void 0:r.length)||0)>0}).map(t=>{const r=B[t]||[],u=r.length>0;return u?e.jsxs(l.div,{id:`timeline-year-${t}`,"data-year":t,className:"mb-10",layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:[e.jsxs("div",{className:"relative flex items-center h-10 sm:h-12 mb-4 sm:mb-5",children:[e.jsxs(l.div,{initial:{scale:0},whileInView:{scale:1},viewport:{once:!0},className:"absolute left-[6px] sm:left-[18px] flex items-center justify-center",children:[e.jsx("div",{className:`absolute w-7 h-7 sm:w-8 sm:h-8 rounded-full ${u?"bg-gradient-to-r from-[#E53A3A]/30 to-[#D98C1F]/30 blur-md":"bg-[#424242]/20 blur-sm"}`}),e.jsx("div",{className:`relative w-6 h-6 sm:w-7 sm:h-7 rounded-full flex items-center justify-center ring-[3px] ring-[#1a1a1a] ${u?"bg-gradient-to-br from-[#E53A3A] to-[#D98C1F]":"bg-[#2a2a2a] ring-[#424242]"}`,style:u?{boxShadow:"0 0 14px rgba(229, 58, 58, 0.4)"}:{},children:e.jsx("div",{className:`w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full ${u?"bg-white":"bg-[#6B7280]"}`})})]}),e.jsx("h3",{className:"ml-10 sm:ml-16 lg:ml-[72px] text-lg sm:text-xl lg:text-2xl font-bold text-[#F5F5F5] min-w-[48px]",children:t}),e.jsxs(l.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:()=>{w(t),h(!0)},className:"ml-3 sm:ml-4 inline-flex items-center justify-center gap-1.5 px-2.5 sm:px-3 h-7 sm:h-8 min-w-[40px] sm:min-w-[100px] bg-[#1C1C1C]/80 hover:bg-gradient-to-r hover:from-[#E53A3A] hover:to-[#D98C1F] text-[#8F8F8F] hover:text-white text-xs sm:text-sm font-medium rounded-lg transition-all border border-[#424242]/30 hover:border-transparent",title:`Add event to ${t}`,children:[e.jsx("svg",{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("span",{className:"hidden sm:inline",children:"Add Event"})]}),u&&e.jsx("span",{className:"ml-2 px-2 py-0.5 sm:py-1 text-[10px] sm:text-xs font-medium rounded-full bg-[#424242]/60 text-[#CFCFCF]",children:r.length})]}),u?e.jsx("div",{className:"space-y-3 sm:space-y-4 ml-10 sm:ml-16 lg:ml-[72px]",children:r.map(x=>e.jsx(Ge,{event:x,isExpanded:S===x.id,onToggle:()=>F(S===x.id?null:x.id),onDelete:()=>z(x.id)},x.id))}):e.jsxs("p",{className:"ml-10 sm:ml-16 lg:ml-[72px] text-[#6B7280] text-sm italic flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-px bg-[#424242]"}),"No events recorded - click + to add"]})]},t):e.jsx(l.div,{id:`timeline-year-${t}`,"data-year":t,className:"mb-3 sm:mb-4",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:e.jsxs("div",{className:"relative flex items-center h-9 sm:h-10 group",children:[e.jsx("div",{className:"absolute left-[8px] sm:left-[20px] w-4 h-4 sm:w-5 sm:h-5 rounded-full bg-[#2a2a2a] ring-2 ring-[#424242]/60 flex items-center justify-center",children:e.jsx("div",{className:"w-1 h-1 sm:w-1.5 sm:h-1.5 rounded-full bg-[#6B7280]"})}),e.jsx("span",{className:"ml-10 sm:ml-16 lg:ml-[72px] text-base sm:text-lg font-medium text-[#6B7280] min-w-[48px]",children:t}),e.jsxs(l.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:()=>{w(t),h(!0)},className:"ml-3 sm:ml-4 inline-flex items-center justify-center gap-1.5 px-2.5 sm:px-3 h-7 sm:h-8 min-w-[40px] sm:min-w-[100px] bg-[#1C1C1C]/80 hover:bg-gradient-to-r hover:from-[#E53A3A] hover:to-[#D98C1F] text-[#8F8F8F] hover:text-white text-xs sm:text-sm font-medium rounded-lg transition-all border border-[#424242]/30 hover:border-transparent opacity-60 group-hover:opacity-100",children:[e.jsx("svg",{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("span",{className:"hidden sm:inline",children:"Add Event"})]})]})},t)})}),!k&&n.length>0&&(()=>{const t=D.filter(u=>{var x;return(((x=B[u])==null?void 0:x.length)||0)>0}),r=D.length-t.length;return r>0?e.jsxs(l.button,{initial:{opacity:0},animate:{opacity:1},onClick:()=>v(!0),className:"mt-4 ml-10 sm:ml-16 lg:ml-[72px] inline-flex items-center gap-2 px-3 py-1.5 text-xs font-medium text-[#8F8F8F] hover:text-[#F5F5F5] bg-[#1C1C1C] hover:bg-[#252525] border border-[#424242]/40 rounded-lg transition-all",children:[e.jsx("svg",{className:"w-4 h-4 rotate-180",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),"Hide ",r," empty year",r>1?"s":""]}):null})()]})]}),e.jsx(l.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>h(!0),className:"hidden lg:flex fixed bottom-6 right-6 w-14 h-14 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white rounded-full items-center justify-center z-30",style:{boxShadow:"0 4px 20px rgba(0, 0, 0, 0.5), 0 8px 32px rgba(229, 58, 58, 0.4)"},children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]}),e.jsx($,{children:f&&e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[80] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",onClick:()=>{h(!1),N(null),w(null)},children:e.jsxs(l.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},onClick:t=>t.stopPropagation(),className:"bg-[#1C1C1C] rounded-2xl p-6 max-w-md w-full shadow-2xl border border-[#424242]/40",children:[e.jsx("h2",{className:"text-xl font-bold text-[#F5F5F5] mb-2",children:b?`Add ${((I=ie[b])==null?void 0:I.label)||b}`:"Add Timeline Event"}),j&&e.jsxs("p",{className:"text-sm text-[#8F8F8F] mb-4",children:["Adding to ",j]}),b?e.jsx(We,{type:b,startYear:E,currentYear:A,initialYear:j,onSave:R,onCancel:()=>N(null)}):e.jsx("div",{className:"grid grid-cols-2 gap-3 mt-6",children:["console","game","pc_build","album"].map(t=>{const r=ie[t];return e.jsxs(l.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>_(t),className:`flex flex-col items-center justify-center gap-3 p-5 rounded-xl bg-gradient-to-br ${r.gradient} text-white font-medium hover:opacity-90 transition-all shadow-lg min-h-[120px]`,children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-white/15 backdrop-blur-sm",children:r.icon}),e.jsx("span",{className:"text-sm font-semibold text-center leading-tight",children:r.label})]},t)})})]})})})]})},We=({type:d,startYear:n,currentYear:m,initialYear:o,onSave:M,onCancel:f})=>{const[h,b]=a.useState(""),[N,j]=a.useState(o||m),[w,S]=a.useState(""),[F,g]=a.useState({}),[k,v]=a.useState([]),G=Ce.useRef(null),A=ie[d],E=p=>{p.preventDefault(),M({title:h,year:N,description:w||void 0,specs:Object.keys(F).length>0?F:void 0,photos:k.length>0?k:void 0})},D=p=>{const C=p.target.files;C&&(Array.from(C).forEach(c=>{if(c.type.startsWith("image/")){const L=new FileReader;L.onload=_=>{var z;if((z=_.target)!=null&&z.result){const R=_.target.result;v(W=>[...W,R])}},L.readAsDataURL(c)}}),G.current&&(G.current.value=""))},B=p=>{v(C=>C.filter((c,L)=>L!==p))};return e.jsxs("form",{onSubmit:E,className:"space-y-4 mt-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-[#CFCFCF] mb-2 font-medium flex items-center gap-2",children:[e.jsx("span",{className:"w-5 h-5 flex items-center justify-center flex-shrink-0 text-[#E53A3A]",children:A.icon}),e.jsx("span",{children:"Title *"})]}),e.jsx("input",{type:"text",value:h,onChange:p=>b(p.target.value),placeholder:d==="console"?"e.g., PlayStation 5":d==="pc_build"?"e.g., Gaming Rig 2024":"Enter title",className:"w-full bg-[#0A0A0A] border border-[#424242] rounded-xl px-4 py-2.5 text-[#F5F5F5] focus:outline-none focus:border-[#E53A3A] transition-colors",required:!0,autoFocus:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-[#CFCFCF] mb-2 font-medium flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 flex-shrink-0 text-[#8B5CF6]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("span",{children:"Year *"})]}),e.jsx("select",{value:N,onChange:p=>j(Number(p.target.value)),className:"w-full bg-[#0A0A0A] border border-[#424242] rounded-xl px-4 py-2.5 text-[#F5F5F5] focus:outline-none focus:border-[#E53A3A] transition-colors",children:Array.from({length:m-n+1},(p,C)=>m-C).map(p=>e.jsx("option",{value:p,children:p},p))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-[#CFCFCF] mb-2 font-medium flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 flex-shrink-0 text-[#10B981]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{children:"Description"})]}),e.jsx("textarea",{value:w,onChange:p=>S(p.target.value),placeholder:"Add notes or memories...",rows:3,className:"w-full bg-[#0A0A0A] border border-[#424242] rounded-xl px-4 py-2.5 text-[#F5F5F5] focus:outline-none focus:border-[#E53A3A] resize-none transition-colors"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-[#CFCFCF] mb-2 font-medium flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 flex-shrink-0 text-[#F59E0B]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("span",{children:"Photos (Optional)"})]}),k.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:k.map((p,C)=>e.jsxs("div",{className:"relative w-16 h-16 rounded-lg overflow-hidden group",children:[e.jsx("img",{src:p,alt:`Upload ${C+1}`,className:"w-full h-full object-cover"}),e.jsx("button",{type:"button",onClick:()=>B(C),className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity",children:e.jsx("svg",{className:"w-5 h-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},C))}),e.jsx("input",{ref:G,type:"file",accept:"image/*",multiple:!0,onChange:D,className:"hidden"}),e.jsxs("button",{type:"button",onClick:()=>{var p;return(p=G.current)==null?void 0:p.click()},className:"w-full py-3 border-2 border-dashed border-[#424242] rounded-xl text-[#8F8F8F] hover:border-[#E53A3A] hover:text-[#E53A3A] transition-colors flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Photos"]})]}),d==="pc_build"&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm text-[#CFCFCF] font-medium flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 flex-shrink-0 text-[#3B82F6]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})}),e.jsx("span",{children:"PC Specs"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["CPU","GPU","RAM","Storage"].map(p=>e.jsx("input",{type:"text",value:F[p]||"",onChange:C=>g({...F,[p]:C.target.value}),placeholder:p,className:"bg-[#0A0A0A] border border-[#424242] rounded-lg px-3 py-2 text-[#F5F5F5] text-sm focus:outline-none focus:border-[#E53A3A] transition-colors"},p))})]}),e.jsxs("div",{className:"flex gap-3 pt-6",children:[e.jsxs(l.button,{type:"button",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:f,className:"flex-1 py-2.5 px-4 bg-[#424242]/50 text-[#CFCFCF] rounded-xl font-medium hover:bg-[#424242] transition-colors flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back"]}),e.jsxs(l.button,{type:"submit",whileHover:{scale:1.02},whileTap:{scale:.98},disabled:!h,className:"flex-1 py-2.5 px-4 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white rounded-xl font-medium hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Event"]})]})]})},xe=[{id:"own",label:"Own",icon:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})},{id:"wishlist",label:"Wishlist",icon:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})},{id:"favorite",label:"Favorites",icon:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})},{id:"disliked",label:"Disliked",icon:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14H5.236a2 2 0 01-1.789-2.894l3.5-7A2 2 0 018.736 3h4.018a2 2 0 01.485.06l3.76.94m-7 10v5a2 2 0 002 2h.096c.5 0 .905-.405.905-.904 0-.715.211-1.413.608-2.008L17 13V4m-7 10h2m5-10h2a2 2 0 012 2v6a2 2 0 01-2 2h-2.5"})})}],ce={not_started:"Not Started",playing:"Playing",completed:"Completed",abandoned:"Abandoned"},_e=({user:d,onOpenGameInfo:n,initialCategory:m})=>{var W,I;const[o,M]=a.useState(m||"own"),[f,h]=a.useState([]),[b,N]=a.useState(!1),[j,w]=a.useState(""),[S,F]=a.useState([]),[g,k]=a.useState(!1),[v,G]=a.useState(null),A=a.useRef(null),E=a.useRef(null);a.useEffect(()=>{const t=H.getByCategory(o);console.log("[GamingExplorerLibrary] Loading games for category:",o,"Found:",t.length),console.log("[GamingExplorerLibrary] Games:",t.map(r=>r.gameName)),h(t)},[o]),a.useEffect(()=>{m&&(console.log("[GamingExplorerLibrary] Switching to category:",m),M(m))},[m]),a.useEffect(()=>{const t=H.getAll();console.log("[GamingExplorerLibrary] Total games in library:",t.length),console.log("[GamingExplorerLibrary] Games by category:",{own:H.getByCategory("own").length,wishlist:H.getByCategory("wishlist").length,favorite:H.getByCategory("favorite").length,disliked:H.getByCategory("disliked").length})},[]);const D=a.useMemo(()=>O.get().libraryStats,[f]),B=a.useCallback(t=>{if(console.log("[GamingExplorerLibrary] Search query changed:",t),w(t),A.current&&clearTimeout(A.current),t.trim().length<2){F([]),k(!1);return}k(!0),A.current=setTimeout(async()=>{try{console.log("[GamingExplorerLibrary] Searching IGDB for:",t);const r=await he(t);console.log("[GamingExplorerLibrary] Search results:",r.length,"games"),F(r)}catch(r){console.error("[GamingExplorerLibrary] Search error:",r),F([])}finally{k(!1)}},200)},[]);a.useEffect(()=>()=>{A.current&&clearTimeout(A.current)},[]);const p=a.useCallback(async()=>{if(j.trim()){k(!0);try{const t=await ue(j);t?F([t]):(F([]),P.info("No games found. Try a different search term."))}catch(t){console.error("Search error:",t),P.error("Failed to search games")}finally{k(!1)}}},[j]),C=a.useCallback((t,r)=>{console.log("[GamingExplorerLibrary] Adding game to library:",t.name,"Category:",r),H.addGame(t.id,t.name,r,t);const u=H.getByCategory(o);console.log("[GamingExplorerLibrary] Updated games count for",o,":",u.length),h(u),w(""),F([]),P.success(`Added ${t.name} to ${r}`),r==="own"&&console.log("[GamingExplorerLibrary] Should trigger knowledge extraction for:",t.name)},[o]),c=a.useCallback((t,r)=>{H.removeGame(t,r),h(H.getByCategory(o)),P.success("Game removed from library")},[o]),L=a.useCallback((t,r)=>{H.updateGame(t,{completionStatus:r}),h(H.getByCategory(o))},[o]),_=a.useCallback((t,r)=>{H.updateGame(t,{personalRating:r}),h(H.getByCategory(o))},[o]),z=t=>{switch(t){case"completed":return"from-[#10B981] to-[#059669]";case"playing":return"from-[#3B82F6] to-[#1D4ED8]";case"abandoned":return"from-[#EF4444] to-[#DC2626]";default:return"from-[#6B7280] to-[#4B5563]"}},R=t=>{switch(t){case"completed":return e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})});case"playing":return e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"})});case"abandoned":return e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})});default:return e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}};return e.jsxs("div",{className:"h-full flex flex-col bg-[#0A0A0A]",children:[e.jsx("div",{className:"flex-shrink-0 bg-gradient-to-r from-[#1C1C1C] to-[#0A0A0A] border-b border-[#424242]/40 px-3 sm:px-4 py-3 sm:py-4",children:e.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:flex sm:flex-wrap sm:items-center sm:justify-center sm:gap-8",children:[e.jsxs(l.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row items-center gap-1 sm:gap-2 bg-[#1C1C1C]/60 sm:bg-transparent rounded-xl p-2.5 sm:p-0 border border-[#424242]/30 sm:border-0",children:[e.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-lg sm:rounded-xl bg-gradient-to-br from-[#E53A3A]/20 to-[#D98C1F]/20 flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-[#E53A3A]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("p",{className:"text-lg sm:text-xl font-bold text-[#F5F5F5]",children:D.ownedCount}),e.jsx("p",{className:"text-[10px] sm:text-xs text-[#8F8F8F]",children:D.ownedCount===1?"Game":"Games"})]})]}),e.jsx("div",{className:"hidden sm:block w-px h-10 bg-[#424242]"}),e.jsxs(l.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.1},className:"flex flex-col sm:flex-row items-center gap-1 sm:gap-2 bg-[#1C1C1C]/60 sm:bg-transparent rounded-xl p-2.5 sm:p-0 border border-[#424242]/30 sm:border-0",children:[e.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-lg sm:rounded-xl bg-gradient-to-br from-[#10B981]/20 to-[#059669]/20 flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-[#10B981]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("p",{className:"text-lg sm:text-xl font-bold text-[#10B981]",children:D.completedCount}),e.jsx("p",{className:"text-[10px] sm:text-xs text-[#8F8F8F]",children:"Done"})]})]}),e.jsx("div",{className:"hidden sm:block w-px h-10 bg-[#424242]"}),e.jsxs(l.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex flex-col sm:flex-row items-center gap-1 sm:gap-2 bg-[#1C1C1C]/60 sm:bg-transparent rounded-xl p-2.5 sm:p-0 border border-[#424242]/30 sm:border-0",children:[e.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-lg sm:rounded-xl bg-gradient-to-br from-[#F59E0B]/20 to-[#D97706]/20 flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-[#F59E0B]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("p",{className:"text-lg sm:text-xl font-bold text-[#F59E0B]",children:D.wishlistCount}),e.jsx("p",{className:"text-[10px] sm:text-xs text-[#8F8F8F]",children:"Wishlist"})]})]})]})}),e.jsx("div",{className:"flex-shrink-0 bg-[#0A0A0A] border-b border-[#424242]/40 px-4 py-3",children:e.jsx("div",{className:"grid grid-cols-2 sm:flex sm:flex-row sm:justify-center gap-2",children:xe.map((t,r)=>e.jsxs(l.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:r*.05},whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>M(t.id),className:`relative flex items-center justify-center sm:justify-start gap-2 px-4 py-2.5 rounded-xl text-sm font-medium transition-all ${o===t.id?"bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white shadow-lg":"bg-[#1C1C1C] text-[#8F8F8F] hover:bg-[#2A2A2A] hover:text-[#CFCFCF] border border-[#424242]/40"}`,style:o===t.id?{boxShadow:"0 4px 15px rgba(229, 58, 58, 0.25)"}:{},children:[t.icon,e.jsx("span",{children:t.label}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${o===t.id?"bg-white/25":"bg-[#424242]"}`,children:H.getByCategory(t.id).length})]},t.id))})}),e.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-3 sm:p-4 pb-28 lg:pb-20",children:f.length>0?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3 sm:gap-4",children:f.map((t,r)=>{var u,x,T,V;return e.jsxs(l.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},transition:{delay:r*.03,duration:.3},whileHover:{y:-8,scale:1.02},className:"group relative bg-[#1C1C1C] rounded-xl overflow-hidden border border-[#424242]/40 hover:border-[#E53A3A]/60 transition-all cursor-pointer shadow-lg hover:shadow-xl",style:{boxShadow:"hover:0 12px 30px rgba(0,0,0,0.4)"},onClick:()=>t.igdbData&&n(t.igdbData,t.gameName),children:[e.jsxs("div",{className:"aspect-[3/4] relative overflow-hidden",children:[(x=(u=t.igdbData)==null?void 0:u.cover)!=null&&x.url?e.jsx("img",{src:Y(t.igdbData.cover.url,"cover_big"),alt:t.gameName,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-[#2A2A2A] to-[#1C1C1C] flex items-center justify-center",children:e.jsxs("svg",{className:"w-12 h-12 text-[#424242] opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),((T=t.igdbData)==null?void 0:T.aggregated_rating)&&e.jsx("div",{className:"absolute top-2 right-2 px-2 py-1 rounded-lg text-xs font-bold bg-black/80 backdrop-blur-sm border border-white/10",children:e.jsxs("span",{className:`${t.igdbData.aggregated_rating>=75?"text-[#10B981]":t.igdbData.aggregated_rating>=50?"text-[#F59E0B]":"text-[#EF4444]"}`,children:[Math.round(t.igdbData.aggregated_rating),"%"]})}),t.completionStatus&&e.jsxs("div",{className:`absolute top-2 left-2 px-2 py-1 rounded-lg text-xs font-medium text-white bg-gradient-to-r ${z(t.completionStatus)} shadow-lg flex items-center gap-1`,children:[R(t.completionStatus),ce[t.completionStatus]]}),e.jsxs("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm opacity-0 group-hover:opacity-100 transition-all duration-300 flex items-center justify-center gap-3",children:[e.jsx(l.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:U=>{U.stopPropagation(),G(t)},className:"p-3 bg-white/20 rounded-xl hover:bg-white/30 transition-colors backdrop-blur-sm",title:"Quick edit",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx(l.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:U=>{U.stopPropagation(),c(t.igdbGameId,o)},className:"p-3 bg-red-500/20 rounded-xl hover:bg-red-500/40 transition-colors backdrop-blur-sm",title:"Remove",children:e.jsx("svg",{className:"w-5 h-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),e.jsxs("div",{className:"p-2 sm:p-3 bg-gradient-to-t from-[#0A0A0A] to-[#1C1C1C] min-w-0 overflow-hidden",children:[e.jsx("h3",{className:"font-semibold text-[#F5F5F5] text-xs sm:text-sm truncate",children:t.gameName}),((V=t.igdbData)==null?void 0:V.genres)&&e.jsx("p",{className:"text-[10px] sm:text-xs text-[#6B7280] mt-1 truncate",children:t.igdbData.genres.slice(0,2).map(U=>U.name).join(" â€¢ ")})]})]},t.id)})}):e.jsxs(l.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"h-full flex flex-col items-center justify-center text-center py-16 px-4",children:[e.jsx("div",{className:"w-24 h-24 mb-6 rounded-full bg-gradient-to-br from-[#E53A3A]/20 to-[#D98C1F]/20 flex items-center justify-center",children:o==="own"?e.jsx("svg",{className:"w-12 h-12 text-[#E53A3A]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"})}):o==="wishlist"?e.jsx("svg",{className:"w-12 h-12 text-[#D98C1F]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"})}):o==="favorite"?e.jsx("svg",{className:"w-12 h-12 text-[#F59E0B]",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{fillRule:"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.006 5.404.434c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.434 2.082-5.005Z",clipRule:"evenodd"})}):e.jsx("svg",{className:"w-12 h-12 text-[#6B7280]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.498 15.25H4.372c-1.026 0-1.945-.694-2.054-1.715a12.137 12.137 0 0 1-.068-1.285c0-2.848.992-5.464 2.649-7.521C5.287 4.247 5.886 4 6.504 4h4.016a4.5 4.5 0 0 1 1.423.23l3.114 1.04a4.5 4.5 0 0 0 1.423.23h1.294M7.498 15.25c.618 0 .991.724.725 1.282A7.471 7.471 0 0 0 7.5 19.75 2.25 2.25 0 0 0 9.75 22a.75.75 0 0 0 .75-.75v-.633c0-.573.11-1.14.322-1.672.304-.76.93-1.33 1.653-1.715a9.04 9.04 0 0 0 2.86-2.4c.498-.634 1.226-1.08 2.032-1.08h.384"})})}),e.jsx("h3",{className:"text-xl font-bold text-[#F5F5F5] mb-2",children:o==="own"?"Your collection is empty":o==="wishlist"?"No games in wishlist":o==="favorite"?"No favorite games yet":"No disliked games"}),e.jsx("p",{className:"text-[#8F8F8F] text-sm mb-6 max-w-md",children:o==="own"?"Start building your game library by searching and adding games you own!":o==="wishlist"?"Add games you want to play in the future!":o==="favorite"?"Mark your all-time favorite games!":"Track games you didn't enjoy"}),e.jsx(l.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>N(!0),className:"px-6 py-3 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white font-medium rounded-xl shadow-lg hover:shadow-xl transition-shadow",style:{boxShadow:"0 4px 15px rgba(229, 58, 58, 0.3)"},children:"Search & Add Games"})]})}),f.length>0&&e.jsx(l.button,{whileHover:{scale:1.1,rotate:90},whileTap:{scale:.95},onClick:()=>N(!0),className:"fixed bottom-24 lg:bottom-8 left-4 lg:left-8 w-14 h-14 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white rounded-full flex items-center justify-center z-[80]",style:{boxShadow:"0 4px 20px rgba(0, 0, 0, 0.5), 0 8px 32px rgba(229, 58, 58, 0.4)"},title:"Add Game",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),e.jsx($,{children:b&&e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[80] flex items-start justify-center p-4 pt-20 bg-black/80",onClick:()=>{N(!1),w(""),F([])},children:e.jsxs(l.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},exit:{y:-20,opacity:0},onClick:t=>t.stopPropagation(),className:"bg-[#1C1C1C] rounded-xl w-full max-w-lg overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-[#424242]/40",children:e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{ref:E,type:"text",value:j,onChange:t=>B(t.target.value),onKeyDown:t=>t.key==="Enter"&&p(),placeholder:"Start typing to search games...",className:"w-full bg-[#0A0A0A] border border-[#424242] rounded-lg px-4 py-3 pr-10 text-[#F5F5F5] focus:outline-none focus:border-[#E53A3A] placeholder:text-[#6B7280]",autoFocus:!0}),g&&e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:e.jsx("div",{className:"w-5 h-5 border-2 border-[#E53A3A] border-t-transparent rounded-full animate-spin"})})]}),e.jsx("button",{onClick:()=>{N(!1),w(""),F([])},className:"p-3 bg-[#2A2A2A] text-[#CFCFCF] rounded-lg hover:bg-[#3A3A3A] transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),j.length>0&&j.length<2&&e.jsx("p",{className:"mt-2 text-xs text-[#8F8F8F]",children:"Type at least 2 characters to search"})]})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:e.jsx($,{mode:"wait",children:S.length>0?e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:S.map((t,r)=>{var u;return e.jsx(l.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:r*.05},className:"p-4 border-b border-[#424242]/40 hover:bg-[#2A2A2A] transition-colors cursor-pointer",onClick:()=>{N(!1),w(""),F([]),n(t,t.name)},children:e.jsxs("div",{className:"flex gap-4",children:[(u=t.cover)!=null&&u.url?e.jsx("img",{src:Y(t.cover.url,"cover_small"),alt:t.name,className:"w-14 h-18 object-cover rounded-lg flex-shrink-0 shadow-lg"}):e.jsx("div",{className:"w-14 h-18 bg-[#2A2A2A] rounded-lg flex-shrink-0 flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-[#424242]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-[#F5F5F5] line-clamp-1",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[t.first_release_date&&e.jsx("span",{className:"text-sm text-[#8F8F8F]",children:new Date(t.first_release_date*1e3).getFullYear()}),t.aggregated_rating&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-[#424242]",children:"â€¢"}),e.jsxs("span",{className:"text-sm text-[#10B981] font-medium",children:[Math.round(t.aggregated_rating),"%"]})]})]}),t.genres&&e.jsx("p",{className:"text-xs text-[#6B7280] truncate mt-0.5",children:t.genres.slice(0,3).map(x=>x.name).join(" â€¢ ")}),e.jsx("div",{className:"flex flex-wrap gap-1.5 mt-2",onClick:x=>x.stopPropagation(),children:xe.map(x=>{const T=H.getGameCategories(t.id).includes(x.id);return e.jsxs("button",{onClick:V=>{V.stopPropagation(),C(t,x.id)},disabled:T,className:`flex items-center gap-1 px-2.5 py-1 rounded-md text-xs font-medium transition-all ${T?"bg-[#10B981]/20 text-[#10B981] cursor-not-allowed":"bg-[#2A2A2A] text-[#CFCFCF] hover:bg-gradient-to-r hover:from-[#E53A3A] hover:to-[#D98C1F] hover:text-white active:scale-95"}`,children:[T?e.jsx("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"})}):x.icon,e.jsx("span",{children:x.label})]},x.id)})})]})]})},t.id)})}):j.length>=2&&!g?e.jsxs(l.div,{initial:{opacity:0},animate:{opacity:1},className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-[#2A2A2A] flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-[#424242]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("p",{className:"text-[#8F8F8F]",children:['No games found for "',j,'"']}),e.jsx("p",{className:"text-sm text-[#6B7280] mt-1",children:"Try a different search term"})]}):j?null:e.jsxs(l.div,{initial:{opacity:0},animate:{opacity:1},className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-r from-[#E53A3A]/20 to-[#D98C1F]/20 flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-[#E53A3A]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("p",{className:"text-[#F5F5F5] font-medium",children:"Search for games"}),e.jsx("p",{className:"text-sm text-[#8F8F8F] mt-1",children:"Type to find games from IGDB"})]})})})]})})}),e.jsx($,{children:v&&e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[80] flex items-center justify-center p-4 bg-black/80",onClick:()=>G(null),children:e.jsxs(l.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:t=>t.stopPropagation(),className:"bg-[#1C1C1C] rounded-xl w-full max-w-md overflow-hidden",children:[e.jsxs("div",{className:"relative h-48",children:[(I=(W=v.igdbData)==null?void 0:W.cover)!=null&&I.url?e.jsx("img",{src:Y(v.igdbData.cover.url,"cover_big"),alt:v.gameName,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-[#2A2A2A]"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#1C1C1C] to-transparent"}),e.jsx("button",{onClick:()=>G(null),className:"absolute top-4 right-4 p-2 bg-black/50 rounded-lg hover:bg-black/70 transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-4 -mt-8 relative z-10",children:[e.jsx("h2",{className:"text-xl font-bold text-[#F5F5F5] mb-4",children:v.gameName}),v.category==="own"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-[#8F8F8F] mb-2",children:"Completion Status"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.keys(ce).map(t=>e.jsx("button",{onClick:()=>L(v.id,t),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${v.completionStatus===t?"bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white":"bg-[#2A2A2A] text-[#CFCFCF] hover:bg-[#3A3A3A]"}`,children:ce[t]},t))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-[#8F8F8F] mb-2",children:"Your Rating"}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(t=>e.jsx("button",{onClick:()=>_(v.id,t),className:`text-2xl ${(v.personalRating||0)>=t?"text-yellow-400":"text-[#424242]"} hover:scale-110 transition-transform`,children:"â˜…"},t))})]}),v.igdbData&&e.jsxs("div",{className:"space-y-2 text-sm",children:[v.igdbData.genres&&e.jsxs("p",{className:"text-[#8F8F8F]",children:[e.jsx("span",{className:"text-[#CFCFCF]",children:"Genres:"})," ",v.igdbData.genres.map(t=>t.name).join(", ")]}),v.igdbData.platforms&&e.jsxs("p",{className:"text-[#8F8F8F]",children:[e.jsx("span",{className:"text-[#CFCFCF]",children:"Platforms:"})," ",v.igdbData.platforms.map(t=>t.abbreviation||t.name).join(", ")]})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx("button",{onClick:()=>{c(v.igdbGameId,v.category),G(null)},className:"flex-1 py-2 px-4 bg-red-500/20 text-red-400 rounded-lg font-medium hover:bg-red-500/30 transition-colors",children:"Remove"}),e.jsx("button",{onClick:()=>G(null),className:"flex-1 py-2 px-4 bg-[#424242] text-[#CFCFCF] rounded-lg font-medium hover:bg-[#525252] transition-colors",children:"Close"})]})]})]})})})]})},ze=({user:d})=>{const[n,m]=a.useState({albums:[],totalImages:0,loading:!0}),[o,M]=a.useState(null),[f,h]=a.useState(null),[b,N]=a.useState(""),[j,w]=a.useState(!1),[S,F]=a.useState(null),[g,k]=a.useState(""),[v,G]=a.useState(new Date().getFullYear()),[A,E]=a.useState(""),[D,B]=a.useState(null),[p,C]=a.useState(0);a.useEffect(()=>{(async()=>{if(!d.authUserId)return;m(u=>({...u,loading:!0}));const r=await te.fetchGalleryData(d.authUserId);m(r)})()},[d.authUserId]);const c=a.useMemo(()=>te.getGameTitles(n.albums),[n.albums]),L=a.useMemo(()=>b?te.filterByGame(n.albums,b):n.albums,[n.albums,b]),_=a.useCallback(async t=>{B(t.id);const r=`${t.gameTitle||"screenshot"}_${new Date(t.capturedAt).toISOString().split("T")[0]}.png`;await te.downloadImage(t.imageUrl,r),B(null)},[]),z=a.useCallback(t=>{F(t),k(`Screenshot - ${t.gameTitle||t.conversationTitle}`),G(new Date(t.capturedAt).getFullYear()),E(""),w(!0)},[]),R=a.useCallback(()=>{S&&(te.addToTimeline(S,g,v,A),w(!1),F(null))},[S,g,v,A]),W=a.useCallback(t=>{if(!f||!o)return;const r=o.images.findIndex(x=>x.id===f.id);if(r===-1)return;const u=t==="prev"?(r-1+o.images.length)%o.images.length:(r+1)%o.images.length;h(o.images[u]),C(0)},[f,o]),I=a.useCallback(()=>{C(t=>(t+90)%360)},[]);return a.useEffect(()=>{const t=r=>{f&&(r.key==="Escape"?(h(null),C(0)):r.key==="ArrowLeft"?W("prev"):r.key==="ArrowRight"?W("next"):(r.key==="r"||r.key==="R")&&I())};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[f,W,I]),n.loading?e.jsx("div",{className:"flex items-center justify-center h-full p-8",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 border-3 border-[#E53A3A] border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-[#8F8F8F] text-sm",children:"Loading gallery..."})]})}):n.error?e.jsx("div",{className:"flex items-center justify-center h-full p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-red-500/10 flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("p",{className:"text-[#E53A3A] font-medium mb-2",children:"Failed to load gallery"}),e.jsx("p",{className:"text-[#8F8F8F] text-sm",children:n.error})]})}):n.albums.length===0?e.jsx("div",{className:"flex items-center justify-center h-full p-8",children:e.jsxs("div",{className:"text-center max-w-sm",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 rounded-full bg-gradient-to-br from-[#E53A3A]/20 to-[#D98C1F]/20 flex items-center justify-center",children:e.jsx("svg",{className:"w-10 h-10 text-[#E53A3A]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-[#F5F5F5] mb-2",children:"No Screenshots Yet"}),e.jsx("p",{className:"text-[#8F8F8F] text-sm",children:"Upload screenshots in your game chats to see them here. Your gaming memories will be automatically organized by game!"})]})}):e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"flex-shrink-0 px-4 py-4 sm:px-6 border-b border-[#424242]/40 bg-[#1C1C1C]/80",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-[#E53A3A]/20 to-[#D98C1F]/20 flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-[#E53A3A]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-[#F5F5F5]",children:n.totalImages}),e.jsx("p",{className:"text-xs text-[#8F8F8F]",children:"Screenshots"})]})]}),e.jsx("div",{className:"w-px h-8 bg-[#424242]/60 hidden sm:block"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-[#3B82F6]/20 to-[#8B5CF6]/20 flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-[#3B82F6]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-[#F5F5F5]",children:n.albums.length}),e.jsx("p",{className:"text-xs text-[#8F8F8F]",children:"Albums"})]})]})]}),c.length>0&&e.jsx("div",{className:"flex-1 sm:max-w-xs",children:e.jsxs("select",{value:b,onChange:t=>N(t.target.value),className:"w-full px-3 py-2 bg-[#2A2A2A] border border-[#424242] rounded-lg text-sm text-[#F5F5F5] focus:outline-none focus:border-[#E53A3A] transition-colors",children:[e.jsx("option",{value:"",children:"All Games"}),c.map(t=>e.jsx("option",{value:t,children:t},t))]})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:e.jsx($,{mode:"wait",children:o?e.jsxs(l.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("button",{onClick:()=>M(null),className:"p-2 rounded-lg bg-[#2A2A2A] hover:bg-[#3A3A3A] transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-[#CFCFCF]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-[#F5F5F5]",children:o.gameTitle||o.conversationTitle}),e.jsxs("p",{className:"text-sm text-[#8F8F8F]",children:[o.imageCount," screenshots"]})]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2 sm:gap-3",children:o.images.map((t,r)=>e.jsxs(l.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:r*.03},onClick:()=>h(t),className:"aspect-video relative rounded-lg overflow-hidden bg-[#1C1C1C] border border-[#424242]/40 hover:border-[#E53A3A]/60 transition-all group",children:[e.jsx("img",{src:t.imageUrl,alt:`Screenshot ${r+1}`,className:"w-full h-full object-cover",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("div",{className:"absolute bottom-2 left-2 right-2",children:e.jsx("p",{className:"text-xs text-white/80 truncate",children:new Date(t.capturedAt).toLocaleDateString()})})})]},t.id))})]},"album-detail"):e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3 sm:gap-4",children:L.map((t,r)=>{var u,x;return e.jsxs(l.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:r*.05},onClick:()=>M(t),className:"group relative bg-[#1C1C1C] rounded-xl overflow-hidden border border-[#424242]/40 hover:border-[#E53A3A]/60 transition-all text-left",children:[e.jsxs("div",{className:"aspect-[4/3] relative overflow-hidden",children:[(u=t.images[0])!=null&&u.imageUrl||t.coverUrl?e.jsx("img",{src:((x=t.images[0])==null?void 0:x.imageUrl)||t.coverUrl,alt:t.gameTitle||t.conversationTitle,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",loading:"lazy"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-[#2A2A2A] to-[#1C1C1C] flex items-center justify-center",children:e.jsx("svg",{className:"w-10 h-10 text-[#424242]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsx("div",{className:"absolute top-2 right-2 px-2 py-1 rounded-full bg-black/60 backdrop-blur-sm",children:e.jsx("span",{className:"text-xs font-medium text-white",children:t.imageCount})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"})]}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:[e.jsx("h3",{className:"text-sm font-medium text-white line-clamp-1",children:t.gameTitle||t.conversationTitle}),e.jsx("p",{className:"text-xs text-white/60 mt-0.5",children:new Date(t.latestImageAt).toLocaleDateString()})]})]},t.conversationId)})},"albums-grid")})}),e.jsx($,{children:f&&e.jsxs(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] bg-black/95 flex items-center justify-center",onClick:()=>{h(null),C(0)},children:[e.jsx("button",{onClick:()=>{h(null),C(0)},className:"absolute top-4 right-4 z-10 p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("button",{onClick:t=>{t.stopPropagation(),I()},className:"absolute top-4 left-4 z-10 p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors",title:"Rotate image (R)",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),o&&o.images.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:t=>{t.stopPropagation(),W("prev")},className:"absolute left-2 sm:left-4 top-1/2 -translate-y-1/2 z-10 p-3 rounded-full bg-white/10 hover:bg-white/20 transition-colors",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:t=>{t.stopPropagation(),W("next")},className:"absolute right-2 sm:right-4 top-1/2 -translate-y-1/2 z-10 p-3 rounded-full bg-white/10 hover:bg-white/20 transition-colors",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsx(l.img,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1,rotate:p},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:300,damping:25},src:f.imageUrl,alt:"Screenshot",className:"w-[98vw] h-[85vh] sm:w-full sm:h-full object-contain",onClick:t=>t.stopPropagation()},f.id),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/80 to-transparent",onClick:t=>t.stopPropagation(),children:e.jsxs("div",{className:"flex items-center justify-between max-w-xl mx-auto",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-white",children:f.gameTitle||f.conversationTitle}),e.jsx("p",{className:"text-xs text-white/60",children:new Date(f.capturedAt).toLocaleString()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>_(f),disabled:D===f.id,className:"p-2.5 rounded-full bg-white/10 hover:bg-white/20 transition-colors disabled:opacity-50",title:"Download",children:D===f.id?e.jsx("div",{className:"w-5 h-5 border-2 border-white/50 border-t-white rounded-full animate-spin"}):e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),e.jsx("button",{onClick:()=>z(f),className:"p-2.5 rounded-full bg-white/10 hover:bg-white/20 transition-colors",title:"Add to Timeline",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})]})})]})}),e.jsx($,{children:j&&S&&e.jsx(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[110] bg-black/80 flex items-center justify-center p-4",onClick:()=>w(!1),children:e.jsxs(l.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"w-full max-w-md bg-[#1C1C1C] rounded-2xl overflow-hidden border border-[#424242]/60",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"p-4 border-b border-[#424242]/40",children:[e.jsx("h3",{className:"text-lg font-semibold text-[#F5F5F5]",children:"Add to Timeline"}),e.jsx("p",{className:"text-sm text-[#8F8F8F] mt-1",children:"Save this screenshot to your gaming timeline"})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"aspect-video rounded-lg overflow-hidden bg-black/50 mb-4",children:e.jsx("img",{src:S.imageUrl,alt:"Preview",className:"w-full h-full object-contain"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#CFCFCF] mb-1",children:"Title"}),e.jsx("input",{type:"text",value:g,onChange:t=>k(t.target.value),className:"w-full px-3 py-2 bg-[#2A2A2A] border border-[#424242] rounded-lg text-sm text-[#F5F5F5] focus:outline-none focus:border-[#E53A3A] transition-colors",placeholder:"Enter a title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#CFCFCF] mb-1",children:"Year"}),e.jsx("input",{type:"number",value:v,onChange:t=>G(parseInt(t.target.value)||new Date().getFullYear()),min:1970,max:new Date().getFullYear()+1,className:"w-full px-3 py-2 bg-[#2A2A2A] border border-[#424242] rounded-lg text-sm text-[#F5F5F5] focus:outline-none focus:border-[#E53A3A] transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#CFCFCF] mb-1",children:"Description (optional)"}),e.jsx("textarea",{value:A,onChange:t=>E(t.target.value),rows:2,className:"w-full px-3 py-2 bg-[#2A2A2A] border border-[#424242] rounded-lg text-sm text-[#F5F5F5] focus:outline-none focus:border-[#E53A3A] transition-colors resize-none",placeholder:"Add a description..."})]})]})]}),e.jsxs("div",{className:"p-4 border-t border-[#424242]/40 flex gap-3",children:[e.jsx("button",{onClick:()=>w(!1),className:"flex-1 py-2.5 px-4 bg-[#2A2A2A] text-[#CFCFCF] rounded-lg font-medium hover:bg-[#3A3A3A] transition-colors",children:"Cancel"}),e.jsx("button",{onClick:R,disabled:!g.trim(),className:"flex-1 py-2.5 px-4 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white rounded-lg font-medium hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",children:"Add to Timeline"})]})]})})})]})},Te=({onComplete:d})=>{const n=new Date().getFullYear(),[m,o]=a.useState(n-10),[M,f]=a.useState(Math.floor((n-10)/10)*10),[h,b]=a.useState(!1),N=[];for(let g=1970;g<=Math.floor(n/10)*10;g+=10)N.push(g);const j=[];for(let g=M;g<M+10&&g<=n;g++)j.push(g);const w=a.useCallback(()=>{b(!0)},[]),S=a.useCallback(()=>{d(m)},[m,d]),F=a.useCallback(()=>{b(!1)},[]);return e.jsxs(l.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"h-full flex flex-col items-center justify-start sm:justify-center p-4 sm:p-6 overflow-y-auto",children:[e.jsxs("div",{className:"max-w-md w-full text-center py-4 sm:py-0",children:[e.jsx("div",{className:"mb-4 sm:mb-6",children:e.jsx("div",{className:"w-14 h-14 sm:w-20 sm:h-20 mx-auto rounded-xl sm:rounded-2xl bg-gradient-to-br from-[#E53A3A] to-[#D98C1F] flex items-center justify-center shadow-lg",children:e.jsx("svg",{className:"w-7 h-7 sm:w-10 sm:h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-[#F5F5F5] mb-1 sm:mb-2",children:"Start Your Gaming Journey"}),e.jsx("p",{className:"text-sm sm:text-base text-[#8F8F8F] mb-5 sm:mb-8 px-2",children:"When did you start gaming? This will be the beginning of your timeline."}),e.jsxs("div",{className:"mb-4 sm:mb-6",children:[e.jsx("p",{className:"text-xs sm:text-sm text-[#CFCFCF] mb-2 sm:mb-3",children:"Select a decade"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-1.5 sm:gap-2 px-1",children:N.map(g=>e.jsxs("button",{onClick:()=>{f(g),o(g)},className:`px-2.5 sm:px-4 py-1.5 sm:py-2 rounded-lg text-xs sm:text-sm font-medium transition-all ${M===g?"bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white":"bg-[#1C1C1C] text-[#CFCFCF] hover:bg-[#2A2A2A]"}`,children:[g,"s"]},g))})]}),e.jsxs("div",{className:"mb-5 sm:mb-8",children:[e.jsx("p",{className:"text-xs sm:text-sm text-[#CFCFCF] mb-2 sm:mb-3",children:"Select the year"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-1.5 sm:gap-2 px-1",children:j.map(g=>e.jsx("button",{onClick:()=>o(g),className:`w-12 sm:w-16 py-1.5 sm:py-2 rounded-lg text-xs sm:text-sm font-medium transition-all ${m===g?"bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white ring-2 ring-[#E53A3A]/50":"bg-[#1C1C1C] text-[#CFCFCF] hover:bg-[#2A2A2A]"}`,children:g},g))})]}),e.jsxs("div",{className:"mb-5 sm:mb-8 p-3 sm:p-4 bg-[#1C1C1C] rounded-xl border border-[#424242]/40",children:[e.jsx("p",{className:"text-[#8F8F8F] text-xs sm:text-sm",children:"Your gaming journey starts in"}),e.jsx("p",{className:"text-3xl sm:text-4xl font-bold bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] bg-clip-text text-transparent",children:m}),e.jsxs("p",{className:"text-[#8F8F8F] text-xs sm:text-sm",children:["That's ",n-m," years of gaming!"]})]}),e.jsx("button",{onClick:w,className:"w-full py-2.5 sm:py-3 px-6 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white font-semibold rounded-xl hover:opacity-90 transition-opacity shadow-lg text-sm sm:text-base",children:"Start Exploring"}),e.jsx("button",{onClick:()=>d(n-5),className:"mt-3 sm:mt-4 text-[#8F8F8F] text-xs sm:text-sm hover:text-[#CFCFCF] transition-colors",children:"Skip for now"})]}),h&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:e.jsxs(l.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-[#1C1C1C] rounded-2xl p-6 max-w-md w-full border border-[#424242]/40 shadow-2xl",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-xl bg-gradient-to-br from-[#E53A3A] to-[#D98C1F] flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-xl font-bold text-[#F5F5F5] text-center mb-2",children:"Confirm Your Selection"}),e.jsx("div",{className:"bg-[#0A0A0A] rounded-xl p-4 mb-6 border border-[#424242]/30",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[#8F8F8F] text-sm mb-2",children:"Your gaming journey starts in"}),e.jsx("p",{className:"text-4xl font-bold bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] bg-clip-text text-transparent mb-2",children:m}),e.jsxs("p",{className:"text-[#CFCFCF] text-sm",children:["That's ",e.jsxs("span",{className:"font-semibold text-[#F5F5F5]",children:[n-m," years"]})," of gaming history!"]})]})}),e.jsx("p",{className:"text-[#8F8F8F] text-sm text-center mb-6",children:"This will be used to create your gaming timeline. You can always update this later in your profile settings."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:F,className:"flex-1 py-3 px-4 bg-[#0A0A0A] border border-[#424242]/40 text-[#CFCFCF] font-medium rounded-xl hover:bg-[#2A2A2A] hover:border-[#424242]/60 transition-all",children:"Go Back"}),e.jsx("button",{onClick:S,className:"flex-1 py-3 px-4 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white font-semibold rounded-xl hover:opacity-90 transition-opacity shadow-lg",children:"Confirm"})]})]})})]})},qe=({isOpen:d,onClose:n,user:m,onSendNewsQuery:o,onNavigateToLibrary:M,isGroundingEnabled:f,onRequestGroundingConfirmation:h})=>{var p,C;const[b,N]=a.useState("home"),[j,w]=a.useState(!1),[S,F]=a.useState("own"),[g,k]=a.useState(!1),[v,G]=a.useState(null);a.useEffect(()=>{var c;if(d){const L=((c=m.profileData)==null?void 0:c.gamingStartYear)!==void 0,_=!O.needsOnboarding();L&&!_&&O.setGamingStartYear(m.profileData.gamingStartYear),w(!L&&!_)}},[d,(p=m.profileData)==null?void 0:p.gamingStartYear]),a.useEffect(()=>{const c=L=>{L.key==="Escape"&&d&&n()};return document.addEventListener("keydown",c),()=>document.removeEventListener("keydown",c)},[d,n]),a.useEffect(()=>(d?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[d]);const A=a.useCallback(async c=>{O.setGamingStartYear(c);try{await Ae.updateUserProfile(m.authUserId,{gamingStartYear:c}),console.log("ðŸŽ® [Gaming Explorer] Gaming start year saved to Supabase:",c)}catch(L){console.error("Failed to save gaming start year to Supabase:",L)}w(!1)},[m.authUserId]),E=a.useCallback((c,L)=>{G(c),k(!0)},[]),D=a.useCallback(c=>{c.target===c.currentTarget&&n()},[n]),B=[{id:"home",label:"Home",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})},{id:"gallery",label:"Gallery",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})},{id:"timeline",label:"Timeline",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})},{id:"library",label:"Library",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}];return e.jsx($,{children:d&&e.jsxs(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 z-[70] flex items-center justify-center",onClick:D,children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),e.jsxs(l.div,{initial:{x:"100%",opacity:0},animate:{x:0,opacity:1},exit:{x:"100%",opacity:0},transition:{type:"spring",damping:25,stiffness:200},className:"relative w-full h-full bg-[#0A0A0A] flex flex-col overflow-hidden",onClick:c=>c.stopPropagation(),children:[e.jsx("header",{className:"flex-shrink-0 bg-[#0A0A0A] border-b border-[#1C1C1C] px-3 sm:px-4 py-2.5 sm:py-3 safe-area-inset-top",children:e.jsxs("div",{className:"flex items-center justify-between lg:justify-between",children:[e.jsx("div",{className:"w-10 h-10 sm:w-9 sm:h-9 lg:hidden"}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 absolute left-1/2 -translate-x-1/2 lg:static lg:translate-x-0",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#E53A3A]/20 to-[#D98C1F]/20 blur-lg rounded-full"}),e.jsx(Be,{size:"md",userTier:m.tier})]}),e.jsx("span",{className:"text-base sm:text-lg font-semibold text-[#F5F5F5]",children:((C=B.find(c=>c.id===b))==null?void 0:C.label)||"Home"})]}),e.jsx("button",{onClick:n,className:"flex items-center justify-center w-10 h-10 sm:w-9 sm:h-9 rounded-xl bg-[#1C1C1C] hover:bg-[#E53A3A]/20 border border-[#424242]/40 hover:border-[#E53A3A]/40 transition-all group active:scale-95",title:"Close Explorer",children:e.jsx("svg",{className:"w-5 h-5 text-[#8F8F8F] group-hover:text-[#E53A3A] transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsxs("nav",{className:"hidden lg:flex flex-col w-56 bg-[#1C1C1C] border-r border-[#424242]/60 py-4",children:[B.map(c=>e.jsxs("button",{onClick:()=>N(c.id),className:`flex items-center gap-3 px-4 py-3 mx-2 rounded-lg transition-all ${b===c.id?"bg-gradient-to-r from-[#E53A3A]/20 to-[#D98C1F]/20 text-[#F5F5F5] border-l-2 border-[#E53A3A]":"text-[#8F8F8F] hover:bg-[#424242]/30 hover:text-[#CFCFCF]"}`,children:[c.icon,e.jsx("span",{className:"font-medium",children:c.label})]},c.id)),e.jsx("div",{className:"mt-auto px-4 py-4 border-t border-[#424242]/40",children:e.jsxs("div",{className:"text-xs text-[#8F8F8F] space-y-1",children:[e.jsx("p",{children:"Quick Stats"}),e.jsxs("div",{className:"text-[#CFCFCF]",children:[O.get().libraryStats.ownedCount," games owned"]})]})})]}),e.jsx("main",{className:"flex-1 overflow-y-auto pb-16 lg:pb-0",children:e.jsx($,{mode:"wait",children:j?e.jsx(Te,{onComplete:A},"onboarding"):e.jsxs(l.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"h-full",children:[b==="home"&&e.jsx(De,{user:m,onOpenGameInfo:E,onSendNewsQuery:o,isGroundingEnabled:f,onRequestGroundingConfirmation:h,onSwitchToLibraryTab:c=>{N("library"),F(c)}}),b==="gallery"&&e.jsx(ze,{user:m}),b==="timeline"&&e.jsx(He,{user:m}),b==="library"&&e.jsx(_e,{user:m,onOpenGameInfo:E,initialCategory:S})]},b)})})]}),e.jsx(l.button,{initial:{scale:0},animate:{scale:1},exit:{scale:0},whileHover:{scale:1.1},whileTap:{scale:.95},onClick:n,className:"fixed bottom-24 lg:bottom-8 right-4 lg:right-8 w-14 h-14 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] rounded-full flex items-center justify-center z-[80]",style:{boxShadow:"0 4px 20px rgba(0, 0, 0, 0.5), 0 8px 32px rgba(229, 58, 58, 0.4)"},title:"Back to Chat",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),e.jsx("nav",{className:"lg:hidden flex-shrink-0 bg-[#0A0A0A]/80 backdrop-blur-md border-t border-[#1C1C1C]/50 px-3 py-2 safe-area-inset-bottom",children:e.jsx("div",{className:"flex items-center justify-around bg-[#1C1C1C]/90 rounded-2xl p-1.5",children:B.map(c=>e.jsxs("button",{onClick:()=>N(c.id),className:`flex-1 flex flex-col items-center gap-1 py-2.5 px-2 rounded-xl transition-all ${b===c.id?"bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white shadow-lg":"text-[#8F8F8F] hover:text-[#CFCFCF] active:bg-[#2A2A2A]"}`,style:b===c.id?{boxShadow:"0 4px 12px rgba(229, 58, 58, 0.25)"}:{},children:[e.jsx("div",{className:"w-5 h-5",children:c.icon}),e.jsx("span",{className:"text-[10px] font-medium",children:c.label})]},c.id))})})]}),e.jsx(Ee,{isOpen:g,onClose:()=>k(!1),gameData:v,gameName:(v==null?void 0:v.name)||"",userTier:m.tier})]})})};export{qe as G,Be as L};
