{"version":3,"file":"auth-DXGcL-KU.js","sources":["../../src/lib/supabase.ts","../../src/components/auth/AuthCallback.tsx"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\nimport { Database } from '../types/database';\r\n\r\nconst supabaseUrl = (import.meta as any).env.VITE_SUPABASE_URL || 'https://qajcxgkqloumogioomiz.supabase.co';\r\nconst supabaseAnonKey = (import.meta as any).env.VITE_SUPABASE_ANON_KEY || 'sb_publishable_GoW6G_umt1lFF-KPbbm-Ow_D2PYxPLw';\r\n\r\nexport const supabase = createClient<Database>(supabaseUrl, supabaseAnonKey, {\r\n  auth: {\r\n    autoRefreshToken: true,\r\n    persistSession: true,\r\n    detectSessionInUrl: true\r\n  }\r\n});\r\n\r\n// Re-export Database type for convenience\r\nexport type { Database } from '../types/database';\r\n\r\n// Legacy Database types (kept for backward compatibility)\r\n// NOTE: Use generated types from src/types/database.ts instead\r\nexport interface LegacyDatabase {\r\n  public: {\r\n    Tables: {\r\n      users: {\r\n        Row: {\r\n          id: string;\r\n          auth_user_id: string;\r\n          email: string;\r\n          full_name: string | null;\r\n          avatar_url: string | null;\r\n          tier: 'free' | 'pro' | 'vanguard_pro';\r\n          has_profile_setup: boolean;\r\n          has_seen_splash_screens: boolean;\r\n          has_welcome_message: boolean;\r\n          is_new_user: boolean;\r\n          has_used_trial: boolean;\r\n          trial_started_at: string | null;\r\n          trial_expires_at: string | null;\r\n          last_activity: string;\r\n          preferences: Record<string, any>;\r\n          usage: Record<string, any>;\r\n          app_state: Record<string, any>;\r\n          profile_data: Record<string, any>;\r\n          onboarding_data: Record<string, any>;\r\n          behavior_data: Record<string, any>;\r\n          feedback_data: Record<string, any>;\r\n          usage_data: Record<string, any>;\r\n          created_at: string;\r\n          updated_at: string;\r\n          deleted_at: string | null;\r\n        };\r\n        Insert: {\r\n          id?: string;\r\n          auth_user_id: string;\r\n          email: string;\r\n          full_name?: string | null;\r\n          avatar_url?: string | null;\r\n          tier?: 'free' | 'pro' | 'vanguard_pro';\r\n          has_profile_setup?: boolean;\r\n          has_seen_splash_screens?: boolean;\r\n          has_welcome_message?: boolean;\r\n          is_new_user?: boolean;\r\n          has_used_trial?: boolean;\r\n          trial_started_at?: string | null;\r\n          trial_expires_at?: string | null;\r\n          last_activity?: string;\r\n          preferences?: Record<string, any>;\r\n          usage?: Record<string, any>;\r\n          app_state?: Record<string, any>;\r\n          profile_data?: Record<string, any>;\r\n          onboarding_data?: Record<string, any>;\r\n          behavior_data?: Record<string, any>;\r\n          feedback_data?: Record<string, any>;\r\n          usage_data?: Record<string, any>;\r\n          created_at?: string;\r\n          updated_at?: string;\r\n          deleted_at?: string | null;\r\n        };\r\n        Update: {\r\n          id?: string;\r\n          auth_user_id?: string;\r\n          email?: string;\r\n          full_name?: string | null;\r\n          avatar_url?: string | null;\r\n          tier?: 'free' | 'pro' | 'vanguard_pro';\r\n          has_profile_setup?: boolean;\r\n          has_seen_splash_screens?: boolean;\r\n          has_welcome_message?: boolean;\r\n          is_new_user?: boolean;\r\n          has_used_trial?: boolean;\r\n          trial_started_at?: string | null;\r\n          trial_expires_at?: string | null;\r\n          last_activity?: string;\r\n          preferences?: Record<string, any>;\r\n          usage?: Record<string, any>;\r\n          app_state?: Record<string, any>;\r\n          profile_data?: Record<string, any>;\r\n          onboarding_data?: Record<string, any>;\r\n          behavior_data?: Record<string, any>;\r\n          feedback_data?: Record<string, any>;\r\n          usage_data?: Record<string, any>;\r\n          created_at?: string;\r\n          updated_at?: string;\r\n          deleted_at?: string | null;\r\n        };\r\n      };\r\n      conversations: {\r\n        Row: {\r\n          id: string;\r\n          user_id: string;\r\n          game_id: string | null;\r\n          title: string;\r\n          messages: Record<string, any>[];\r\n          is_active: boolean;\r\n          created_at: string;\r\n          updated_at: string;\r\n        };\r\n        Insert: {\r\n          id: string;\r\n          user_id: string;\r\n          game_id?: string | null;\r\n          title: string;\r\n          messages?: Record<string, any>[];\r\n          is_active?: boolean;\r\n          created_at?: string;\r\n          updated_at?: string;\r\n        };\r\n        Update: {\r\n          id?: string;\r\n          user_id?: string;\r\n          game_id?: string | null;\r\n          title?: string;\r\n          messages?: Record<string, any>[];\r\n          is_active?: boolean;\r\n          created_at?: string;\r\n          updated_at?: string;\r\n        };\r\n      };\r\n      games: {\r\n        Row: {\r\n          id: string;\r\n          title: string;\r\n          description: string | null;\r\n          genre: string | null;\r\n          platform: string | null;\r\n          release_date: string | null;\r\n          rating: number | null;\r\n          image_url: string | null;\r\n          metadata: Record<string, any>;\r\n          created_at: string;\r\n          updated_at: string;\r\n        };\r\n        Insert: {\r\n          id: string;\r\n          title: string;\r\n          description?: string | null;\r\n          genre?: string | null;\r\n          platform?: string | null;\r\n          release_date?: string | null;\r\n          rating?: number | null;\r\n          image_url?: string | null;\r\n          metadata?: Record<string, any>;\r\n          created_at?: string;\r\n          updated_at?: string;\r\n        };\r\n        Update: {\r\n          id?: string;\r\n          title?: string;\r\n          description?: string | null;\r\n          genre?: string | null;\r\n          platform?: string | null;\r\n          release_date?: string | null;\r\n          rating?: number | null;\r\n          image_url?: string | null;\r\n          metadata?: Record<string, any>;\r\n          created_at?: string;\r\n          updated_at?: string;\r\n        };\r\n      };\r\n      waitlist: {\r\n        Row: {\r\n          id: string;\r\n          email: string;\r\n          source: string;\r\n          created_at: string;\r\n        };\r\n        Insert: {\r\n          id?: string;\r\n          email: string;\r\n          source?: string;\r\n          created_at?: string;\r\n        };\r\n        Update: {\r\n          id?: string;\r\n          email?: string;\r\n          source?: string;\r\n          created_at?: string;\r\n        };\r\n      };\r\n      user_usage: {\r\n        Row: {\r\n          id: string;\r\n          user_id: string;\r\n          text_count: number;\r\n          image_count: number;\r\n          text_limit: number;\r\n          image_limit: number;\r\n          total_requests: number;\r\n          last_reset: string;\r\n          created_at: string;\r\n          updated_at: string;\r\n        };\r\n        Insert: {\r\n          id?: string;\r\n          user_id: string;\r\n          text_count?: number;\r\n          image_count?: number;\r\n          text_limit?: number;\r\n          image_limit?: number;\r\n          total_requests?: number;\r\n          last_reset?: string;\r\n          created_at?: string;\r\n          updated_at?: string;\r\n        };\r\n        Update: {\r\n          id?: string;\r\n          user_id?: string;\r\n          text_count?: number;\r\n          image_count?: number;\r\n          text_limit?: number;\r\n          image_limit?: number;\r\n          total_requests?: number;\r\n          last_reset?: string;\r\n          created_at?: string;\r\n          updated_at?: string;\r\n        };\r\n      };\r\n    };\r\n    Functions: {\r\n      check_and_expire_trials: {\r\n        Args: Record<PropertyKey, never>;\r\n        Returns: undefined;\r\n      };\r\n      create_user_record: {\r\n        Args: Record<PropertyKey, never>;\r\n        Returns: undefined;\r\n      };\r\n      update_user_usage: {\r\n        Args: {\r\n          p_user_id: string;\r\n          p_text_count?: number;\r\n          p_image_count?: number;\r\n        };\r\n        Returns: undefined;\r\n      };\r\n      get_user_tier_limits: {\r\n        Args: {\r\n          p_user_id: string;\r\n        };\r\n        Returns: {\r\n          text_limit: number;\r\n          image_limit: number;\r\n        }[];\r\n      };\r\n      start_free_trial: {\r\n        Args: {\r\n          p_user_id: string;\r\n        };\r\n        Returns: boolean;\r\n      };\r\n      save_conversation: {\r\n        Args: {\r\n          p_conversation_id: string;\r\n          p_user_id: string;\r\n          p_title: string;\r\n          p_messages: Record<string, any>;\r\n          p_game_id?: string;\r\n        };\r\n        Returns: undefined;\r\n      };\r\n      load_conversations: {\r\n        Args: {\r\n          p_user_id: string;\r\n        };\r\n        Returns: {\r\n          id: string;\r\n          title: string;\r\n          messages: Record<string, any>;\r\n          game_id: string | null;\r\n          is_active: boolean;\r\n          created_at: string;\r\n          updated_at: string;\r\n        }[];\r\n      };\r\n      get_complete_user_data: {\r\n        Args: {\r\n          p_auth_user_id: string;\r\n        };\r\n        Returns: {\r\n          user_id: string;\r\n          email: string;\r\n          tier: string;\r\n          has_used_trial: boolean;\r\n          trial_expires_at: string | null;\r\n          text_count: number;\r\n          image_count: number;\r\n          text_limit: number;\r\n          image_limit: number;\r\n          preferences: Record<string, any>;\r\n          app_state: Record<string, any>;\r\n          profile_data: Record<string, any>;\r\n        }[];\r\n      };\r\n    };\r\n  };\r\n}\r\n","import React, { useEffect, useState, useRef } from 'react';\r\nimport { supabase } from '../../lib/supabase';\r\nimport { authService } from '../../services/authService';\r\n\r\ninterface AuthCallbackProps {\r\n  onAuthSuccess: () => void;\r\n  onAuthError: (error: string) => void;\r\n}\r\n\r\nconst AuthCallback: React.FC<AuthCallbackProps> = ({ onAuthSuccess, onAuthError }) => {\r\n  const [status, setStatus] = useState<'loading' | 'success' | 'error'>('loading');\r\n  const [error, setError] = useState<string | null>(null);\r\n  const hasProcessedRef = useRef(false);\r\n  const subscriptionRef = useRef<{ unsubscribe: () => void } | null>(null);\r\n\r\n  useEffect(() => {\r\n    // Prevent multiple processing using ref (more reliable than state)\r\n    if (hasProcessedRef.current) {\r\n      console.log('üîê [AuthCallback] Already processed, skipping...');\r\n      return;\r\n    }\r\n    \r\n    hasProcessedRef.current = true;\r\n    \r\n    const handleAuthCallback = async () => {\r\n      try {\r\n        console.log('üîê [AuthCallback] Handling OAuth callback...');\r\n        console.log('üîê [AuthCallback] Current URL:', window.location.href);\r\n        console.log('üîê [AuthCallback] URL search params:', window.location.search);\r\n        console.log('üîê [AuthCallback] URL hash:', window.location.hash);\r\n\r\n        // Check for OAuth parameters FIRST before Supabase processes them\r\n        const hasOAuthCode = window.location.search.includes('code') || window.location.hash.includes('access_token');\r\n        console.log('üîê [AuthCallback] Has OAuth code/token:', hasOAuthCode);\r\n        \r\n        // If we have OAuth code/token, always process it\r\n        if (!hasOAuthCode) {\r\n          console.log('üîê [AuthCallback] No OAuth parameters found, checking existing session...');\r\n          const existingSession = await supabase.auth.getSession();\r\n          if (existingSession.data.session) {\r\n            console.log('üîê [AuthCallback] Already logged in, no OAuth to process:', existingSession.data.session.user.email);\r\n            const basePath = window.location.hostname === 'localhost' ? '/' : '/Otagon/';\r\n            window.history.replaceState({}, document.title, basePath);\r\n            setStatus('success');\r\n            onAuthSuccess();\r\n            return;\r\n          }\r\n        }\r\n        \r\n        // Process OAuth callback\r\n        console.log('üîê [AuthCallback] Processing OAuth callback...');\r\n\r\n        // Check for OAuth errors in URL parameters\r\n        const urlParams = new URLSearchParams(window.location.search);\r\n        const hashParams = new URLSearchParams(window.location.hash.substring(1));\r\n        \r\n        const oauthError = urlParams.get('error') || hashParams.get('error');\r\n        const errorDescription = urlParams.get('error_description') || hashParams.get('error_description');\r\n        const errorCode = urlParams.get('error_code') || hashParams.get('error_code');\r\n        \r\n        console.log('üîê [AuthCallback] OAuth parameters:', {\r\n          oauthError,\r\n          errorDescription,\r\n          errorCode,\r\n          urlParams: Object.fromEntries(urlParams.entries()),\r\n          hashParams: Object.fromEntries(hashParams.entries())\r\n        });\r\n        \r\n        if (oauthError) {\r\n          console.error('üîê [AuthCallback] OAuth error detected:', { oauthError, errorDescription, errorCode });\r\n          let errorMessage = 'Authentication failed';\r\n          \r\n          // Handle email confirmation errors\r\n          if (oauthError === 'access_denied' && errorCode === 'otp_expired') {\r\n            errorMessage = 'Email confirmation link has expired. Please request a new confirmation email.';\r\n          } else if (oauthError === 'access_denied' && errorDescription?.includes('Email link is invalid')) {\r\n            errorMessage = 'Email confirmation link is invalid. Please request a new confirmation email.';\r\n          } else if (oauthError === 'access_denied' && errorDescription?.includes('expired')) {\r\n            errorMessage = 'Email confirmation link has expired. Please request a new confirmation email.';\r\n          }\r\n          // Handle OAuth errors\r\n          else if (oauthError === 'server_error') {\r\n            errorMessage = 'Authentication server error. This may be due to Supabase configuration. Please try again.';\r\n          } else if (oauthError === 'access_denied') {\r\n            errorMessage = 'Authentication was cancelled. Please try again.';\r\n          } else if (oauthError === 'invalid_request') {\r\n            errorMessage = 'Invalid authentication request. Please check configuration.';\r\n          } else if (oauthError === 'unauthorized_client') {\r\n            errorMessage = 'Authentication client is not authorized. Please check Supabase configuration.';\r\n          } else if (oauthError === 'unsupported_response_type') {\r\n            errorMessage = 'Authentication response type not supported. Please check Supabase configuration.';\r\n          } else if (oauthError === 'invalid_scope') {\r\n            errorMessage = 'Authentication scope is invalid. Please check Supabase configuration.';\r\n          } else if (errorDescription) {\r\n            errorMessage = decodeURIComponent(errorDescription);\r\n          }\r\n          \r\n          setError(errorMessage);\r\n          setStatus('error');\r\n          onAuthError(errorMessage);\r\n          return;\r\n        }\r\n        \r\n        // Set up auth state change listener\r\n        const { data: { subscription } } = supabase.auth.onAuthStateChange(async (event, session) => {\r\n          console.log('üîê [AuthCallback] Auth state change:', { event, session });\r\n          \r\n          if (event === 'SIGNED_IN' && session?.user) {\r\n            console.log('üîê [AuthCallback] User signed in:', session.user.email);\r\n            console.log('üîê [AuthCallback] User metadata:', session.user.user_metadata);\r\n            console.log('üîê [AuthCallback] App metadata:', session.user.app_metadata);\r\n            console.log('üîê [AuthCallback] User identities:', session.user.identities);\r\n            \r\n            // Detect the OAuth provider\r\n            const provider = session.user.app_metadata?.provider || \r\n                           session.user.app_metadata?.providers?.[0] || \r\n                           session.user.identities?.[0]?.provider || \r\n                           'unknown';\r\n            console.log('üîê [AuthCallback] Detected provider:', provider);\r\n            \r\n            // Wait for database trigger to create user record\r\n            console.log('üîê [AuthCallback] Waiting for database trigger to create user record...');\r\n            await new Promise(resolve => setTimeout(resolve, 1500)); // Increased wait time for Discord\r\n            \r\n            // Load user data through AuthService\r\n            try {\r\n              await authService.loadUserFromSupabase(session.user.id);\r\n              console.log('üîê [AuthCallback] User data loaded successfully');\r\n              \r\n              // User is authenticated, notify parent component\r\n              setStatus('success');\r\n              onAuthSuccess();\r\n            } catch (loadError) {\r\n              console.error('üîê [AuthCallback] Error loading user data:', loadError);\r\n              setError('Failed to load user data. Please try again.');\r\n              setStatus('error');\r\n              onAuthError('Failed to load user data');\r\n            }\r\n            \r\n            // Unsubscribe from auth state changes\r\n            subscription.unsubscribe();\r\n          } else if (event === 'SIGNED_OUT') {\r\n            console.log('üîê [AuthCallback] User signed out');\r\n            setError('Authentication failed');\r\n            setStatus('error');\r\n            onAuthError('Authentication failed');\r\n            subscription.unsubscribe();\r\n          }\r\n        });\r\n        \r\n        // Store subscription in ref for cleanup\r\n        subscriptionRef.current = subscription;\r\n        \r\n        // Also try to get the current session\r\n        const { data, error } = await supabase.auth.getSession();\r\n        console.log('üîê [AuthCallback] Current session:', { data, error });\r\n        \r\n        if (error) {\r\n          console.error('üîê [AuthCallback] Auth callback error:', error);\r\n          setError(error.message);\r\n          setStatus('error');\r\n          onAuthError(error.message);\r\n          subscription.unsubscribe();\r\n          return;\r\n        }\r\n\r\n        if (data.session?.user) {\r\n          console.log('üîê [AuthCallback] User already authenticated:', data.session.user.email);\r\n          \r\n          // Wait for database trigger to create user record\r\n          console.log('üîê [AuthCallback] Waiting for database trigger to create user record...');\r\n          await new Promise(resolve => setTimeout(resolve, 1000));\r\n          \r\n          // Load user data through AuthService\r\n          await authService.loadUserFromSupabase(data.session.user.id);\r\n          \r\n          // User is authenticated, notify parent component\r\n          setStatus('success');\r\n          onAuthSuccess();\r\n          subscription.unsubscribe();\r\n        } else {\r\n          console.log('üîê [AuthCallback] No session found, waiting for auth state change...');\r\n          console.log('üîê [AuthCallback] URL search params:', window.location.search);\r\n          \r\n          // Try to handle OAuth callback manually if there are URL parameters\r\n          const urlParams = new URLSearchParams(window.location.search);\r\n          const hashParams = new URLSearchParams(window.location.hash.substring(1));\r\n          \r\n          if (urlParams.has('code') || urlParams.has('error') || hashParams.has('access_token')) {\r\n            console.log('üîê [AuthCallback] OAuth parameters found, trying manual handling...');\r\n            \r\n            // Wait a bit for the OAuth process to complete\r\n            await new Promise(resolve => setTimeout(resolve, 1000));\r\n            \r\n            // Try to get session again\r\n            const retrySession = await supabase.auth.getSession();\r\n            console.log('üîê [AuthCallback] Retry session after manual handling:', retrySession);\r\n            \r\n            if (retrySession.data.session?.user) {\r\n              console.log('üîê [AuthCallback] User authenticated after retry:', retrySession.data.session.user.email);\r\n              \r\n              // Wait for database trigger to create user record\r\n              console.log('üîê [AuthCallback] Waiting for database trigger to create user record...');\r\n              await new Promise(resolve => setTimeout(resolve, 500));\r\n              \r\n              // Load user data through AuthService\r\n              await authService.loadUserFromSupabase(retrySession.data.session.user.id);\r\n              \r\n              // User is authenticated, notify parent component\r\n              setStatus('success');\r\n              onAuthSuccess();\r\n              subscription.unsubscribe();\r\n              return;\r\n            }\r\n          }\r\n          \r\n          // Set a timeout to handle cases where auth state change doesn't fire\r\n          setTimeout(() => {\r\n            if (status === 'loading') {\r\n              console.log('üîê [AuthCallback] Timeout waiting for auth state change');\r\n              setError('Authentication timeout');\r\n              setStatus('error');\r\n              onAuthError('Authentication timeout');\r\n              subscription.unsubscribe();\r\n            }\r\n          }, 10000); // 10 second timeout\r\n        }\r\n      } catch (error) {\r\n        console.error('üîê [AuthCallback] Auth callback error:', error);\r\n        const errorMessage = 'An unexpected error occurred';\r\n        setError(errorMessage);\r\n        setStatus('error');\r\n        onAuthError(errorMessage);\r\n      }\r\n    };\r\n\r\n    handleAuthCallback();\r\n    \r\n    // Cleanup function\r\n    return () => {\r\n      if (subscriptionRef.current) {\r\n        subscriptionRef.current.unsubscribe();\r\n      }\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []); // Empty deps - only run once on mount\r\n\r\n  if (status === 'loading') {\r\n    return (\r\n      <div className=\"h-screen bg-gradient-to-br from-[#111111] to-[#0A0A0A] flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-[#FF4D4D] mx-auto mb-4\"></div>\r\n          <p className=\"text-[#CFCFCF] text-lg\">Completing authentication...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (status === 'error') {\r\n    return (\r\n      <div className=\"h-screen bg-gradient-to-br from-[#111111] to-[#0A0A0A] flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"text-red-500 text-6xl mb-4\">‚ö†Ô∏è</div>\r\n          <h2 className=\"text-2xl font-bold text-[#F5F5F5] mb-2\">Authentication Error</h2>\r\n          <p className=\"text-[#CFCFCF] mb-6\">{error}</p>\r\n          <div className=\"space-y-3\">\r\n            <button\r\n              onClick={() => {\r\n                // Clear the URL parameters and redirect to login\r\n                const basePath = window.location.hostname === 'localhost' ? '/' : '/Otagon/';\r\n                window.history.replaceState({}, document.title, basePath);\r\n                onAuthError('User cancelled authentication');\r\n              }}\r\n              className=\"bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] hover:from-[#D42A2A] hover:to-[#C87A1A] text-white font-bold py-3 px-6 rounded-xl transition-all duration-300 hover:scale-105 active:scale-95\"\r\n            >\r\n              Return to Login\r\n            </button>\r\n            {error && error.includes('Email confirmation link') && (\r\n              <button\r\n                onClick={() => {\r\n                  // Clear the URL parameters and redirect to login with a flag to show resend option\r\n                  const basePath = window.location.hostname === 'localhost' ? '/' : '/Otagon/';\r\n                  window.history.replaceState({}, document.title, basePath);\r\n                  onAuthError('Email confirmation expired - show resend option');\r\n                }}\r\n                className=\"bg-gradient-to-r from-[#4F46E5] to-[#7C3AED] hover:from-[#4338CA] hover:to-[#6D28D9] text-white font-bold py-3 px-6 rounded-xl transition-all duration-300 hover:scale-105 active:scale-95\"\r\n              >\r\n                Request New Confirmation Email\r\n              </button>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"h-screen bg-gradient-to-br from-[#111111] to-[#0A0A0A] flex items-center justify-center\">\r\n      <div className=\"text-center\">\r\n        <div className=\"text-green-500 text-6xl mb-4\">‚úÖ</div>\r\n        <h2 className=\"text-2xl font-bold text-[#F5F5F5] mb-2\">Authentication Successful</h2>\r\n        <p className=\"text-[#CFCFCF]\">Redirecting to the app...</p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AuthCallback;\r\n"],"names":["supabaseUrl","supabaseAnonKey","supabase","createClient","AuthCallback","onAuthSuccess","onAuthError","status","setStatus","useState","error","setError","hasProcessedRef","useRef","subscriptionRef","useEffect","hasOAuthCode","existingSession","basePath","urlParams","hashParams","oauthError","errorDescription","errorCode","errorMessage","subscription","event","session","provider","_a","_c","_b","_e","_d","resolve","authService","loadError","data","retrySession","jsxs","jsx"],"mappings":"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"}