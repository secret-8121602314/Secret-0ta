import{j as e,r as a,R as be}from"./react-vendor-JBKW6UM3.js";import{s as K,u as q,l as G,b as me,c as ee,n as Q,d as _,i as ce,t as J,e as ve,h as Z}from"./gaming-services-DmqSyQGe.js";import{a as je}from"./core-services-B2IbOHj_.js";import{t as U}from"./services-D7GyvIKs.js";import{m as r,A as V,u as we}from"./framer-vendor-DZk8000h.js";import{G as ye}from"./modals-RnXu7JrZ.js";import{g as X}from"./features-CjCs00V0.js";const Ne=({className:d="",size:n="md",spin:x=!1,spinOnce:i=!1,bounce:B=!1,userTier:m,isOnTrial:h=!1,onClick:j})=>{const C={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16",xl:"w-24 h-24"},b=()=>{const y=[];return B&&y.push("bounce 2s infinite"),i?y.push("spin-once 2s ease-in-out forwards"):x&&y.push("spin 6s linear infinite"),y.length>0?y.join(", "):"none"},E=(()=>{if(h)return X("/images/icons/pro.png");switch(m){case"vanguard_pro":return X("/images/icons/vanguard.png");case"pro":return X("/images/icons/pro.png");case"free":return X("/images/icons/free.png");default:return X("/images/otagon-logo.png")}})(),f=m?`Otagon ${m} Logo`:"Otagon Logo",u=e.jsx("img",{src:E,alt:f,className:`${C[n]} ${d}`,style:{filter:"drop-shadow(0 0 24px rgba(255, 140, 0, 0.3))",objectFit:"contain",animation:b()}});return j?e.jsx("button",{onClick:j,className:"focus:outline-none hover:scale-105 transition-transform cursor-pointer","aria-label":"Open Gaming Explorer",type:"button",children:u}):u},Ce=[{id:"latest_news",title:"Latest Gaming News",description:"Breaking news from the gaming world",prompt:"What are the latest gaming news and announcements from the past week? Include major game reveals, studio updates, and industry news.",gradient:"from-[#E53A3A] to-[#D98C1F]",icon:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"})})},{id:"trending_games",title:"Trending Games",description:"Games everyone is talking about",prompt:"What games are currently trending and most popular right now? Include games people are playing, discussing, and streaming the most.",gradient:"from-[#FF4D4D] to-[#FFAB40]",icon:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})},{id:"upcoming_releases",title:"Upcoming Releases",description:"Games releasing soon",prompt:"What are the most anticipated upcoming game releases in the next 3 months? Include release dates, platforms, and why they are exciting.",gradient:"from-[#8B5CF6] to-[#3B82F6]",icon:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})},{id:"new_reviews",title:"New Reviews",description:"Latest game reviews and scores",prompt:"What are the latest major game reviews? Include review scores, critical reception, and key points from recent game releases.",gradient:"from-[#06B6D4] to-[#10B981]",icon:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}],ke=[{id:"action",name:"Action",query:"best action games 2024"},{id:"rpg",name:"RPG",query:"best rpg games 2024"},{id:"adventure",name:"Adventure",query:"best adventure games"},{id:"shooter",name:"Shooter",query:"best shooter games 2024"},{id:"indie",name:"Indie",query:"best indie games 2024"},{id:"strategy",name:"Strategy",query:"best strategy games"}],Fe=({user:d,onOpenGameInfo:n,onSendNewsQuery:x,onSwitchToLibraryTab:i})=>{var re;const[B,m]=a.useState([]),[h,j]=a.useState(!1),[C,b]=a.useState([]),[N,E]=a.useState(!1),[f,u]=a.useState("action"),[y,w]=a.useState({}),[S,F]=a.useState(!1),[A,L]=a.useState(""),[M,o]=a.useState(!1),[v,D]=a.useState(()=>K.getGames()),[H,z]=a.useState([]),T=a.useRef(null),R=a.useMemo(()=>q.get().libraryStats,[]),W=a.useMemo(()=>G.getByCategory("own").slice(0,6),[]),Y=a.useMemo(()=>G.getByCategory("favorite").slice(0,6),[]);a.useEffect(()=>{(async()=>{const c=ce.get();if(c){console.log("[GamingExplorerHome] Using cached IGDB data"),m(c.featuredGames),b(c.latestGames),w(c.categoryGamesMap),j(!1),E(!1),F(!1);return}console.log("[GamingExplorerHome] Fetching fresh IGDB data"),j(!0),E(!0),F(!0);try{const se=["Black Myth Wukong","Indiana Jones and the Great Circle","Dragon Age The Veilguard","Silent Hill 2","Metaphor ReFantazio","S.T.A.L.K.E.R. 2"].map($=>ee($)),oe=(await Promise.all(se)).filter($=>$!==null);b(oe.slice(0,6)),E(!1);const xe=["Elden Ring","Baldur's Gate 3","The Legend of Zelda: Tears of the Kingdom","God of War Ragnarok","Cyberpunk 2077","Hades II","Final Fantasy VII Rebirth","Horizon Forbidden West"].map($=>ee($)),ie=(await Promise.all(xe)).filter($=>$!==null);m(ie.slice(0,8)),j(!1);const he=Object.entries({action:["Devil May Cry 5","Bayonetta 3","Armored Core VI","Sekiro","Nioh 2","Sifu"],rpg:["Persona 5 Royal","Dragon Quest XI","Divinity Original Sin 2","Pillars of Eternity II","Disco Elysium","Octopath Traveler II"],adventure:["The Last of Us Part II","Uncharted 4","A Plague Tale Requiem","Stray","It Takes Two","Ori and the Will of the Wisps"],shooter:["Doom Eternal","Titanfall 2","Halo Infinite","Destiny 2","Borderlands 3","Metro Exodus"],indie:["Hollow Knight","Celeste","Dead Cells","Cuphead","Shovel Knight","Undertale"],strategy:["Civilization VI","Total War Warhammer III","XCOM 2","Age of Empires IV","Crusader Kings III","Stellaris"]}).map(async([$,ge])=>{const pe=ge.map(ae=>ee(ae)),fe=await Promise.all(pe);return[$,fe.filter(ae=>ae!==null).slice(0,8)]}),ue=await Promise.all(he),ne=Object.fromEntries(ue);w(ne),ce.set({featuredGames:ie.slice(0,8),latestGames:oe.slice(0,6),categoryGamesMap:ne}),console.log("[GamingExplorerHome] Cached IGDB data for 24 hours")}catch(k){console.error("Error fetching games:",k)}finally{j(!1),F(!1)}})()},[]);const t=a.useCallback(s=>{if(L(s),T.current&&clearTimeout(T.current),s.trim().length<2){z([]),o(!1);return}o(!0),T.current=setTimeout(async()=>{try{const c=await me(s);z(c)}catch(c){console.error("Search error:",c),z([])}finally{o(!1)}},200)},[]);a.useEffect(()=>()=>{T.current&&clearTimeout(T.current)},[]);const l=a.useCallback(s=>{K.add(s),D(K.getGames()),n(s,s.name),L(""),z([])},[n]),p=a.useCallback(async s=>{if(s.preventDefault(),!(!A.trim()||M)){o(!0);try{const c=await ee(A.trim());c?(K.add(c),D(K.getGames()),n(c,c.name),L(""),z([])):U.warning(`No game found for "${A}"`)}catch(c){console.error("Search error:",c),U.error("Failed to search for game")}finally{o(!1)}}},[A,M,n]),g=a.useCallback(s=>{f===s.id?u(null):u(s.id)},[f]),I=a.useCallback(async s=>{await Q.getAsync(s.id)&&console.log("[GamingExplorerHome] Using cached news from Supabase/localStorage for:",s.id);const k=Q.canGenerate(d.id,s.id);if(!k.allowed&&k.nextAvailableAt){const se=Math.ceil((k.nextAvailableAt-Date.now())/36e5);U.warning(`You can generate ${s.title} again in ${se} hours`);return}Q.logGeneration(d.id,s.id),x?x(s.prompt):U.info("Please use this feature from the main app")},[d.id,x]),P=a.useCallback(s=>!Q.canGenerate(d.id,s).allowed,[d.id]),O=a.useCallback(s=>{const c=Q.canGenerate(d.id,s);if(c.allowed||!c.nextAvailableAt)return null;const k=Math.ceil((c.nextAvailableAt-Date.now())/(3600*1e3));return k<=1?"Available in <1h":`Available in ${k}h`},[d.id]);return e.jsxs("div",{className:"p-4 lg:p-6 space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 py-2",children:[e.jsxs(r.button,{onClick:()=>i==null?void 0:i("own"),whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex flex-col items-center gap-1 px-4 py-2 rounded-xl hover:bg-white/5 transition-colors cursor-pointer group",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("svg",{className:"w-4 h-4 text-[#D98C1F]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),e.jsx("span",{className:"text-lg sm:text-xl font-bold text-white",children:R.ownedCount})]}),e.jsx("span",{className:"text-[10px] sm:text-xs text-neutral-400 group-hover:text-neutral-300",children:"Owned"})]}),e.jsx("div",{className:"w-px h-8 bg-neutral-700/50"}),e.jsxs(r.button,{onClick:()=>i==null?void 0:i("favorite"),whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex flex-col items-center gap-1 px-4 py-2 rounded-xl hover:bg-white/5 transition-colors cursor-pointer group",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("svg",{className:"w-4 h-4 text-yellow-500",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),e.jsx("span",{className:"text-lg sm:text-xl font-bold text-white",children:R.favoritesCount})]}),e.jsx("span",{className:"text-[10px] sm:text-xs text-neutral-400 group-hover:text-neutral-300",children:"Favorites"})]}),e.jsx("div",{className:"w-px h-8 bg-neutral-700/50"}),e.jsxs(r.button,{onClick:()=>i==null?void 0:i("own"),whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex flex-col items-center gap-1 px-4 py-2 rounded-xl hover:bg-white/5 transition-colors cursor-pointer group",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-lg sm:text-xl font-bold text-white",children:R.completedCount})]}),e.jsx("span",{className:"text-[10px] sm:text-xs text-neutral-400 group-hover:text-neutral-300",children:"Completed"})]}),e.jsx("div",{className:"w-px h-8 bg-neutral-700/50"}),e.jsxs(r.button,{onClick:()=>i==null?void 0:i("wishlist"),whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex flex-col items-center gap-1 px-4 py-2 rounded-xl hover:bg-white/5 transition-colors cursor-pointer group",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("svg",{className:"w-4 h-4 text-pink-500",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),e.jsx("span",{className:"text-lg sm:text-xl font-bold text-white",children:R.wishlistCount})]}),e.jsx("span",{className:"text-[10px] sm:text-xs text-neutral-400 group-hover:text-neutral-300",children:"Wishlist"})]})]}),e.jsxs("form",{onSubmit:p,className:"relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:A,onChange:s=>t(s.target.value),placeholder:"Search for any game...",className:"w-full px-4 py-3 pl-12 bg-[#1C1C1C] border border-[#424242]/50 rounded-xl text-[#F5F5F5] placeholder-[#6B7280] focus:outline-none focus:border-[#E53A3A]/50 focus:ring-1 focus:ring-[#E53A3A]/30 transition-all",inputMode:"search",autoComplete:"off"}),e.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-[#6B7280]",children:M?e.jsxs("svg",{className:"w-5 h-5 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",strokeWidth:2,className:"opacity-25"}),e.jsx("path",{strokeWidth:2,d:"M12 2a10 10 0 0110 10",className:"opacity-75"})]}):e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),A&&!M&&e.jsx("button",{type:"submit",className:"absolute right-2 top-1/2 -translate-y-1/2 px-4 py-1.5 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white text-sm font-medium rounded-lg hover:opacity-90 transition-opacity",children:"Search"})]}),e.jsx(V,{children:A.length>=2&&H.length>0&&e.jsx(r.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full left-0 right-0 mt-2 bg-[#1C1C1C] border border-[#424242]/50 rounded-xl overflow-hidden shadow-xl z-50 max-h-96 overflow-y-auto",children:H.map((s,c)=>{var k;return e.jsxs(r.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:c*.03},onClick:()=>l(s),className:"w-full p-3 flex gap-3 items-center hover:bg-[#2A2A2A] transition-colors text-left border-b border-[#424242]/30 last:border-0",children:[(k=s.cover)!=null&&k.url?e.jsx("img",{src:_(s.cover.url,"cover_small"),alt:s.name,className:"w-10 h-14 object-cover rounded flex-shrink-0"}):e.jsx("div",{className:"w-10 h-14 bg-[#2A2A2A] rounded flex-shrink-0 flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-[#424242]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-[#F5F5F5] truncate",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[s.first_release_date&&e.jsx("span",{className:"text-xs text-[#8F8F8F]",children:new Date(s.first_release_date*1e3).getFullYear()}),s.aggregated_rating&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-[#424242]",children:"â€¢"}),e.jsxs("span",{className:"text-xs text-[#10B981] font-medium",children:[Math.round(s.aggregated_rating),"%"]})]})]})]})]},s.id)})})})]}),W.length>0&&e.jsxs("section",{children:[e.jsxs("h2",{className:"text-lg font-bold text-[#F5F5F5] mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-6 bg-gradient-to-b from-[#E53A3A] to-[#D98C1F] rounded-full"}),"Your Collection"]}),e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8 2xl:grid-cols-10 gap-2 lg:gap-3",children:W.map(s=>{var c,k;return e.jsxs(r.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>s.igdbData&&n(s.igdbData,s.gameName),className:"relative aspect-[3/4] rounded-lg overflow-hidden group",children:[(k=(c=s.igdbData)==null?void 0:c.cover)!=null&&k.url?e.jsx("img",{src:_(s.igdbData.cover.url,"cover_big"),alt:s.gameName,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-[#2A2A2A] flex items-center justify-center",children:e.jsx("span",{className:"text-[#8F8F8F] text-xs text-center px-1",children:s.gameName})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-end p-2",children:e.jsx("span",{className:"text-white text-xs font-medium line-clamp-2",children:s.gameName})})]},s.id)})})]}),Y.length>0&&e.jsxs("section",{children:[e.jsxs("h2",{className:"text-lg font-bold text-[#F5F5F5] mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-6 bg-gradient-to-b from-[#FFD700] to-[#FFA500] rounded-full"}),"Your Favorites"]}),e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8 2xl:grid-cols-10 gap-2 lg:gap-3",children:Y.map(s=>{var c,k;return e.jsxs(r.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>s.igdbData&&n(s.igdbData,s.gameName),className:"relative aspect-[3/4] rounded-lg overflow-hidden group",children:[(k=(c=s.igdbData)==null?void 0:c.cover)!=null&&k.url?e.jsx("img",{src:_(s.igdbData.cover.url,"cover_big"),alt:s.gameName,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-[#2A2A2A] flex items-center justify-center",children:e.jsx("span",{className:"text-[#8F8F8F] text-xs text-center px-1",children:s.gameName})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-end p-2",children:e.jsx("span",{className:"text-white text-xs font-medium line-clamp-2",children:s.gameName})}),e.jsx("div",{className:"absolute top-2 right-2 text-yellow-400",children:"â˜…"})]},s.id)})})]}),v.length>0&&e.jsxs("section",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h2",{className:"text-lg font-bold text-[#F5F5F5] flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-6 bg-gradient-to-b from-[#06B6D4] to-[#0891B2] rounded-full"}),"Recently Searched"]}),e.jsx("button",{onClick:()=>{K.clear(),D([])},className:"text-xs text-[#6B7280] hover:text-[#E53A3A] transition-colors",children:"Clear All"})]}),e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8 2xl:grid-cols-10 gap-2 lg:gap-3",children:v.map(s=>{var c;return e.jsxs(r.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>n(s,s.name),className:"relative aspect-[3/4] rounded-lg overflow-hidden group",children:[(c=s.cover)!=null&&c.url?e.jsx("img",{src:_(s.cover.url,"cover_big"),alt:s.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-[#2A2A2A] flex items-center justify-center",children:e.jsx("span",{className:"text-[#8F8F8F] text-xs text-center px-1",children:s.name})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-end p-2",children:e.jsx("span",{className:"text-white text-xs font-medium line-clamp-2",children:s.name})}),e.jsx("div",{className:"absolute top-2 right-2 text-[#06B6D4]",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]},s.id)})})]}),e.jsxs("section",{children:[e.jsxs("h2",{className:"text-lg font-bold text-[#F5F5F5] mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-6 bg-gradient-to-b from-[#FF4D4D] to-[#FFAB40] rounded-full"}),"Latest & Popular"]}),N?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"w-8 h-8 border-2 border-[#E53A3A] border-t-transparent rounded-full animate-spin"})}):C.length>0?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8 2xl:grid-cols-10 gap-2 lg:gap-3",children:C.map(s=>{var c;return e.jsxs(r.button,{whileHover:{scale:1.03,y:-4},whileTap:{scale:.98},onClick:()=>n(s,s.name),className:"bg-[#1C1C1C] rounded-xl overflow-hidden border border-[#424242]/40 hover:border-[#FF4D4D]/50 transition-all text-left",children:[e.jsxs("div",{className:"aspect-[3/4] relative overflow-hidden",children:[(c=s.cover)!=null&&c.url?e.jsx("img",{src:_(s.cover.url,"cover_big"),alt:s.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-[#2A2A2A]"}),e.jsx("div",{className:"absolute top-2 left-2 bg-gradient-to-r from-[#FF4D4D] to-[#FFAB40] px-2 py-0.5 rounded text-[10px] font-bold text-white",children:"NEW"}),s.aggregated_rating&&e.jsxs("div",{className:"absolute top-2 right-2 bg-black/70 px-1.5 py-0.5 rounded text-[10px] font-bold text-[#10B981]",children:[Math.round(s.aggregated_rating),"%"]})]}),e.jsx("div",{className:"p-2",children:e.jsx("h3",{className:"font-medium text-[#F5F5F5] text-xs line-clamp-1",children:s.name})})]},s.id)})}):e.jsx("div",{className:"text-center py-6 text-[#8F8F8F] text-sm",children:"Loading latest games..."})]}),e.jsxs("section",{children:[e.jsxs("h2",{className:"text-lg font-bold text-[#F5F5F5] mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-6 bg-gradient-to-b from-[#3B82F6] to-[#8B5CF6] rounded-full"}),"Featured Games"]}),h?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"w-8 h-8 border-2 border-[#E53A3A] border-t-transparent rounded-full animate-spin"})}):B.length>0?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 gap-2 lg:gap-4",children:B.map(s=>{var c;return e.jsxs(r.button,{whileHover:{scale:1.02,y:-4},whileTap:{scale:.98},onClick:()=>n(s,s.name),className:"bg-[#1C1C1C] rounded-xl overflow-hidden border border-[#424242]/40 hover:border-[#E53A3A]/50 transition-all text-left",children:[e.jsxs("div",{className:"aspect-[3/4] relative overflow-hidden",children:[(c=s.cover)!=null&&c.url?e.jsx("img",{src:_(s.cover.url,"cover_big"),alt:s.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-[#2A2A2A]"}),s.aggregated_rating&&e.jsxs("div",{className:"absolute top-2 right-2 bg-black/70 px-2 py-1 rounded text-xs font-bold text-[#10B981]",children:[Math.round(s.aggregated_rating),"%"]})]}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"font-medium text-[#F5F5F5] text-sm line-clamp-1",children:s.name}),s.genres&&e.jsx("p",{className:"text-xs text-[#6B7280] mt-1 line-clamp-1",children:s.genres.slice(0,2).map(k=>k.name).join(" â€¢ ")})]})]},s.id)})}):e.jsx("div",{className:"text-center py-8 text-[#8F8F8F]",children:"Browse categories below to discover games"})]}),e.jsxs("section",{children:[e.jsxs("h2",{className:"text-lg font-bold text-[#F5F5F5] mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-6 bg-gradient-to-b from-[#10B981] to-[#059669] rounded-full"}),"Browse Categories"]}),e.jsx("div",{className:"grid grid-cols-3 sm:flex sm:flex-wrap gap-2 mb-4",children:ke.map(s=>{var k;const c=((k=y[s.id])==null?void 0:k.length)||0;return e.jsxs("button",{onClick:()=>g(s),className:`px-2 sm:px-4 py-2 rounded-xl text-xs sm:text-sm font-medium transition-all flex items-center justify-center sm:justify-start gap-1 sm:gap-2 ${f===s.id?"bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white shadow-lg":"bg-[#1C1C1C] text-[#8F8F8F] hover:bg-[#2A2A2A] hover:text-[#CFCFCF] border border-[#424242]/40"}`,style:f===s.id?{boxShadow:"0 4px 12px rgba(229, 58, 58, 0.25)"}:{},children:[e.jsx("span",{className:"truncate",children:s.name}),c>0&&e.jsx("span",{className:`text-[10px] sm:text-xs px-1 sm:px-1.5 py-0.5 rounded-full flex-shrink-0 ${f===s.id?"bg-white/25":"bg-[#424242]"}`,children:c})]},s.id)})}),S&&!Object.keys(y).length&&e.jsx("div",{className:"flex items-center justify-center py-6",children:e.jsx("div",{className:"w-6 h-6 border-2 border-[#E53A3A] border-t-transparent rounded-full animate-spin"})}),f&&((re=y[f])==null?void 0:re.length)>0&&e.jsx(r.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 gap-2 lg:gap-4",children:y[f].map(s=>{var c;return e.jsxs(r.button,{whileHover:{scale:1.02,y:-4},whileTap:{scale:.98},onClick:()=>n(s,s.name),className:"bg-[#1C1C1C] rounded-xl overflow-hidden border border-[#424242]/40 hover:border-[#E53A3A]/50 text-left transition-all",children:[e.jsxs("div",{className:"aspect-[3/4] relative overflow-hidden",children:[(c=s.cover)!=null&&c.url?e.jsx("img",{src:_(s.cover.url,"cover_big"),alt:s.name,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110"}):e.jsx("div",{className:"w-full h-full bg-[#2A2A2A] flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-[#424242]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"})})}),s.aggregated_rating&&e.jsxs("div",{className:`absolute top-2 right-2 px-2 py-1 rounded-lg text-xs font-bold bg-black/80 backdrop-blur-sm ${s.aggregated_rating>=75?"text-[#10B981]":s.aggregated_rating>=50?"text-[#F59E0B]":"text-[#EF4444]"}`,children:[Math.round(s.aggregated_rating),"%"]})]}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:"font-medium text-[#F5F5F5] text-sm line-clamp-1",children:s.name}),s.genres&&e.jsx("p",{className:"text-xs text-[#6B7280] mt-1 line-clamp-1",children:s.genres.slice(0,2).map(k=>k.name).join(" â€¢ ")})]})]},s.id)})}),!f&&!S&&Object.keys(y).length>0&&e.jsxs("div",{className:"text-center py-6 text-[#8F8F8F]",children:[e.jsx("svg",{className:"w-8 h-8 mx-auto mb-2 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),"Select a category to browse games"]})]}),e.jsxs("section",{children:[e.jsxs("h2",{className:"text-lg font-bold text-[#F5F5F5] mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1.5 h-6 bg-gradient-to-b from-[#FF4D4D] to-[#FFAB40] rounded-full"}),"Gaming News"]}),e.jsx("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:Ce.map(s=>{const c=P(s.id),k=O(s.id);return e.jsxs(r.button,{whileHover:c?void 0:{scale:1.02},whileTap:c?void 0:{scale:.98},onClick:()=>I(s),disabled:c,className:`relative overflow-hidden rounded-xl p-3 sm:p-5 text-left transition-all ${c?"opacity-60":""}`,children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${s.gradient} opacity-20`}),e.jsx("div",{className:"absolute inset-0 bg-[#1C1C1C]/80"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2 sm:mb-3",children:[e.jsx("div",{className:`p-1.5 sm:p-2 rounded-lg bg-gradient-to-br ${s.gradient}`,children:e.jsx("div",{className:"w-5 h-5 sm:w-8 sm:h-8",children:s.icon})}),c&&k&&e.jsx("span",{className:"text-[10px] sm:text-xs text-[#FF4D4D] bg-[#2A2A2A] px-1.5 sm:px-2 py-0.5 sm:py-1 rounded-full",children:k})]}),e.jsx("h3",{className:"font-semibold text-[#F5F5F5] text-sm sm:text-base mb-0.5 sm:mb-1 line-clamp-1",children:s.title}),e.jsx("p",{className:"text-xs sm:text-sm text-[#8F8F8F] line-clamp-2 hidden sm:block",children:s.description}),!c&&e.jsx("div",{className:"mt-2 sm:mt-3 text-[10px] sm:text-xs text-[#10B981]",children:"Tap to ask AI"})]}),e.jsx("div",{className:`absolute inset-0 rounded-xl border-2 border-transparent ${c?"":"hover:border-[#E53A3A]/50"} transition-colors`})]},s.id)})})]})]})},te={console:{gradient:"from-[#3B82F6] to-[#1D4ED8]",bgGradient:"from-[#3B82F6]/10 to-[#1D4ED8]/10",emoji:"ðŸŽ®",label:"Console",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})},game:{gradient:"from-[#E53A3A] to-[#D98C1F]",bgGradient:"from-[#E53A3A]/10 to-[#D98C1F]/10",emoji:"ðŸ•¹ï¸",label:"Game",icon:e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})},pc_build:{gradient:"from-[#10B981] to-[#059669]",bgGradient:"from-[#10B981]/10 to-[#059669]/10",emoji:"ðŸ–¥ï¸",label:"PC Build",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})})},album:{gradient:"from-[#8B5CF6] to-[#6D28D9]",bgGradient:"from-[#8B5CF6]/10 to-[#6D28D9]/10",emoji:"ðŸ“¸",label:"Photos",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})},gameplay_session:{gradient:"from-[#F59E0B] to-[#D97706]",bgGradient:"from-[#F59E0B]/10 to-[#D97706]/10",emoji:"ðŸŽ¬",label:"Session",icon:e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}},Ae=({event:d,isExpanded:n,onToggle:x,onDelete:i})=>{var j,C;const B=a.useRef(null),m=we(B,{once:!0,margin:"-50px"}),h=te[d.type];return e.jsxs(r.div,{ref:B,initial:{opacity:0,x:-20,scale:.98},animate:m?{opacity:1,x:0,scale:1}:{},transition:{duration:.35,ease:"easeOut"},className:"relative group",children:[e.jsx("div",{className:"absolute -left-[34px] sm:-left-[40px] top-4 sm:top-5 z-10",children:e.jsxs(r.div,{initial:{scale:0},animate:m?{scale:1}:{},transition:{delay:.15,type:"spring",stiffness:300},className:"relative flex items-center justify-center",children:[e.jsx("div",{className:`absolute w-5 h-5 sm:w-6 sm:h-6 rounded-full bg-gradient-to-br ${h.gradient} opacity-30 blur-[3px]`}),e.jsx("div",{className:`relative w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full bg-gradient-to-br ${h.gradient} ring-2 ring-[#1a1a1a]`})]})}),e.jsxs(r.div,{whileHover:{scale:1.01},whileTap:{scale:.995},transition:{type:"spring",stiffness:400,damping:30},className:`relative overflow-hidden bg-gradient-to-br ${h.bgGradient} backdrop-blur-sm rounded-xl sm:rounded-2xl border border-[#424242]/30 hover:border-[#424242]/60 transition-all cursor-pointer shadow-sm hover:shadow-md`,onClick:x,children:[e.jsx("div",{className:`absolute top-0 left-0 right-0 h-0.5 sm:h-1 bg-gradient-to-r ${h.gradient}`}),e.jsxs("div",{className:"p-3 sm:p-4 lg:p-5",children:[e.jsxs("div",{className:"flex items-start gap-3 sm:gap-4",children:[e.jsx(r.div,{whileHover:{rotate:3,scale:1.05},className:`flex-shrink-0 p-2 sm:p-2.5 rounded-xl bg-gradient-to-br ${h.gradient} text-white shadow-md [&>svg]:w-4 [&>svg]:h-4 sm:[&>svg]:w-5 sm:[&>svg]:h-5`,children:h.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0 space-y-1.5",children:[e.jsx("h4",{className:"font-semibold text-[#F5F5F5] text-[15px] sm:text-base lg:text-lg leading-snug line-clamp-2",children:d.title}),e.jsx("span",{className:"inline-block text-[10px] sm:text-[11px] font-medium px-2 py-0.5 sm:py-1 rounded-full bg-[#424242]/40 text-[#CFCFCF] tracking-wide uppercase",children:h.label})]}),((C=(j=d.igdbData)==null?void 0:j.cover)==null?void 0:C.url)&&e.jsx(r.img,{initial:{opacity:0},animate:{opacity:1},src:_(d.igdbData.cover.url,"cover_small"),alt:d.title,className:"w-11 h-[60px] sm:w-14 sm:h-[76px] object-cover rounded-lg shadow-lg flex-shrink-0 ring-1 ring-black/20"})]}),d.description&&e.jsx("p",{className:"text-[13px] sm:text-sm text-[#8F8F8F] line-clamp-2 mt-2 sm:mt-2.5 leading-relaxed",children:d.description})]})]}),e.jsx(V,{children:n&&e.jsxs(r.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.25},className:"mt-4 sm:mt-5 pt-4 sm:pt-5 border-t border-[#424242]/30 overflow-hidden",children:[d.specs&&Object.keys(d.specs).length>0&&e.jsxs("div",{className:"mb-4 sm:mb-5",children:[e.jsxs("h5",{className:"text-xs sm:text-sm font-semibold text-[#CFCFCF] mb-2.5 sm:mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Specs"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-2.5",children:Object.entries(d.specs).map(([b,N])=>e.jsxs("div",{className:"bg-[#0A0A0A]/60 rounded-lg px-3 py-2 sm:py-2.5",children:[e.jsx("span",{className:"text-[#8F8F8F] text-[10px] sm:text-xs uppercase tracking-wider",children:b}),e.jsx("p",{className:"text-[#F5F5F5] font-medium truncate text-xs sm:text-sm mt-0.5",children:N})]},b))})]}),d.photos&&d.photos.length>0&&e.jsxs("div",{className:"mb-4 sm:mb-5",children:[e.jsxs("h5",{className:"text-xs sm:text-sm font-semibold text-[#CFCFCF] mb-2.5 sm:mb-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Photos"]}),e.jsx("div",{className:"flex gap-2.5 sm:gap-3 overflow-x-auto pb-2 scrollbar-hide -mx-1 px-1",children:d.photos.map((b,N)=>e.jsx(r.img,{whileHover:{scale:1.03},whileTap:{scale:.98},src:b,alt:`${d.title} photo ${N+1}`,className:"w-[72px] h-[72px] sm:w-24 sm:h-24 object-cover rounded-lg sm:rounded-xl flex-shrink-0 ring-1 ring-white/10"},N))})]}),e.jsxs("button",{onClick:b=>{b.stopPropagation(),i()},className:"flex items-center gap-2 px-3 py-2 text-xs sm:text-sm text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-all",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Remove Event"]})]})})]}),e.jsx(r.div,{animate:{rotate:n?180:0},transition:{duration:.2},className:"absolute bottom-2 right-2 sm:bottom-3 sm:right-3 p-1.5 rounded-full bg-[#2a2a2a]/60 text-[#8F8F8F] opacity-60 sm:opacity-0 group-hover:opacity-100 transition-all",children:e.jsx("svg",{className:"w-3.5 h-3.5 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]})},Le=({user:d})=>{var Y;const[n,x]=a.useState(()=>J.getAll()),[i,B]=a.useState(null),[m,h]=a.useState(!1),[j,C]=a.useState(null),[b,N]=a.useState(null),[E,f]=a.useState(null),u=a.useRef(null),[y,w]=a.useState(!1),S=q.get(),F=new Date().getFullYear(),A=S.gamingStartYear||F-10,L=a.useMemo(()=>{const t=[];for(let l=F;l>=A;l--)t.push(l);return t},[F,A]),M=a.useMemo(()=>{const t={};return n.forEach(l=>{t[l.year]||(t[l.year]=[]),t[l.year].push(l)}),t},[n]),o=a.useMemo(()=>{const t=F-A,l=n.filter(P=>P.type==="console").length,p=n.filter(P=>P.type==="game").length,g=ve.getAll().length,I=n.length;return{yearsGaming:t,consoleCount:l,gameCount:p,sessionCount:g,totalEvents:I}},[n,F,A]),[v,D]=a.useState(F);a.useEffect(()=>{const t=new IntersectionObserver(p=>{p.forEach(g=>{if(g.isIntersecting){const I=parseInt(g.target.getAttribute("data-year")||"");isNaN(I)||D(I)}})},{threshold:.5,root:u.current});return document.querySelectorAll("[data-year]").forEach(p=>t.observe(p)),()=>t.disconnect()},[n]);const H=a.useCallback(t=>{B(t);const l=document.getElementById(`timeline-year-${t}`);l&&l.scrollIntoView({behavior:"smooth",block:"start"})},[]),z=a.useCallback(t=>{C(t),h(!0)},[]),T=a.useCallback(t=>{J.deleteEvent(t),x(J.getAll()),f(null)},[]),R=a.useCallback(t=>{if(!j)return;const l=b||t.year||F;J.addEvent({type:j,eventDate:`${l}-01-01`,year:l,title:t.title||"Untitled",description:t.description,specs:t.specs,photos:t.photos,igdbGameId:t.igdbGameId,igdbData:t.igdbData}),x(J.getAll()),h(!1),N(null),C(null),w(!0)},[j,b,F]),W=n.length>0;return e.jsxs("div",{className:"flex h-full bg-[#0A0A0A]",children:[e.jsxs("div",{className:"hidden lg:flex flex-col w-24 bg-gradient-to-b from-[#1C1C1C] to-[#0A0A0A] border-r border-[#424242]/40 overflow-hidden",children:[e.jsx("div",{className:"p-3 border-b border-[#424242]/40",children:e.jsx("p",{className:"text-xs text-[#8F8F8F] text-center font-medium",children:"Timeline"})}),e.jsx("div",{className:"flex-1 overflow-y-auto py-2 px-2 space-y-1",children:L.map(t=>{var g;const l=(((g=M[t])==null?void 0:g.length)||0)>0,p=v===t;return e.jsxs(r.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>H(t),className:`relative w-full py-2 text-sm rounded-lg transition-all ${p?"bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white font-medium shadow-lg":l?"text-[#F5F5F5] hover:bg-[#2A2A2A]":"text-[#6B7280] hover:bg-[#1C1C1C] hover:text-[#8F8F8F]"}`,children:[t,l&&!p&&e.jsx("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 w-2 h-2 rounded-full bg-[#E53A3A]"})]},t)})})]}),e.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[e.jsx("div",{className:"flex-shrink-0 z-20 bg-[#0A0A0A]/95 backdrop-blur-md border-b border-[#424242]/40",children:e.jsx("div",{className:"px-3 sm:px-4 py-3 sm:py-4",children:e.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:flex sm:flex-wrap sm:items-center sm:justify-center sm:gap-6",children:[e.jsxs(r.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row items-center gap-1 sm:gap-2 bg-[#1C1C1C]/50 sm:bg-transparent rounded-xl p-2 sm:p-0",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg sm:rounded-xl bg-gradient-to-br from-[#E53A3A]/20 to-[#D98C1F]/20 flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-[#E53A3A]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("p",{className:"text-lg sm:text-xl font-bold text-[#F5F5F5]",children:o.yearsGaming}),e.jsx("p",{className:"text-[10px] sm:text-xs text-[#8F8F8F]",children:"Years"})]})]}),e.jsx("div",{className:"hidden sm:block w-px h-10 bg-[#424242]"}),e.jsxs(r.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.1},className:"flex flex-col sm:flex-row items-center gap-1 sm:gap-2 bg-[#1C1C1C]/50 sm:bg-transparent rounded-xl p-2 sm:p-0",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg sm:rounded-xl bg-gradient-to-br from-[#3B82F6]/20 to-[#1D4ED8]/20 flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-[#3B82F6]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("p",{className:"text-lg sm:text-xl font-bold text-[#F5F5F5]",children:o.consoleCount}),e.jsx("p",{className:"text-[10px] sm:text-xs text-[#8F8F8F]",children:"Consoles"})]})]}),e.jsx("div",{className:"hidden sm:block w-px h-10 bg-[#424242]"}),e.jsxs(r.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex flex-col sm:flex-row items-center gap-1 sm:gap-2 bg-[#1C1C1C]/50 sm:bg-transparent rounded-xl p-2 sm:p-0",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-lg sm:rounded-xl bg-gradient-to-br from-[#D98C1F]/20 to-[#B45309]/20 flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-[#D98C1F]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})})}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("p",{className:"text-lg sm:text-xl font-bold text-[#F5F5F5]",children:o.totalEvents}),e.jsx("p",{className:"text-[10px] sm:text-xs text-[#8F8F8F]",children:"Milestones"})]})]}),e.jsx("div",{className:"hidden sm:block w-px h-10 bg-[#424242]"}),e.jsxs(r.button,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.3},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>h(!0),className:"hidden sm:flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white font-medium rounded-xl shadow-lg hover:shadow-xl transition-all",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("span",{children:"Add Event"})]})]})})}),e.jsx("div",{className:"lg:hidden flex-shrink-0 z-10 bg-[#0A0A0A] border-b border-[#424242]/40 px-4 py-2",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsxs("select",{value:i||v||"",onChange:t=>H(Number(t.target.value)),className:"w-full appearance-none bg-[#1C1C1C] text-[#F5F5F5] rounded-lg px-4 py-2.5 pr-10 border border-[#424242]/60 focus:outline-none focus:border-[#E53A3A]",children:[e.jsx("option",{value:"",disabled:!0,children:"Jump to year..."}),L.map(t=>{var l;return e.jsxs("option",{value:t,children:[t," ",(l=M[t])!=null&&l.length?`(${M[t].length} events)`:""]},t)})]}),e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-[#8F8F8F]",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),e.jsx(r.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>h(!0),className:"flex items-center justify-center px-4 py-2.5 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white font-medium rounded-lg shadow-lg",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]})}),e.jsxs("div",{ref:u,className:"flex-1 overflow-y-auto min-h-0",children:[!W&&e.jsxs(r.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"flex flex-col items-center justify-center py-16 px-4",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-[#E53A3A]/20 to-[#D98C1F]/20 flex items-center justify-center mb-6",children:e.jsx("svg",{className:"w-12 h-12 text-[#E53A3A]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),e.jsx("h3",{className:"text-xl font-bold text-[#F5F5F5] mb-2",children:"Start Your Gaming Journey"}),e.jsx("p",{className:"text-[#8F8F8F] text-center max-w-md mb-6",children:"Record your gaming milestones, consoles, PC builds, and memorable moments. Your timeline is waiting!"}),e.jsx(r.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>h(!0),className:"px-6 py-3 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white font-medium rounded-xl shadow-lg hover:shadow-xl transition-shadow",children:"Add Your First Event"})]}),W&&e.jsxs("div",{className:"relative px-4 sm:px-6 lg:px-8 py-5 sm:py-6",children:[e.jsx("div",{className:"absolute left-[18px] sm:left-[34px] lg:left-[42px] top-0 bottom-0 flex flex-col items-center",children:e.jsx("div",{className:"w-0.5 sm:w-[2px] h-full rounded-full bg-gradient-to-b from-[#E53A3A] via-[#E53A3A]/40 via-50% to-[#2a2a2a]/60 relative",children:e.jsx("div",{className:"absolute inset-0 w-full h-full bg-gradient-to-b from-[#E53A3A] via-[#E53A3A]/20 to-transparent blur-sm opacity-50"})})}),y&&(()=>{const t=L.filter(p=>{var g;return(((g=M[p])==null?void 0:g.length)||0)>0}),l=L.length-t.length;return l>0?e.jsxs(r.button,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},onClick:()=>w(!1),className:"mb-4 ml-10 sm:ml-16 lg:ml-[72px] inline-flex items-center gap-2 px-3 py-1.5 text-xs font-medium text-[#8F8F8F] hover:text-[#F5F5F5] bg-[#1C1C1C] hover:bg-[#252525] border border-[#424242]/40 rounded-lg transition-all",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),"Show ",l," empty year",l>1?"s":""]}):null})(),e.jsx(V,{mode:"popLayout",children:L.filter(t=>{var l;return!y||(((l=M[t])==null?void 0:l.length)||0)>0}).map(t=>{const l=M[t]||[],p=l.length>0;return p?e.jsxs(r.div,{id:`timeline-year-${t}`,"data-year":t,className:"mb-10",layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:[e.jsxs("div",{className:"relative flex items-center h-10 sm:h-12 mb-4 sm:mb-5",children:[e.jsxs(r.div,{initial:{scale:0},whileInView:{scale:1},viewport:{once:!0},className:"absolute left-[6px] sm:left-[18px] flex items-center justify-center",children:[e.jsx("div",{className:`absolute w-7 h-7 sm:w-8 sm:h-8 rounded-full ${p?"bg-gradient-to-r from-[#E53A3A]/30 to-[#D98C1F]/30 blur-md":"bg-[#424242]/20 blur-sm"}`}),e.jsx("div",{className:`relative w-6 h-6 sm:w-7 sm:h-7 rounded-full flex items-center justify-center ring-[3px] ring-[#1a1a1a] ${p?"bg-gradient-to-br from-[#E53A3A] to-[#D98C1F]":"bg-[#2a2a2a] ring-[#424242]"}`,style:p?{boxShadow:"0 0 14px rgba(229, 58, 58, 0.4)"}:{},children:e.jsx("div",{className:`w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full ${p?"bg-white":"bg-[#6B7280]"}`})})]}),e.jsx("h3",{className:"ml-10 sm:ml-16 lg:ml-[72px] text-lg sm:text-xl lg:text-2xl font-bold text-[#F5F5F5] min-w-[48px]",children:t}),e.jsxs(r.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:()=>{N(t),h(!0)},className:"ml-3 sm:ml-4 inline-flex items-center justify-center gap-1.5 px-2.5 sm:px-3 h-7 sm:h-8 min-w-[40px] sm:min-w-[100px] bg-[#1C1C1C]/80 hover:bg-gradient-to-r hover:from-[#E53A3A] hover:to-[#D98C1F] text-[#8F8F8F] hover:text-white text-xs sm:text-sm font-medium rounded-lg transition-all border border-[#424242]/30 hover:border-transparent",title:`Add event to ${t}`,children:[e.jsx("svg",{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("span",{className:"hidden sm:inline",children:"Add Event"})]}),p&&e.jsx("span",{className:"ml-2 px-2 py-0.5 sm:py-1 text-[10px] sm:text-xs font-medium rounded-full bg-[#424242]/60 text-[#CFCFCF]",children:l.length})]}),p?e.jsx("div",{className:"space-y-3 sm:space-y-4 ml-10 sm:ml-16 lg:ml-[72px]",children:l.map(g=>e.jsx(Ae,{event:g,isExpanded:E===g.id,onToggle:()=>f(E===g.id?null:g.id),onDelete:()=>T(g.id)},g.id))}):e.jsxs("p",{className:"ml-10 sm:ml-16 lg:ml-[72px] text-[#6B7280] text-sm italic flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-px bg-[#424242]"}),"No events recorded - click + to add"]})]},t):e.jsx(r.div,{id:`timeline-year-${t}`,"data-year":t,className:"mb-3 sm:mb-4",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:e.jsxs("div",{className:"relative flex items-center h-9 sm:h-10 group",children:[e.jsx("div",{className:"absolute left-[8px] sm:left-[20px] w-4 h-4 sm:w-5 sm:h-5 rounded-full bg-[#2a2a2a] ring-2 ring-[#424242]/60 flex items-center justify-center",children:e.jsx("div",{className:"w-1 h-1 sm:w-1.5 sm:h-1.5 rounded-full bg-[#6B7280]"})}),e.jsx("span",{className:"ml-10 sm:ml-16 lg:ml-[72px] text-base sm:text-lg font-medium text-[#6B7280] min-w-[48px]",children:t}),e.jsxs(r.button,{whileHover:{scale:1.03},whileTap:{scale:.97},onClick:()=>{N(t),h(!0)},className:"ml-3 sm:ml-4 inline-flex items-center justify-center gap-1.5 px-2.5 sm:px-3 h-7 sm:h-8 min-w-[40px] sm:min-w-[100px] bg-[#1C1C1C]/80 hover:bg-gradient-to-r hover:from-[#E53A3A] hover:to-[#D98C1F] text-[#8F8F8F] hover:text-white text-xs sm:text-sm font-medium rounded-lg transition-all border border-[#424242]/30 hover:border-transparent opacity-60 group-hover:opacity-100",children:[e.jsx("svg",{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("span",{className:"hidden sm:inline",children:"Add Event"})]})]})},t)})}),!y&&n.length>0&&(()=>{const t=L.filter(p=>{var g;return(((g=M[p])==null?void 0:g.length)||0)>0}),l=L.length-t.length;return l>0?e.jsxs(r.button,{initial:{opacity:0},animate:{opacity:1},onClick:()=>w(!0),className:"mt-4 ml-10 sm:ml-16 lg:ml-[72px] inline-flex items-center gap-2 px-3 py-1.5 text-xs font-medium text-[#8F8F8F] hover:text-[#F5F5F5] bg-[#1C1C1C] hover:bg-[#252525] border border-[#424242]/40 rounded-lg transition-all",children:[e.jsx("svg",{className:"w-4 h-4 rotate-180",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),"Hide ",l," empty year",l>1?"s":""]}):null})()]})]}),e.jsx(r.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>h(!0),className:"hidden lg:flex fixed bottom-6 right-6 w-14 h-14 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white rounded-full items-center justify-center z-30",style:{boxShadow:"0 4px 20px rgba(0, 0, 0, 0.5), 0 8px 32px rgba(229, 58, 58, 0.4)"},children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]}),e.jsx(V,{children:m&&e.jsx(r.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[80] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",onClick:()=>{h(!1),C(null),N(null)},children:e.jsxs(r.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},onClick:t=>t.stopPropagation(),className:"bg-[#1C1C1C] rounded-2xl p-6 max-w-md w-full shadow-2xl border border-[#424242]/40",children:[e.jsx("h2",{className:"text-xl font-bold text-[#F5F5F5] mb-2",children:j?`Add ${((Y=te[j])==null?void 0:Y.label)||j}`:"Add Timeline Event"}),b&&e.jsxs("p",{className:"text-sm text-[#8F8F8F] mb-4",children:["Adding to ",b]}),j?e.jsx(Ee,{type:j,startYear:A,currentYear:F,initialYear:b,onSave:R,onCancel:()=>C(null)}):e.jsx("div",{className:"grid grid-cols-2 gap-3 mt-6",children:["console","game","pc_build","album"].map(t=>{const l=te[t];return e.jsxs(r.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>z(t),className:`flex flex-col items-center justify-center gap-3 p-5 rounded-xl bg-gradient-to-br ${l.gradient} text-white font-medium hover:opacity-90 transition-all shadow-lg min-h-[120px]`,children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-white/15 backdrop-blur-sm",children:l.icon}),e.jsx("span",{className:"text-sm font-semibold text-center leading-tight",children:l.label})]},t)})})]})})})]})},Ee=({type:d,startYear:n,currentYear:x,initialYear:i,onSave:B,onCancel:m})=>{const[h,j]=a.useState(""),[C,b]=a.useState(i||x),[N,E]=a.useState(""),[f,u]=a.useState({}),[y,w]=a.useState([]),S=be.useRef(null),F=te[d],A=o=>{o.preventDefault(),B({title:h,year:C,description:N||void 0,specs:Object.keys(f).length>0?f:void 0,photos:y.length>0?y:void 0})},L=o=>{const v=o.target.files;v&&(Array.from(v).forEach(D=>{if(D.type.startsWith("image/")){const H=new FileReader;H.onload=z=>{var T;if((T=z.target)!=null&&T.result){const R=z.target.result;w(W=>[...W,R])}},H.readAsDataURL(D)}}),S.current&&(S.current.value=""))},M=o=>{w(v=>v.filter((D,H)=>H!==o))};return e.jsxs("form",{onSubmit:A,className:"space-y-4 mt-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-[#CFCFCF] mb-2 font-medium flex items-center gap-2",children:[e.jsx("span",{className:"w-5 h-5 flex items-center justify-center flex-shrink-0 text-[#E53A3A]",children:F.icon}),e.jsx("span",{children:"Title *"})]}),e.jsx("input",{type:"text",value:h,onChange:o=>j(o.target.value),placeholder:d==="console"?"e.g., PlayStation 5":d==="pc_build"?"e.g., Gaming Rig 2024":"Enter title",className:"w-full bg-[#0A0A0A] border border-[#424242] rounded-xl px-4 py-2.5 text-[#F5F5F5] focus:outline-none focus:border-[#E53A3A] transition-colors",required:!0,autoFocus:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-[#CFCFCF] mb-2 font-medium flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 flex-shrink-0 text-[#8B5CF6]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("span",{children:"Year *"})]}),e.jsx("select",{value:C,onChange:o=>b(Number(o.target.value)),className:"w-full bg-[#0A0A0A] border border-[#424242] rounded-xl px-4 py-2.5 text-[#F5F5F5] focus:outline-none focus:border-[#E53A3A] transition-colors",children:Array.from({length:x-n+1},(o,v)=>x-v).map(o=>e.jsx("option",{value:o,children:o},o))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-[#CFCFCF] mb-2 font-medium flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 flex-shrink-0 text-[#10B981]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{children:"Description"})]}),e.jsx("textarea",{value:N,onChange:o=>E(o.target.value),placeholder:"Add notes or memories...",rows:3,className:"w-full bg-[#0A0A0A] border border-[#424242] rounded-xl px-4 py-2.5 text-[#F5F5F5] focus:outline-none focus:border-[#E53A3A] resize-none transition-colors"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-[#CFCFCF] mb-2 font-medium flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 flex-shrink-0 text-[#F59E0B]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("span",{children:"Photos (Optional)"})]}),y.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:y.map((o,v)=>e.jsxs("div",{className:"relative w-16 h-16 rounded-lg overflow-hidden group",children:[e.jsx("img",{src:o,alt:`Upload ${v+1}`,className:"w-full h-full object-cover"}),e.jsx("button",{type:"button",onClick:()=>M(v),className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity",children:e.jsx("svg",{className:"w-5 h-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},v))}),e.jsx("input",{ref:S,type:"file",accept:"image/*",multiple:!0,onChange:L,className:"hidden"}),e.jsxs("button",{type:"button",onClick:()=>{var o;return(o=S.current)==null?void 0:o.click()},className:"w-full py-3 border-2 border-dashed border-[#424242] rounded-xl text-[#8F8F8F] hover:border-[#E53A3A] hover:text-[#E53A3A] transition-colors flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Photos"]})]}),d==="pc_build"&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm text-[#CFCFCF] font-medium flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 flex-shrink-0 text-[#3B82F6]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})}),e.jsx("span",{children:"PC Specs"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:["CPU","GPU","RAM","Storage"].map(o=>e.jsx("input",{type:"text",value:f[o]||"",onChange:v=>u({...f,[o]:v.target.value}),placeholder:o,className:"bg-[#0A0A0A] border border-[#424242] rounded-lg px-3 py-2 text-[#F5F5F5] text-sm focus:outline-none focus:border-[#E53A3A] transition-colors"},o))})]}),e.jsxs("div",{className:"flex gap-3 pt-6",children:[e.jsxs(r.button,{type:"button",whileHover:{scale:1.02},whileTap:{scale:.98},onClick:m,className:"flex-1 py-2.5 px-4 bg-[#424242]/50 text-[#CFCFCF] rounded-xl font-medium hover:bg-[#424242] transition-colors flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back"]}),e.jsxs(r.button,{type:"submit",whileHover:{scale:1.02},whileTap:{scale:.98},disabled:!h,className:"flex-1 py-2.5 px-4 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white rounded-xl font-medium hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Event"]})]})]})},de=[{id:"own",label:"Own",icon:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})},{id:"wishlist",label:"Wishlist",icon:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})},{id:"favorite",label:"Favorites",icon:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})},{id:"disliked",label:"Disliked",icon:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14H5.236a2 2 0 01-1.789-2.894l3.5-7A2 2 0 018.736 3h4.018a2 2 0 01.485.06l3.76.94m-7 10v5a2 2 0 002 2h.096c.5 0 .905-.405.905-.904 0-.715.211-1.413.608-2.008L17 13V4m-7 10h2m5-10h2a2 2 0 012 2v6a2 2 0 01-2 2h-2.5"})})}],le={not_started:"Not Started",playing:"Playing",completed:"Completed",abandoned:"Abandoned"},Be=({user:d,onOpenGameInfo:n,initialCategory:x})=>{var W,Y;const[i,B]=a.useState(x||"own"),[m,h]=a.useState([]),[j,C]=a.useState(!1),[b,N]=a.useState(""),[E,f]=a.useState([]),[u,y]=a.useState(!1),[w,S]=a.useState(null),F=a.useRef(null),A=a.useRef(null);a.useEffect(()=>{const t=G.getByCategory(i);console.log("[GamingExplorerLibrary] Loading games for category:",i,"Found:",t.length),console.log("[GamingExplorerLibrary] Games:",t.map(l=>l.gameName)),h(t)},[i]),a.useEffect(()=>{x&&(console.log("[GamingExplorerLibrary] Switching to category:",x),B(x))},[x]),a.useEffect(()=>{const t=G.getAll();console.log("[GamingExplorerLibrary] Total games in library:",t.length),console.log("[GamingExplorerLibrary] Games by category:",{own:G.getByCategory("own").length,wishlist:G.getByCategory("wishlist").length,favorite:G.getByCategory("favorite").length,disliked:G.getByCategory("disliked").length})},[]);const L=a.useMemo(()=>q.get().libraryStats,[m]),M=a.useCallback(t=>{if(console.log("[GamingExplorerLibrary] Search query changed:",t),N(t),F.current&&clearTimeout(F.current),t.trim().length<2){f([]),y(!1);return}y(!0),F.current=setTimeout(async()=>{try{console.log("[GamingExplorerLibrary] Searching IGDB for:",t);const l=await me(t);console.log("[GamingExplorerLibrary] Search results:",l.length,"games"),f(l)}catch(l){console.error("[GamingExplorerLibrary] Search error:",l),f([])}finally{y(!1)}},200)},[]);a.useEffect(()=>()=>{F.current&&clearTimeout(F.current)},[]);const o=a.useCallback(async()=>{if(b.trim()){y(!0);try{const t=await ee(b);t?f([t]):(f([]),U.info("No games found. Try a different search term."))}catch(t){console.error("Search error:",t),U.error("Failed to search games")}finally{y(!1)}}},[b]),v=a.useCallback((t,l)=>{console.log("[GamingExplorerLibrary] Adding game to library:",t.name,"Category:",l),G.addGame(t.id,t.name,l,t);const p=G.getByCategory(i);console.log("[GamingExplorerLibrary] Updated games count for",i,":",p.length),h(p),N(""),f([]),U.success(`Added ${t.name} to ${l}`),l==="own"&&console.log("[GamingExplorerLibrary] Should trigger knowledge extraction for:",t.name)},[i]),D=a.useCallback((t,l)=>{G.removeGame(t,l),h(G.getByCategory(i)),U.success("Game removed from library")},[i]),H=a.useCallback((t,l)=>{G.updateGame(t,{completionStatus:l}),h(G.getByCategory(i))},[i]),z=a.useCallback((t,l)=>{G.updateGame(t,{personalRating:l}),h(G.getByCategory(i))},[i]),T=t=>{switch(t){case"completed":return"from-[#10B981] to-[#059669]";case"playing":return"from-[#3B82F6] to-[#1D4ED8]";case"abandoned":return"from-[#EF4444] to-[#DC2626]";default:return"from-[#6B7280] to-[#4B5563]"}},R=t=>{switch(t){case"completed":return e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})});case"playing":return e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"})});case"abandoned":return e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})});default:return e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}};return e.jsxs("div",{className:"h-full flex flex-col bg-[#0A0A0A]",children:[e.jsx("div",{className:"flex-shrink-0 bg-gradient-to-r from-[#1C1C1C] to-[#0A0A0A] border-b border-[#424242]/40 px-3 sm:px-4 py-3 sm:py-4",children:e.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:flex sm:flex-wrap sm:items-center sm:justify-center sm:gap-8",children:[e.jsxs(r.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex flex-col sm:flex-row items-center gap-1 sm:gap-2 bg-[#1C1C1C]/60 sm:bg-transparent rounded-xl p-2.5 sm:p-0 border border-[#424242]/30 sm:border-0",children:[e.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-lg sm:rounded-xl bg-gradient-to-br from-[#E53A3A]/20 to-[#D98C1F]/20 flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-[#E53A3A]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("p",{className:"text-lg sm:text-xl font-bold text-[#F5F5F5]",children:L.ownedCount}),e.jsx("p",{className:"text-[10px] sm:text-xs text-[#8F8F8F]",children:L.ownedCount===1?"Game":"Games"})]})]}),e.jsx("div",{className:"hidden sm:block w-px h-10 bg-[#424242]"}),e.jsxs(r.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.1},className:"flex flex-col sm:flex-row items-center gap-1 sm:gap-2 bg-[#1C1C1C]/60 sm:bg-transparent rounded-xl p-2.5 sm:p-0 border border-[#424242]/30 sm:border-0",children:[e.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-lg sm:rounded-xl bg-gradient-to-br from-[#10B981]/20 to-[#059669]/20 flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-[#10B981]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("p",{className:"text-lg sm:text-xl font-bold text-[#10B981]",children:L.completedCount}),e.jsx("p",{className:"text-[10px] sm:text-xs text-[#8F8F8F]",children:"Done"})]})]}),e.jsx("div",{className:"hidden sm:block w-px h-10 bg-[#424242]"}),e.jsxs(r.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex flex-col sm:flex-row items-center gap-1 sm:gap-2 bg-[#1C1C1C]/60 sm:bg-transparent rounded-xl p-2.5 sm:p-0 border border-[#424242]/30 sm:border-0",children:[e.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 rounded-lg sm:rounded-xl bg-gradient-to-br from-[#F59E0B]/20 to-[#D97706]/20 flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-[#F59E0B]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("p",{className:"text-lg sm:text-xl font-bold text-[#F59E0B]",children:L.wishlistCount}),e.jsx("p",{className:"text-[10px] sm:text-xs text-[#8F8F8F]",children:"Wishlist"})]})]})]})}),e.jsx("div",{className:"flex-shrink-0 bg-[#0A0A0A] border-b border-[#424242]/40 px-4 py-3",children:e.jsx("div",{className:"grid grid-cols-2 sm:flex sm:flex-row sm:justify-center gap-2",children:de.map((t,l)=>e.jsxs(r.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:l*.05},whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>B(t.id),className:`relative flex items-center justify-center sm:justify-start gap-2 px-4 py-2.5 rounded-xl text-sm font-medium transition-all ${i===t.id?"bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white shadow-lg":"bg-[#1C1C1C] text-[#8F8F8F] hover:bg-[#2A2A2A] hover:text-[#CFCFCF] border border-[#424242]/40"}`,style:i===t.id?{boxShadow:"0 4px 15px rgba(229, 58, 58, 0.25)"}:{},children:[t.icon,e.jsx("span",{children:t.label}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-bold ${i===t.id?"bg-white/25":"bg-[#424242]"}`,children:G.getByCategory(t.id).length})]},t.id))})}),e.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-3 sm:p-4 pb-28 lg:pb-20",children:m.length>0?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3 sm:gap-4",children:m.map((t,l)=>{var p,g,I,P;return e.jsxs(r.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},transition:{delay:l*.03,duration:.3},whileHover:{y:-8,scale:1.02},className:"group relative bg-[#1C1C1C] rounded-xl overflow-hidden border border-[#424242]/40 hover:border-[#E53A3A]/60 transition-all cursor-pointer shadow-lg hover:shadow-xl",style:{boxShadow:"hover:0 12px 30px rgba(0,0,0,0.4)"},onClick:()=>t.igdbData&&n(t.igdbData,t.gameName),children:[e.jsxs("div",{className:"aspect-[3/4] relative overflow-hidden",children:[(g=(p=t.igdbData)==null?void 0:p.cover)!=null&&g.url?e.jsx("img",{src:_(t.igdbData.cover.url,"cover_big"),alt:t.gameName,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-[#2A2A2A] to-[#1C1C1C] flex items-center justify-center",children:e.jsxs("svg",{className:"w-12 h-12 text-[#424242] opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),((I=t.igdbData)==null?void 0:I.aggregated_rating)&&e.jsx("div",{className:"absolute top-2 right-2 px-2 py-1 rounded-lg text-xs font-bold bg-black/80 backdrop-blur-sm border border-white/10",children:e.jsxs("span",{className:`${t.igdbData.aggregated_rating>=75?"text-[#10B981]":t.igdbData.aggregated_rating>=50?"text-[#F59E0B]":"text-[#EF4444]"}`,children:[Math.round(t.igdbData.aggregated_rating),"%"]})}),t.completionStatus&&e.jsxs("div",{className:`absolute top-2 left-2 px-2 py-1 rounded-lg text-xs font-medium text-white bg-gradient-to-r ${T(t.completionStatus)} shadow-lg flex items-center gap-1`,children:[R(t.completionStatus),le[t.completionStatus]]}),e.jsxs("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm opacity-0 group-hover:opacity-100 transition-all duration-300 flex items-center justify-center gap-3",children:[e.jsx(r.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:O=>{O.stopPropagation(),S(t)},className:"p-3 bg-white/20 rounded-xl hover:bg-white/30 transition-colors backdrop-blur-sm",title:"Quick edit",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx(r.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:O=>{O.stopPropagation(),D(t.igdbGameId,i)},className:"p-3 bg-red-500/20 rounded-xl hover:bg-red-500/40 transition-colors backdrop-blur-sm",title:"Remove",children:e.jsx("svg",{className:"w-5 h-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),e.jsxs("div",{className:"p-2 sm:p-3 bg-gradient-to-t from-[#0A0A0A] to-[#1C1C1C] min-w-0 overflow-hidden",children:[e.jsx("h3",{className:"font-semibold text-[#F5F5F5] text-xs sm:text-sm truncate",children:t.gameName}),((P=t.igdbData)==null?void 0:P.genres)&&e.jsx("p",{className:"text-[10px] sm:text-xs text-[#6B7280] mt-1 truncate",children:t.igdbData.genres.slice(0,2).map(O=>O.name).join(" â€¢ ")})]})]},t.id)})}):e.jsxs(r.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"h-full flex flex-col items-center justify-center text-center py-16 px-4",children:[e.jsx("div",{className:"w-24 h-24 mb-6 rounded-full bg-gradient-to-br from-[#E53A3A]/20 to-[#D98C1F]/20 flex items-center justify-center",children:i==="own"?e.jsx("svg",{className:"w-12 h-12 text-[#E53A3A]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"})}):i==="wishlist"?e.jsx("svg",{className:"w-12 h-12 text-[#D98C1F]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"})}):i==="favorite"?e.jsx("svg",{className:"w-12 h-12 text-[#F59E0B]",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{fillRule:"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.006 5.404.434c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.434 2.082-5.005Z",clipRule:"evenodd"})}):e.jsx("svg",{className:"w-12 h-12 text-[#6B7280]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.498 15.25H4.372c-1.026 0-1.945-.694-2.054-1.715a12.137 12.137 0 0 1-.068-1.285c0-2.848.992-5.464 2.649-7.521C5.287 4.247 5.886 4 6.504 4h4.016a4.5 4.5 0 0 1 1.423.23l3.114 1.04a4.5 4.5 0 0 0 1.423.23h1.294M7.498 15.25c.618 0 .991.724.725 1.282A7.471 7.471 0 0 0 7.5 19.75 2.25 2.25 0 0 0 9.75 22a.75.75 0 0 0 .75-.75v-.633c0-.573.11-1.14.322-1.672.304-.76.93-1.33 1.653-1.715a9.04 9.04 0 0 0 2.86-2.4c.498-.634 1.226-1.08 2.032-1.08h.384"})})}),e.jsx("h3",{className:"text-xl font-bold text-[#F5F5F5] mb-2",children:i==="own"?"Your collection is empty":i==="wishlist"?"No games in wishlist":i==="favorite"?"No favorite games yet":"No disliked games"}),e.jsx("p",{className:"text-[#8F8F8F] text-sm mb-6 max-w-md",children:i==="own"?"Start building your game library by searching and adding games you own!":i==="wishlist"?"Add games you want to play in the future!":i==="favorite"?"Mark your all-time favorite games!":"Track games you didn't enjoy"}),e.jsx(r.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>C(!0),className:"px-6 py-3 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white font-medium rounded-xl shadow-lg hover:shadow-xl transition-shadow",style:{boxShadow:"0 4px 15px rgba(229, 58, 58, 0.3)"},children:"Search & Add Games"})]})}),m.length>0&&e.jsx(r.button,{whileHover:{scale:1.1,rotate:90},whileTap:{scale:.95},onClick:()=>C(!0),className:"fixed bottom-24 lg:bottom-8 left-4 lg:left-8 w-14 h-14 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white rounded-full flex items-center justify-center z-[80]",style:{boxShadow:"0 4px 20px rgba(0, 0, 0, 0.5), 0 8px 32px rgba(229, 58, 58, 0.4)"},title:"Add Game",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),e.jsx(V,{children:j&&e.jsx(r.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[80] flex items-start justify-center p-4 pt-20 bg-black/80",onClick:()=>{C(!1),N(""),f([])},children:e.jsxs(r.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},exit:{y:-20,opacity:0},onClick:t=>t.stopPropagation(),className:"bg-[#1C1C1C] rounded-xl w-full max-w-lg overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-[#424242]/40",children:e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{ref:A,type:"text",value:b,onChange:t=>M(t.target.value),onKeyDown:t=>t.key==="Enter"&&o(),placeholder:"Start typing to search games...",className:"w-full bg-[#0A0A0A] border border-[#424242] rounded-lg px-4 py-3 pr-10 text-[#F5F5F5] focus:outline-none focus:border-[#E53A3A] placeholder:text-[#6B7280]",autoFocus:!0}),u&&e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:e.jsx("div",{className:"w-5 h-5 border-2 border-[#E53A3A] border-t-transparent rounded-full animate-spin"})})]}),e.jsx("button",{onClick:()=>{C(!1),N(""),f([])},className:"p-3 bg-[#2A2A2A] text-[#CFCFCF] rounded-lg hover:bg-[#3A3A3A] transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),b.length>0&&b.length<2&&e.jsx("p",{className:"mt-2 text-xs text-[#8F8F8F]",children:"Type at least 2 characters to search"})]})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:e.jsx(V,{mode:"wait",children:E.length>0?e.jsx(r.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:E.map((t,l)=>{var p;return e.jsx(r.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:l*.05},className:"p-4 border-b border-[#424242]/40 hover:bg-[#2A2A2A] transition-colors cursor-pointer",onClick:()=>{C(!1),N(""),f([]),n(t,t.name)},children:e.jsxs("div",{className:"flex gap-4",children:[(p=t.cover)!=null&&p.url?e.jsx("img",{src:_(t.cover.url,"cover_small"),alt:t.name,className:"w-14 h-18 object-cover rounded-lg flex-shrink-0 shadow-lg"}):e.jsx("div",{className:"w-14 h-18 bg-[#2A2A2A] rounded-lg flex-shrink-0 flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-[#424242]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-[#F5F5F5] line-clamp-1",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[t.first_release_date&&e.jsx("span",{className:"text-sm text-[#8F8F8F]",children:new Date(t.first_release_date*1e3).getFullYear()}),t.aggregated_rating&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-[#424242]",children:"â€¢"}),e.jsxs("span",{className:"text-sm text-[#10B981] font-medium",children:[Math.round(t.aggregated_rating),"%"]})]})]}),t.genres&&e.jsx("p",{className:"text-xs text-[#6B7280] truncate mt-0.5",children:t.genres.slice(0,3).map(g=>g.name).join(" â€¢ ")}),e.jsx("div",{className:"flex flex-wrap gap-1.5 mt-2",onClick:g=>g.stopPropagation(),children:de.map(g=>{const I=G.getGameCategories(t.id).includes(g.id);return e.jsxs("button",{onClick:P=>{P.stopPropagation(),v(t,g.id)},disabled:I,className:`flex items-center gap-1 px-2.5 py-1 rounded-md text-xs font-medium transition-all ${I?"bg-[#10B981]/20 text-[#10B981] cursor-not-allowed":"bg-[#2A2A2A] text-[#CFCFCF] hover:bg-gradient-to-r hover:from-[#E53A3A] hover:to-[#D98C1F] hover:text-white active:scale-95"}`,children:[I?e.jsx("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"})}):g.icon,e.jsx("span",{children:g.label})]},g.id)})})]})]})},t.id)})}):b.length>=2&&!u?e.jsxs(r.div,{initial:{opacity:0},animate:{opacity:1},className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-[#2A2A2A] flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-[#424242]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("p",{className:"text-[#8F8F8F]",children:['No games found for "',b,'"']}),e.jsx("p",{className:"text-sm text-[#6B7280] mt-1",children:"Try a different search term"})]}):b?null:e.jsxs(r.div,{initial:{opacity:0},animate:{opacity:1},className:"p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-r from-[#E53A3A]/20 to-[#D98C1F]/20 flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-[#E53A3A]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("p",{className:"text-[#F5F5F5] font-medium",children:"Search for games"}),e.jsx("p",{className:"text-sm text-[#8F8F8F] mt-1",children:"Type to find games from IGDB"})]})})})]})})}),e.jsx(V,{children:w&&e.jsx(r.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[80] flex items-center justify-center p-4 bg-black/80",onClick:()=>S(null),children:e.jsxs(r.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:t=>t.stopPropagation(),className:"bg-[#1C1C1C] rounded-xl w-full max-w-md overflow-hidden",children:[e.jsxs("div",{className:"relative h-48",children:[(Y=(W=w.igdbData)==null?void 0:W.cover)!=null&&Y.url?e.jsx("img",{src:_(w.igdbData.cover.url,"cover_big"),alt:w.gameName,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-[#2A2A2A]"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#1C1C1C] to-transparent"}),e.jsx("button",{onClick:()=>S(null),className:"absolute top-4 right-4 p-2 bg-black/50 rounded-lg hover:bg-black/70 transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-4 -mt-8 relative z-10",children:[e.jsx("h2",{className:"text-xl font-bold text-[#F5F5F5] mb-4",children:w.gameName}),w.category==="own"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-[#8F8F8F] mb-2",children:"Completion Status"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.keys(le).map(t=>e.jsx("button",{onClick:()=>H(w.id,t),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-all ${w.completionStatus===t?"bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white":"bg-[#2A2A2A] text-[#CFCFCF] hover:bg-[#3A3A3A]"}`,children:le[t]},t))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-[#8F8F8F] mb-2",children:"Your Rating"}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(t=>e.jsx("button",{onClick:()=>z(w.id,t),className:`text-2xl ${(w.personalRating||0)>=t?"text-yellow-400":"text-[#424242]"} hover:scale-110 transition-transform`,children:"â˜…"},t))})]}),w.igdbData&&e.jsxs("div",{className:"space-y-2 text-sm",children:[w.igdbData.genres&&e.jsxs("p",{className:"text-[#8F8F8F]",children:[e.jsx("span",{className:"text-[#CFCFCF]",children:"Genres:"})," ",w.igdbData.genres.map(t=>t.name).join(", ")]}),w.igdbData.platforms&&e.jsxs("p",{className:"text-[#8F8F8F]",children:[e.jsx("span",{className:"text-[#CFCFCF]",children:"Platforms:"})," ",w.igdbData.platforms.map(t=>t.abbreviation||t.name).join(", ")]})]}),e.jsxs("div",{className:"mt-6 flex gap-3",children:[e.jsx("button",{onClick:()=>{D(w.igdbGameId,w.category),S(null)},className:"flex-1 py-2 px-4 bg-red-500/20 text-red-400 rounded-lg font-medium hover:bg-red-500/30 transition-colors",children:"Remove"}),e.jsx("button",{onClick:()=>S(null),className:"flex-1 py-2 px-4 bg-[#424242] text-[#CFCFCF] rounded-lg font-medium hover:bg-[#525252] transition-colors",children:"Close"})]})]})]})})})]})},Me=({user:d})=>{const[n,x]=a.useState({albums:[],totalImages:0,loading:!0}),[i,B]=a.useState(null),[m,h]=a.useState(null),[j,C]=a.useState(""),[b,N]=a.useState(!1),[E,f]=a.useState(null),[u,y]=a.useState(""),[w,S]=a.useState(new Date().getFullYear()),[F,A]=a.useState(""),[L,M]=a.useState(null),[o,v]=a.useState(0);a.useEffect(()=>{(async()=>{if(!d.authUserId)return;x(p=>({...p,loading:!0}));const l=await Z.fetchGalleryData(d.authUserId);x(l)})()},[d.authUserId]);const D=a.useMemo(()=>Z.getGameTitles(n.albums),[n.albums]),H=a.useMemo(()=>j?Z.filterByGame(n.albums,j):n.albums,[n.albums,j]),z=a.useCallback(async t=>{M(t.id);const l=`${t.gameTitle||"screenshot"}_${new Date(t.capturedAt).toISOString().split("T")[0]}.png`;await Z.downloadImage(t.imageUrl,l),M(null)},[]),T=a.useCallback(t=>{f(t),y(`Screenshot - ${t.gameTitle||t.conversationTitle}`),S(new Date(t.capturedAt).getFullYear()),A(""),N(!0)},[]),R=a.useCallback(()=>{E&&(Z.addToTimeline(E,u,w,F),N(!1),f(null))},[E,u,w,F]),W=a.useCallback(t=>{if(!m||!i)return;const l=i.images.findIndex(g=>g.id===m.id);if(l===-1)return;const p=t==="prev"?(l-1+i.images.length)%i.images.length:(l+1)%i.images.length;h(i.images[p]),v(0)},[m,i]),Y=a.useCallback(()=>{v(t=>(t+90)%360)},[]);return a.useEffect(()=>{const t=l=>{m&&(l.key==="Escape"?(h(null),v(0)):l.key==="ArrowLeft"?W("prev"):l.key==="ArrowRight"?W("next"):(l.key==="r"||l.key==="R")&&Y())};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[m,W,Y]),n.loading?e.jsx("div",{className:"flex items-center justify-center h-full p-8",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 border-3 border-[#E53A3A] border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-[#8F8F8F] text-sm",children:"Loading gallery..."})]})}):n.error?e.jsx("div",{className:"flex items-center justify-center h-full p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-red-500/10 flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("p",{className:"text-[#E53A3A] font-medium mb-2",children:"Failed to load gallery"}),e.jsx("p",{className:"text-[#8F8F8F] text-sm",children:n.error})]})}):n.albums.length===0?e.jsx("div",{className:"flex items-center justify-center h-full p-8",children:e.jsxs("div",{className:"text-center max-w-sm",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-4 rounded-full bg-gradient-to-br from-[#E53A3A]/20 to-[#D98C1F]/20 flex items-center justify-center",children:e.jsx("svg",{className:"w-10 h-10 text-[#E53A3A]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsx("h3",{className:"text-lg font-semibold text-[#F5F5F5] mb-2",children:"No Screenshots Yet"}),e.jsx("p",{className:"text-[#8F8F8F] text-sm",children:"Upload screenshots in your game chats to see them here. Your gaming memories will be automatically organized by game!"})]})}):e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"flex-shrink-0 px-4 py-4 sm:px-6 border-b border-[#424242]/40 bg-[#1C1C1C]/80",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-[#E53A3A]/20 to-[#D98C1F]/20 flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-[#E53A3A]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-[#F5F5F5]",children:n.totalImages}),e.jsx("p",{className:"text-xs text-[#8F8F8F]",children:"Screenshots"})]})]}),e.jsx("div",{className:"w-px h-8 bg-[#424242]/60 hidden sm:block"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-[#3B82F6]/20 to-[#8B5CF6]/20 flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-[#3B82F6]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-[#F5F5F5]",children:n.albums.length}),e.jsx("p",{className:"text-xs text-[#8F8F8F]",children:"Albums"})]})]})]}),D.length>0&&e.jsx("div",{className:"flex-1 sm:max-w-xs",children:e.jsxs("select",{value:j,onChange:t=>C(t.target.value),className:"w-full px-3 py-2 bg-[#2A2A2A] border border-[#424242] rounded-lg text-sm text-[#F5F5F5] focus:outline-none focus:border-[#E53A3A] transition-colors",children:[e.jsx("option",{value:"",children:"All Games"}),D.map(t=>e.jsx("option",{value:t,children:t},t))]})})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:e.jsx(V,{mode:"wait",children:i?e.jsxs(r.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("button",{onClick:()=>B(null),className:"p-2 rounded-lg bg-[#2A2A2A] hover:bg-[#3A3A3A] transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-[#CFCFCF]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-[#F5F5F5]",children:i.gameTitle||i.conversationTitle}),e.jsxs("p",{className:"text-sm text-[#8F8F8F]",children:[i.imageCount," screenshots"]})]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-2 sm:gap-3",children:i.images.map((t,l)=>e.jsxs(r.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:l*.03},onClick:()=>h(t),className:"aspect-video relative rounded-lg overflow-hidden bg-[#1C1C1C] border border-[#424242]/40 hover:border-[#E53A3A]/60 transition-all group",children:[e.jsx("img",{src:t.imageUrl,alt:`Screenshot ${l+1}`,className:"w-full h-full object-cover",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("div",{className:"absolute bottom-2 left-2 right-2",children:e.jsx("p",{className:"text-xs text-white/80 truncate",children:new Date(t.capturedAt).toLocaleDateString()})})})]},t.id))})]},"album-detail"):e.jsx(r.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3 sm:gap-4",children:H.map((t,l)=>{var p,g;return e.jsxs(r.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:l*.05},onClick:()=>B(t),className:"group relative bg-[#1C1C1C] rounded-xl overflow-hidden border border-[#424242]/40 hover:border-[#E53A3A]/60 transition-all text-left",children:[e.jsxs("div",{className:"aspect-[4/3] relative overflow-hidden",children:[(p=t.images[0])!=null&&p.imageUrl||t.coverUrl?e.jsx("img",{src:((g=t.images[0])==null?void 0:g.imageUrl)||t.coverUrl,alt:t.gameTitle||t.conversationTitle,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",loading:"lazy"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-[#2A2A2A] to-[#1C1C1C] flex items-center justify-center",children:e.jsx("svg",{className:"w-10 h-10 text-[#424242]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsx("div",{className:"absolute top-2 right-2 px-2 py-1 rounded-full bg-black/60 backdrop-blur-sm",children:e.jsx("span",{className:"text-xs font-medium text-white",children:t.imageCount})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"})]}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-3",children:[e.jsx("h3",{className:"text-sm font-medium text-white line-clamp-1",children:t.gameTitle||t.conversationTitle}),e.jsx("p",{className:"text-xs text-white/60 mt-0.5",children:new Date(t.latestImageAt).toLocaleDateString()})]})]},t.conversationId)})},"albums-grid")})}),e.jsx(V,{children:m&&e.jsxs(r.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] bg-black/95 flex items-center justify-center",onClick:()=>{h(null),v(0)},children:[e.jsx("button",{onClick:()=>{h(null),v(0)},className:"absolute top-4 right-4 z-10 p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("button",{onClick:t=>{t.stopPropagation(),Y()},className:"absolute top-4 left-4 z-10 p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors",title:"Rotate image (R)",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),i&&i.images.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:t=>{t.stopPropagation(),W("prev")},className:"absolute left-2 sm:left-4 top-1/2 -translate-y-1/2 z-10 p-3 rounded-full bg-white/10 hover:bg-white/20 transition-colors",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsx("button",{onClick:t=>{t.stopPropagation(),W("next")},className:"absolute right-2 sm:right-4 top-1/2 -translate-y-1/2 z-10 p-3 rounded-full bg-white/10 hover:bg-white/20 transition-colors",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),e.jsx(r.img,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1,rotate:o},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:300,damping:25},src:m.imageUrl,alt:"Screenshot",className:"max-w-[95vw] max-h-[85vh] object-contain rounded-lg",onClick:t=>t.stopPropagation()},m.id),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/80 to-transparent",onClick:t=>t.stopPropagation(),children:e.jsxs("div",{className:"flex items-center justify-between max-w-xl mx-auto",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-white",children:m.gameTitle||m.conversationTitle}),e.jsx("p",{className:"text-xs text-white/60",children:new Date(m.capturedAt).toLocaleString()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>z(m),disabled:L===m.id,className:"p-2.5 rounded-full bg-white/10 hover:bg-white/20 transition-colors disabled:opacity-50",title:"Download",children:L===m.id?e.jsx("div",{className:"w-5 h-5 border-2 border-white/50 border-t-white rounded-full animate-spin"}):e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),e.jsx("button",{onClick:()=>T(m),className:"p-2.5 rounded-full bg-white/10 hover:bg-white/20 transition-colors",title:"Add to Timeline",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})]})})]})}),e.jsx(V,{children:b&&E&&e.jsx(r.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[110] bg-black/80 flex items-center justify-center p-4",onClick:()=>N(!1),children:e.jsxs(r.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:"w-full max-w-md bg-[#1C1C1C] rounded-2xl overflow-hidden border border-[#424242]/60",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"p-4 border-b border-[#424242]/40",children:[e.jsx("h3",{className:"text-lg font-semibold text-[#F5F5F5]",children:"Add to Timeline"}),e.jsx("p",{className:"text-sm text-[#8F8F8F] mt-1",children:"Save this screenshot to your gaming timeline"})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"aspect-video rounded-lg overflow-hidden bg-black/50 mb-4",children:e.jsx("img",{src:E.imageUrl,alt:"Preview",className:"w-full h-full object-contain"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#CFCFCF] mb-1",children:"Title"}),e.jsx("input",{type:"text",value:u,onChange:t=>y(t.target.value),className:"w-full px-3 py-2 bg-[#2A2A2A] border border-[#424242] rounded-lg text-sm text-[#F5F5F5] focus:outline-none focus:border-[#E53A3A] transition-colors",placeholder:"Enter a title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#CFCFCF] mb-1",children:"Year"}),e.jsx("input",{type:"number",value:w,onChange:t=>S(parseInt(t.target.value)||new Date().getFullYear()),min:1970,max:new Date().getFullYear()+1,className:"w-full px-3 py-2 bg-[#2A2A2A] border border-[#424242] rounded-lg text-sm text-[#F5F5F5] focus:outline-none focus:border-[#E53A3A] transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#CFCFCF] mb-1",children:"Description (optional)"}),e.jsx("textarea",{value:F,onChange:t=>A(t.target.value),rows:2,className:"w-full px-3 py-2 bg-[#2A2A2A] border border-[#424242] rounded-lg text-sm text-[#F5F5F5] focus:outline-none focus:border-[#E53A3A] transition-colors resize-none",placeholder:"Add a description..."})]})]})]}),e.jsxs("div",{className:"p-4 border-t border-[#424242]/40 flex gap-3",children:[e.jsx("button",{onClick:()=>N(!1),className:"flex-1 py-2.5 px-4 bg-[#2A2A2A] text-[#CFCFCF] rounded-lg font-medium hover:bg-[#3A3A3A] transition-colors",children:"Cancel"}),e.jsx("button",{onClick:R,disabled:!u.trim(),className:"flex-1 py-2.5 px-4 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white rounded-lg font-medium hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed",children:"Add to Timeline"})]})]})})})]})},Se=({onComplete:d})=>{const n=new Date().getFullYear(),[x,i]=a.useState(n-10),[B,m]=a.useState(Math.floor((n-10)/10)*10),[h,j]=a.useState(!1),C=[];for(let u=1970;u<=Math.floor(n/10)*10;u+=10)C.push(u);const b=[];for(let u=B;u<B+10&&u<=n;u++)b.push(u);const N=a.useCallback(()=>{j(!0)},[]),E=a.useCallback(()=>{d(x)},[x,d]),f=a.useCallback(()=>{j(!1)},[]);return e.jsxs(r.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"h-full flex flex-col items-center justify-start sm:justify-center p-4 sm:p-6 overflow-y-auto",children:[e.jsxs("div",{className:"max-w-md w-full text-center py-4 sm:py-0",children:[e.jsx("div",{className:"mb-4 sm:mb-6",children:e.jsx("div",{className:"w-14 h-14 sm:w-20 sm:h-20 mx-auto rounded-xl sm:rounded-2xl bg-gradient-to-br from-[#E53A3A] to-[#D98C1F] flex items-center justify-center shadow-lg",children:e.jsx("svg",{className:"w-7 h-7 sm:w-10 sm:h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-[#F5F5F5] mb-1 sm:mb-2",children:"Start Your Gaming Journey"}),e.jsx("p",{className:"text-sm sm:text-base text-[#8F8F8F] mb-5 sm:mb-8 px-2",children:"When did you start gaming? This will be the beginning of your timeline."}),e.jsxs("div",{className:"mb-4 sm:mb-6",children:[e.jsx("p",{className:"text-xs sm:text-sm text-[#CFCFCF] mb-2 sm:mb-3",children:"Select a decade"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-1.5 sm:gap-2 px-1",children:C.map(u=>e.jsxs("button",{onClick:()=>{m(u),i(u)},className:`px-2.5 sm:px-4 py-1.5 sm:py-2 rounded-lg text-xs sm:text-sm font-medium transition-all ${B===u?"bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white":"bg-[#1C1C1C] text-[#CFCFCF] hover:bg-[#2A2A2A]"}`,children:[u,"s"]},u))})]}),e.jsxs("div",{className:"mb-5 sm:mb-8",children:[e.jsx("p",{className:"text-xs sm:text-sm text-[#CFCFCF] mb-2 sm:mb-3",children:"Select the year"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-1.5 sm:gap-2 px-1",children:b.map(u=>e.jsx("button",{onClick:()=>i(u),className:`w-12 sm:w-16 py-1.5 sm:py-2 rounded-lg text-xs sm:text-sm font-medium transition-all ${x===u?"bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white ring-2 ring-[#E53A3A]/50":"bg-[#1C1C1C] text-[#CFCFCF] hover:bg-[#2A2A2A]"}`,children:u},u))})]}),e.jsxs("div",{className:"mb-5 sm:mb-8 p-3 sm:p-4 bg-[#1C1C1C] rounded-xl border border-[#424242]/40",children:[e.jsx("p",{className:"text-[#8F8F8F] text-xs sm:text-sm",children:"Your gaming journey starts in"}),e.jsx("p",{className:"text-3xl sm:text-4xl font-bold bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] bg-clip-text text-transparent",children:x}),e.jsxs("p",{className:"text-[#8F8F8F] text-xs sm:text-sm",children:["That's ",n-x," years of gaming!"]})]}),e.jsx("button",{onClick:N,className:"w-full py-2.5 sm:py-3 px-6 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white font-semibold rounded-xl hover:opacity-90 transition-opacity shadow-lg text-sm sm:text-base",children:"Start Exploring"}),e.jsx("button",{onClick:()=>d(n-5),className:"mt-3 sm:mt-4 text-[#8F8F8F] text-xs sm:text-sm hover:text-[#CFCFCF] transition-colors",children:"Skip for now"})]}),h&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:e.jsxs(r.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-[#1C1C1C] rounded-2xl p-6 max-w-md w-full border border-[#424242]/40 shadow-2xl",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-xl bg-gradient-to-br from-[#E53A3A] to-[#D98C1F] flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-xl font-bold text-[#F5F5F5] text-center mb-2",children:"Confirm Your Selection"}),e.jsx("div",{className:"bg-[#0A0A0A] rounded-xl p-4 mb-6 border border-[#424242]/30",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[#8F8F8F] text-sm mb-2",children:"Your gaming journey starts in"}),e.jsx("p",{className:"text-4xl font-bold bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] bg-clip-text text-transparent mb-2",children:x}),e.jsxs("p",{className:"text-[#CFCFCF] text-sm",children:["That's ",e.jsxs("span",{className:"font-semibold text-[#F5F5F5]",children:[n-x," years"]})," of gaming history!"]})]})}),e.jsx("p",{className:"text-[#8F8F8F] text-sm text-center mb-6",children:"This will be used to create your gaming timeline. You can always update this later in your profile settings."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:f,className:"flex-1 py-3 px-4 bg-[#0A0A0A] border border-[#424242]/40 text-[#CFCFCF] font-medium rounded-xl hover:bg-[#2A2A2A] hover:border-[#424242]/60 transition-all",children:"Go Back"}),e.jsx("button",{onClick:E,className:"flex-1 py-3 px-4 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white font-semibold rounded-xl hover:opacity-90 transition-opacity shadow-lg",children:"Confirm"})]})]})})]})},$e=({isOpen:d,onClose:n,user:x,onSendNewsQuery:i,onNavigateToLibrary:B})=>{var L,M;const[m,h]=a.useState("home"),[j,C]=a.useState(!1),[b,N]=a.useState("own"),[E,f]=a.useState(!1),[u,y]=a.useState(null);a.useEffect(()=>{var o;if(d){const v=((o=x.profileData)==null?void 0:o.gamingStartYear)!==void 0,D=!q.needsOnboarding();v&&!D&&q.setGamingStartYear(x.profileData.gamingStartYear),C(!v&&!D)}},[d,(L=x.profileData)==null?void 0:L.gamingStartYear]),a.useEffect(()=>{const o=v=>{v.key==="Escape"&&d&&n()};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[d,n]),a.useEffect(()=>(d?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[d]);const w=a.useCallback(async o=>{q.setGamingStartYear(o);try{await je.updateUserProfile(x.authUserId,{gamingStartYear:o}),console.log("ðŸŽ® [Gaming Explorer] Gaming start year saved to Supabase:",o)}catch(v){console.error("Failed to save gaming start year to Supabase:",v)}C(!1)},[x.authUserId]),S=a.useCallback((o,v)=>{y(o),f(!0)},[]),F=a.useCallback(o=>{o.target===o.currentTarget&&n()},[n]),A=[{id:"home",label:"Home",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})},{id:"gallery",label:"Gallery",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})},{id:"timeline",label:"Timeline",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})},{id:"library",label:"Library",icon:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}];return e.jsx(V,{children:d&&e.jsxs(r.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 z-[70] flex items-center justify-center",onClick:F,children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),e.jsxs(r.div,{initial:{x:"100%",opacity:0},animate:{x:0,opacity:1},exit:{x:"100%",opacity:0},transition:{type:"spring",damping:25,stiffness:200},className:"relative w-full h-full bg-[#0A0A0A] flex flex-col overflow-hidden",onClick:o=>o.stopPropagation(),children:[e.jsx("header",{className:"flex-shrink-0 bg-[#0A0A0A] border-b border-[#1C1C1C] px-3 sm:px-4 py-2.5 sm:py-3 safe-area-inset-top",children:e.jsxs("div",{className:"flex items-center justify-between lg:justify-between",children:[e.jsx("div",{className:"w-10 h-10 sm:w-9 sm:h-9 lg:hidden"}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 absolute left-1/2 -translate-x-1/2 lg:static lg:translate-x-0",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#E53A3A]/20 to-[#D98C1F]/20 blur-lg rounded-full"}),e.jsx(Ne,{size:"md",userTier:x.tier})]}),e.jsx("span",{className:"text-base sm:text-lg font-semibold text-[#F5F5F5]",children:((M=A.find(o=>o.id===m))==null?void 0:M.label)||"Home"})]}),e.jsx("button",{onClick:n,className:"flex items-center justify-center w-10 h-10 sm:w-9 sm:h-9 rounded-xl bg-[#1C1C1C] hover:bg-[#E53A3A]/20 border border-[#424242]/40 hover:border-[#E53A3A]/40 transition-all group active:scale-95",title:"Close Explorer",children:e.jsx("svg",{className:"w-5 h-5 text-[#8F8F8F] group-hover:text-[#E53A3A] transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsxs("nav",{className:"hidden lg:flex flex-col w-56 bg-[#1C1C1C] border-r border-[#424242]/60 py-4",children:[A.map(o=>e.jsxs("button",{onClick:()=>h(o.id),className:`flex items-center gap-3 px-4 py-3 mx-2 rounded-lg transition-all ${m===o.id?"bg-gradient-to-r from-[#E53A3A]/20 to-[#D98C1F]/20 text-[#F5F5F5] border-l-2 border-[#E53A3A]":"text-[#8F8F8F] hover:bg-[#424242]/30 hover:text-[#CFCFCF]"}`,children:[o.icon,e.jsx("span",{className:"font-medium",children:o.label})]},o.id)),e.jsx("div",{className:"mt-auto px-4 py-4 border-t border-[#424242]/40",children:e.jsxs("div",{className:"text-xs text-[#8F8F8F] space-y-1",children:[e.jsx("p",{children:"Quick Stats"}),e.jsxs("div",{className:"text-[#CFCFCF]",children:[q.get().libraryStats.ownedCount," games owned"]})]})})]}),e.jsx("main",{className:"flex-1 overflow-y-auto pb-16 lg:pb-0",children:e.jsx(V,{mode:"wait",children:j?e.jsx(Se,{onComplete:w},"onboarding"):e.jsxs(r.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"h-full",children:[m==="home"&&e.jsx(Fe,{user:x,onOpenGameInfo:S,onSendNewsQuery:i,onSwitchToLibraryTab:o=>{h("library"),N(o)}}),m==="gallery"&&e.jsx(Me,{user:x}),m==="timeline"&&e.jsx(Le,{user:x}),m==="library"&&e.jsx(Be,{user:x,onOpenGameInfo:S,initialCategory:b})]},m)})})]}),e.jsx(r.button,{initial:{scale:0},animate:{scale:1},exit:{scale:0},whileHover:{scale:1.1},whileTap:{scale:.95},onClick:n,className:"fixed bottom-24 lg:bottom-8 right-4 lg:right-8 w-14 h-14 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] rounded-full flex items-center justify-center z-[80]",style:{boxShadow:"0 4px 20px rgba(0, 0, 0, 0.5), 0 8px 32px rgba(229, 58, 58, 0.4)"},title:"Back to Chat",children:e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),e.jsx("nav",{className:"lg:hidden flex-shrink-0 bg-[#0A0A0A]/80 backdrop-blur-md border-t border-[#1C1C1C]/50 px-3 py-2 safe-area-inset-bottom",children:e.jsx("div",{className:"flex items-center justify-around bg-[#1C1C1C]/90 rounded-2xl p-1.5",children:A.map(o=>e.jsxs("button",{onClick:()=>h(o.id),className:`flex-1 flex flex-col items-center gap-1 py-2.5 px-2 rounded-xl transition-all ${m===o.id?"bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white shadow-lg":"text-[#8F8F8F] hover:text-[#CFCFCF] active:bg-[#2A2A2A]"}`,style:m===o.id?{boxShadow:"0 4px 12px rgba(229, 58, 58, 0.25)"}:{},children:[e.jsx("div",{className:"w-5 h-5",children:o.icon}),e.jsx("span",{className:"text-[10px] font-medium",children:o.label})]},o.id))})})]}),e.jsx(ye,{isOpen:E,onClose:()=>f(!1),gameData:u,gameName:(u==null?void 0:u.name)||"",userTier:x.tier})]})})};export{$e as G,Ne as L};
