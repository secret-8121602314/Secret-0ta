var gt=Object.defineProperty;var pt=(t,i,l)=>i in t?gt(t,i,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[i]=l;var Je=(t,i,l)=>pt(t,typeof i!="symbol"?i+"":i,l);import{r as s,j as e,a as ze,R as Re,F as ft}from"./react-vendor-DsPKX4X3.js";import{M as bt}from"./markdown-vendor-Cup4Va-P.js";import{r as jt,a as vt}from"./markdown-utils-BCeeVymi.js";import{s as Qe,j as Ce,k as $e,t as wt,l as qe}from"./services-Bnr6c_rm.js";import{c as et}from"./auth-B3Qjfd0x.js";import{m as Ae,A as yt}from"./framer-vendor-DddxNQVt.js";import{n as Fe}from"./chat-services-BOYmGS0m.js";import{g as Nt}from"./gaming-services-DeNXntKk.js";function tt(t){const i=t.startsWith("/")?t.slice(1):t,l="/";return`${l.endsWith("/")?l:`${l}/`}${i}`}const kt=["Consulting the strategy guide...","Rolling for initiative...","Checking the wiki...","Crafting a response...","Respawning thoughts...","Loading next checkpoint...","Buffering power-up...","Scanning for loot...","Calculating damage output...","Summoning knowledge...","Queuing ability...","Mining for answers...","Decrypting game files...","Syncing with the server...","Warming up the GPU...","Parsing game data...","Unlocking achievement...","Speedrunning this query...","Frame-perfect analysis...","Optimizing build path..."];function At({texts:t=kt,className:i,interval:l=2500}){const[n,d]=s.useState(0);return s.useEffect(()=>{const m=setInterval(()=>{d(x=>x<t.length-1?x+1:x)},l);return()=>clearInterval(m)},[l,t.length]),e.jsx("div",{className:et("flex items-center justify-start",i),children:e.jsx(Ae.div,{className:"relative",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:e.jsx(yt,{mode:"wait",children:e.jsx(Ae.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0,backgroundPosition:["200% center","-200% center"]},exit:{opacity:0,y:-12},transition:{opacity:{duration:.25},y:{duration:.25},backgroundPosition:{duration:2.5,ease:"linear",repeat:1/0}},className:et("text-sm font-medium bg-gradient-to-r from-[#FFAB40] via-[#FF8F00] to-[#FFAB40] bg-[length:200%_100%] bg-clip-text text-transparent whitespace-nowrap",i),children:t[n]},n)})})})}function nt({content:t,variant:i="chat",accentColor:l="#FF4D4D",accentHoverColor:n="#FF6B6B",className:d=""}){const m=i==="chat",x=t.replace(/<!--[\s\S]*?-->/g,"");return e.jsx("div",{className:d,children:e.jsx(bt,{remarkPlugins:[vt],rehypePlugins:[jt],components:{h1:({children:o})=>e.jsx("h1",{className:m?"text-base sm:text-lg font-bold text-[#F5F5F5] mb-2 sm:mb-3 mt-1 sm:mt-2":"text-lg font-bold text-[#F5F5F5] mb-3",children:o}),h2:({children:o})=>e.jsx("h2",{className:m?"text-sm sm:text-base font-semibold text-[#F5F5F5] mb-1.5 sm:mb-2 mt-1 sm:mt-2":"text-base font-semibold text-[#F5F5F5] mb-2",children:o}),h3:({children:o})=>e.jsx("h3",{className:m?"text-sm font-semibold text-[#F5F5F5] mb-1.5 sm:mb-2 mt-1 sm:mt-2":"text-sm font-semibold text-[#F5F5F5] mb-2",children:o}),p:({children:o})=>e.jsx("p",{className:m?"text-sm sm:text-base text-[#CFCFCF] leading-relaxed mb-2 sm:mb-3":"text-[#CFCFCF] leading-relaxed mb-2",children:o}),ul:({children:o})=>e.jsx("ul",{className:m?"list-disc list-outside ml-4 sm:ml-5 text-sm sm:text-base text-[#CFCFCF] mb-2 sm:mb-3 space-y-1 sm:space-y-1.5":"list-disc list-inside text-[#CFCFCF] mb-2 space-y-1",children:o}),ol:({children:o})=>e.jsx("ol",{className:m?"list-decimal list-outside ml-4 sm:ml-5 text-sm sm:text-base text-[#CFCFCF] mb-2 sm:mb-3 space-y-1 sm:space-y-1.5":"list-decimal list-inside text-[#CFCFCF] mb-2 space-y-1",children:o}),li:({children:o})=>e.jsx("li",{className:m?"text-sm sm:text-base text-[#CFCFCF] leading-relaxed":"text-[#CFCFCF]",children:o}),strong:({children:o})=>e.jsx("strong",{className:"font-semibold text-[#F5F5F5]",children:o}),em:({children:o})=>e.jsx("em",{className:"italic text-[#E0E0E0]",children:o}),code:({children:o})=>e.jsx("code",{className:"px-1 py-0.5 rounded text-xs font-mono",style:{backgroundColor:"#2E2E2E",color:l,...m&&{padding:"0.125rem 0.375rem"}},children:o}),pre:({children:o})=>e.jsx("pre",{className:m?"bg-[#1C1C1C] border border-[#424242] rounded-lg p-3 overflow-x-auto mb-3":"bg-[#1C1C1C] border border-[#424242] rounded-lg p-3 overflow-x-auto",children:o}),blockquote:({children:o})=>e.jsx("blockquote",{className:m?"pl-4 italic text-[#B0B0B0] my-3":"pl-4 italic text-[#B0B0B0] my-2",style:{borderLeft:`4px solid ${l}`},children:o}),a:({href:o,children:j})=>e.jsx("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:"underline transition-colors",style:{color:l},onMouseEnter:b=>b.currentTarget.style.color=n,onMouseLeave:b=>b.currentTarget.style.color=l,children:j}),br:()=>e.jsx("br",{className:"my-1"}),details:({children:o,...j})=>e.jsx("details",{className:"my-3 rounded-lg border border-[#424242]/50 bg-[#1C1C1C]/50 overflow-hidden group [&>*:not(summary)]:px-4 [&>*:not(summary)]:py-3 [&>*:not(summary)]:border-t [&>*:not(summary)]:border-[#424242]/30",...j,children:o}),summary:({children:o,...j})=>e.jsxs("summary",{className:"px-3 py-2 cursor-pointer text-sm text-[#A3A3A3] hover:text-[#F5F5F5] hover:bg-[#2E2E2E]/50 transition-colors select-none list-none flex items-center gap-2",style:{listStyle:"none"},...j,children:[e.jsx("span",{className:"text-xs transition-transform group-open:rotate-90",children:"â–¶"}),"ðŸ“‹ Previous Updates"]})},children:x})})}const Pe={story:{accent:"#A855F7",accentHover:"#C084FC",bgTint:"rgba(168, 85, 247, 0.05)",borderTint:"rgba(168, 85, 247, 0.2)",icon:"ðŸ“–"},strategies:{accent:"#3B82F6",accentHover:"#60A5FA",bgTint:"rgba(59, 130, 246, 0.05)",borderTint:"rgba(59, 130, 246, 0.2)",icon:"ðŸŽ¯"},tips:{accent:"#22C55E",accentHover:"#4ADE80",bgTint:"rgba(34, 197, 94, 0.05)",borderTint:"rgba(34, 197, 94, 0.2)",icon:"ðŸ’¡"},walkthrough:{accent:"#F97316",accentHover:"#FB923C",bgTint:"rgba(249, 115, 22, 0.05)",borderTint:"rgba(249, 115, 22, 0.2)",icon:"ðŸ—ºï¸"},items:{accent:"#EAB308",accentHover:"#FACC15",bgTint:"rgba(234, 179, 8, 0.05)",borderTint:"rgba(234, 179, 8, 0.2)",icon:"ðŸŽ’"},characters:{accent:"#EF4444",accentHover:"#F87171",bgTint:"rgba(239, 68, 68, 0.05)",borderTint:"rgba(239, 68, 68, 0.2)",icon:"ðŸ‘¤"},chat:{accent:"#6B7280",accentHover:"#9CA3AF",bgTint:"rgba(107, 114, 128, 0.05)",borderTint:"rgba(107, 114, 128, 0.2)",icon:"ðŸ’¬"}},st=t=>{const i=(t==null?void 0:t.toLowerCase())||"chat";return Pe[i]||Pe.chat},Ct=({subtabs:t=[],activeTabId:i,onTabClick:l,isLoading:n=!1,onFeedback:d,onModifyTab:m,onDeleteTab:x,onExpandedChange:o,onRetrySubtab:j,onCreateCustomSubtab:b,forceExpand:c=!1,isDemo:f=!1})=>{var ee;const[N,T]=s.useState(i||((ee=t[0])==null?void 0:ee.id)||""),[g,p]=s.useState(!1),[A,C]=s.useState(!1),L=s.useRef(""),F=s.useRef(!0),$=s.useRef(!1),[k,v]=s.useState(!1),[E,P]=s.useState(null),me=s.useRef(null),se=s.useRef(null),[w,H]=s.useState(null),[_,xe]=s.useState(""),[pe,Se]=s.useState(!1),fe=s.useRef(null),[K,re]=s.useState(!1),[ae,X]=s.useState(""),[he,B]=s.useState("chat"),[I,z]=s.useState(""),[ne,R]=s.useState(!1),ue=s.useRef(null),be=i||N,D=s.useMemo(()=>t.find(a=>a.id===be),[t,be]),{allLoading:je,hasLoadedContent:ve,contentSignature:Ee}=s.useMemo(()=>{const a=t.every(S=>S.status==="loading"),y=t.some(S=>S.status==="loaded"&&S.content&&S.content.trim().length>0&&S.content.trim()!=="Loading..."),ie=t.filter(S=>S.status==="loaded"&&S.content&&S.content.trim().length>0).map(S=>{var oe;return`${S.id}:${((oe=S.content)==null?void 0:oe.length)||0}`}).join("|");return{allLoading:a,hasLoadedContent:y,contentSignature:ie}},[t]),we=s.useRef(!1);s.useEffect(()=>{c&&!g&&!we.current&&(console.log("ðŸ“‚ [SubTabs] Force expanding due to forceExpand prop"),p(!0),o==null||o(!0),we.current=!0),c||(we.current=!1)},[c,g,o]),s.useEffect(()=>{const a=y=>{me.current&&!me.current.contains(y.target)&&P(null)};if(E)return document.addEventListener("mousedown",a),document.addEventListener("touchstart",a),()=>{document.removeEventListener("mousedown",a),document.removeEventListener("touchstart",a)}},[E]),s.useEffect(()=>{w&&fe.current&&fe.current.focus()},[w]),s.useEffect(()=>{K&&ue.current&&ue.current.focus()},[K]);const ye=s.useCallback(()=>{!w||!_.trim()||pe||(Se(!0),m&&m(w.tabId,w.tabTitle,_.trim(),w.currentContent),H(null),xe(""),Se(!1))},[w,_,pe,m]),U=s.useCallback(()=>{!ae.trim()||!I.trim()||ne||(R(!0),b&&b(ae.trim(),he,I.trim()),re(!1),X(""),B("chat"),z(""),R(!1))},[ae,he,I,ne,b]),Z=s.useCallback(a=>{x&&x(a),P(null)},[x]),Le=(a,y)=>{a.preventDefault(),a.stopPropagation();const ie=180,S=120,oe=5,ge=5,W=Math.min(a.clientX+oe,window.innerWidth-ie-10),Y=Math.min(a.clientY+ge,window.innerHeight-S-10);console.log("Context menu triggered:",{adjustedX:W,adjustedY:Y,tabTitle:y.title}),q(y.id),P({x:W,y:Y,tabId:y.id,tabTitle:y.title})},J=(a,y)=>{const ie=a.touches[0];console.log("Touch started:",y.title),se.current=setTimeout(()=>{console.log("Long press triggered for:",y.title);const S=a.touches[0]||ie,oe=180,ge=120,W=10,Y=10,Be=Math.min(S.clientX+W,window.innerWidth-oe-10),ke=Math.min(S.clientY+Y,window.innerHeight-ge-10);P({x:Be,y:ke,tabId:y.id,tabTitle:y.title}),console.log(`Long-pressed: ${y.title} at (${Be}, ${ke})`)},500)},O=()=>{se.current&&(clearTimeout(se.current),se.current=null)},Q=()=>{};s.useEffect(()=>{if(A)return;const a=Ee,y=a!==L.current&&a.length>0;if(je&&g&&(p(!1),o==null||o(!1)),F.current&&ve){console.log("ðŸ“‚ [SubTabs] Initial mount complete - content already exists, NOT auto-expanding"),F.current=!1,L.current=a;return}y&&ve&&!g&&!A&&($.current?(console.log("ðŸ“‚ [SubTabs] New updates detected - showing notification dot"),v(!0)):(console.log("ðŸ“‚ [SubTabs] Auto-expanding: first generation complete"),p(!0),o==null||o(!0),$.current=!0)),a.length>0&&(L.current=a)},[Ee,je,ve,g,A,o]);const q=a=>{T(a),l==null||l(a)},Ne=()=>{const a=!g;p(a),C(!0),a&&v(!1),o==null||o(a)};if(!t||t.length===0)return null;const V=t.some(a=>a.status==="loading"||a.content==="Loading..."),le=t.every(a=>a.status==="loading"||a.content==="Loading...");return e.jsxs("div",{className:"mb-4 relative",children:[e.jsxs("button",{onClick:Ne,className:`w-full flex items-center justify-between py-2 px-3 rounded-lg transition-all duration-200 relative z-30 ${g?"bg-[#1C1C1C] border-2 border-transparent bg-clip-padding":"bg-[#1C1C1C] hover:bg-[#252525] border border-[#424242]/30 hover:border-[#424242]/60"}`,style:g?{backgroundImage:"linear-gradient(#1C1C1C, #1C1C1C), linear-gradient(135deg, #FF4D4D, #FFAB40)",backgroundOrigin:"border-box",backgroundClip:"padding-box, border-box"}:void 0,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`text-xs font-semibold uppercase tracking-wider transition-all duration-200 ${g?"text-white":"text-[#A3A3A3]"}`,children:"Lore & Insights"}),!g&&!V&&(k||t.some(a=>a.content&&a.content!=="Loading..."))&&e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-[#FF4D4D] animate-pulse"}),e.jsx("div",{className:"absolute inset-0 w-2 h-2 rounded-full bg-[#FF4D4D] animate-ping opacity-75"})]}),V&&e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-3 h-3 border-2 border-[#FF4D4D] border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-[10px] text-[#A3A3A3]",children:le?"Generating...":"Updating..."})]})]}),e.jsx("svg",{className:`w-4 h-4 transition-all duration-200 ${g?"rotate-180 text-[#FF4D4D]":"text-[#A3A3A3]"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),g&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40 bg-black/20",onClick:()=>{p(!1),C(!0),o==null||o(!1)}}),e.jsx("div",{className:f?"absolute bottom-full left-0 right-0 px-3 mx-auto max-w-2xl mb-2 z-50 animate-fade-in":"lg:absolute fixed lg:bottom-full bottom-[250px] left-3 right-3 lg:left-0 lg:right-0 mb-2 z-50 animate-fade-in",children:e.jsxs("div",{className:"bg-[#1C1C1C]/95 backdrop-blur-md border border-[#424242]/60 rounded-xl shadow-2xl flex flex-col overflow-hidden max-h-[60vh]",children:[e.jsx("div",{className:"border-b border-[#424242]/40 flex-shrink-0",children:e.jsxs("div",{className:"grid grid-cols-3 xs:grid-cols-4 gap-1.5 p-2 sm:grid-cols-4 sm:gap-2 sm:p-3 lg:grid-cols-5",children:[t.map(a=>e.jsx("button",{onClick:()=>q(a.id),onContextMenu:y=>Le(y,a),onTouchStart:y=>J(y,a),onTouchEnd:O,onTouchMove:Q,className:`
                    px-2 sm:px-3 py-1.5 sm:py-2 text-[10px] sm:text-xs font-medium rounded-lg transition-all duration-200 select-none
                    text-center
                    ${be===a.id?"bg-[#FF4D4D] text-white shadow-lg":"bg-[#2E2E2E]/60 text-[#A3A3A3] hover:bg-[#424242]/60 hover:text-[#F5F5F5]"}
                    ${a.isNew?"ring-2 ring-[#FF4D4D]/50":""}
                  `,disabled:n,title:a.title,children:e.jsxs("div",{className:"flex items-center justify-center gap-1 sm:gap-2",children:[a.isNew&&e.jsx("div",{className:"w-1.5 h-1.5 sm:w-2 sm:h-2 bg-[#FF4D4D] rounded-full animate-pulse flex-shrink-0"}),e.jsx("span",{className:"leading-tight",children:a.title}),a.status==="loading"&&e.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 border border-current border-t-transparent rounded-full animate-spin flex-shrink-0"}),a.status==="error"&&e.jsx("div",{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 text-red-400 flex-shrink-0",children:"âš "})]})},a.id)),e.jsx("button",{onClick:()=>{f||(re(!0),X(""),B("chat"),z(""))},className:"px-2 sm:px-3 py-1.5 sm:py-2 text-[10px] sm:text-xs font-medium rounded-lg transition-all duration-200 select-none text-center bg-green-500/10 text-green-400 hover:bg-green-500/20 hover:text-green-300 border border-dashed border-green-500/40",title:"Add Tab",disabled:f,children:e.jsxs("div",{className:"flex items-center justify-center gap-1 sm:gap-2",children:[e.jsx("svg",{className:"w-3 h-3 sm:w-3.5 sm:h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("span",{className:"leading-tight",children:"Add Tab"})]})})]})}),D&&e.jsx("div",{className:"p-4 sm:p-5 md:p-6 flex-1 min-h-0 overflow-y-auto custom-scrollbar transition-all duration-300 rounded-b-xl bg-[#2E2E2E]/40 text-left",children:D.status==="loading"||!D.content&&n?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"flex items-center gap-3 text-[#A3A3A3]",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-[#A3A3A3] border-t-transparent rounded-full animate-spin"}),e.jsxs("span",{children:["Loading ",D.title,"..."]})]})}):D.status==="error"?e.jsxs("div",{className:"text-center py-8 text-[#A3A3A3]",children:[e.jsx("div",{className:"text-4xl mb-2",children:"âš ï¸"}),e.jsxs("p",{children:["Failed to load ",D.title," content"]}),e.jsx("p",{className:"text-sm mt-1",children:"Please try again later"})]}):D.content?e.jsxs("div",{className:"prose prose-invert prose-sm max-w-none text-left",children:[e.jsx(nt,{content:D.content,variant:"subtab",accentColor:st(D.type).accent,accentHoverColor:st(D.type).accentHover}),d&&e.jsxs("div",{className:"flex items-center justify-between gap-2 mt-4 pt-3 border-t border-[#424242]/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-[#A3A3A3] mr-2",children:"Was this helpful?"}),e.jsx("button",{onClick:()=>d(D.id,"up"),className:"p-1.5 rounded-lg text-[#A3A3A3] hover:text-green-400 hover:bg-green-400/10 transition-colors flex items-center justify-center",title:"Helpful",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"})})}),e.jsx("button",{onClick:()=>d(D.id,"down"),className:"p-1.5 rounded-lg text-[#A3A3A3] hover:text-red-400 hover:bg-red-400/10 transition-colors flex items-center justify-center",title:"Not helpful",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14H5.236a2 2 0 01-1.789-2.894l3.5-7A2 2 0 018.736 3h4.018c.163 0 .326.02.485.06L17 4m-7 10v5a2 2 0 002 2h.095c.5 0 .905-.405.905-.905 0-.714.211-1.412.608-2.006L17 13V4m-7 10h2m5-10h2a2 2 0 012 2v6a2 2 0 01-2 2h-2.5"})})}),j&&e.jsx("button",{onClick:()=>j(D.id),className:"p-1.5 rounded-lg text-[#A3A3A3] hover:text-[#FF4D4D] hover:bg-[#FF4D4D]/10 transition-colors flex items-center justify-center",title:"Retry generating this tab",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),e.jsx("span",{className:"text-[10px] text-[#666666] hidden sm:block",children:"Right-click tabs"}),e.jsx("span",{className:"text-[10px] text-[#666666] sm:hidden",children:"Long press tabs"})]})]}):e.jsx("div",{className:"text-center py-8 text-[#A3A3A3]",children:e.jsxs("p",{children:["No content available for ",D.title]})})})]})})]}),E&&ze.createPortal(e.jsxs("div",{ref:me,className:"fixed bg-[#1C1C1C] border border-[#424242] rounded-lg shadow-2xl overflow-hidden",style:{left:E.x,top:E.y,zIndex:999999,maxWidth:"180px",pointerEvents:"auto"},children:[e.jsx("div",{className:"px-3 py-2 border-b border-[#424242]/50 bg-[#2A2A2A]",children:e.jsx("span",{className:"text-xs font-semibold text-[#A3A3A3] uppercase tracking-wider",children:E.tabTitle})}),e.jsxs("div",{className:"py-1",children:[e.jsxs("button",{onClick:()=>{if(f)return;const a=t.find(y=>y.id===E.tabId);H({tabId:E.tabId,tabTitle:E.tabTitle,currentContent:(a==null?void 0:a.content)||""}),P(null)},className:`w-full px-4 py-2 text-left text-sm transition-colors flex items-center gap-3 ${f?"text-[#666666] cursor-not-allowed opacity-50":"text-[#F5F5F5] hover:bg-[#E53A3A]/20 cursor-pointer"}`,disabled:f,children:[e.jsx("svg",{className:"w-4 h-4 text-[#E53A3A]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),e.jsx("span",{children:"Modify Tab"})]}),e.jsxs("button",{onClick:()=>{f||Z(E.tabId)},className:`w-full px-4 py-2 text-left text-sm transition-colors flex items-center gap-3 ${f?"text-[#666666] cursor-not-allowed opacity-50":"text-red-400 hover:bg-red-500/20 cursor-pointer"}`,disabled:f,children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),e.jsx("span",{children:"Delete Tab"})]})]})]}),document.body),w&&e.jsx("div",{className:"fixed inset-0 z-[10001] flex items-center justify-center bg-black/70 backdrop-blur-sm p-4",onClick:a=>{a.target===a.currentTarget&&(H(null),xe(""))},children:e.jsxs("div",{className:"bg-[#1C1C1C] border border-[#424242] rounded-xl shadow-2xl w-full max-w-lg overflow-hidden",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-[#424242]/50 bg-[#2A2A2A]",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-[#E53A3A]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),e.jsxs("span",{className:"font-semibold text-white",children:['Modify "',w.tabTitle,'"']})]}),e.jsx("button",{onClick:()=>{H(null),xe("")},className:"p-1 rounded-lg text-[#A3A3A3] hover:text-white hover:bg-[#424242]/50 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx("p",{className:"text-sm text-[#A3A3A3]",children:"Describe what changes you'd like to see in this tab. The AI will regenerate the content based on your feedback."}),e.jsx("textarea",{ref:fe,value:_,onChange:a=>xe(a.target.value),placeholder:"e.g., Make it more detailed, focus on combat strategies, include item locations...",className:"w-full h-32 px-3 py-2 bg-[#2A2A2A] border border-[#424242] rounded-lg text-white placeholder-[#6B7280] resize-none focus:outline-none focus:ring-2 focus:ring-[#E53A3A]/50 focus:border-[#E53A3A]",onKeyDown:a=>{a.key==="Enter"&&(a.metaKey||a.ctrlKey)&&ye()}}),e.jsx("p",{className:"text-xs text-[#6B7280]",children:"Press Ctrl+Enter to submit"})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 px-4 py-3 border-t border-[#424242]/50 bg-[#2A2A2A]",children:[e.jsx("button",{onClick:()=>{H(null),xe("")},className:"px-4 py-2 text-sm font-medium text-[#A3A3A3] hover:text-white transition-colors",children:"Cancel"}),e.jsx("button",{onClick:ye,disabled:!_.trim()||pe,className:"px-4 py-2 text-sm font-medium bg-[#E53A3A] text-white rounded-lg hover:bg-[#CC2E2E] disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:pe?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Regenerating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Regenerate"]})})]})]})}),K&&ze.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>{re(!1),X(""),B("chat"),z("")}}),e.jsxs("div",{className:"relative w-full max-w-md bg-[#1A1A1A] rounded-xl border border-[#424242] shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-[#424242]/50 bg-[#2A2A2A]",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-[#E53A3A]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Custom Tab"]}),e.jsx("button",{onClick:()=>{re(!1),X(""),B("chat"),z("")},className:"text-[#A3A3A3] hover:text-white transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx("p",{className:"text-sm text-[#A3A3A3]",children:"Create a custom tab with specific instructions for AI generation."}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-white mb-2",children:["Tab Name ",e.jsx("span",{className:"text-[#E53A3A]",children:"*"})]}),e.jsx("input",{ref:ue,type:"text",value:ae,onChange:a=>X(a.target.value),placeholder:"e.g., Boss Strategies, Secret Locations, Build Guide...",className:"w-full px-3 py-2 bg-[#2A2A2A] border border-[#424242] rounded-lg text-white placeholder-[#6B7280] focus:outline-none focus:ring-2 focus:ring-[#E53A3A]/50 focus:border-[#E53A3A]",maxLength:50})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Tab Type"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(Pe).map(([a,y])=>e.jsxs("button",{onClick:()=>B(a),className:`flex items-center gap-2 px-3 py-2 rounded-lg border-2 transition-all ${he===a?"border-current bg-current/10":"border-[#424242] bg-[#2A2A2A] hover:border-[#666666]"}`,style:{color:he===a?y.accent:"#A3A3A3"},children:[e.jsx("span",{className:"text-base",children:y.icon}),e.jsx("span",{className:"text-sm font-medium capitalize",children:a})]},a))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-white mb-2",children:["Instructions for AI ",e.jsx("span",{className:"text-[#E53A3A]",children:"*"})]}),e.jsx("textarea",{value:I,onChange:a=>z(a.target.value),placeholder:`Describe what information this tab should contain. Be specific about what you want the AI to generate...

Example: "Create a detailed boss guide covering attack patterns, telegraphs, phase transitions, effective counter-strategies, and recommended equipment for each major boss encounter."`,className:"w-full h-32 px-3 py-2 bg-[#2A2A2A] border border-[#424242] rounded-lg text-white placeholder-[#6B7280] resize-none focus:outline-none focus:ring-2 focus:ring-[#E53A3A]/50 focus:border-[#E53A3A]",onKeyDown:a=>{a.key==="Enter"&&(a.metaKey||a.ctrlKey)&&U()}}),e.jsx("p",{className:"text-xs text-[#6B7280] mt-1",children:"Press Ctrl+Enter to create"})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 px-4 py-3 border-t border-[#424242]/50 bg-[#2A2A2A]",children:[e.jsx("button",{onClick:()=>{re(!1),X(""),B("chat"),z("")},className:"px-4 py-2 text-sm font-medium text-[#A3A3A3] hover:text-white transition-colors",children:"Cancel"}),e.jsx("button",{onClick:U,disabled:!ae.trim()||!I.trim()||ne,className:"px-4 py-2 text-sm font-medium bg-[#E53A3A] text-white rounded-lg hover:bg-[#CC2E2E] disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:ne?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Tab"]})})]})]})]}),document.body)]})},He=({title:t,icon:i,children:l,accentColor:n,defaultOpen:d=!1})=>{const[m,x]=s.useState(d),o=Re.useRef(null),[j,b]=s.useState(0);return Re.useEffect(()=>{o.current&&b(o.current.scrollHeight)},[l,m]),e.jsxs("div",{className:"rounded-xl overflow-hidden transition-all duration-300",style:{background:m?`${n}08`:"rgba(255,255,255,0.02)",border:`1px solid ${m?`${n}25`:"rgba(255,255,255,0.05)"}`,boxShadow:m?`0 4px 12px ${n}10`:"none"},children:[e.jsxs("button",{type:"button",onClick:()=>x(!m),className:"w-full flex items-center justify-between p-3.5 hover:bg-white/5 active:bg-white/10 transition-all duration-200 cursor-pointer select-none text-left",children:[e.jsxs("div",{className:"flex items-center gap-3 pointer-events-none",children:[e.jsx("div",{className:"p-2 rounded-lg transition-all duration-200",style:{background:m?`${n}20`:"rgba(255,255,255,0.05)",boxShadow:m?`0 2px 8px ${n}15`:"none"},children:i}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider transition-colors duration-200",style:{color:m?n:"rgba(255,255,255,0.5)"},children:t})]}),e.jsx("div",{className:"p-1 rounded-full transition-all duration-200 pointer-events-none",style:{background:m?`${n}15`:"transparent"},children:e.jsx("svg",{className:"w-4 h-4 transition-transform duration-300",style:{transform:m?"rotate(180deg)":"rotate(0deg)",color:m?n:"rgba(255,255,255,0.3)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),e.jsx("div",{className:"overflow-hidden transition-all duration-300 ease-in-out",style:{maxHeight:m?`${j+32}px`:"0",opacity:m?1:0},children:e.jsx("div",{ref:o,className:"px-4 pb-4 pt-2",children:l})})]})},Ft=({content:t})=>{const i=t.split(`
`).filter(n=>n.trim());return i.some(n=>/^[â€¢\-*]\s|^\d+[.)]\s/.test(n.trim()))?e.jsx("ul",{className:"space-y-2.5",children:i.map((n,d)=>{const m=n.replace(/^[â€¢\-*]\s*/,"").replace(/^\d+[.)]\s*/,"").trim();return m?e.jsxs("li",{className:"flex items-start gap-2.5",children:[e.jsx("span",{className:"mt-1.5 w-1.5 h-1.5 rounded-full flex-shrink-0 bg-white/40"}),e.jsx("span",{className:"text-sm text-white/70 leading-relaxed",children:m})]},d):null})}):e.jsx("div",{className:"space-y-3",children:i.map((n,d)=>e.jsx("p",{className:"text-sm text-white/70 leading-relaxed",children:n.trim()},d))})},St=t=>{const i=t.includes("**Playing Session Summary for"),l=t.includes("**Planning Session Summary for");if(!i&&!l)return null;const n=l,d=t.match(/Session Summary for ([^\n*]+)/),m=d?d[1].trim():"Unknown Game",x=t.match(/\*\*Progress:\*\*\s*(\d+)%/),o=x?parseInt(x[1],10):void 0,j=t.match(/\*\*Current Focus:\*\*\s*([^\n]+)/),b=j?j[1].trim():void 0,c=[],f=t.match(/\*\*(Session Activity|Key Achievements|Strategies Discussed)[^:]*:\*\*\n([\s\S]*?)(?=\n\n\*\*|\n\*Switching|\*\*Planning Objectives|\*\*Current Objectives)/);if(f){const L=f[2].match(/[â€¢\-*]\s*([^\n]+)/g);L&&c.push(...L.map(F=>F.replace(/^[â€¢\-*]\s*/,"").trim()))}const N=[],T=t.match(/\*\*(Current Objectives|Planning Objectives|Goals for Next Session)[^:]*:\*\*\n([\s\S]*?)(?=\n\n\*\*|\n\*Switching|$)/);if(T){const L=T[2].match(/[â€¢\-*]\s*([^\n]+)/g);L&&N.push(...L.map(F=>F.replace(/^[â€¢\-*]\s*/,"").trim()))}let g;const p=t.split(/\*\*Recent Activity:\*\*/);p.length>1&&(g=p[1].split(/\n\*Switching to Planning Mode/)[0].trim(),g=g.replace(/\n\n+$/,"").trim());let A;const C=t.split(/\*\*Strategic Notes:\*\*/);return C.length>1&&(A=C[1].split(/\n\*Switching to Playing Mode/)[0].trim(),A=A.replace(/\n\n+$/,"").trim()),{mode:n?"playing":"planning",gameTitle:m,progress:o,currentObjective:b,keyPoints:c,objectives:N,recentActivity:g,strategicNotes:A,timestamp:Date.now()}},Et=({mode:t,gameTitle:i,progress:l,currentObjective:n,keyPoints:d,objectives:m,recentActivity:x,strategicNotes:o,timestamp:j})=>{const b=t==="playing",c=b?{primary:"#FF6B6B",secondary:"#FF8E53",accent:"#FFB347",glow:"rgba(255, 107, 107, 0.3)",glowSecondary:"rgba(255, 142, 83, 0.2)",bgGradient:"linear-gradient(135deg, rgba(255, 107, 107, 0.08) 0%, rgba(255, 142, 83, 0.04) 100%)",headerBg:"linear-gradient(135deg, rgba(255, 107, 107, 0.15) 0%, rgba(255, 142, 83, 0.08) 100%)",iconBg:"linear-gradient(135deg, #FF6B6B 0%, #FF8E53 100%)"}:{primary:"#60A5FA",secondary:"#818CF8",accent:"#A78BFA",glow:"rgba(96, 165, 250, 0.3)",glowSecondary:"rgba(129, 140, 248, 0.2)",bgGradient:"linear-gradient(135deg, rgba(96, 165, 250, 0.08) 0%, rgba(129, 140, 248, 0.04) 100%)",headerBg:"linear-gradient(135deg, rgba(96, 165, 250, 0.15) 0%, rgba(129, 140, 248, 0.08) 100%)",iconBg:"linear-gradient(135deg, #60A5FA 0%, #818CF8 100%)"};return e.jsx("div",{className:"w-full flex justify-start",children:e.jsxs("div",{className:"relative w-[calc(100%-1.5rem)] mx-3 sm:w-full sm:max-w-lg md:max-w-xl md:mx-0 my-4 overflow-hidden",style:{background:c.bgGradient,backdropFilter:"blur(10px)",borderRadius:"16px",border:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:`0 8px 32px ${c.glow}, 0 0 0 1px rgba(255,255,255,0.03), inset 0 1px 0 rgba(255,255,255,0.05)`},children:[e.jsx("div",{className:"absolute inset-0 rounded-[16px] pointer-events-none",style:{background:`linear-gradient(135deg, ${c.primary}20 0%, transparent 50%, ${c.secondary}20 100%)`,opacity:.5}}),e.jsxs("div",{className:"relative p-4 pb-3",style:{background:c.headerBg},children:[e.jsx("div",{className:"absolute top-0 left-6 right-6 h-[2px]",style:{background:`linear-gradient(90deg, transparent 0%, ${c.primary} 30%, ${c.secondary} 50%, ${c.accent} 70%, transparent 100%)`,opacity:.8}}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative p-3 rounded-2xl flex-shrink-0 shadow-lg",style:{background:c.iconBg,boxShadow:`0 4px 16px ${c.glow}`},children:[b?e.jsx("svg",{className:"w-6 h-6 text-white drop-shadow-sm",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-10 7H8v3H6v-3H3v-2h3V8h2v3h3v2zm4.5 2c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm4-3c-.83 0-1.5-.67-1.5-1.5S18.67 9 19.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"})}):e.jsx("svg",{className:"w-6 h-6 text-white drop-shadow-sm",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"})}),e.jsx("div",{className:"absolute inset-0 rounded-2xl opacity-30",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.4) 0%, transparent 50%)"}})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2.5 flex-wrap",children:[e.jsx("h3",{className:"text-lg font-bold tracking-wide bg-clip-text text-transparent",style:{backgroundImage:`linear-gradient(135deg, ${c.primary} 0%, ${c.secondary} 100%)`},children:b?"Active Session":"Planning Session"}),e.jsx("span",{className:"px-2.5 py-1 text-[10px] font-bold uppercase tracking-wider rounded-full flex items-center gap-1.5",style:{background:`linear-gradient(135deg, ${c.primary}20, ${c.secondary}15)`,color:c.primary,border:`1px solid ${c.primary}30`,boxShadow:`0 2px 8px ${c.glow}`},children:e.jsx("span",{children:b?"Playing":"Planning"})})]}),e.jsx("p",{className:"text-sm text-white/90 font-medium mt-1 break-words",children:i}),e.jsxs("p",{className:"text-[11px] text-white/40 mt-0.5 flex items-center gap-1.5",children:[e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),new Date(j).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]})]}),l!==void 0&&e.jsxs("div",{className:"px-4 py-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs text-white/50 font-medium uppercase tracking-wide",children:"Game Progress"}),e.jsxs("span",{className:"text-sm font-bold",style:{color:c.primary},children:[l,"%"]})]}),e.jsx("div",{className:"h-2.5 rounded-full overflow-hidden",style:{background:"rgba(255,255,255,0.05)",boxShadow:"inset 0 1px 2px rgba(0,0,0,0.3)"},children:e.jsx("div",{className:"h-full rounded-full transition-all duration-700 ease-out relative overflow-hidden",style:{width:`${l}%`,background:`linear-gradient(90deg, ${c.primary}, ${c.secondary}, ${c.accent})`},children:e.jsx("div",{className:"absolute inset-0 opacity-40",style:{background:"linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.5) 50%, transparent 100%)",animation:"shimmer 2s infinite"}})})})]}),n&&e.jsx("div",{className:"px-4 pb-3",children:e.jsxs("div",{className:"p-3.5 rounded-xl relative overflow-hidden",style:{background:`linear-gradient(135deg, ${c.primary}12, ${c.secondary}08)`,border:`1px solid ${c.primary}20`},children:[e.jsx("div",{className:"absolute left-0 top-2 bottom-2 w-1 rounded-full",style:{background:`linear-gradient(180deg, ${c.primary}, ${c.secondary})`}}),e.jsxs("div",{className:"flex items-start gap-2.5 pl-3",children:[e.jsx("svg",{className:"w-4 h-4 mt-0.5 flex-shrink-0",style:{color:c.primary},fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.707l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 001.414 1.414L9 9.414V13a1 1 0 102 0V9.414l1.293 1.293a1 1 0 001.414-1.414z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider block mb-1",style:{color:c.primary},children:b?"Current Objective":"Main Focus"}),e.jsx("p",{className:"text-sm text-white/85 leading-relaxed",children:n})]})]})]})}),e.jsxs("div",{className:"relative z-10 px-4 pt-3 pb-4 space-y-2.5",children:[d.length>0&&e.jsx(He,{title:b?"Activity Summary":"Key Strategies",accentColor:c.primary,defaultOpen:!0,icon:b?e.jsx("svg",{className:"w-4 h-4",style:{color:c.primary},fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):e.jsx("svg",{className:"w-4 h-4",style:{color:c.primary},fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),children:e.jsx("ul",{className:"space-y-2.5",children:d.map((f,N)=>e.jsxs("li",{className:"flex items-start gap-2.5",children:[e.jsx("span",{className:"mt-1.5 w-2 h-2 rounded-full flex-shrink-0",style:{background:`linear-gradient(135deg, ${c.primary}, ${c.secondary})`,boxShadow:`0 0 6px ${c.glow}`}}),e.jsx("span",{className:"text-sm text-white/70 leading-relaxed",children:f})]},N))})}),m.length>0&&e.jsx(He,{title:b?"Current Objectives":"Session Goals",accentColor:c.secondary,defaultOpen:!1,icon:e.jsx("svg",{className:"w-4 h-4",style:{color:c.secondary},fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.707l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 001.414 1.414L9 9.414V13a1 1 0 102 0V9.414l1.293 1.293a1 1 0 001.414-1.414z",clipRule:"evenodd"})}),children:e.jsx("ul",{className:"space-y-2.5",children:m.map((f,N)=>e.jsxs("li",{className:"flex items-start gap-2.5",children:[e.jsx("span",{className:"mt-1.5 w-2 h-2 rounded-full flex-shrink-0",style:{background:`linear-gradient(135deg, ${c.secondary}, ${c.accent})`,boxShadow:`0 0 6px ${c.glowSecondary}`}}),e.jsx("span",{className:"text-sm text-white/70 leading-relaxed",children:f})]},N))})}),(x||o)&&e.jsx(He,{title:x?"Recent Activity":"Strategic Notes",accentColor:"rgba(255,255,255,0.4)",defaultOpen:!1,icon:e.jsx("svg",{className:"w-4 h-4 text-white/40",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),children:e.jsx(Ft,{content:x||o||""})})]}),e.jsxs("div",{className:"px-4 py-3 flex items-center justify-between",style:{background:"rgba(0,0,0,0.2)",borderTop:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"relative w-2.5 h-2.5 rounded-full",style:{background:`linear-gradient(135deg, ${c.primary}, ${c.secondary})`,boxShadow:`0 0 8px ${c.glow}`},children:e.jsx("div",{className:"absolute inset-0 rounded-full animate-ping",style:{background:c.primary,opacity:.4}})}),e.jsx("span",{className:"text-xs text-white/40",children:"Session synced"})]}),e.jsx("span",{className:"text-xs font-semibold flex items-center gap-1.5",style:{background:`linear-gradient(135deg, ${c.primary}, ${c.secondary})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:b?"Session in progress":"Planning session active"})]})]})})},Lt=({isManualMode:t,onToggle:i,isConnected:l=!1})=>{const n=t?"Manual review is ON (paused). Click to resume auto-sending screenshots.":"Auto-sending is ON. Click to pause and review screenshots manually.";return l?e.jsx("button",{type:"button",onClick:i,className:`w-12 h-12 sm:w-14 sm:h-14 rounded-xl bg-[#1A1A1A]/60 border backdrop-blur-sm flex items-center justify-center transition-all duration-300 hover:bg-[#2A2A2A]/80 hover:scale-105 active:scale-95 ${t?"text-yellow-400 bg-yellow-500/10 border-yellow-500/30 hover:border-yellow-500/40":"text-emerald-400 bg-emerald-500/10 border-emerald-500/30 hover:border-emerald-500/40"}`,"aria-pressed":t,"aria-label":t?"Resume auto-sending screenshots":"Pause and review screenshots",title:n,children:t?e.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M8 5v14l11-7z"})}):e.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"})})}):null},Bt=Re.memo(Lt),Dt=({isConnected:t,isProcessing:i,isManualUploadMode:l,onRequestConnect:n,usage:d,onFirstUse:m})=>{const[x,o]=s.useState("single"),[j,b]=s.useState(!1),c=s.useRef(null),f=s.useRef(null),N=s.useRef(null),[T,g]=s.useState(!1),[p,A]=s.useState({top:0,right:0}),C=(d==null?void 0:d.tier)==="pro"||(d==null?void 0:d.tier)==="vanguard_pro",L=(d==null?void 0:d.tier)==="free";s.useEffect(()=>{const w=localStorage.getItem("otakon_screenshot_mode");w==="single"||w==="multi"&&C?o(w):w==="multi"&&!C&&(o("single"),localStorage.setItem("otakon_screenshot_mode","single")),g(!1)},[C]);const F=w=>{w==="multi"&&!C||(o(w),localStorage.setItem("otakon_screenshot_mode",w),b(!1))};s.useEffect(()=>{const w=H=>{c.current&&(c.current.contains(H.target)||b(!1))};return j&&document.addEventListener("mousedown",w,{passive:!0}),()=>document.removeEventListener("mousedown",w)},[j]);const $=w=>{if(f.current){const H=f.current.getBoundingClientRect();A({top:H.top-10,right:window.innerWidth-H.right})}b(!0)},k=w=>{if(w.preventDefault(),w.stopPropagation(),!t){n==null||n();return}$()},v=w=>{if(w.button===2){if(w.preventDefault(),w.stopPropagation(),!t){n==null||n();return}$()}},E=()=>{N.current&&window.clearTimeout(N.current),N.current=window.setTimeout(()=>{if(!t){n==null||n();return}$()},1750)},P=()=>{N.current&&(window.clearTimeout(N.current),N.current=null)},me=async()=>{if(!t){n==null||n();return}if(i)return;if(!(localStorage.getItem("otakon_screenshot_info_seen")==="true")&&m){m();return}if(x==="multi"&&!C)return;const _={type:"screenshot_request",mode:x,processImmediate:l?!1:x==="single"};x==="multi"&&(_.count=5),typeof Qe=="function"&&Qe(_)},se=()=>{if(!C){b(!1);return}F("multi")};return e.jsxs("div",{ref:c,className:"relative z-[200]",children:[e.jsx("button",{ref:f,type:"button",onClick:me,onContextMenu:k,onMouseDown:v,onTouchStart:E,onTouchEnd:P,onTouchCancel:P,"aria-disabled":!t||i,className:`w-12 h-12 sm:w-14 sm:h-14 rounded-xl bg-[#1A1A1A]/60 backdrop-blur-sm flex items-center justify-center transition-all duration-300 ${t?"text-emerald-400 bg-emerald-500/10 border border-emerald-500/30 hover:bg-[#2A2A2A]/80 hover:border-emerald-500/40 hover:scale-105":"border border-[#333]/50 text-[#8A8A8A] opacity-70 cursor-pointer hover:opacity-90 hover:border-[#444]/60"} ${i?"opacity-60 cursor-wait":""} active:scale-95`,title:t?"Screenshot (right-click/long-press to change mode)":"Connect your PC to enable screenshots",children:x==="single"?e.jsxs("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[e.jsx("rect",{x:"3",y:"4",width:"18",height:"12",rx:"2"}),e.jsx("path",{d:"M8 20h8"}),e.jsx("path",{d:"M7 7h3M7 10h3M14 7h3"}),e.jsx("path",{d:"M4 3v4M4 3h4"})]}):e.jsxs("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[e.jsx("rect",{x:"4",y:"5",width:"14",height:"9",rx:"2"}),e.jsx("rect",{x:"6",y:"10",width:"14",height:"9",rx:"2"}),e.jsx("path",{d:"M10 22h6"})]})}),T&&t&&e.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 mt-3 top-full text-xs text-[#CFCFCF] bg-[#101010]/95 border border-[#424242]/60 rounded-lg px-3 py-2 shadow-lg whitespace-nowrap z-50",children:e.jsx("button",{type:"button",onClick:()=>{g(!1),localStorage.setItem("otakon_screenshot_hint_seen","1")},className:"w-full h-full",children:"Press & hold (1.75s) or right-click to change mode"})}),j&&t&&ze.createPortal(e.jsxs("div",{className:"fixed bg-[#101010]/98 border border-[#424242]/60 rounded-xl shadow-2xl min-w-[200px] overflow-hidden backdrop-blur-md animate-fade-in",style:{top:`${p.top}px`,right:`${p.right}px`,zIndex:9999,transform:"translateY(-100%)"},children:[e.jsxs("button",{onClick:()=>F("single"),className:`w-full text-left px-4 py-3 hover:bg-[#2E2E2E]/60 transition-colors ${x==="single"?"text-emerald-400":"text-[#CFCFCF]"}`,children:["ðŸ“¸ Single Shot ",x==="single"?"âœ“":""]}),e.jsx("button",{onClick:se,className:`w-full text-left px-4 py-3 transition-all duration-200 ${C?`hover:bg-[#2E2E2E]/60 ${x==="multi"?"text-emerald-400":"text-[#CFCFCF]"}`:"text-[#666666] cursor-not-allowed opacity-60"}`,disabled:!C,children:C?e.jsxs(e.Fragment,{children:["ðŸ“¸ Multi Shot (5) ",x==="multi"?"âœ“":""]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"ðŸ”’ Multi Shot (5)"}),e.jsx("span",{className:"text-xs bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white px-2 py-1 rounded-full",children:"PRO"})]})}),L&&e.jsx("div",{className:"px-4 py-2 text-xs text-[#999999] border-t border-[#424242]/40",children:"Upgrade to Pro for batch screenshots"})]}),document.body)]})},rt=({className:t})=>e.jsx("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),lt=({className:t})=>{const[i,l]=s.useState(tt("/images/otagon-logo.png")),n=()=>{l(tt("/images/mascot/11.png"))};return e.jsx("div",{className:`${t} rounded-full bg-[#1C1C1C] border border-[#333] flex items-center justify-center`,"aria-label":"AI Avatar",children:e.jsx("img",{src:i,alt:"AI Avatar",className:"w-[70%] h-[70%] object-contain",onError:n,"data-no-viewer":"true"})})},Mt=({variant:t="dots",showText:i=!0,className:l=""})=>t==="dots"?e.jsx(At,{className:l}):t==="skeleton"?e.jsxs("div",{className:`flex flex-col gap-3 py-3 px-4 ${l}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-[#FF4D4D] to-[#FFAB40] rounded-full animate-pulse"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-3 bg-gradient-to-r from-[#FF4D4D]/20 to-[#FFAB40]/20 rounded animate-pulse",style:{width:"60%"}}),e.jsx("div",{className:"h-3 bg-gradient-to-r from-[#FFAB40]/20 to-[#5CBB7B]/20 rounded animate-pulse",style:{width:"80%"}})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gradient-to-r from-[#5CBB7B]/20 to-[#FF4D4D]/20 rounded animate-pulse"}),e.jsx("div",{className:"h-4 bg-gradient-to-r from-[#FF4D4D]/20 to-[#FFAB40]/20 rounded animate-pulse",style:{width:"70%"}}),e.jsx("div",{className:"h-4 bg-gradient-to-r from-[#FFAB40]/20 to-[#5CBB7B]/20 rounded animate-pulse",style:{width:"90%"}})]}),i&&e.jsx("span",{className:"text-sm text-[#A3A3A3] font-medium",children:"AI is thinking..."})]}):t==="wave"?e.jsxs("div",{className:`flex items-center gap-3 py-3 px-4 ${l}`,children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-1 h-4 bg-[#FF4D4D] rounded-full animate-pulse",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-1 h-4 bg-[#FFAB40] rounded-full animate-pulse",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-1 h-4 bg-[#5CBB7B] rounded-full animate-pulse",style:{animationDelay:"300ms"}}),e.jsx("div",{className:"w-1 h-4 bg-[#FF4D4D] rounded-full animate-pulse",style:{animationDelay:"450ms"}})]}),i&&e.jsx("span",{className:"text-sm text-[#A3A3A3] font-medium",children:"AI is thinking..."})]}):t==="circular"?e.jsxs("div",{className:`flex items-center gap-3 py-3 px-4 ${l}`,children:[e.jsxs("div",{className:"relative w-8 h-8",children:[e.jsx("div",{className:"absolute inset-0 w-8 h-8 border-2 border-[#424242]/30 rounded-full"}),e.jsx("div",{className:"absolute inset-0 w-8 h-8 border-2 border-transparent border-t-[#E53A3A] border-r-[#D98C1F] border-b-transparent rounded-full animate-spin"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-gradient-to-r from-[#FF4D4D] to-[#FFAB40] rounded-full animate-pulse"})})]}),i&&e.jsx("span",{className:"text-sm text-[#A3A3A3] font-medium",children:"AI is thinking..."})]}):null,Tt=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:t,"aria-hidden":"true",children:e.jsx("path",{d:"M12 4L4 12h5v8h6v-8h5L12 4z"})}),$t=({className:t})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:t,"aria-hidden":"true",children:e.jsx("rect",{x:"6",y:"6",width:"12",height:"12",rx:"2"})});class Ht extends s.Component{constructor(l){super(l);Je(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(l){return{hasError:!0,error:l,errorInfo:null}}componentDidCatch(l,n){console.error("ðŸš¨ [ErrorBoundary] Caught error:",l),console.error("ðŸš¨ [ErrorBoundary] Error info:",n),this.setState({error:l,errorInfo:n})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-[#111111] to-[#0A0A0A] flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-[#1C1C1C] border border-[#424242] rounded-xl p-6 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"âš ï¸"}),e.jsx("h1",{className:"text-2xl font-bold text-[#F5F5F5] mb-2",children:"Something Went Wrong"}),e.jsx("p",{className:"text-[#CFCFCF] mb-4",children:"We encountered an unexpected error. Don't worry, your data is safe."}),this.state.error&&e.jsxs("div",{className:"bg-[#2E2E2E] rounded-lg p-4 mb-4 text-left",children:[e.jsx("p",{className:"text-xs font-mono text-[#FF4D4D] mb-2",children:this.state.error.toString()}),this.state.errorInfo&&e.jsxs("details",{className:"text-xs text-[#A3A3A3]",children:[e.jsx("summary",{className:"cursor-pointer hover:text-[#CFCFCF] transition-colors",children:"Error Details"}),e.jsx("pre",{className:"mt-2 overflow-auto max-h-40",children:this.state.errorInfo.componentStack})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:this.handleReset,className:"flex-1 px-4 py-2 bg-gradient-to-r from-[#FF4D4D] to-[#FFAB40] text-white rounded-lg font-semibold hover:scale-105 transition-transform",children:"Try Again"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"flex-1 px-4 py-2 bg-[#2E2E2E] text-[#CFCFCF] rounded-lg font-semibold hover:bg-[#424242] transition-colors",children:"Reload Page"})]})]})}):this.props.children}}const It=({isLatestMessage:t=!1})=>{const[i,l]=s.useState(()=>Ce.isSpeaking()),[n,d]=s.useState(!1);s.useEffect(()=>{const j=()=>l(!0),b=()=>{l(!1),d(!1)},c=()=>d(!0),f=()=>d(!1);return window.addEventListener("otakon:ttsStarted",j),window.addEventListener("otakon:ttsStopped",b),window.addEventListener("otakon:ttsPaused",c),window.addEventListener("otakon:ttsResumed",f),()=>{window.removeEventListener("otakon:ttsStarted",j),window.removeEventListener("otakon:ttsStopped",b),window.removeEventListener("otakon:ttsPaused",c),window.removeEventListener("otakon:ttsResumed",f)}},[]);const m=()=>{n?Ce.resume():Ce.pause()},x=async()=>{await Ce.restart()},o=()=>{Ce.cancel()};return!i||!t?null:e.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-[#424242]/30",children:[e.jsx("span",{className:"text-xs text-[#A3A3A3] mr-1",children:"ðŸ”Š Speaking"}),e.jsx("button",{onClick:m,className:"flex items-center justify-center gap-1.5 px-3 py-1.5 bg-[#2E2E2E] hover:bg-[#3E3E3E] border border-[#424242] text-[#FFAB40] text-xs font-medium rounded-lg transition-all duration-200",title:n?"Resume":"Pause",children:n?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M8 5v14l11-7z"})}),e.jsx("span",{children:"Resume"})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"})}),e.jsx("span",{children:"Pause"})]})}),e.jsxs("button",{onClick:x,className:"flex items-center justify-center gap-1.5 px-3 py-1.5 bg-[#2E2E2E] hover:bg-[#3E3E3E] border border-[#424242] text-[#FFAB40] text-xs font-medium rounded-lg transition-all duration-200",title:"Restart from beginning",children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:"2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),e.jsx("span",{children:"Repeat"})]}),e.jsxs("button",{onClick:o,className:"flex items-center justify-center gap-1.5 px-3 py-1.5 bg-[#2E2E2E] hover:bg-[#3E3E3E] border border-[#424242] text-red-400 text-xs font-medium rounded-lg transition-all duration-200",title:"Stop speaking",children:[e.jsx("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M6 6h12v12H6z"})}),e.jsx("span",{children:"Stop"})]})]})},zt=({prompts:t,onPromptClick:i,isLoading:l,conversationId:n=""})=>{const[d,m]=s.useState(!1),[x,o]=s.useState(!0),[j,b]=s.useState(new Set),f=(n==="game-hub"||n==="everything-else")&&t.length===Fe.length&&t.every((g,p)=>g===Fe[p]),N=f?Fe:t;s.useEffect(()=>{const g=window.matchMedia("(max-width: 640px)"),p=()=>{m(g.matches),o(!0)};return p(),g.addEventListener("change",p),()=>g.removeEventListener("change",p)},[]),s.useEffect(()=>{if(f){const g=new Set(Fe.filter(p=>$e.isPromptUsed(p)));b(g)}},[f,N]);const T=g=>{f&&($e.markPromptAsUsed(g),b(p=>new Set([...p,g]))),i(g)};return l||N.length===0||f&&$e.areAllPromptsUsed(Fe)?null:e.jsxs("div",{className:"pt-3 animate-fade-in",children:[d&&f&&e.jsxs("button",{type:"button","aria-expanded":x,onClick:()=>o(g=>!g),className:"w-full flex items-center justify-between px-3 py-2 rounded-lg border border-[#424242]/40 bg-[#1C1C1C]/60 text-[#E5E5E5] text-sm font-medium mb-2",children:[e.jsx("span",{children:"Gaming News Suggestions"}),e.jsx("svg",{className:`w-4 h-4 transition-transform ${x?"rotate-180":""}`,viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.24a.75.75 0 01-1.06 0L5.25 8.29a.75.75 0 01-.02-1.08z",clipRule:"evenodd"})})]}),(!d||x)&&e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3",children:N.map((g,p)=>{const A=f&&j.has(g);return e.jsx("button",{onClick:()=>!A&&T(g),disabled:A,className:`text-left p-3 sm:p-4 border rounded-lg sm:rounded-xl transition-all duration-200 backdrop-blur-sm ${A?"bg-[#2A2A2A]/60 border-[#555555]/30 text-[#888888] cursor-not-allowed opacity-70":"bg-[#1C1C1C]/60 border-[#424242]/40 text-[#CFCFCF] hover:bg-[#E53A3A]/20 hover:border-[#E53A3A]/60 hover:scale-[1.02] active:scale-95"}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("p",{className:`font-medium text-xs sm:text-sm leading-relaxed flex-1 ${A?"text-[#888888]":"text-[#CFCFCF]"}`,children:g}),A&&e.jsx("span",{className:"text-[#5CBB7B] text-sm flex-shrink-0","aria-label":"Used",children:"âœ“"})]})},p)})})]})},Rt=({isActive:t,onClick:i,disabled:l=!1})=>{const n=!t;return e.jsx("button",{onClick:i,disabled:l,className:`
        w-14 h-14 rounded-full flex items-center justify-center
        transition-all duration-300 hover:scale-110 active:scale-95
        ${l?"opacity-50 cursor-not-allowed":"cursor-pointer"}
      `,style:{background:n?"linear-gradient(135deg, #FF4D4D 0%, #8B0000 100%)":"linear-gradient(135deg, #3B82F6 0%, #1E3A8A 100%)",boxShadow:n?"0 4px 20px rgba(0, 0, 0, 0.5), 0 8px 32px rgba(239, 68, 68, 0.4)":"0 4px 20px rgba(0, 0, 0, 0.5), 0 8px 32px rgba(59, 130, 246, 0.4)"},title:n?"Currently Playing - Click to switch to Planning":"Currently Planning - Click to switch to Playing",children:n?e.jsx("svg",{className:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M8 5v14l11-7z"})}):e.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})},Pt=({isEnabled:t,aiMessagesQuota:i,onToggle:l,onQuotaExceeded:n})=>{const d=i>0,m=()=>{if(!d){n();return}l()};return e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:m,className:`w-12 h-12 sm:w-14 sm:h-14 rounded-xl bg-[#1A1A1A]/60 border border-[#333]/50 backdrop-blur-sm flex items-center justify-center transition-all duration-300 hover:bg-[#2A2A2A]/80 hover:border-[#444]/60 hover:scale-105 active:scale-95 ${d?t?"text-emerald-400 bg-emerald-500/10 border-emerald-500/30":"text-[#888] hover:text-[#F5F5F5]":"text-gray-500"}`,title:d?t?`Web search enabled (${i} searches left)`:`Web search disabled (${i} searches available)`:"No web search quota available - Click to view limits",children:e.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})})}),e.jsx("div",{className:"absolute -top-1 -right-1 min-w-[20px] h-5 px-1.5 rounded-full flex items-center justify-center text-[10px] font-bold bg-[#E53A3A] text-white",children:i})]})},de=({className:t="",variant:i="text",animation:l="pulse"})=>{const n="bg-surface-light",d={text:"h-4 rounded",circular:"rounded-full",rectangular:"rounded-lg"},m={pulse:"animate-pulse",wave:"animate-shimmer bg-gradient-to-r from-surface-light via-surface to-surface-light bg-[length:200%_100%]",none:""};return e.jsx("div",{className:`
        ${n} 
        ${d[i]} 
        ${m[l]}
        ${t}
      `,"aria-label":"Loading..."})},Ie=()=>e.jsxs("div",{className:"flex gap-3 p-4",children:[e.jsx(de,{variant:"circular",className:"w-8 h-8 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(de,{className:"h-3 w-20"}),e.jsx(de,{className:"h-4 w-full"}),e.jsx(de,{className:"h-4 w-5/6"}),e.jsx(de,{className:"h-4 w-4/6"})]})]}),at=()=>e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"border-b border-surface-light p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(de,{className:"h-6 w-32"}),e.jsx(de,{variant:"circular",className:"w-8 h-8"})]})}),e.jsxs("div",{className:"flex-1 overflow-hidden p-4 space-y-4",children:[e.jsx(Ie,{}),e.jsx(Ie,{}),e.jsx(Ie,{})]}),e.jsx("div",{className:"border-t border-surface-light p-4",children:e.jsx(de,{className:"h-12 w-full rounded-full"})})]}),Wt=()=>e.jsxs("div",{className:"mb-4 px-3 py-4 rounded-lg bg-[#1C1C1C]/60 border border-[#FF4D4D]/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-[#FF4D4D]",children:"âš ï¸"}),e.jsx("span",{className:"text-sm font-semibold text-[#FF4D4D]",children:"Failed to Load Insights"})]}),e.jsx("p",{className:"text-xs text-[#A3A3A3]",children:"There was an error loading game insights. You can still chat normally."})]}),Gt=({message:t,suggestedPrompts:i,onSuggestedPromptClick:l,isLoading:n,conversationId:d,onDownloadImage:m,onDeleteQueuedMessage:x,onEditMessage:o,onFeedback:j,onRetryMessage:b,isLatestAIMessage:c=!1})=>{const[f,N]=s.useState(null),[T,g]=s.useState(0),[p,A]=s.useState(null),C=s.useCallback(()=>{N(null),g(0)},[]),L=s.useCallback(()=>{g(v=>v===270?0:v+90)},[]),F=t.role==="assistant"?St(t.content):null,$=v=>{if(v==="up"){if(p==="up")return;A("up")}j==null||j(t.id,v,v==="down"?t.content:void 0)},k=v=>{A(v)};return s.useEffect(()=>{const v=document.querySelector(`[data-message-id="${t.id}"]`);return v&&(v.dataset.confirmFeedback="ready",v.__confirmFeedback=k),()=>{v&&delete v.__confirmFeedback}},[t.id]),F?e.jsx("div",{className:"flex flex-col items-start w-full","data-message-id":t.id,children:e.jsx(Et,{...F},t.id)}):e.jsxs(e.Fragment,{children:[f&&e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/95 backdrop-blur-sm",onClick:C,children:[e.jsx("button",{onClick:C,className:"absolute top-2 right-2 sm:top-4 sm:right-4 z-10 w-10 h-10 flex items-center justify-center bg-[#1C1C1C]/80 border border-[#424242] rounded-full text-white hover:bg-[#2C2C2C] transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("button",{onClick:v=>{v.stopPropagation(),L()},className:"absolute top-2 left-2 sm:top-4 sm:left-4 z-10 w-10 h-10 flex items-center justify-center bg-[#1C1C1C]/80 border border-[#424242] rounded-full text-white hover:bg-[#2C2C2C] transition-colors",title:"Rotate image (R)",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),e.jsxs("button",{onClick:v=>{v.stopPropagation(),m(f,0)},className:"absolute bottom-4 left-1/2 -translate-x-1/2 z-10 flex items-center gap-2 px-4 py-2 bg-[#FF4D4D] text-white text-sm font-medium rounded-lg hover:bg-[#E53A3A] transition-colors",children:[e.jsx(rt,{className:"w-4 h-4"}),"Download"]}),e.jsx(Ae.img,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1,rotate:T},transition:{type:"spring",stiffness:300,damping:25},src:f,alt:"Full size",className:`object-contain ${T===90||T===270?"max-h-[100vw] max-w-[100vh]":"max-w-[100vw] max-h-[100vh]"}`,onClick:v=>v.stopPropagation()})]}),e.jsxs("div",{className:`flex flex-col ${t.role==="user"?"items-end":"items-start"}`,"data-message-id":t.id,children:[e.jsx("div",{className:`${t.role==="user"?"max-w-[75%] sm:max-w-[80%] chat-message-user":"max-w-[85%] sm:max-w-[85%] chat-message-ai"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[t.role==="assistant"&&e.jsx("div",{className:"flex-shrink-0",children:e.jsx(lt,{className:"w-8 h-8 sm:w-9 sm:h-9 flex-shrink-0"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[t.imageUrl&&e.jsxs("div",{className:"chat-image-container mb-3",children:[e.jsxs("div",{className:"relative inline-block cursor-pointer group",onClick:()=>N(t.imageUrl||null),children:[e.jsx("img",{src:t.imageUrl,alt:"Uploaded",className:"w-64 h-48 sm:w-80 sm:h-60 object-cover rounded-lg border border-[#424242]/50 hover:border-[#FF4D4D]/50 transition-colors"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/0 group-hover:bg-black/30 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-8 h-8 text-white opacity-0 group-hover:opacity-100 transition-opacity",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})})})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[e.jsx("p",{className:"text-[10px] text-[#A3A3A3]",children:"Click to view full size"}),e.jsxs("button",{onClick:v=>{v.stopPropagation(),m(t.imageUrl||"",0)},className:"flex items-center gap-1.5 px-2 py-1 text-[10px] text-[#FF4D4D] border border-[#FF4D4D]/50 rounded hover:bg-[#FF4D4D]/10 transition-colors",children:[e.jsx(rt,{className:"w-3 h-3"}),"Download"]})]})]}),e.jsx(nt,{content:t.content,variant:"chat",className:"text-[#F5F5F5] leading-relaxed"}),t.role==="assistant"&&e.jsx(It,{isLatestMessage:c}),t.role==="assistant"&&c&&i.length>0&&l&&!n&&e.jsx("div",{className:"mt-4",children:e.jsx(zt,{prompts:i,onPromptClick:l,isLoading:n,conversationId:d})}),e.jsx("p",{className:"text-xs text-[#A3A3A3] mt-2",children:new Date(t.timestamp).toLocaleTimeString()}),t.id.startsWith("msg_pending_")&&x&&e.jsxs("button",{onClick:()=>x(t.id),className:"flex items-center gap-1 px-2 py-0.5 mt-2 text-xs text-[#FF4D4D] border border-[#FF4D4D]/50 rounded hover:bg-[#FF4D4D]/10 transition-colors",title:"Remove from queue",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Remove"]})]})]})}),t.role==="user"&&!t.id.startsWith("msg_pending_")&&o&&e.jsx("div",{className:"flex justify-end mt-1.5 mr-1",children:e.jsx("button",{onClick:()=>{const v=t.content.replace(/\n\n_â³ Queued.*_$/,"");o(t.id,v,t.imageUrl)},className:"flex items-center justify-center w-7 h-7 text-[#666] active:text-[#FF4D4D] active:bg-[#FF4D4D]/10 sm:hover:text-[#FF4D4D] sm:hover:bg-[#FF4D4D]/10 rounded-full",title:"Edit and resubmit",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})}),t.role==="assistant"&&j&&!n&&e.jsxs("div",{className:"flex items-center justify-start gap-1.5 mt-1.5 ml-11 sm:ml-12",children:[e.jsx("button",{onClick:()=>$("up"),disabled:p!==null,className:`flex items-center justify-center w-7 h-7 rounded-full transition-colors ${p==="up"?"text-green-500 bg-green-500/15":p==="down"?"text-[#444] cursor-not-allowed":"text-[#666] active:text-green-500 active:bg-green-500/10 sm:hover:text-green-500 sm:hover:bg-green-500/10"}`,title:p?p==="up"?"You liked this":"Feedback given":"Good response",children:e.jsx("svg",{className:"w-4 h-4 flex-shrink-0",viewBox:"0 0 24 24",fill:p==="up"?"currentColor":"none",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.633 10.25c.806 0 1.533-.446 2.031-1.08a9.041 9.041 0 0 1 2.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 0 0 .322-1.672V2.75a.75.75 0 0 1 .75-.75 2.25 2.25 0 0 1 2.25 2.25c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282m0 0h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 0 1-2.649 7.521c-.388.482-.987.729-1.605.729H13.48c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 0 0-1.423-.23H5.904m10.598-9.75H14.25M5.904 18.5c.083.205.173.405.27.602.197.4-.078.898-.523.898h-.908c-.889 0-1.713-.518-1.972-1.368a12 12 0 0 1-.521-3.507c0-1.553.295-3.036.831-4.398C3.387 9.953 4.167 9.5 5 9.5h1.053c.472 0 .745.556.5.96a8.958 8.958 0 0 0-1.302 4.665c0 1.194.232 2.333.654 3.375Z"})})}),e.jsx("button",{onClick:()=>$("down"),disabled:p!==null,className:`flex items-center justify-center w-7 h-7 rounded-full transition-colors ${p==="down"?"text-red-500 bg-red-500/15":p==="up"?"text-[#444] cursor-not-allowed":"text-[#666] active:text-red-500 active:bg-red-500/10 sm:hover:text-red-500 sm:hover:bg-red-500/10"}`,title:p?p==="down"?"You disliked this":"Feedback given":"Poor response",children:e.jsx("svg",{className:"w-4 h-4 flex-shrink-0",viewBox:"0 0 24 24",fill:p==="down"?"currentColor":"none",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.498 15.25H4.372c-1.026 0-1.945-.694-2.054-1.715a12.137 12.137 0 0 1-.068-1.285c0-2.848.992-5.464 2.649-7.521C5.287 4.247 5.886 4 6.504 4h4.016a4.5 4.5 0 0 1 1.423.23l3.114 1.04a4.5 4.5 0 0 0 1.423.23h1.294M7.498 15.25c.618 0 .991.724.725 1.282A7.471 7.471 0 0 0 7.5 19.5a2.25 2.25 0 0 0 2.25 2.25.75.75 0 0 0 .75-.75v-.633c0-.573.11-1.14.322-1.672.304-.76.93-1.33 1.653-1.715a9.04 9.04 0 0 0 2.86-2.4c.498-.634 1.226-1.08 2.032-1.08h.384m-10.253 1.5H9.7m8.075-9.75c.01.05.027.1.05.148.593 1.2.925 2.55.925 3.977 0 1.487-.36 2.89-.999 4.125m.023-8.25c-.076-.365.183-.75.575-.75h.908c.889 0 1.713.518 1.972 1.368.339 1.11.521 2.287.521 3.507 0 1.553-.295 3.036-.831 4.398-.306.774-1.086 1.227-1.918 1.227h-1.053c-.472 0-.745-.556-.5-.96.417-.66.778-1.378 1.07-2.128.426-1.1.654-2.224.654-3.375a9.116 9.116 0 0 0-1.4-4.887Z"})})}),b&&c&&e.jsx("button",{onClick:b,className:"flex items-center justify-center w-7 h-7 rounded-full transition-colors text-[#666] active:text-[#FF4D4D] active:bg-[#FF4D4D]/10 sm:hover:text-[#FF4D4D] sm:hover:bg-[#FF4D4D]/10",title:"Retry this message",children:e.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]})]})]})},it=s.memo(Gt,(t,i)=>{const l=t.suggestedPrompts[0]||"",n=i.suggestedPrompts[0]||"";return t.message.id===i.message.id&&t.message.content===i.message.content&&t.message.timestamp===i.message.timestamp&&t.isLoading===i.isLoading&&t.suggestedPrompts.length===i.suggestedPrompts.length&&l===n&&t.onDeleteQueuedMessage===i.onDeleteQueuedMessage&&t.onEditMessage===i.onEditMessage&&t.onFeedback===i.onFeedback&&t.onRetryMessage===i.onRetryMessage&&t.isLatestAIMessage===i.isLatestAIMessage});it.displayName="MemoizedChatMessage";const Qt=({conversation:t,onSendMessage:i,isLoading:l,isPCConnected:n=!1,onRequestConnect:d,userTier:m="free",onStop:x,isManualUploadMode:o=!1,onToggleManualUploadMode:j,onScreenshotFirstUse:b,isGroundingEnabled:c=!0,onToggleGrounding:f,onRequestGroundingConfirmation:N,aiMessagesQuota:T=0,onGroundingQuotaExceeded:g,suggestedPrompts:p=[],onSuggestedPromptClick:A,activeSession:C,onToggleActiveSession:L,initialMessage:F="",onMessageChange:$,queuedImages:k=[],onImagesQueued:v,onRemoveQueuedImage:E,isSidebarOpen:P=!1,onDeleteQueuedMessage:me,onEditMessage:se,onFeedback:w,onRetryLastMessage:H,onModifySubtab:_,onDeleteSubtab:xe,onRetrySubtab:pe,onCreateCustomSubtab:Se,onOpenExplorer:fe,aiModeEnabled:K,onAiModeToggle:re,isPro:ae=!1,forceExpandSubtabs:X=!1,onResetForceExpandSubtabs:he})=>{var Ke,Xe,Ze;const[B,I]=s.useState(F),[z,ne]=s.useState(null),[R,ue]=s.useState(null),[be,D]=s.useState(null),[je,ve]=s.useState(0),[Ee,we]=s.useState(!1),[ye,U]=s.useState(!1),[Z,Le]=s.useState([]),[J,O]=s.useState(0),[Q,q]=s.useState(null),[Ne,V]=s.useState("selectTab"),[le,ee]=s.useState(!1),[a,y]=s.useState(!1),ie=s.useCallback(()=>{D(null),ve(0)},[]),S=s.useCallback(()=>{ve(r=>r===270?0:r+90)},[]),oe=s.useRef(null),ge=s.useRef(null),W=s.useRef(null),Y=s.useRef(null),Be=s.useRef(null),ke=s.useRef(0),Me=s.useRef(null),We=s.useRef(null),Ge=s.useCallback(()=>{if(!t||!ge.current)return;const r=t.messages,h=r.length;if(h===0)return;const u=r[h-1];if(t.id!==We.current){We.current=t.id,ke.current=h,Me.current=u.id;return}if(h>ke.current||h>0&&u.id!==Me.current){const M=ge.current.querySelectorAll("[data-message-id]");if(u.role==="assistant"){const ce=M[M.length-1];ce&&ce.scrollIntoView({behavior:"smooth",block:"start"})}else{const ce=M[M.length-1];ce&&ce.scrollIntoView({behavior:"smooth",block:"start"})}ke.current=h,Me.current=u.id}},[t]),_e=()=>{const r=Y.current;if(r){r.style.height="auto";const G=r.scrollHeight,te=Math.min(Math.max(G,44),120);r.style.height=`${te}px`}},ot=r=>{const h=r.target.value;if(I(h),_e(),$==null||$(h),t&&h==="@"){const u=qe.getAvailableTabNames(t);u.length>0?(Le(u),U(!0),O(0),V("selectTab"),q(null)):U(!1)}else if(t&&h.startsWith("@")&&!h.includes(" /")){const u=qe.getAvailableTabNames(t),G=h.slice(1).toLowerCase(),te=u.filter(M=>M.title.toLowerCase().includes(G));te.length>0?(Le(te),U(!0),O(0),V("selectTab")):U(!1)}else U(!1),V("selectTab"),q(null)},Ue=r=>{q(r),V("selectCommand"),O(0)},De=r=>{var h;Q&&(r==="update"?I(`@${Q.title} `):r==="modify"?I(`@${Q.title} /modify `):r==="delete"&&I(`@${Q.title} /delete`),U(!1),V("selectTab"),q(null),(h=Y.current)==null||h.focus())},Oe=()=>{V("selectTab"),q(null),O(0)},ct=r=>{if(ye){if(Ne==="selectTab"&&Z.length>0){if(r.key==="ArrowDown"){r.preventDefault(),O(h=>h<Z.length-1?h+1:0);return}else if(r.key==="ArrowUp"){r.preventDefault(),O(h=>h>0?h-1:Z.length-1);return}else if(r.key==="Enter"&&Z[J]){r.preventDefault(),Ue(Z[J]);return}else if(r.key==="Escape"){r.preventDefault(),U(!1),V("selectTab"),q(null);return}}else if(Ne==="selectCommand"&&Q){const h=["update","modify","delete"];if(r.key==="ArrowDown"){r.preventDefault(),O(u=>u<2?u+1:0);return}else if(r.key==="ArrowUp"){r.preventDefault(),O(u=>u>0?u-1:2);return}else if(r.key==="Enter"){r.preventDefault(),De(h[J]);return}else if(r.key==="Escape"){r.preventDefault(),Oe();return}}}r.key==="Enter"&&!r.shiftKey&&(r.preventDefault(),Ye(r))},Te=(Ke=t==null?void 0:t.messages)==null?void 0:Ke.length,dt=(Ze=(Xe=t==null?void 0:t.messages)==null?void 0:Xe[Te?Te-1:0])==null?void 0:Ze.id;s.useEffect(()=>{const r=setTimeout(()=>{Ge()},200);return()=>clearTimeout(r)},[Te,dt,Ge]),s.useEffect(()=>{_e()},[B]);const Ve=s.useRef(F);s.useEffect(()=>{F!==Ve.current&&(Ve.current=F,I(F),F&&Y.current&&setTimeout(()=>{var r;(r=Y.current)==null||r.focus()},100))},[F]),s.useEffect(()=>{var r;console.log("ðŸ“¸ [ChatInterface] queuedImages prop changed:",{count:k.length,isManualUploadMode:o,firstImagePreview:(r=k[0])==null?void 0:r.substring(0,50)}),k.length>0&&o?(console.log("ðŸ‘‰ [ChatInterface] Should be displaying",k.length,"screenshots in the UI now!"),console.log("ðŸ‘‰ [ChatInterface] First image URL:",k[0].substring(0,100))):k.length===0?console.log("âš ï¸ [ChatInterface] queuedImages array is EMPTY"):o||console.log("âš ï¸ [ChatInterface] NOT in manual upload mode (PLAY mode active)")},[k,o]),s.useEffect(()=>{P&&le&&ee(!1)},[P,le]),s.useEffect(()=>{ee(!1)},[t==null?void 0:t.id]);const Ye=async r=>{r.preventDefault();const h=k.length>0;if(console.log("ðŸ“¤ [ChatInterface] Submit attempt:",{message:B.trim(),hasMessage:!!B.trim(),hasImageFile:!!z,hasImagePreview:!!R,queuedImagesCount:k.length,shouldSubmit:!(!B.trim()&&!z&&!R&&!h)}),!(!B.trim()&&!z&&!R&&!h))if(t!=null&&t.isGameHub&&ee(!1),h){console.log("ðŸ“¤ [ChatInterface] Sending",k.length,"queued screenshots"),wt.info(`Sending ${k.length} screenshot${k.length>1?"s":""}...`);const u=[...k];v==null||v(),I("");for(const G of u)await i(B||"",G)}else{const u=R||void 0;console.log("ðŸ“¤ [ChatInterface] Submitting:",{message:B,hasImage:!!u,imageUrl:(u==null?void 0:u.substring(0,50))+"..."}),I(""),ne(null),ue(null),W.current&&(W.current.value=""),await i(B,u)}},mt=r=>{var u;const h=(u=r.target.files)==null?void 0:u[0];if(h){ne(h);const G=new FileReader;G.onload=te=>{var ce;const M=(ce=te.target)==null?void 0:ce.result;console.log("ðŸ“¸ [ChatInterface] Image preview created:",{hasResult:!!M,resultLength:M==null?void 0:M.length,resultStart:(M==null?void 0:M.substring(0,50))+"..."}),ue(M)},G.readAsDataURL(h)}},xt=()=>{ne(null),ue(null),W.current&&(W.current.value="")},ht=()=>{j==null||j()},ut=(r,h)=>{try{const u=document.createElement("a");u.href=r;const G=new Date().toISOString().slice(0,19).replace(/:/g,"-"),te=`otakon-screenshot-${h+1}-${G}.png`;u.download=te,document.body.appendChild(u),u.click(),document.body.removeChild(u)}catch(u){console.error("Failed to download image:",u),window.open(r,"_blank")}};return t?t?e.jsxs("div",{className:"h-full bg-background flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex-1 flex flex-col min-h-0 relative",children:[e.jsxs("div",{ref:ge,className:`flex-1 p-3 sm:p-5 space-y-3 sm:space-y-5 min-h-0 overflow-y-auto custom-scrollbar ${t.messages.length===0?"overflow-y-hidden flex items-center justify-center":""} ${t.isGameHub&&t.messages.length>0?"pb-24":""}`,children:[t.messages.length===0?e.jsx("div",{className:"flex items-center justify-center h-full w-full pb-32",children:e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:"/images/mascot/4.png",alt:"Otagon Mascot",className:"w-32 h-32 sm:w-40 sm:h-40 md:w-48 md:h-48 object-contain aspect-square mx-auto mb-4",onError:r=>{const h=r.target;h.style.display="none"}}),e.jsxs("p",{className:"text-text-muted text-lg",children:["Start a conversation with ",e.jsx("span",{className:"bg-gradient-to-r from-[#FF4D4D] to-[#FFAB40] bg-clip-text text-transparent font-semibold",children:"Otagon"})]}),e.jsx("p",{className:"text-text-muted text-sm mt-2",children:"Ask me anything about gaming, strategies, or tips. You can also start uploading gameplay screenshots for help!"})]})}):(()=>{var h;const r=(h=[...t.messages].reverse().find(u=>u.role==="assistant"))==null?void 0:h.id;return t.messages.map(u=>e.jsx(it,{message:u,suggestedPrompts:u.role==="assistant"?p:[],onSuggestedPromptClick:A,isLoading:l,conversationId:t==null?void 0:t.id,onDownloadImage:ut,onDeleteQueuedMessage:me,onEditMessage:se,onFeedback:w,onRetryMessage:u.id===r?H:void 0,isLatestAIMessage:u.id===r},u.id))})(),l&&e.jsx("div",{className:"flex justify-start",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(lt,{className:"w-8 h-8 sm:w-9 sm:h-9 flex-shrink-0"}),e.jsx(Mt,{variant:"dots",showText:!1})]})}),t.messages.length>0&&e.jsx("div",{className:"min-h-[120px] flex-shrink-0","aria-hidden":"true"}),e.jsx("div",{ref:oe})]}),(t==null?void 0:t.isGameHub)&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 mx-3 pb-1.5 z-40 pointer-events-none",children:e.jsxs("div",{className:"pointer-events-auto relative",children:[e.jsxs("button",{onClick:()=>ee(!le),className:"w-full flex items-center justify-between mb-2 py-2 px-3 rounded-lg bg-[#1C1C1C] hover:bg-[#252525] border border-[#424242]/30 hover:border-[#424242]/60 transition-all duration-200 relative z-10",children:[e.jsx("div",{className:`text-xs font-semibold uppercase tracking-wider transition-all duration-200 ${le?"bg-gradient-to-r from-[#FF4D4D] to-[#FFAB40] bg-clip-text text-transparent":"text-[#A3A3A3]"}`,children:"Latest Gaming News"}),e.jsx("svg",{className:`w-4 h-4 transition-all duration-200 ${le?"rotate-180 text-[#FF4D4D]":"text-[#A3A3A3]"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),le&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:hidden fixed inset-0 z-40",onClick:()=>ee(!1)}),e.jsx("div",{className:"absolute bottom-full left-0 right-0 mb-2 z-50 animate-fade-in",children:e.jsx("div",{className:"grid grid-cols-2 gap-2 p-3 rounded-xl bg-[#1C1C1C]/95 backdrop-blur-md border border-[#424242]/60 shadow-2xl",children:[{text:"What's the latest gaming news?",shape:"cross"},{text:"Which games are releasing soon?",shape:"square"},{text:"What are the latest game reviews?",shape:"triangle"},{text:"Show me the hottest new game trailers.",shape:"circle"}].map(r=>e.jsxs("button",{onClick:()=>{ee(!1),!c&&N?N(r.text):A==null||A(r.text)},disabled:l,className:"group relative px-3 py-3 rounded-xl bg-gradient-to-br from-[#1C1C1C] to-[#0F0F0F] hover:from-[#252525] hover:to-[#1A1A1A] border border-[#424242]/30 hover:border-[#E53A3A]/50 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed text-left overflow-hidden min-h-[88px]",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#E53A3A]/10 to-[#FF6B35]/10 opacity-0 group-hover:opacity-100 transition-opacity duration-200"}),e.jsxs("div",{className:"relative flex flex-col items-start justify-start h-full gap-2",children:[e.jsxs("div",{className:"w-6 h-6 flex-shrink-0 flex items-center justify-center",children:[r.shape==="cross"&&e.jsx("svg",{className:"w-5 h-5 text-[#E53A3A]",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",children:e.jsx("path",{d:"M18 6L6 18M6 6l12 12"})}),r.shape==="square"&&e.jsx("svg",{className:"w-5 h-5 text-[#E53A3A]",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"1"})}),r.shape==="triangle"&&e.jsx("svg",{className:"w-5 h-5 text-[#E53A3A]",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 4L22 20H2L12 4Z"})}),r.shape==="circle"&&e.jsx("svg",{className:"w-5 h-5 text-[#E53A3A]",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:e.jsx("circle",{cx:"12",cy:"12",r:"8"})})]}),e.jsx("span",{className:"text-xs text-[#E5E5E5] font-medium group-hover:text-white transition-colors leading-tight text-left",children:r.text})]})]},r.text))})})]})]})}),t&&Nt.isGameTab(t)&&C&&!t.isUnreleased&&L&&e.jsx("div",{className:"absolute bottom-0 right-4 z-30 pointer-events-none",style:{bottom:ae?t.isGameHub?"220px":"160px":t.isGameHub?"148px":"88px"},children:e.jsx("div",{className:"pointer-events-auto",children:e.jsx(Rt,{isActive:C.isActive&&C.currentGameId===t.id,onClick:L})})}),K!==void 0&&ae&&re&&e.jsx("div",{className:"absolute bottom-0 right-4 z-20 pointer-events-none",style:{bottom:t&&t.isGameHub?"148px":"88px"},children:e.jsx("div",{className:"pointer-events-auto",children:e.jsx(Ae.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:re,className:"w-14 h-14 rounded-full flex items-center justify-center transition-all duration-300",style:{background:K?"linear-gradient(135deg, #A855F7 0%, #7C3AED 100%)":"linear-gradient(135deg, #6B7280 0%, #374151 100%)",boxShadow:K?"0 4px 20px rgba(0, 0, 0, 0.5), 0 8px 32px rgba(168, 85, 247, 0.4)":"0 4px 20px rgba(0, 0, 0, 0.5), 0 8px 32px rgba(107, 114, 128, 0.4)"},title:K?"AI Mode ON - Click to toggle":"AI Mode OFF - Click to toggle",children:e.jsxs("svg",{className:"w-6 h-6 text-white",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",ry:"2"}),e.jsx("rect",{x:"9",y:"9",width:"6",height:"6",fill:K?"currentColor":"none"}),e.jsx("line",{x1:"9",y1:"1",x2:"9",y2:"4"}),e.jsx("line",{x1:"15",y1:"1",x2:"15",y2:"4"}),e.jsx("line",{x1:"9",y1:"20",x2:"9",y2:"23"}),e.jsx("line",{x1:"15",y1:"20",x2:"15",y2:"23"}),e.jsx("line",{x1:"20",y1:"9",x2:"23",y2:"9"}),e.jsx("line",{x1:"20",y1:"14",x2:"23",y2:"14"}),e.jsx("line",{x1:"1",y1:"9",x2:"4",y2:"9"}),e.jsx("line",{x1:"1",y1:"14",x2:"4",y2:"14"})]})})})}),t&&fe&&e.jsx("div",{className:"absolute bottom-0 right-4 pb-4 z-10 pointer-events-none",style:{bottom:t.isGameHub?"60px":"0"},children:e.jsx("div",{className:"pointer-events-auto",children:e.jsx(Ae.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:fe,className:"w-14 h-14 rounded-full flex items-center justify-center transition-all duration-300",style:{background:"linear-gradient(135deg, #E53A3A 0%, #D98C1F 100%)",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.5), 0 8px 32px rgba(229, 58, 58, 0.4)"},title:"Open Gaming HQ",children:e.jsx(ft,{className:"w-6 h-6 text-white"})})})})]}),!ye&&t&&!t.isGameHub&&!t.isUnreleased&&t.subtabs&&t.subtabs.length>0&&e.jsx("div",{className:"flex-shrink-0 px-3 pb-2 z-50 relative",children:e.jsx(Ht,{fallback:e.jsx(Wt,{}),children:e.jsx(Ct,{subtabs:t.subtabs,isLoading:l,onFeedback:w,onModifyTab:_,onDeleteTab:xe,onRetrySubtab:pe,onCreateCustomSubtab:Se,onExpandedChange:r=>{y(r),!r&&X&&he&&(console.log("ðŸ“‚ [ChatInterface] User closed SubTabs - resetting forceExpand"),he())},forceExpand:X},`subtabs-${t.id}`)})}),e.jsx("div",{className:"flex-shrink-0 bg-background/95 backdrop-blur-sm",children:e.jsx("div",{className:"mx-3 mt-3 mb-4 rounded-2xl p-px transition-all duration-300",style:{background:Ee?"linear-gradient(135deg, #FF4D4D, #FFAB40)":"transparent"},children:e.jsxs("form",{onSubmit:Ye,className:"relative p-3 rounded-2xl bg-gradient-to-r from-[#1A1A1A] to-[#0F0F0F] animate-pulse-glow z-[60]",style:{background:"linear-gradient(135deg, #1A1A1A 0%, #0F0F0F 100%)",boxShadow:"0 0 20px rgba(255, 77, 77, 0.3), 0 0 40px rgba(255, 171, 64, 0.2), 0 0 60px rgba(0, 0, 0, 0.1)"},children:[ye&&e.jsxs("div",{ref:Be,className:"absolute bottom-full mb-2 left-0 right-0 bg-[#1C1C1C] border border-[#424242] rounded-xl shadow-2xl overflow-hidden",style:{zIndex:9999,backgroundColor:"#1C1C1C"},children:[Ne==="selectTab"&&Z.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-3 py-2 border-b border-[#424242]/50 bg-gradient-to-r from-[#E53A3A]/10 to-transparent",children:e.jsx("div",{className:"text-xs font-semibold text-[#E53A3A] uppercase tracking-wider",children:"ðŸ“‹ Command Centre - Select a subtab"})}),e.jsx("div",{className:"max-h-48 overflow-y-auto",children:Z.map((r,h)=>e.jsx("button",{type:"button",onClick:()=>Ue(r),className:`w-full text-left px-4 py-3 transition-colors border-b border-[#424242]/20 last:border-b-0 ${h===J?"bg-[#E53A3A]/20":"hover:bg-[#2A2A2A]"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-[#E53A3A] font-bold text-lg",children:"@"}),e.jsx("span",{className:"text-[#F5F5F5] font-medium",children:r.title})]})},r.id))}),e.jsx("div",{className:"px-3 py-2 border-t border-[#424242]/50 bg-[#1A1A1A]/80",children:e.jsxs("div",{className:"text-xs text-[#888888] flex items-center gap-4",children:[e.jsx("span",{children:"â†‘â†“ Navigate"}),e.jsx("span",{children:"Enter Select"}),e.jsx("span",{children:"Esc Cancel"})]})})]}),Ne==="selectCommand"&&Q&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-3 py-2 border-b border-[#424242]/50 bg-gradient-to-r from-[#E53A3A]/10 to-transparent",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs font-semibold text-[#E53A3A] uppercase tracking-wider",children:["ðŸ“‹ @",Q.title," - Select action"]}),e.jsx("button",{type:"button",onClick:Oe,className:"text-xs text-[#888888] hover:text-[#F5F5F5] transition-colors",children:"â† Back"})]})}),e.jsxs("div",{className:"py-1",children:[e.jsx("button",{type:"button",onClick:()=>De("update"),className:`w-full text-left px-4 py-3 transition-colors hover:bg-[#2A2A2A] ${J===0?"bg-[#E53A3A]/20":""}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-green-400 text-lg",children:"âœï¸"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-[#F5F5F5] font-medium",children:"Update"}),e.jsx("p",{className:"text-xs text-[#888888]",children:"Add new information to this tab"})]})]})}),e.jsx("button",{type:"button",onClick:()=>De("modify"),className:`w-full text-left px-4 py-3 transition-colors hover:bg-[#2A2A2A] ${J===1?"bg-[#E53A3A]/20":""}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-blue-400 text-lg",children:"ðŸ”§"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-[#F5F5F5] font-medium",children:"/modify"}),e.jsx("p",{className:"text-xs text-[#888888]",children:"Change tab name or restructure content"})]})]})}),e.jsx("button",{type:"button",onClick:()=>De("delete"),className:`w-full text-left px-4 py-3 transition-colors hover:bg-red-500/20 ${J===2?"bg-red-500/20":""}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-red-400 text-lg",children:"ðŸ—‘ï¸"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-red-400 font-medium",children:"/delete"}),e.jsx("p",{className:"text-xs text-[#888888]",children:"Remove this tab permanently"})]})]})})]}),e.jsx("div",{className:"px-3 py-2 border-t border-[#424242]/50 bg-[#1A1A1A]/80",children:e.jsxs("div",{className:"text-xs text-[#888888] flex items-center gap-4",children:[e.jsx("span",{children:"â†‘â†“ Navigate"}),e.jsx("span",{children:"Enter Select"}),e.jsx("span",{children:"Esc Back"})]})})]})]}),e.jsxs("div",{className:"relative mb-2",children:[k.length>0&&e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"flex items-center gap-2 overflow-x-auto pb-2",children:k.map((r,h)=>e.jsxs("div",{className:"relative group cursor-pointer flex-shrink-0",onClick:()=>D(r),children:[e.jsx("img",{src:r,alt:`Screenshot ${h+1}`,className:"w-24 h-24 object-cover rounded-lg border border-[#424242]/40 group-hover:border-[#FF4D4D]/50 transition-colors"}),e.jsx("div",{className:"absolute top-1 left-1 bg-black/70 text-white text-[10px] px-1.5 py-0.5 rounded",children:h+1}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/0 group-hover:bg-black/30 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})})}),e.jsx("button",{type:"button",onClick:u=>{u.stopPropagation(),E==null||E(h)},className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs hover:bg-red-600 transition-colors flex-shrink-0 z-10",children:"Ã—"})]},h))}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-xs text-[#A3A3A3]",children:[k.length," screenshot",k.length>1?"s":""," queued â€¢ Tap to preview"]}),k.length>1&&e.jsx("button",{type:"button",onClick:()=>{for(let r=k.length-1;r>=0;r--)E==null||E(r)},className:"text-xs text-[#FF4D4D] hover:text-[#FF6B6B] transition-colors",children:"Clear All"})]})]}),R&&e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[e.jsxs("div",{className:"relative group cursor-pointer",onClick:()=>D(R),children:[e.jsx("img",{src:R,alt:"Preview",className:"w-24 h-24 object-cover rounded-lg border border-[#424242]/40 group-hover:border-[#FF4D4D]/50 transition-colors"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/0 group-hover:bg-black/30 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})})}),e.jsx("button",{type:"button",onClick:r=>{r.stopPropagation(),xt()},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs hover:bg-red-600 transition-colors flex-shrink-0 z-10",children:"Ã—"})]}),e.jsxs("div",{className:"text-xs text-[#A3A3A3]",children:[e.jsx("p",{className:"font-semibold",children:"Image Ready"}),e.jsx("p",{children:"Tap to preview â€¢ Add message or send"})]})]}),e.jsx("textarea",{ref:Y,value:B,onChange:ot,onKeyDown:ct,onFocus:()=>we(!0),onBlur:()=>we(!1),placeholder:"Type your message...",className:"w-full px-4 sm:px-6 text-base text-[#F5F5F5] placeholder-[#A3A3A3] resize-none overflow-y-auto focus:outline-none disabled:opacity-60 bg-transparent border-0 rounded-xl",style:{minHeight:"44px",maxHeight:"120px",lineHeight:"44px",height:"44px",paddingTop:"10px",paddingBottom:"10px"},disabled:l,rows:1})]}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3",children:[e.jsxs("div",{className:"flex-1 flex items-center space-x-2 sm:space-x-3",children:[e.jsx("input",{type:"file",ref:W,onChange:mt,accept:"image/*",className:"hidden"}),e.jsx("button",{type:"button",onClick:()=>{var r;return(r=W.current)==null?void 0:r.click()},className:"w-12 h-12 sm:w-14 sm:h-14 rounded-xl bg-[#1A1A1A]/60 border border-[#333]/50 backdrop-blur-sm flex items-center justify-center transition-all duration-300 hover:bg-[#2A2A2A]/80 hover:border-[#444]/60 hover:scale-105 text-[#888] hover:text-[#F5F5F5] active:scale-95",children:e.jsx("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),f&&g&&e.jsx(Pt,{isEnabled:c,aiMessagesQuota:T,onToggle:f,onQuotaExceeded:g}),n&&e.jsxs(e.Fragment,{children:[e.jsx(Bt,{isManualMode:o,onToggle:ht,isConnected:n}),e.jsx(Dt,{isConnected:n,isProcessing:l,isManualUploadMode:o,onRequestConnect:d,usage:{tier:m},onFirstUse:b})]})]}),l&&x?e.jsx("button",{type:"button",onClick:x,"aria-label":"Stop generating",className:"flex items-center justify-center w-12 h-12 sm:w-14 sm:h-14 rounded-xl transition-all duration-300 bg-[#EF4444] border border-[#DC2626]/50 text-white scale-100 hover:bg-[#DC2626] hover:scale-105 hover:shadow-lg hover:shadow-[#EF4444]/30 active:scale-95",children:e.jsx($t,{className:"w-5 h-5 sm:w-6 sm:h-6"})}):e.jsx("button",{type:"submit",disabled:!B.trim()&&!z&&!R,"aria-label":"Send message",className:`flex items-center justify-center w-12 h-12 sm:w-14 sm:h-14 rounded-xl transition-all duration-300 disabled:cursor-not-allowed ${!B.trim()&&!z&&!R?"bg-[#1A1A1A]/40 border border-[#333]/30 text-[#555] scale-100":"bg-gradient-to-r from-[#FFAB40] to-[#FF8C00] border border-[#FF8C00]/50 text-[#181818] scale-100 hover:scale-105 hover:shadow-lg hover:shadow-[#FFAB40]/30 active:scale-95 font-semibold"}`,children:e.jsx(Tt,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]})]})})}),be&&e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/95 backdrop-blur-sm",onClick:ie,children:[e.jsx("button",{onClick:ie,className:"absolute top-2 right-2 sm:top-4 sm:right-4 z-10 w-10 h-10 flex items-center justify-center bg-[#1C1C1C]/80 border border-[#424242] rounded-full text-white hover:bg-[#2C2C2C] transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("button",{onClick:r=>{r.stopPropagation(),S()},className:"absolute top-2 left-2 sm:top-4 sm:left-4 z-10 w-10 h-10 flex items-center justify-center bg-[#1C1C1C]/80 border border-[#424242] rounded-full text-white hover:bg-[#2C2C2C] transition-colors",title:"Rotate image",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),e.jsx(Ae.img,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1,rotate:je},transition:{type:"spring",stiffness:300,damping:25},src:be,alt:"Queued image preview",className:`object-contain shadow-2xl ${je===90||je===270?"max-h-[100vw] max-w-[100vh]":"max-w-[100vw] max-h-[100vh]"}`,onClick:r=>r.stopPropagation()})]})]}):e.jsx(at,{}):e.jsx(at,{})},qt=({progress:t,gameTitle:i,className:l="",showLabel:n=!0})=>{const d=Math.min(Math.max(t,0),100),m=x=>x===0?"Not Started":x<15?"Beginning":x<35?"Early Game":x<55?"Mid Game":x<75?"Late Game":x<90?"Endgame":x<100?"Almost Done":"Complete!";return e.jsxs("div",{className:`relative ${l}`,children:[n&&e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-3.5 h-3.5 text-[#D98C1F]",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-xs font-semibold text-white uppercase tracking-wider",children:"Player Progress"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] text-[#888888]",children:m(d)}),e.jsxs("span",{className:"text-xs font-bold text-[#D98C1F] min-w-[36px] text-right",children:[d,"%"]})]})]}),e.jsxs("div",{className:"relative h-3 bg-[#1A1A1A] rounded-full overflow-hidden border border-[#333333]/60 shadow-inner",children:[e.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"repeating-linear-gradient(90deg, transparent, transparent 8px, rgba(255,255,255,0.03) 8px, rgba(255,255,255,0.03) 16px)"}}),e.jsx("div",{className:"absolute left-0 top-0 h-full rounded-full transition-all duration-700 ease-out",style:{width:`${d}%`,background:d>0?"linear-gradient(90deg, #D98C1F 0%, #E5A63D 50%, #FFB366 100%)":"transparent",boxShadow:d>0?"0 0 8px rgba(217, 140, 31, 0.3), inset 0 1px 0 rgba(255,255,255,0.15)":"none"}}),d>0&&e.jsx("div",{className:"absolute top-1/2 w-4 h-4 bg-white rounded-full shadow-lg border-2 border-[#D98C1F] transition-all duration-700 ease-out z-10",style:{left:`${Math.max(d,3)}%`,transform:"translateX(-50%) translateY(-50%)"},children:e.jsx("div",{className:"absolute inset-[-4px] bg-[#D98C1F]/15 rounded-full blur-sm"})}),[25,50,75].map(x=>e.jsx("div",{className:`absolute top-0 bottom-0 w-px transition-colors duration-300 ${d>=x?"bg-white/30":"bg-white/10"}`,style:{left:`${x}%`}},x))]}),d===0&&e.jsxs("p",{className:"text-[10px] text-[#666666] mt-1.5 italic flex items-center gap-1",children:[e.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Share screenshots to track your ",i||"game"," progress"]})]})};export{At as A,Qt as C,Ht as E,qt as G,Ct as S,tt as g};
