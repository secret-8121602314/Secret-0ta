app:341 âœ… [Analytics] Google Analytics 4 initialized
app:351 âœ… [Analytics] Microsoft Clarity initialized
app:512 [PWA] Current path: /app
app:513 [PWA] Has auth token: false
app:514 [PWA] Should show PWA: null
app:523 ğŸš« [PWA] Skipping manifest - landing page without auth
client:789 [vite] connecting...
app:350  GET https://www.clarity.ms/tag/u9sbvr97qi net::ERR_BLOCKED_BY_CLIENT
(anonymous) @ app:350
(anonymous) @ app:355
client:912 [vite] connected.
chunk-TH7NCS4R.js?v=a71d192a:21609 Download the React DevTools for a better development experience: https://reactjs.org/link/react-devtools
App.tsx:20 ğŸš€ğŸš€ğŸš€ APP.TSX LOADED - PWA FIXES VERSION ğŸš€ğŸš€ğŸš€
pwaRedirectPrevention.ts:73 ğŸ“± [PWA Detection] {isPWAMode: false, isPWAInstalled: false, shouldPreventRedirect: false, displayMode: 'browser', isIOS: false,Â â€¦}
app:576 ğŸš« [SW] Skipping service worker - not on login page or authenticated
react-router-dom.js?v=a71d192a:4413 âš ï¸ React Router Future Flag Warning: React Router will begin wrapping state updates in `React.startTransition` in v7. You can use the `v7_startTransition` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_starttransition.
warnOnce @ react-router-dom.js?v=a71d192a:4413
logDeprecation @ react-router-dom.js?v=a71d192a:4416
logV6DeprecationWarnings @ react-router-dom.js?v=a71d192a:4419
(anonymous) @ react-router-dom.js?v=a71d192a:5235
commitHookEffectListMount @ chunk-TH7NCS4R.js?v=a71d192a:16963
commitPassiveMountOnFiber @ chunk-TH7NCS4R.js?v=a71d192a:18206
commitPassiveMountEffects_complete @ chunk-TH7NCS4R.js?v=a71d192a:18179
commitPassiveMountEffects_begin @ chunk-TH7NCS4R.js?v=a71d192a:18169
commitPassiveMountEffects @ chunk-TH7NCS4R.js?v=a71d192a:18159
flushPassiveEffectsImpl @ chunk-TH7NCS4R.js?v=a71d192a:19543
flushPassiveEffects @ chunk-TH7NCS4R.js?v=a71d192a:19500
(anonymous) @ chunk-TH7NCS4R.js?v=a71d192a:19381
workLoop @ chunk-TH7NCS4R.js?v=a71d192a:197
flushWork @ chunk-TH7NCS4R.js?v=a71d192a:176
performWorkUntilDeadline @ chunk-TH7NCS4R.js?v=a71d192a:384
supabase.ts:47 ğŸ” [Supabase] DOM styles cleaned on SIGNED_IN
cacheService.ts:101 [CacheService] Cache MISS (memory), trying Supabase: user:3fcc2cde-58da-42c2-8899-12e6a5332764
imagePreloader.ts:408 [ImagePreloader] Starting preload for authenticated/app context
imagePreloader.ts:337 [ImagePreloader] Starting full image preload...
imagePreloader.ts:200 [ImagePreloader] Loaded from IndexedDB: /images/otagon-logo.webp
imagePreloader.ts:200 [ImagePreloader] Loaded from IndexedDB: /images/mascot/2.webp
imagePreloader.ts:200 [ImagePreloader] Loaded from IndexedDB: /images/mascot/1.webp
imagePreloader.ts:200 [ImagePreloader] Loaded from IndexedDB: /images/mascot/9.webp
imagePreloader.ts:200 [ImagePreloader] Loaded from IndexedDB: /images/mascot/6.webp
imagePreloader.ts:200 [ImagePreloader] Loaded from IndexedDB: /images/mascot/8.webp
imagePreloader.ts:200 [ImagePreloader] Loaded from IndexedDB: /images/mascot/5.2.webp
imagePreloader.ts:200 [ImagePreloader] Loaded from IndexedDB: /images/mascot/5.1.webp
imagePreloader.ts:200 [ImagePreloader] Loaded from IndexedDB: /images/mascot/11.webp
imagePreloader.ts:200 [ImagePreloader] Loaded from IndexedDB: /images/mascot/7.webp
imagePreloader.ts:200 [ImagePreloader] Loaded from IndexedDB: /images/mascot/10.webp
imagePreloader.ts:200 [ImagePreloader] Loaded from IndexedDB: /images/mascot/vanguard-user.webp
imagePreloader.ts:200 [ImagePreloader] Loaded from IndexedDB: /images/mascot/4.webp
imagePreloader.ts:200 [ImagePreloader] Loaded from IndexedDB: /images/mascot/pro-user.webp
imagePreloader.ts:348 [ImagePreloader] All images preloaded in 149ms (13/13 in-memory cached)
cacheService.ts:124 [CacheService] Cache HIT (Supabase): user:3fcc2cde-58da-42c2-8899-12e6a5332764
authService.ts:272 ğŸ” [AuthService] Loaded user from cache: {email: 'mdamkhan@gmail.com', hasSeenWelcomeGuide: true, authUserId: '3fcc2cde-58da-42c2-8899-12e6a5332764'}
index.tsx:91 ğŸ” [DEBUG authLoader] Current state: {pathname: '/app', onboardingStatus: 'complete', hasProfileSetup: true, onboardingCompleted: true, timestamp: '2025-12-19T18:27:27.854Z'}
MainApp.tsx:320 [MainApp] No user authUserId, setting quota to 0
MainApp.tsx:614 ğŸ“¸ [MainApp] queuedScreenshot state changed: {hasQueuedScreenshot: false, queuedScreenshotLength: undefined, queuedScreenshotPreview: undefined}
MainApp.tsx:716 ğŸ” [MainApp] Auth state change detected: {previousUserId: null, newUserId: '3fcc2cde-58da-42c2-8899-12e6a5332764', currentTier: undefined, newTier: 'pro', isLoading: false,Â â€¦}
MainApp.tsx:730 ğŸ” [MainApp] User state change: {userIdChanged: true, tierChanged: undefined, previousTier: undefined, newTier: 'pro', previousUserId: null,Â â€¦}
MainApp.tsx:743 âœ… [MainApp] User state updated from authService subscription
gamingExplorerStorage.ts:215 [LibraryStorage] Loading from Supabase...
gamingExplorerStorage.ts:490 [TimelineStorage] Loading from Supabase...
MainApp.tsx:829 ğŸ” [MainApp] Loading conversations (attempt 1 )
MainApp.tsx:1090 ğŸ”„ [TierChange] Effect triggered - currentTier: free previousTier: null isInitializing: true hasInitialized: false
MainApp.tsx:1097 ğŸ”„ [TierChange] Initial tier set: free
MainApp.tsx:1289 ğŸ® [IGDB] Effect triggered: {hasActiveConv: false, gameTitle: undefined, isGameHub: undefined, convId: undefined, prevFetched: null}
MainApp.tsx:1299 ğŸ® [IGDB] Skipping fetch - no gameTitle or is Game Hub
MainApp.tsx:1371 ğŸ”— [MainApp] Found stored code, triggering reconnection via parent...
MainApp.tsx:1377 ğŸ”— [MainApp] Using propOnConnect for reconnection
MainAppRoute.tsx:188 [MainAppRoute] handleConnect called with code: 841861
MainAppRoute.tsx:82 [MainAppRoute] Found saved connection code, attempting to reconnect...
MainApp.tsx:320 [MainApp] No user authUserId, setting quota to 0
MainApp.tsx:614 ğŸ“¸ [MainApp] queuedScreenshot state changed: {hasQueuedScreenshot: false, queuedScreenshotLength: undefined, queuedScreenshotPreview: undefined}
MainApp.tsx:716 ğŸ” [MainApp] Auth state change detected: {previousUserId: null, newUserId: '3fcc2cde-58da-42c2-8899-12e6a5332764', currentTier: undefined, newTier: 'pro', isLoading: false,Â â€¦}
MainApp.tsx:730 ğŸ” [MainApp] User state change: {userIdChanged: true, tierChanged: undefined, previousTier: undefined, newTier: 'pro', previousUserId: null,Â â€¦}
MainApp.tsx:743 âœ… [MainApp] User state updated from authService subscription
MainApp.tsx:1090 ğŸ”„ [TierChange] Effect triggered - currentTier: free previousTier: free isInitializing: true hasInitialized: false
MainApp.tsx:1104 ğŸ”„ [TierChange] Skipping tier change during initialization
MainApp.tsx:1289 ğŸ® [IGDB] Effect triggered: {hasActiveConv: false, gameTitle: undefined, isGameHub: undefined, convId: undefined, prevFetched: null}
MainApp.tsx:1299 ğŸ® [IGDB] Skipping fetch - no gameTitle or is Game Hub
MainApp.tsx:1371 ğŸ”— [MainApp] Found stored code, triggering reconnection via parent...
MainApp.tsx:1377 ğŸ”— [MainApp] Using propOnConnect for reconnection
MainAppRoute.tsx:188 [MainAppRoute] handleConnect called with code: 841861
MainAppRoute.tsx:82 [MainAppRoute] Found saved connection code, attempting to reconnect...
ttsService.ts:225 ğŸµ [TTS] Setting up media session
ttsService.ts:248 âœ… [TTS] Media session handlers registered
ttsService.ts:70 ğŸ”Š [TTS] Audio context initialized
ttsService.ts:84 ğŸ”‡ [TTS] Silent audio initialized for background playback
MainApp.tsx:127 ğŸ”„ [MainApp] User changed: f2bb868f-6e0e-41fc-941a-ed903bdb06f6 tier: pro
MainApp.tsx:326 [MainApp] Fetching quota for user: 3fcc2cde-58da-42c2-8899-12e6a5332764 tier: pro
groundingControlService.ts:579 [GroundingControl] getRemainingQuota called with: {authUserId: '3fcc2cde-58da-42c2-8899-12e6a5332764', tier: 'pro'}
groundingControlService.ts:403 [GroundingControl] getGroundingUsage called for: 3fcc2cde-58da-42c2-8899-12e6a5332764
MainApp.tsx:716 ğŸ” [MainApp] Auth state change detected: {previousUserId: '3fcc2cde-58da-42c2-8899-12e6a5332764', newUserId: '3fcc2cde-58da-42c2-8899-12e6a5332764', currentTier: 'pro', newTier: 'pro', isLoading: false,Â â€¦}
MainApp.tsx:1090 ğŸ”„ [TierChange] Effect triggered - currentTier: pro previousTier: free isInitializing: true hasInitialized: false
MainApp.tsx:1104 ğŸ”„ [TierChange] Skipping tier change during initialization
websocketService.ts:54 ğŸ”— [WebSocket] Connection opened successfully to wss://otakon-relay.onrender.com/841861
MainAppRoute.tsx:229 [MainAppRoute] âœ… WebSocket connection opened to relay server, waiting for partner_connected...
websocketService.ts:65 ğŸ”— [WebSocket] Sent connection_request with code: 841861
websocketService.ts:100 ğŸ”— [WebSocket] Message received: {type: 'partner_connected', hasDataUrl: false, dataUrlLength: undefined, keys: Array(1)}
websocketService.ts:151 ğŸ”— [WebSocket] Invoking onMessage handler with data: partner_connected
MainAppRoute.tsx:33 [MainAppRoute] WebSocket message received: partner_connected {type: 'partner_connected'}
MainAppRoute.tsx:37 [MainAppRoute] âœ… Partner connected! Setting status to CONNECTED
websocketService.ts:154 ğŸ”— [WebSocket] Handler completed successfully
MainApp.tsx:632 ğŸ“¸ [MainApp] Connection is CONNECTED - updating WebSocket handlers to receive screenshots
websocketService.ts:264 ğŸ”— [WebSocket] Handlers updated
groundingControlService.ts:458 [GroundingControl] Raw data from DB: null
groundingControlService.ts:462 [GroundingControl] No usage record found for this month - user has full quota
groundingControlService.ts:582 [GroundingControl] getGroundingUsage returned: {gameKnowledge: 0, aiMessages: 0, total: 0}
groundingControlService.ts:585 [GroundingControl] Limits for tier: {gameKnowledge: 20, aiMessages: 30}
MainApp.tsx:332 [MainApp] Quota received: {gameKnowledge: {â€¦}, aiMessages: {â€¦}}
MainApp.tsx:333 [MainApp] Setting aiMessagesQuota to: 30
MainApp.tsx:838 ğŸ” [MainApp] Game Hub from ensureGameHubExists: {id: 'game-hub', title: 'Game Hub', isGameHub: true}
MainApp.tsx:847 ğŸ” [MainApp] Conversations from getConversations: ['game-hub']
MainApp.tsx:848 ğŸ” [MainApp] Conversation count: 1
ChatInterface.tsx:731 ğŸ“¸ [ChatInterface] queuedImages prop changed: {count: 0, isManualUploadMode: true, firstImagePreview: undefined}
MainApp.tsx:1090 ğŸ”„ [TierChange] Effect triggered - currentTier: pro previousTier: pro isInitializing: true hasInitialized: false
MainApp.tsx:1104 ğŸ”„ [TierChange] Skipping tier change during initialization
ChatInterface.tsx:731 ğŸ“¸ [ChatInterface] queuedImages prop changed: {count: 0, isManualUploadMode: true, firstImagePreview: undefined}
MainApp.tsx:952 ğŸ” [MainApp] Initialization complete with active conversation: game-hub
MainApp.tsx:958 ğŸ” [MainApp] Welcome guide check: {hasUser: true, hasSeenWelcomeGuide: true, userEmail: 'mdamkhan@gmail.com', authUserId: '3fcc2cde-58da-42c2-8899-12e6a5332764'}
ChatInterface.tsx:731 ğŸ“¸ [ChatInterface] queuedImages prop changed: {count: 0, isManualUploadMode: true, firstImagePreview: undefined}
MainApp.tsx:142 ğŸ¯ [MainApp] Suggestions (4): (3)Â ["What's the latest gaming news?", 'Which games are releasing soon?', 'What are the latest game reviews?']
MainApp.tsx:401 ğŸ“Œ [MainApp] No saved suggestions - using fallback: (4)Â ["What's the latest gaming news?", 'Which games are releasing soon?', 'What are the latest game reviews?', 'Show me the hottest new game trailers.']
MainApp.tsx:632 ğŸ“¸ [MainApp] Connection is CONNECTED - updating WebSocket handlers to receive screenshots
websocketService.ts:264 ğŸ”— [WebSocket] Handlers updated
MainApp.tsx:1090 ğŸ”„ [TierChange] Effect triggered - currentTier: pro previousTier: pro isInitializing: false hasInitialized: false
MainApp.tsx:1111 ğŸ”„ [TierChange] First user load - tier initialized to: pro
MainApp.tsx:1202 â„¹ï¸ [MainApp] Skipping realtime subscription for system conversation: game-hub
MainApp.tsx:1289 ğŸ® [IGDB] Effect triggered: {hasActiveConv: true, gameTitle: undefined, isGameHub: true, convId: 'game-hub', prevFetched: null}
MainApp.tsx:1299 ğŸ® [IGDB] Skipping fetch - no gameTitle or is Game Hub
websocketService.ts:100 ğŸ”— [WebSocket] Message received: {type: 'screenshot-multi', hasDataUrl: false, dataUrlLength: undefined, keys: Array(2)}
websocketService.ts:151 ğŸ”— [WebSocket] Invoking onMessage handler with data: screenshot-multi
MainApp.tsx:410 ğŸ“¸ [MainApp] handleWebSocketMessage called with type: screenshot-multi
MainApp.tsx:467 ğŸ“¸ [MainApp] screenshot-multi received from PC client
MainApp.tsx:472 ğŸ“¸ [MainApp] Checking tier access - userTier: pro user: mdamkhan@gmail.com
MainApp.tsx:485 ğŸ“¸ [MainApp] Processing 5 buffered screenshots from F2
websocketService.ts:154 ğŸ”— [WebSocket] Handler completed successfully
websocketService.ts:100 ğŸ”— [WebSocket] Message received: {type: 'connection_alive', hasDataUrl: false, dataUrlLength: undefined, keys: Array(2)}
websocketService.ts:151 ğŸ”— [WebSocket] Invoking onMessage handler with data: connection_alive
MainApp.tsx:410 ğŸ“¸ [MainApp] handleWebSocketMessage called with type: connection_alive
MainApp.tsx:415 ğŸ“¸ [MainApp] Connection confirmation received (handled by MainAppRoute)
websocketService.ts:154 ğŸ”— [WebSocket] Handler completed successfully
websocketService.ts:100 ğŸ”— [WebSocket] Message received: {type: 'keepalive', hasDataUrl: false, dataUrlLength: undefined, keys: Array(2)}
websocketService.ts:151 ğŸ”— [WebSocket] Invoking onMessage handler with data: keepalive
MainApp.tsx:410 ğŸ“¸ [MainApp] handleWebSocketMessage called with type: keepalive
websocketService.ts:154 ğŸ”— [WebSocket] Handler completed successfully
ChatInterface.tsx:731 ğŸ“¸ [ChatInterface] queuedImages prop changed: {count: 0, isManualUploadMode: true, firstImagePreview: undefined}
MainApp.tsx:614 ğŸ“¸ [MainApp] queuedScreenshot state changed: {hasQueuedScreenshot: true, queuedScreenshotLength: 996282, queuedScreenshotPreview: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAB4AA'}
ChatInterface.tsx:731 ğŸ“¸ [ChatInterface] queuedImages prop changed: {count: 0, isManualUploadMode: true, firstImagePreview: undefined}
websocketService.ts:100 ğŸ”— [WebSocket] Message received: {type: 'ping', hasDataUrl: false, dataUrlLength: undefined, keys: Array(2)}
websocketService.ts:151 ğŸ”— [WebSocket] Invoking onMessage handler with data: ping
MainApp.tsx:410 ğŸ“¸ [MainApp] handleWebSocketMessage called with type: ping
websocketService.ts:154 ğŸ”— [WebSocket] Handler completed successfully
websocketService.ts:100 ğŸ”— [WebSocket] Message received: {type: 'health_check', hasDataUrl: false, dataUrlLength: undefined, keys: Array(2)}
websocketService.ts:151 ğŸ”— [WebSocket] Invoking onMessage handler with data: health_check
MainApp.tsx:410 ğŸ“¸ [MainApp] handleWebSocketMessage called with type: health_check
websocketService.ts:154 ğŸ”— [WebSocket] Handler completed successfully
websocketService.ts:100 ğŸ”— [WebSocket] Message received: {type: 'keepalive', hasDataUrl: false, dataUrlLength: undefined, keys: Array(2)}
websocketService.ts:151 ğŸ”— [WebSocket] Invoking onMessage handler with data: keepalive
MainApp.tsx:410 ğŸ“¸ [MainApp] handleWebSocketMessage called with type: keepalive
websocketService.ts:154 ğŸ”— [WebSocket] Handler completed successfully
websocketService.ts:100 ğŸ”— [WebSocket] Message received: {type: 'connection_alive', hasDataUrl: false, dataUrlLength: undefined, keys: Array(2)}
websocketService.ts:151 ğŸ”— [WebSocket] Invoking onMessage handler with data: connection_alive
MainApp.tsx:410 ğŸ“¸ [MainApp] handleWebSocketMessage called with type: connection_alive
MainApp.tsx:415 ğŸ“¸ [MainApp] Connection confirmation received (handled by MainAppRoute)
websocketService.ts:154 ğŸ”— [WebSocket] Handler completed successfully
ChatInterface.tsx:731 ğŸ“¸ [ChatInterface] queuedImages prop changed: {count: 0, isManualUploadMode: true, firstImagePreview: undefined}
websocketService.ts:100 ğŸ”— [WebSocket] Message received: {type: 'keepalive', hasDataUrl: false, dataUrlLength: undefined, keys: Array(2)}
websocketService.ts:151 ğŸ”— [WebSocket] Invoking onMessage handler with data: keepalive
MainApp.tsx:410 ğŸ“¸ [MainApp] handleWebSocketMessage called with type: keepalive
websocketService.ts:154 ğŸ”— [WebSocket] Handler completed successfully
websocketService.ts:100 ğŸ”— [WebSocket] Message received: {type: 'screenshot_success', hasDataUrl: false, dataUrlLength: undefined, keys: Array(2)}
websocketService.ts:146 ğŸ”— [WebSocket] Full screenshot message: {"type":"screenshot_success","success":{"mode":"single","count":1,"timestamp":1766168865589,"details":{"quality":"high","addedToBuffer":true,"displayIndex":0}}}
websocketService.ts:151 ğŸ”— [WebSocket] Invoking onMessage handler with data: screenshot_success
MainApp.tsx:410 ğŸ“¸ [MainApp] handleWebSocketMessage called with type: screenshot_success
websocketService.ts:154 ğŸ”— [WebSocket] Handler completed successfully
websocketService.ts:100 ğŸ”— [WebSocket] Message received: {type: 'screenshot-single', hasDataUrl: false, dataUrlLength: undefined, keys: Array(2)}
websocketService.ts:151 ğŸ”— [WebSocket] Invoking onMessage handler with data: screenshot-single
MainApp.tsx:410 ğŸ“¸ [MainApp] handleWebSocketMessage called with type: screenshot-single
MainApp.tsx:423 ğŸ“¸ [MainApp] screenshot-single received from PC client
MainApp.tsx:428 ğŸ“¸ [MainApp] Processing single screenshot from F1
MainApp.tsx:440 ğŸ“¸ [MainApp] Screenshot validated: {sizeMB: 0.48, length: 499910}
websocketService.ts:154 ğŸ”— [WebSocket] Handler completed successfully
ChatInterface.tsx:731 ğŸ“¸ [ChatInterface] queuedImages prop changed: {count: 0, isManualUploadMode: true, firstImagePreview: undefined}
MainApp.tsx:614 ğŸ“¸ [MainApp] queuedScreenshot state changed: {hasQueuedScreenshot: true, queuedScreenshotLength: 499910, queuedScreenshotPreview: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAB4AA'}
ChatInterface.tsx:731 ğŸ“¸ [ChatInterface] queuedImages prop changed: {count: 0, isManualUploadMode: true, firstImagePreview: undefined}
websocketService.ts:100 ğŸ”— [WebSocket] Message received: {type: 'keepalive', hasDataUrl: false, dataUrlLength: undefined, keys: Array(2)}
websocketService.ts:151 ğŸ”— [WebSocket] Invoking onMessage handler with data: keepalive
MainApp.tsx:410 ğŸ“¸ [MainApp] handleWebSocketMessage called with type: keepalive
websocketService.ts:154 ğŸ”— [WebSocket] Handler completed successfully
