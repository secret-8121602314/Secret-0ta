## .vscode\extensions.json

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\.vscode\extensions.json.Extension.TrimStart('.'))

{
  "recommendations": ["denoland.vscode-deno"]
}


```n

## .vscode\settings.json

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\.vscode\settings.json.Extension.TrimStart('.'))

{
  "deno.enablePaths": [
    "supabase/functions"
  ],
  "deno.lint": true,
  "deno.unstable": [
    "bare-node-builtins",
    "byonm",
    "sloppy-imports",
    "unsafe-proto",
    "webgpu",
    "broadcast-channel",
    "worker-options",
    "cron",
    "kv",
    "ffi",
    "fs",
    "http",
    "net"
  ],
  "[typescript]": {
    "editor.defaultFormatter": "denoland.vscode-deno"
  }
}


```n

## public\index.css

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\public\index.css.Extension.TrimStart('.'))

/* Base styles for Otagon app */
/* stylelint-disable at-rule-no-unknown */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Hide native scrollbars globally */
html, body {
  overflow-x: hidden !important;
}

/* Ensure scrolling works on all elements */
* {
  pointer-events: auto !important;
}

::-webkit-scrollbar {
  display: none !important;
}

/* Custom scrollbar for elements with .custom-scrollbar class */
.custom-scrollbar {
  overflow-x: hidden !important;
  overflow-y: auto !important;
  scrollbar-width: thin !important;
  scrollbar-color: #E53A3A transparent !important;
}

.custom-scrollbar::-webkit-scrollbar {
  display: block !important;
  width: 6px !important;
  height: 6px !important;
  background: transparent !important;
}

.custom-scrollbar::-webkit-scrollbar-track {
  background: transparent !important;
  background-color: transparent !important;
  border: none !important;
  box-shadow: none !important;
}

.custom-scrollbar::-webkit-scrollbar-thumb {
  background: linear-gradient(135deg, #E53A3A, #D98C1F) !important;
  border-radius: 3px !important;
  border: none !important;
  box-shadow: none !important;
  min-height: 20px !important;
  max-height: 50% !important;
}


.custom-scrollbar::-webkit-scrollbar-corner {
  background: transparent !important;
  background-color: transparent !important;
}


/* Custom focus styles */
.focus-ring:focus {
  outline: 2px solid #8b5cf6;
  outline-offset: 2px;
}

/* Animation utilities */
.animate-pulse-slow {
  animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/* Custom button styles */
.btn-primary {
  @apply bg-purple-600 hover:bg-purple-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200;
}

.btn-secondary {
  @apply bg-gray-600 hover:bg-gray-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200;
}

/* Chat message styles */
.chat-message {
  @apply p-4 rounded-lg mb-4;
}

.chat-message.user {
  @apply bg-blue-600 text-white ml-auto max-w-xs;
}

.chat-message.model {
  @apply bg-gray-700 text-white mr-auto max-w-2xl;
}

/* Loading animation */
.loading-dots {
  @apply flex space-x-1;
}

.loading-dots span {
  @apply w-2 h-2 bg-current rounded-full animate-pulse;
}

.loading-dots span:nth-child(2) {
  animation-delay: 0.2s;
}

.loading-dots span:nth-child(3) {
  animation-delay: 0.4s;
}

/* Enhanced Multi-shot Image Grid */
.multi-shot-grid {
  display: grid;
  gap: 1rem;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  max-width: 100%;
  padding: 0.5rem;
}

/* AI Response Formatting - Custom spacing for structured responses */
.ai-response h1, .ai-response h2, .ai-response h3, .ai-response h4, .ai-response h5, .ai-response h6 {
  margin-top: 1.5rem;
  margin-bottom: 0.75rem;
  line-height: 1.3;
  color: #F5F5F5;
}

.ai-response h1 {
  font-size: 1.5rem;
  font-weight: 700;
}

.ai-response h2 {
  font-size: 1.25rem;
  font-weight: 600;
}

.ai-response h3 {
  font-size: 1.125rem;
  font-weight: 600;
}

.ai-response p {
  margin-bottom: 1rem;
  line-height: 1.6;
}

.ai-response p:last-child {
  margin-bottom: 0;
}

.ai-response ul, .ai-response ol {
  margin: 0.75rem 0;
  padding-left: 1.5rem;
}

.ai-response li {
  margin-bottom: 0.5rem;
}

.ai-response blockquote {
  margin: 1rem 0;
  padding: 0.75rem 1rem;
  border-left: 4px solid #FF4D4D;
  background: rgba(255, 77, 77, 0.1);
  border-radius: 0.375rem;
  font-style: italic;
}

.ai-response code {
  background: rgba(255, 171, 64, 0.2);
  padding: 0.125rem 0.25rem;
  border-radius: 0.25rem;
  font-size: 0.875em;
  font-family: monospace;
}

.ai-response pre {
  background: rgba(28, 28, 28, 0.8);
  padding: 1rem;
  border-radius: 0.5rem;
  overflow-x: auto;
  margin: 1rem 0;
}

/* Responsive grid adjustments */
@media (min-width: 640px) {
  .multi-shot-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (min-width: 768px) {
  .multi-shot-grid {
    grid-template-columns: repeat(3, 1fr);
  }
}

@media (min-width: 1024px) {
  .multi-shot-grid {
    grid-template-columns: repeat(4, 1fr);
  }
}

/* Single image styling */
.single-image {
  display: block;
  max-width: 100%;
}

/* Image hover effects */
.multi-shot-grid img {
  aspect-ratio: 16/9;
  object-fit: cover;
  border-radius: 0.5rem;
}

.single-image img {
  max-height: 400px;
  object-fit: contain;
  border-radius: 0.5rem;
}

/* Smooth transitions for grid items */
.multi-shot-grid > div {
  transition: all 0.2s ease-in-out;
  border-radius: 0.5rem;
}

.multi-shot-grid > div:hover {
  transform: translateY(-2px);
  z-index: 10;
}

/* Image overlay animations */
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.multi-shot-grid > div {
  animation: fadeInUp 0.3s ease-out;
}

.multi-shot-grid > div:nth-child(1) { animation-delay: 0.1s; }
.multi-shot-grid > div:nth-child(2) { animation-delay: 0.2s; }
.multi-shot-grid > div:nth-child(3) { animation-delay: 0.3s; }
.multi-shot-grid > div:nth-child(4) { animation-delay: 0.4s; }
.multi-shot-grid > div:nth-child(5) { animation-delay: 0.5s; }

/* Wave animation for skeleton loading */
@keyframes wave {
  0% {
    transform: translateX(-100%);
  }
  50% {
    transform: translateX(100%);
  }
  100% {
    transform: translateX(100%);
  }
}

.animate-wave {
  animation: wave 1.5s ease-in-out infinite;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
  background-size: 200% 100%;
}

/* Enhanced grid container styling */
.multi-shot-grid {
  background: linear-gradient(135deg, rgba(46, 46, 46, 0.1) 0%, rgba(28, 28, 28, 0.05) 100%);
  border-radius: 1rem;
  backdrop-filter: blur(10px);
}

/* Image number badge styling */
.multi-shot-grid .absolute.top-2.right-2 {
  background: rgba(0, 0, 0, 0.8);
  backdrop-filter: blur(8px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  font-weight: 600;
  letter-spacing: 0.5px;
}

/* Hover effect improvements */
.multi-shot-grid > div:hover img {
  transform: scale(1.02);
}

.multi-shot-grid > div:hover .absolute.top-2.right-2 {
  background: rgba(255, 77, 77, 0.9);
  transform: scale(1.1);
}

/* Custom slider styles */
.slider {
  -webkit-appearance: none;
  appearance: none;
  background: transparent;
  cursor: pointer;
}

.slider::-webkit-slider-track {
  background: #424242;
  height: 8px;
  border-radius: 4px;
}

.slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  background: linear-gradient(135deg, #FF4D4D, #FFAB40);
  height: 20px;
  width: 20px;
  border-radius: 50%;
  cursor: pointer;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  transition: all 0.2s ease;
}

.slider::-webkit-slider-thumb:hover {
  transform: scale(1.1);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
}

.slider::-moz-range-track {
  background: #424242;
  height: 8px;
  border-radius: 4px;
  border: none;
}

.slider::-moz-range-thumb {
  background: linear-gradient(135deg, #FF4D4D, #FFAB40);
  height: 20px;
  width: 20px;
  border-radius: 50%;
  cursor: pointer;
  border: none;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  transition: all 0.2s ease;
}

.slider::-moz-range-thumb:hover {
  transform: scale(1.1);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
}

/* Enhanced loading animations */
@keyframes shimmer {
  0% {
    background-position: -200px 0;
  }
  100% {
    background-position: calc(200px + 100%) 0;
  }
}

.animate-shimmer {
  background: linear-gradient(90deg, 
    rgba(255, 77, 77, 0.1) 25%, 
    rgba(255, 171, 64, 0.2) 50%, 
    rgba(255, 77, 77, 0.1) 75%
  );
  background-size: 200px 100%;
  animation: shimmer 2s infinite;
}

/* Pulse animation variations */
.animate-pulse-slow {
  animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

.animate-pulse-fast {
  animation: pulse 1s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/* Bounce animation variations */
.animate-bounce-slow {
  animation: bounce 2s infinite;
}

.animate-bounce-fast {
  animation: bounce 0.5s infinite;
}

/* Enhanced animations and visual effects */
@keyframes fade-slide-up {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.9);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes glow-pulse {
  0%, 100% {
    box-shadow: 0 0 20px rgba(229, 61, 61, 0.3);
  }
  50% {
    box-shadow: 0 0 30px rgba(229, 61, 61, 0.6);
  }
}

@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

/* Apply animations to components - DISABLED */
/* stylelint-disable-next-line block-no-empty */
.animate-fade-slide-up {
  /* animation: fade-slide-up 0.3s ease-out; */
}

/* stylelint-disable-next-line block-no-empty */
.animate-fade-in {
  /* animation: fade-in 0.2s ease-out; */
}

/* stylelint-disable-next-line block-no-empty */
.animate-scale-in {
  /* animation: scale-in 0.2s ease-out; */
}

.animate-glow-pulse {
  animation: glow-pulse 2s ease-in-out infinite;
}

/* Enhanced hover effects */
.hover-lift {
  transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.hover-lift:hover {
  transform: translateY(-4px);
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
}

/* Glass morphism effects */
.glass {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.glass-dark {
  background: rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

/* Enhanced gradients */
.gradient-primary {
  background: linear-gradient(135deg, #E53A3A 0%, #D98C1F 100%);
}

.gradient-secondary {
  background: linear-gradient(135deg, #5CBB7B 0%, #4CAF50 100%);
}

.gradient-accent {
  background: linear-gradient(135deg, #5B99E3 0%, #4A90E2 100%);
}

/* Enhanced shadows */
.shadow-glow {
  box-shadow: 0 0 30px rgba(229, 61, 61, 0.3);
}

.shadow-glow-green {
  box-shadow: 0 0 30px rgba(92, 187, 123, 0.3);
}

.shadow-glow-blue {
  box-shadow: 0 0 30px rgba(91, 153, 227, 0.3);
}

/* Enhanced borders */
.border-glow {
  border: 2px solid transparent;
  background: linear-gradient(45deg, #E53A3A, #D98C1F) border-box;
  mask: 
    linear-gradient(#fff 0 0) padding-box, 
    linear-gradient(#fff 0 0);
  mask-composite: exclude;
  -webkit-mask: 
    linear-gradient(#fff 0 0) padding-box, 
    linear-gradient(#fff 0 0);
  -webkit-mask-composite: destination-out;
}

/* HIDE ALL SCROLLBARS - ENHANCED VERSION */
::-webkit-scrollbar {
  display: none !important;
  width: 0 !important;
  height: 0 !important;
}

::-webkit-scrollbar-track {
  display: none !important;
  background: transparent !important;
  background-color: transparent !important;
}

::-webkit-scrollbar-thumb {
  display: none !important;
  background: transparent !important;
  background-color: transparent !important;
}

::-webkit-scrollbar-thumb:hover {
  display: none !important;
  background: transparent !important;
  background-color: transparent !important;
}

/* Enhanced focus states */
.focus-ring:focus {
  outline: none;
  box-shadow: 0 0 0 3px rgba(229, 61, 61, 0.3);
}

/* Enhanced transitions */
.transition-smooth {
  transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.transition-bounce {
  transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

/* Enhanced text shadows */
.text-shadow {
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

.text-shadow-glow {
  text-shadow: 0 0 20px rgba(229, 61, 61, 0.5);
}

/* Enhanced button states */
.btn-primary {
  @apply bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white font-semibold px-6 py-3 rounded-xl transition-all duration-300 hover:scale-105 hover:shadow-xl hover:shadow-[#E53A3A]/25 active:scale-95;
}

.btn-secondary {
  @apply bg-gradient-to-r from-[#2E2E2E] to-[#1C1C1C] text-white font-semibold px-6 py-3 rounded-xl border-2 border-[#424242]/60 transition-all duration-300 hover:from-[#424242] hover:to-[#2E2E2E] hover:scale-105 hover:shadow-lg active:scale-95;
}

/* Enhanced card styles */
.card {
  @apply bg-gradient-to-r from-[#2E2E2E]/80 to-[#1C1C1C]/80 border-2 border-[#424242]/40 rounded-2xl backdrop-blur-sm transition-all duration-300 hover:border-[#E53A3A]/40 hover:shadow-xl hover:shadow-[#E53A3A]/10;
}

/* Enhanced input styles */
.input-enhanced {
  @apply bg-gradient-to-r from-[#1C1C1C] to-[#0A0A0A] border-2 border-[#424242]/40 rounded-xl px-4 py-3 text-white placeholder-[#A3A3A3] focus:border-[#E53A3A]/60 focus:outline-none transition-all duration-300 focus:shadow-[0_0_20px_rgba(229,61,61,0.2)];
}

/* Enhanced modal styles */
.modal-overlay {
  @apply fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4;
}

.modal-content {
  @apply bg-gradient-to-r from-[#1C1C1C] to-[#0A0A0A] border-2 border-[#424242]/40 rounded-2xl p-6 max-w-2xl w-full shadow-2xl backdrop-blur-sm;
}

/* Enhanced loading states */
.loading-shimmer {
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

/* Enhanced responsive design */
@media (max-width: 640px) {
  .container-responsive {
    @apply px-4;
  }
  
  .text-responsive {
    @apply text-sm;
  }
  
  .spacing-responsive {
    @apply gap-3;
  }
}

@media (min-width: 1024px) {
  .container-responsive {
    @apply px-8;
  }
  
  .text-responsive {
    @apply text-lg;
  }
  
  .spacing-responsive {
    @apply gap-6;
  }
}

/* Mobile-specific optimizations */
@media (max-width: 640px) {
  /* Ensure proper viewport handling on mobile */
  html, body {
    overflow-x: hidden;
    width: 100%;
    position: relative;
  }
  
  /* Mobile header adjustments */
  .mobile-header {
    padding: 0.75rem;
  }
  
  /* Mobile content adjustments */
  .mobile-content {
    padding: 0.75rem;
  }
  
  /* Mobile footer adjustments */
  .mobile-footer {
    padding: 0.75rem;
  }
  
  /* Ensure chat messages fit on mobile */
  .chat-message-mobile {
    max-width: 100%;
    margin: 0 0.5rem;
  }
  
  /* Mobile input adjustments */
  .mobile-input {
    padding: 0.75rem;
  }
  
  /* Pro Features Splash Screen mobile optimizations */
  .pro-features-mobile {
    padding-top: 1rem !important;
    padding-bottom: 1rem !important;
  }
  
  .pro-features-mobile h1 {
    font-size: 1.5rem !important;
    line-height: 1.2 !important;
  }
  
  .pro-features-mobile .feature-card {
    padding: 0.75rem !important;
    margin-bottom: 0.75rem !important;
  }
  
  /* Ensure sticky footer works properly */
  .pro-features-mobile footer {
    position: sticky !important;
    bottom: 0 !important;
    z-index: 20 !important;
    background: linear-gradient(to bottom, transparent, rgba(10, 10, 10, 0.8), rgba(10, 10, 10, 0.95)) !important;
    backdrop-filter: blur(12px) !important;
    -webkit-backdrop-filter: blur(12px) !important;
  }
  
  /* Credit Indicator Button with Transparent Content and Gradient Border */
  .credit-indicator-button {
    position: relative !important;
    z-index: 50 !important;
    border-radius: 12px !important;
    box-shadow: 0 0 15px rgba(229, 58, 58, 0.3) !important;
    animation: gradient-glow 4s ease infinite !important;
  }
  

  

  
  @keyframes gradient-glow {
    0% { box-shadow: 0 0 15px rgba(229, 58, 58, 0.3); }
    50% { box-shadow: 0 0 20px rgba(217, 140, 31, 0.4); }
    100% { box-shadow: 0 0 15px rgba(229, 58, 58, 0.3); }
  }
  
         .credit-indicator-button:hover {
         box-shadow: 0 0 25px rgba(229, 58, 58, 0.6), 0 0 35px rgba(217, 140, 31, 0.4) !important;
         transform: scale(1.05);
       }
  
  .credit-indicator-button:active {
    transform: scale(0.98);
  }
}

/* HIDE ALL SCROLLBARS - HOW TO USE VERSION */
.how-to-use-scrollbar::-webkit-scrollbar {
  display: none !important;
  width: 0 !important;
  height: 0 !important;
}

.how-to-use-scrollbar::-webkit-scrollbar-track {
  display: none !important;
  background: transparent !important;
  background-color: transparent !important;
}

.how-to-use-scrollbar::-webkit-scrollbar-thumb {
  display: none !important;
  background: transparent !important;
  background-color: transparent !important;
}

.how-to-use-scrollbar::-webkit-scrollbar-thumb:hover {
  display: none !important;
  background: transparent !important;
  background-color: transparent !important;
}

.how-to-use-scrollbar::-webkit-scrollbar-thumb:active {
  display: none !important;
  background: transparent !important;
  background-color: transparent !important;
}

/* Firefox scrollbar support */
.how-to-use-scrollbar {
  scrollbar-width: none !important;
  -ms-overflow-style: none !important;
}

/* Global focus-visible outlines for a11y */
button:focus-visible, a:focus-visible, [role="button"]:focus-visible, input:focus-visible, textarea:focus-visible, select:focus-visible {
  outline: 2px solid rgba(229, 58, 58, 0.8);
  outline-offset: 3px;
}
/* Reduced outline when using mouse */
:focus:not(:focus-visible) {
  outline: none;
}


```n

## public\manifest.json

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\public\manifest.json.Extension.TrimStart('.'))

{
  "name": "Otagon AI - Your Gaming Companion",
  "short_name": "Otagon",
  "description": "Get spoiler-free gaming hints and help with AI-powered assistance",
  "start_url": "/",
  "display": "standalone",
  "background_color": "#111111",
  "theme_color": "#E53A3A",
  "orientation": "portrait-primary",
  "scope": "/",
  "lang": "en",
  "id": "otagon-ai-gaming-companion",
  "display_override": ["standalone", "minimal-ui"],
  "launch_handler": {
    "client_mode": "navigate-existing"
  },
  "categories": ["games", "productivity", "utilities"],
  "icons": [
    {
      "src": "/icon-192.png",
      "sizes": "192x192",
      "type": "image/png",
      "purpose": "any maskable"
    },
    {
      "src": "/icon-512.png",
      "sizes": "512x512",
      "type": "image/png",
      "purpose": "any maskable"
    }
  ],
  "shortcuts": [
    {
      "name": "New Chat",
      "short_name": "Chat",
      "description": "Start a new conversation",
      "url": "/?shortcut=new-chat",
      "icons": [
        {
          "src": "/icon-192.png",
          "sizes": "192x192",
          "type": "image/png"
        }
      ]
    },
    {
      "name": "Voice Commands",
      "short_name": "Voice",
      "description": "Use hands-free voice commands",
      "url": "/?shortcut=voice",
      "icons": [
        {
          "src": "/icon-192.png",
          "sizes": "192x192",
          "type": "image/png"
        }
      ]
    },
    {
      "name": "Settings",
      "short_name": "Settings",
      "description": "Manage your preferences",
      "url": "/?shortcut=settings",
      "icons": [
        {
          "src": "/icon-192.png",
          "sizes": "192x192",
          "type": "image/png"
        }
      ]
    }
  ],
  "screenshots": [
    {
      "src": "/screenshot-wide.png",
      "sizes": "1280x720",
      "type": "image/png",
      "form_factor": "wide"
    },
    {
      "src": "/screenshot-narrow.png",
      "sizes": "750x1334",
      "type": "image/png",
      "form_factor": "narrow"
    }
  ],
  "related_applications": [],
  "prefer_related_applications": false,
  "edge_side_panel": {
    "preferred_width": 400
  }
}

```n

## public\sw.js

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\public\sw.js.Extension.TrimStart('.'))

// Service Worker for Otagon PWA - Performance Optimized with Enhanced Background Sync
const CACHE_NAME = 'otakon-v1.2.1';
const CHAT_CACHE_NAME = 'otakon-chat-v1.2.1';
const STATIC_CACHE = 'otakon-static-v1.2.1';
const API_CACHE = 'otakon-api-v1.2.1';
const urlsToCache = [
  '/',
  '/index.html',
  '/manifest.json',
  '/icon-192.png',
  '/icon-512.png',
  // Add other assets as needed
];

// Enhanced background sync capabilities
const BACKGROUND_SYNC_TAGS = {
  CHAT_SYNC: 'chat-sync',
  OFFLINE_DATA_SYNC: 'offline-data-sync',
  HANDS_FREE_SYNC: 'hands-free-sync',
  PERIODIC_SYNC: 'periodic-sync',
  IMAGE_SYNC: 'image-sync'
};

// Install event - cache resources and clear old caches
self.addEventListener('install', (event) => {
  event.waitUntil(
    Promise.all([
      // Clear old caches
      caches.keys().then(cacheNames => {
        return Promise.all(
          cacheNames.map(cacheName => {
            if (cacheName !== CACHE_NAME && 
                cacheName !== CHAT_CACHE_NAME && 
                cacheName !== STATIC_CACHE && 
                cacheName !== API_CACHE) {
              console.log('Deleting old cache:', cacheName);
              return caches.delete(cacheName);
            }
          })
        );
      }),
      // Open new cache
      caches.open(CACHE_NAME)
        .then((cache) => {
          console.log('Opened new cache:', CACHE_NAME);
          return cache.addAll(urlsToCache);
        })
    ])
  );
});

// Activate event - take control and clear old caches
self.addEventListener('activate', (event) => {
  event.waitUntil(
    Promise.all([
      // Take control of all clients immediately
      self.clients.claim(),
      // Clear old caches
      caches.keys().then(cacheNames => {
        return Promise.all(
          cacheNames.map(cacheName => {
            if (cacheName !== CACHE_NAME && 
                cacheName !== CHAT_CACHE_NAME && 
                cacheName !== STATIC_CACHE && 
                cacheName !== API_CACHE) {
              console.log('Deleting old cache on activate:', cacheName);
              return caches.delete(cacheName);
            }
          })
        );
      })
    ])
  );
});

// Fetch event - serve from cache when offline
self.addEventListener('fetch', (event) => {
  // Handle chat API requests for offline support
  if (event.request.url.includes('/api/chat') || event.request.url.includes('/api/conversations')) {
    event.respondWith(
      handleChatRequest(event.request)
    );
  } else if (event.request.url.includes('/api/insights') || event.request.url.includes('/api/analytics')) {
    // Handle insights and analytics with enhanced caching
    event.respondWith(
      handleInsightsRequest(event.request)
    );
  } else {
    // Handle other requests with cache-first strategy
    event.respondWith(
      caches.match(event.request)
        .then((response) => {
          // Return cached version or fetch from network
          return response || fetch(event.request);
        })
    );
  }
});

// Enhanced background sync for various data types
self.addEventListener('sync', (event) => {
  console.log('Background sync triggered:', event.tag);
  
  switch (event.tag) {
    case BACKGROUND_SYNC_TAGS.CHAT_SYNC:
      event.waitUntil(syncChatData());
      break;
    case BACKGROUND_SYNC_TAGS.OFFLINE_DATA_SYNC:
      event.waitUntil(syncOfflineData());
      break;
    case BACKGROUND_SYNC_TAGS.HANDS_FREE_SYNC:
      event.waitUntil(syncHandsFreeData());
      break;
    case BACKGROUND_SYNC_TAGS.IMAGE_SYNC:
      event.waitUntil(syncImageData());
      break;
    case BACKGROUND_SYNC_TAGS.PERIODIC_SYNC:
      event.waitUntil(performPeriodicSync());
      break;
    default:
      console.log('Unknown sync tag:', event.tag);
  }
});

// Periodic sync for background data updates
self.addEventListener('periodicsync', (event) => {
  if (event.tag === BACKGROUND_SYNC_TAGS.PERIODIC_SYNC) {
    event.waitUntil(performPeriodicSync());
  }
});

// Enhanced chat data sync
async function syncChatData() {
  try {
    // Get offline data from IndexedDB
    const offlineData = await getOfflineChatData();
    
    if (!offlineData.conversations || offlineData.conversations.length === 0) {
      console.log('No offline chat data to sync');
      return;
    }
    
    // Sync with server
    const response = await fetch('/api/sync', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(offlineData)
    });
    
    if (response.ok) {
      console.log('Chat data synced successfully');
      // Clear offline data after successful sync
      await clearOfflineData();
      
      // Notify clients of successful sync
      self.clients.matchAll().then(clients => {
        clients.forEach(client => {
          client.postMessage({
            type: 'SYNC_SUCCESS',
            data: { chatData: true }
          });
        });
      });
    } else {
      throw new Error(`Sync failed with status: ${response.status}`);
    }
  } catch (error) {
    console.error('Chat sync failed:', error);
    
    // Schedule retry with exponential backoff
    await scheduleRetry(BACKGROUND_SYNC_TAGS.CHAT_SYNC, error);
  }
}

// Sync hands-free data
async function syncHandsFreeData() {
  try {
    // Sync voice commands and transcriptions
    const voiceData = await getOfflineVoiceData();
    
    if (voiceData && voiceData.length > 0) {
      const response = await fetch('/api/voice/sync', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ voiceData })
      });
      
      if (response.ok) {
        console.log('Voice data synced successfully');
        await clearOfflineVoiceData();
      }
    }
  } catch (error) {
    console.error('Voice data sync failed:', error);
  }
}

// Sync image data
async function syncImageData() {
  try {
    // Sync cached images and analysis results
    const imageData = await getOfflineImageData();
    
    if (imageData && imageData.length > 0) {
      const response = await fetch('/api/images/sync', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ imageData })
      });
      
      if (response.ok) {
        console.log('Image data synced successfully');
        await clearOfflineImageData();
      }
    }
  } catch (error) {
    console.error('Image data sync failed:', error);
  }
}

// Periodic sync for background updates
async function performPeriodicSync() {
  try {
    console.log('Performing periodic sync');
    
    // Sync all types of offline data
    await Promise.all([
      syncChatData(),
      syncHandsFreeData(),
      syncImageData()
    ]);
    
    // Update cached content
    await updateCachedContent();
    
    console.log('Periodic sync completed successfully');
  } catch (error) {
    console.error('Periodic sync failed:', error);
  }
}

// Schedule retry with exponential backoff
async function scheduleRetry(syncTag, error) {
  const retryCount = await getRetryCount(syncTag);
  const backoffTime = Math.min(1000 * Math.pow(2, retryCount), 30000); // Max 30 seconds
  
  console.log(`Scheduling retry for ${syncTag} in ${backoffTime}ms (attempt ${retryCount + 1})`);
  
  setTimeout(() => {
    self.registration.sync.register(syncTag);
  }, backoffTime);
  
  await incrementRetryCount(syncTag);
}

// Get retry count for a sync tag
async function getRetryCount(syncTag) {
  try {
    const cache = await caches.open('retry-counts');
    const response = await cache.match(syncTag);
    return response ? parseInt(await response.text()) : 0;
  } catch (error) {
    return 0;
  }
}

// Increment retry count for a sync tag
async function incrementRetryCount(syncTag) {
  try {
    const cache = await caches.open('retry-counts');
    const currentCount = await getRetryCount(syncTag);
    const newCount = currentCount + 1;
    
    await cache.put(syncTag, new Response(newCount.toString()));
  } catch (error) {
    console.error('Failed to increment retry count:', error);
  }
}

// Update cached content
async function updateCachedContent() {
  try {
    // Update static assets
    const staticCache = await caches.open(STATIC_CACHE);
    const requests = await staticCache.keys();
    
    for (const request of requests) {
      try {
        const response = await fetch(request);
        if (response.ok) {
          await staticCache.put(request, response);
        }
      } catch (error) {
        console.log('Failed to update cached asset:', request.url);
      }
    }
  } catch (error) {
    console.error('Failed to update cached content:', error);
  }
}

// Handle insights and analytics requests
async function handleInsightsRequest(request) {
  try {
    // Try network first for fresh data
    const networkResponse = await fetch(request);
    
    if (networkResponse.ok) {
      // Cache successful responses
      const cache = await caches.open(API_CACHE);
      cache.put(request, networkResponse.clone());
      return networkResponse;
    }
    
    // Fallback to cache
    const cachedResponse = await caches.match(request);
    if (cachedResponse) {
      return cachedResponse;
    }
    
    return networkResponse;
  } catch (error) {
    console.log('Insights request failed, trying cache:', error);
    
    // Try cache as fallback
    const cachedResponse = await caches.match(request);
    if (cachedResponse) {
      return cachedResponse;
    }
    
    // Return offline fallback
    return new Response(JSON.stringify({
      error: 'offline',
      message: 'You are offline. Showing cached insights.',
      data: await getOfflineInsightsData()
    }), {
      headers: { 'Content-Type': 'application/json' }
    });
  }
}

// Get offline insights data
async function getOfflineInsightsData() {
  // This will be implemented with IndexedDB in the main app
  return { insights: [], offline: true };
}

// Get offline voice data
async function getOfflineVoiceData() {
  // This will be implemented with IndexedDB in the main app
  return [];
}

// Get offline image data
async function getOfflineImageData() {
  // This will be implemented with IndexedDB in the main app
  return [];
}

// Clear offline voice data
async function clearOfflineVoiceData() {
  // This will be implemented with IndexedDB in the main app
  console.log('Offline voice data cleared after sync');
}

// Clear offline image data
async function clearOfflineImageData() {
  // This will be implemented with IndexedDB in the main app
  console.log('Offline image data cleared after sync');
}

// Handle chat requests with offline support
async function handleChatRequest(request) {
  try {
    // Try network first
    const networkResponse = await fetch(request);
    
    // Cache successful responses
    if (networkResponse.ok) {
      const cache = await caches.open(CHAT_CACHE_NAME);
      cache.put(request, networkResponse.clone());
    }
    
    return networkResponse;
  } catch (error) {
    console.log('Network failed, trying cache:', error);
    
    // Network failed, try cache
    const cache = await caches.open(CHAT_CACHE_NAME);
    const cachedResponse = await cache.match(request);
    
    if (cachedResponse) {
      return cachedResponse;
    }
    
    // Return offline fallback
    return new Response(JSON.stringify({
      error: 'offline',
      message: 'You are offline. Showing cached conversations.',
      data: await getOfflineChatData()
    }), {
      headers: { 'Content-Type': 'application/json' }
    });
  }
}

// Get offline chat data from IndexedDB
async function getOfflineChatData() {
  // This will be implemented with IndexedDB in the main app
  return { conversations: [], offline: true };
}

// Sync all offline data
async function syncOfflineData() {
  try {
    // Sync conversations, usage, settings, etc.
    await syncChatData();
    // Add other sync operations here
    
    console.log('All offline data synced');
  } catch (error) {
    console.error('Offline data sync failed:', error);
  }
}

// Clear offline data after successful sync
async function clearOfflineData() {
  // This will be implemented with IndexedDB in the main app
  console.log('Offline data cleared after sync');
}

// Push notification handling
self.addEventListener('push', (event) => {
  const options = {
    body: event.data ? event.data.text() : 'New message from Otagon',
    icon: '/icon-192.png',
    badge: '/icon-192.png',
    vibrate: [100, 50, 100],
    data: {
      dateOfArrival: Date.now(),
      primaryKey: 1
    },
    actions: [
      {
        action: 'open',
        title: 'Open App',
        icon: '/icon-192.png'
      },
      {
        action: 'dismiss',
        title: 'Dismiss'
      }
    ]
  };

  event.waitUntil(
    self.registration.showNotification('Otagon', options)
  );
});

// Notification click handling
self.addEventListener('notificationclick', (event) => {
  event.notification.close();
  
  if (event.action === 'open') {
    event.waitUntil(
      clients.openWindow('/')
    );
  } else if (event.action === 'dismiss') {
    // Just close the notification
    return;
  } else {
    // Default action - open app
    event.waitUntil(
      clients.openWindow('/')
    );
  }
});

// Handle app updates
self.addEventListener('message', (event) => {
  if (event.data && event.data.type === 'SKIP_WAITING') {
    self.skipWaiting();
  }
  
  if (event.data && event.data.type === 'SYNC_OFFLINE_DATA') {
    // Trigger background sync for offline data
    self.registration.sync.register('offline-data-sync');
  }
});

// Activate event - clean up old caches
self.addEventListener('activate', (event) => {
  event.waitUntil(
    caches.keys().then((cacheNames) => {
      return Promise.all(
        cacheNames.map((cacheName) => {
          if (cacheName !== CACHE_NAME && cacheName !== CHAT_CACHE_NAME && 
              cacheName !== STATIC_CACHE && cacheName !== API_CACHE) {
            console.log('Deleting old cache:', cacheName);
            return caches.delete(cacheName);
          }
        })
      );
    })
  );
});

// Performance-optimized request handlers

// Handle static assets with cache-first strategy
async function handleStaticRequest(request) {
  try {
    // Check cache first
    const cachedResponse = await caches.match(request);
    if (cachedResponse) {
      return cachedResponse;
    }
    
    // Fetch from network and cache
    const networkResponse = await fetch(request);
    if (networkResponse.ok) {
      const cache = await caches.open(STATIC_CACHE);
      cache.put(request, networkResponse.clone());
    }
    
    return networkResponse;
  } catch (error) {
    console.log('Static request failed:', error);
    // Return offline fallback for critical assets
    if (request.url.includes('index.html')) {
      return caches.match('/');
    }
    throw error;
  }
}

// Handle external API requests with network-first strategy
async function handleExternalRequest(request) {
  try {
    // Try network first
    const networkResponse = await fetch(request);
    
    // Cache successful responses
    if (networkResponse.ok) {
      const cache = await caches.open(API_CACHE);
      cache.put(request, networkResponse.clone());
    }
    
    return networkResponse;
  } catch (error) {
    console.log('External request failed, trying cache:', error);
    
    // Try cache as fallback
    const cache = await caches.open(API_CACHE);
    const cachedResponse = await cache.match(request);
    
    if (cachedResponse) {
      return cachedResponse;
    }
    
    throw error;
  }
}

// Handle default requests with network-first strategy
async function handleDefaultRequest(request) {
  try {
    // Try network first
    const networkResponse = await fetch(request);
    
    // Cache successful responses
    if (networkResponse.ok) {
      const cache = await caches.open(CACHE_NAME);
      cache.put(request, networkResponse.clone());
    }
    
    return networkResponse;
  } catch (error) {
    console.log('Default request failed, trying cache:', error);
    
    // Try cache as fallback
    const cache = await caches.open(CACHE_NAME);
    const cachedResponse = await cache.match(request);
    
    if (cachedResponse) {
      return cachedResponse;
    }
    
    throw error;
  }
}

```n

## src\components\auth\AuthCallback.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\auth\AuthCallback.tsx.Extension.TrimStart('.'))

import React, { useEffect, useState, useRef } from 'react';
import { supabase } from '../../lib/supabase';
import { authService } from '../../services/authService';

interface AuthCallbackProps {
  onAuthSuccess: () => void;
  onAuthError: (error: string) => void;
}

const AuthCallback: React.FC<AuthCallbackProps> = ({ onAuthSuccess, onAuthError }) => {
  const [status, setStatus] = useState<'loading' | 'success' | 'error'>('loading');
  const [error, setError] = useState<string | null>(null);
  const hasProcessedRef = useRef(false);
  const subscriptionRef = useRef<{ unsubscribe: () => void } | null>(null);

  useEffect(() => {
    // Prevent multiple processing using ref (more reliable than state)
    if (hasProcessedRef.current) {
      console.log('ðŸ” [AuthCallback] Already processed, skipping...');
      return;
    }
    
    hasProcessedRef.current = true;
    
    const handleAuthCallback = async () => {
      try {
        console.log('ðŸ” [AuthCallback] Handling OAuth callback...');
        console.log('ðŸ” [AuthCallback] Current URL:', window.location.href);
        console.log('ðŸ” [AuthCallback] URL search params:', window.location.search);
        console.log('ðŸ” [AuthCallback] URL hash:', window.location.hash);

        // Check for OAuth errors in URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const hashParams = new URLSearchParams(window.location.hash.substring(1));
        
        const oauthError = urlParams.get('error') || hashParams.get('error');
        const errorDescription = urlParams.get('error_description') || hashParams.get('error_description');
        const errorCode = urlParams.get('error_code') || hashParams.get('error_code');
        
        console.log('ðŸ” [AuthCallback] OAuth parameters:', {
          oauthError,
          errorDescription,
          errorCode,
          urlParams: Object.fromEntries(urlParams.entries()),
          hashParams: Object.fromEntries(hashParams.entries())
        });
        
        if (oauthError) {
          console.error('ðŸ” [AuthCallback] OAuth error detected:', { oauthError, errorDescription, errorCode });
          let errorMessage = 'Authentication failed';
          
          // Handle email confirmation errors
          if (oauthError === 'access_denied' && errorCode === 'otp_expired') {
            errorMessage = 'Email confirmation link has expired. Please request a new confirmation email.';
          } else if (oauthError === 'access_denied' && errorDescription?.includes('Email link is invalid')) {
            errorMessage = 'Email confirmation link is invalid. Please request a new confirmation email.';
          } else if (oauthError === 'access_denied' && errorDescription?.includes('expired')) {
            errorMessage = 'Email confirmation link has expired. Please request a new confirmation email.';
          }
          // Handle OAuth errors
          else if (oauthError === 'server_error') {
            errorMessage = 'Authentication server error. This may be due to Supabase configuration. Please try again.';
          } else if (oauthError === 'access_denied') {
            errorMessage = 'Authentication was cancelled. Please try again.';
          } else if (oauthError === 'invalid_request') {
            errorMessage = 'Invalid authentication request. Please check configuration.';
          } else if (oauthError === 'unauthorized_client') {
            errorMessage = 'Authentication client is not authorized. Please check Supabase configuration.';
          } else if (oauthError === 'unsupported_response_type') {
            errorMessage = 'Authentication response type not supported. Please check Supabase configuration.';
          } else if (oauthError === 'invalid_scope') {
            errorMessage = 'Authentication scope is invalid. Please check Supabase configuration.';
          } else if (errorDescription) {
            errorMessage = decodeURIComponent(errorDescription);
          }
          
          setError(errorMessage);
          setStatus('error');
          onAuthError(errorMessage);
          return;
        }
        
        // Set up auth state change listener
        const { data: { subscription } } = supabase.auth.onAuthStateChange(async (event, session) => {
          console.log('ðŸ” [AuthCallback] Auth state change:', { event, session });
          
          if (event === 'SIGNED_IN' && session?.user) {
            console.log('ðŸ” [AuthCallback] User signed in:', session.user.email);
            console.log('ðŸ” [AuthCallback] User metadata:', session.user.user_metadata);
            console.log('ðŸ” [AuthCallback] App metadata:', session.user.app_metadata);
            console.log('ðŸ” [AuthCallback] User identities:', session.user.identities);
            
            // Detect the OAuth provider
            const provider = session.user.app_metadata?.provider || 
                           session.user.app_metadata?.providers?.[0] || 
                           session.user.identities?.[0]?.provider || 
                           'unknown';
            console.log('ðŸ” [AuthCallback] Detected provider:', provider);
            
            // Wait for database trigger to create user record
            console.log('ðŸ” [AuthCallback] Waiting for database trigger to create user record...');
            await new Promise(resolve => setTimeout(resolve, 1500)); // Increased wait time for Discord
            
            // Load user data through AuthService
            try {
              await authService.loadUserFromSupabase(session.user.id);
              console.log('ðŸ” [AuthCallback] User data loaded successfully');
              
              // User is authenticated, notify parent component
              setStatus('success');
              onAuthSuccess();
            } catch (loadError) {
              console.error('ðŸ” [AuthCallback] Error loading user data:', loadError);
              setError('Failed to load user data. Please try again.');
              setStatus('error');
              onAuthError('Failed to load user data');
            }
            
            // Unsubscribe from auth state changes
            subscription.unsubscribe();
          } else if (event === 'SIGNED_OUT') {
            console.log('ðŸ” [AuthCallback] User signed out');
            setError('Authentication failed');
            setStatus('error');
            onAuthError('Authentication failed');
            subscription.unsubscribe();
          }
        });
        
        // Store subscription in ref for cleanup
        subscriptionRef.current = subscription;
        
        // Also try to get the current session
        const { data, error } = await supabase.auth.getSession();
        console.log('ðŸ” [AuthCallback] Current session:', { data, error });
        
        if (error) {
          console.error('ðŸ” [AuthCallback] Auth callback error:', error);
          setError(error.message);
          setStatus('error');
          onAuthError(error.message);
          subscription.unsubscribe();
          return;
        }

        if (data.session?.user) {
          console.log('ðŸ” [AuthCallback] User already authenticated:', data.session.user.email);
          
          // Wait for database trigger to create user record
          console.log('ðŸ” [AuthCallback] Waiting for database trigger to create user record...');
          await new Promise(resolve => setTimeout(resolve, 1000));
          
          // Load user data through AuthService
          await authService.loadUserFromSupabase(data.session.user.id);
          
          // User is authenticated, notify parent component
          setStatus('success');
          onAuthSuccess();
          subscription.unsubscribe();
        } else {
          console.log('ðŸ” [AuthCallback] No session found, waiting for auth state change...');
          console.log('ðŸ” [AuthCallback] URL search params:', window.location.search);
          
          // Try to handle OAuth callback manually if there are URL parameters
          const urlParams = new URLSearchParams(window.location.search);
          const hashParams = new URLSearchParams(window.location.hash.substring(1));
          
          if (urlParams.has('code') || urlParams.has('error') || hashParams.has('access_token')) {
            console.log('ðŸ” [AuthCallback] OAuth parameters found, trying manual handling...');
            
            // Wait a bit for the OAuth process to complete
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            // Try to get session again
            const retrySession = await supabase.auth.getSession();
            console.log('ðŸ” [AuthCallback] Retry session after manual handling:', retrySession);
            
            if (retrySession.data.session?.user) {
              console.log('ðŸ” [AuthCallback] User authenticated after retry:', retrySession.data.session.user.email);
              
              // Wait for database trigger to create user record
              console.log('ðŸ” [AuthCallback] Waiting for database trigger to create user record...');
              await new Promise(resolve => setTimeout(resolve, 500));
              
              // Load user data through AuthService
              await authService.loadUserFromSupabase(retrySession.data.session.user.id);
              
              // User is authenticated, notify parent component
              setStatus('success');
              onAuthSuccess();
              subscription.unsubscribe();
              return;
            }
          }
          
          // Set a timeout to handle cases where auth state change doesn't fire
          setTimeout(() => {
            if (status === 'loading') {
              console.log('ðŸ” [AuthCallback] Timeout waiting for auth state change');
              setError('Authentication timeout');
              setStatus('error');
              onAuthError('Authentication timeout');
              subscription.unsubscribe();
            }
          }, 10000); // 10 second timeout
        }
      } catch (error) {
        console.error('ðŸ” [AuthCallback] Auth callback error:', error);
        const errorMessage = 'An unexpected error occurred';
        setError(errorMessage);
        setStatus('error');
        onAuthError(errorMessage);
      }
    };

    handleAuthCallback();
    
    // Cleanup function
    return () => {
      if (subscriptionRef.current) {
        subscriptionRef.current.unsubscribe();
      }
    };
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, []); // Empty deps - only run once on mount

  if (status === 'loading') {
    return (
      <div className="h-screen bg-gradient-to-br from-[#111111] to-[#0A0A0A] flex items-center justify-center">
        <div className="text-center">
          <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-[#FF4D4D] mx-auto mb-4"></div>
          <p className="text-[#CFCFCF] text-lg">Completing authentication...</p>
        </div>
      </div>
    );
  }

  if (status === 'error') {
    return (
      <div className="h-screen bg-gradient-to-br from-[#111111] to-[#0A0A0A] flex items-center justify-center">
        <div className="text-center">
          <div className="text-red-500 text-6xl mb-4">âš ï¸</div>
          <h2 className="text-2xl font-bold text-[#F5F5F5] mb-2">Authentication Error</h2>
          <p className="text-[#CFCFCF] mb-6">{error}</p>
          <div className="space-y-3">
            <button
              onClick={() => {
                // Clear the URL parameters and redirect to login
                window.history.replaceState({}, document.title, window.location.pathname);
                onAuthError('User cancelled authentication');
              }}
              className="bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] hover:from-[#D42A2A] hover:to-[#C87A1A] text-white font-bold py-3 px-6 rounded-xl transition-all duration-300 hover:scale-105 active:scale-95"
            >
              Return to Login
            </button>
            {error && error.includes('Email confirmation link') && (
              <button
                onClick={() => {
                  // Clear the URL parameters and redirect to login with a flag to show resend option
                  window.history.replaceState({}, document.title, window.location.pathname);
                  onAuthError('Email confirmation expired - show resend option');
                }}
                className="bg-gradient-to-r from-[#4F46E5] to-[#7C3AED] hover:from-[#4338CA] hover:to-[#6D28D9] text-white font-bold py-3 px-6 rounded-xl transition-all duration-300 hover:scale-105 active:scale-95"
              >
                Request New Confirmation Email
              </button>
            )}
          </div>
        </div>
      </div>
    );
  }

  return (
    <div className="h-screen bg-gradient-to-br from-[#111111] to-[#0A0A0A] flex items-center justify-center">
      <div className="text-center">
        <div className="text-green-500 text-6xl mb-4">âœ…</div>
        <h2 className="text-2xl font-bold text-[#F5F5F5] mb-2">Authentication Successful</h2>
        <p className="text-[#CFCFCF]">Redirecting to the app...</p>
      </div>
    </div>
  );
};

export default AuthCallback;


```n

## src\components\features\ChatInterface.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\features\ChatInterface.tsx.Extension.TrimStart('.'))

import React, { useState, useRef, useEffect } from 'react';
import ReactMarkdown from 'react-markdown';
import remarkGfm from 'remark-gfm';
import { Conversation, ActiveSessionState } from '../../types';
import ManualUploadToggle from '../ui/ManualUploadToggle';
import ScreenshotButton from '../ui/ScreenshotButton';
import DownloadIcon from '../ui/DownloadIcon';
import UserAvatar from '../ui/UserAvatar';
import AIAvatar from '../ui/AIAvatar';
import TypingIndicator from '../ui/TypingIndicator';
import SendIcon from '../ui/SendIcon';
import SuggestedPrompts from './SuggestedPrompts';
import { ActiveSessionToggle } from '../ui/ActiveSessionToggle';
import SubTabs from './SubTabs';
import { gameTabService } from '../../services/gameTabService';
import { tabManagementService } from '../../services/tabManagementService';

interface ChatInterfaceProps {
  conversation: Conversation | null;
  onSendMessage: (message: string, imageUrl?: string) => void;
  isLoading: boolean;
  isPCConnected?: boolean;
  onRequestConnect?: () => void;
  userTier?: string;
  onStop?: () => void;
  isManualUploadMode?: boolean;
  onToggleManualUploadMode?: () => void;
  suggestedPrompts?: string[];
  onSuggestedPromptClick?: (prompt: string) => void;
  activeSession?: ActiveSessionState;
  onToggleActiveSession?: () => void;
  initialMessage?: string;
  onMessageChange?: (message: string) => void;
}

const ChatInterface: React.FC<ChatInterfaceProps> = ({
  conversation,
  onSendMessage,
  isLoading,
  isPCConnected = false,
  onRequestConnect,
  userTier = 'free',
  onStop,
  isManualUploadMode = false,
  onToggleManualUploadMode,
  suggestedPrompts = [],
  onSuggestedPromptClick,
  activeSession,
  onToggleActiveSession,
  initialMessage = '',
  onMessageChange,
}) => {
  const [message, setMessage] = useState(initialMessage);
  const [imageFile, setImageFile] = useState<File | null>(null);
  const [imagePreview, setImagePreview] = useState<string | null>(null);
  const [isFocused, setIsFocused] = useState(false);
  const [showAutocomplete, setShowAutocomplete] = useState(false);
  const [autocompleteSuggestions, setAutocompleteSuggestions] = useState<string[]>([]);
  const [selectedSuggestionIndex, setSelectedSuggestionIndex] = useState(0);
  const messagesEndRef = useRef<HTMLDivElement>(null);
  const fileInputRef = useRef<HTMLInputElement>(null);
  const textareaRef = useRef<HTMLTextAreaElement>(null);
  const autocompleteRef = useRef<HTMLDivElement>(null);

  const scrollToBottom = () => {
    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
  };

  // Auto-resize textarea functionality
  const adjustTextareaHeight = () => {
    const textarea = textareaRef.current;
    if (textarea) {
      const MAX_HEIGHT = 120; // Max 5 lines
      const MIN_HEIGHT = 44; // Single line height
      
      textarea.style.height = 'auto';
      const scrollHeight = textarea.scrollHeight;
      const newHeight = Math.min(Math.max(scrollHeight, MIN_HEIGHT), MAX_HEIGHT);
      textarea.style.height = `${newHeight}px`;
    }
  };

  // Handle textarea value change
  const handleValueChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {
    const newValue = e.target.value;
    setMessage(newValue);
    adjustTextareaHeight();
    // Notify parent of message change
    onMessageChange?.(newValue);

    // Check for @ command to show autocomplete
    if (conversation && newValue.startsWith('@')) {
      const availableTabs = tabManagementService.getAvailableTabNames(conversation);
      if (availableTabs.length > 0) {
        setAutocompleteSuggestions(availableTabs);
        setShowAutocomplete(true);
        setSelectedSuggestionIndex(0);
      } else {
        setShowAutocomplete(false);
      }
    } else {
      setShowAutocomplete(false);
    }
  };

  // Handle suggestion selection
  const handleSelectSuggestion = (tabId: string) => {
    setMessage(`@${tabId} `);
    setShowAutocomplete(false);
    textareaRef.current?.focus();
  };

  // Handle key down events
  const handleKeyDown = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {
    // Handle autocomplete navigation
    if (showAutocomplete && autocompleteSuggestions.length > 0) {
      if (e.key === 'ArrowDown') {
        e.preventDefault();
        setSelectedSuggestionIndex(prev => 
          prev < autocompleteSuggestions.length - 1 ? prev + 1 : 0
        );
        return;
      } else if (e.key === 'ArrowUp') {
        e.preventDefault();
        setSelectedSuggestionIndex(prev => 
          prev > 0 ? prev - 1 : autocompleteSuggestions.length - 1
        );
        return;
      } else if (e.key === 'Tab' || (e.key === 'Enter' && showAutocomplete)) {
        e.preventDefault();
        handleSelectSuggestion(autocompleteSuggestions[selectedSuggestionIndex]);
        return;
      } else if (e.key === 'Escape') {
        e.preventDefault();
        setShowAutocomplete(false);
        return;
      }
    }

    // Handle normal Enter key
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      handleSubmit(e as any);
    }
  };

  useEffect(() => {
    scrollToBottom();
  }, [conversation?.messages]);

  // Adjust textarea height when message changes
  useEffect(() => {
    adjustTextareaHeight();
  }, [message]);

  // Update message when initialMessage prop changes (e.g., after tab switch)
  useEffect(() => {
    if (initialMessage !== undefined && initialMessage !== message) {
      setMessage(initialMessage);
    }
  }, [initialMessage]);

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    
    console.log('ðŸ“¤ [ChatInterface] Submit attempt:', { 
      message: message.trim(), 
      hasMessage: !!message.trim(), 
      hasImageFile: !!imageFile, 
      hasImagePreview: !!imagePreview,
      shouldSubmit: !(!message.trim() && !imageFile)
    });
    
    // Allow submission if there's either a message OR an image
    if (!message.trim() && !imageFile) {
      console.log('ðŸ“¤ [ChatInterface] Submission blocked: no message and no image');
      return;
    }

    const imageUrl = imagePreview || undefined;
    console.log('ðŸ“¤ [ChatInterface] Submitting:', { message, hasImage: !!imageUrl, imageUrl: imageUrl?.substring(0, 50) + '...' });
    onSendMessage(message, imageUrl);
    setMessage('');
    setImageFile(null);
    setImagePreview(null);
    if (fileInputRef.current) {
      fileInputRef.current.value = '';
    }
  };

  const handleImageUpload = (e: React.ChangeEvent<HTMLInputElement>) => {
    const file = e.target.files?.[0];
    console.log('ðŸ“¸ [ChatInterface] Image upload:', { file, fileName: file?.name, fileSize: file?.size });
    if (file) {
      setImageFile(file);
      const reader = new FileReader();
      reader.onload = (e) => {
        const result = e.target?.result as string;
        console.log('ðŸ“¸ [ChatInterface] Image preview created:', { 
          hasResult: !!result, 
          resultLength: result?.length,
          resultStart: result?.substring(0, 50) + '...'
        });
        setImagePreview(result);
      };
      reader.readAsDataURL(file);
    }
  };

  const removeImage = () => {
    setImageFile(null);
    setImagePreview(null);
    if (fileInputRef.current) {
      fileInputRef.current.value = '';
    }
  };

  const toggleManualUploadMode = () => {
    onToggleManualUploadMode?.();
  };

  // Function to download image in high quality
  const downloadImage = (imageSrc: string, index: number) => {
    try {
      // Create a temporary link element
      const link = document.createElement('a');
      link.href = imageSrc;
      
      // Generate filename with timestamp
      const timestamp = new Date().toISOString().slice(0, 19).replace(/:/g, '-');
      const filename = `otakon-screenshot-${index + 1}-${timestamp}.png`;
      link.download = filename;
      
      // Append to body, click, and remove
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
    } catch (error) {
      console.error('Failed to download image:', error);
      // Fallback: open image in new tab
      window.open(imageSrc, '_blank');
    }
  };


  // Show loading state if no conversation yet
  if (!conversation) {
    return (
      <div className="h-full bg-background flex items-center justify-center">
        <div className="text-center">
          <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-[#FF4D4D] mx-auto mb-4"></div>
          <p className="text-text-muted">Loading chat...</p>
          <p className="text-text-muted text-sm mt-2">This may take a moment after completing onboarding</p>
        </div>
      </div>
    );
  }

  // Safety check for conversation
  if (!conversation) {
    return (
      <div className="h-full bg-background flex flex-col overflow-hidden">
        <div className="flex-1 p-6 flex items-center justify-center">
          <div className="text-center">
            <p className="text-text-muted text-lg">Loading conversation...</p>
          </div>
        </div>
      </div>
    );
  }

  return (
    <div className="h-full bg-gradient-to-r from-surface/30 to-background/30 flex flex-col overflow-hidden">
      {/* Messages Area - Only this should scroll */}
      <div className={`flex-1 p-6 space-y-6 min-h-0 ${conversation.messages.length > 0 ? 'overflow-y-auto custom-scrollbar' : 'overflow-y-hidden'}`}>
        {conversation.messages.length === 0 ? (
          <div className="flex items-center justify-center h-full">
            <div className="text-center">
              <p className="text-text-muted text-lg">
                Start a conversation with <span className="bg-gradient-to-r from-[#FF4D4D] to-[#FFAB40] bg-clip-text text-transparent font-semibold">Otagon</span>
              </p>
              <p className="text-text-muted text-sm mt-2">Ask me anything about gaming, strategies, or tips.</p>
            </div>
          </div>
        ) : (
          conversation.messages.map((msg) => (
          <div
            key={msg.id}
            className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}
          >
            <div
              className={`max-w-[80%] ${
                msg.role === 'user'
                  ? 'chat-message-user'
                  : 'chat-message-ai'
              }`}
            >
              <div className="flex items-start gap-3">
                {/* Avatar */}
                <div className="flex-shrink-0">
                  {msg.role === 'user' ? (
                    <UserAvatar className="w-6 h-6 sm:w-8 sm:h-8 flex-shrink-0 text-[#D98C1F]" />
                  ) : (
                    <AIAvatar className="w-6 h-6 sm:w-8 sm:h-8 flex-shrink-0" />
                  )}
                </div>
                
                {/* Message content */}
                <div className="flex-1 min-w-0">
              {msg.imageUrl && (
                <div className="chat-image-container mb-3">
                  <img
                    src={msg.imageUrl}
                    alt="Uploaded"
                    className="w-full max-w-sm rounded-lg"
                  />
                  {/* Download button for single image */}
                  <div className="flex flex-wrap gap-2 mt-3 pt-3 border-t border-[#424242]/30">
                    <button
                      onClick={() => downloadImage(msg.imageUrl!, 0)}
                      className="flex items-center justify-center gap-2 px-2 sm:px-3 py-1.5 sm:py-2 border border-[#FF4D4D] text-[#FF4D4D] text-xs sm:text-sm font-medium rounded-lg hover:bg-[#FF4D4D] hover:text-white transition-all duration-300 hover:scale-105"
                      title="Download this screenshot"
                    >
                      <DownloadIcon className="w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0" />
                      <span className="hidden sm:inline">Download</span>
                    </button>
                  </div>
                </div>
              )}
                  <div className="text-[#F5F5F5] leading-relaxed">
                    <ReactMarkdown
                      remarkPlugins={[remarkGfm]}
                      components={{
                        h1: ({ children }) => (
                          <h1 className="text-lg font-bold text-[#F5F5F5] mb-3">{children}</h1>
                        ),
                        h2: ({ children }) => (
                          <h2 className="text-base font-semibold text-[#F5F5F5] mb-2">{children}</h2>
                        ),
                        h3: ({ children }) => (
                          <h3 className="text-sm font-semibold text-[#F5F5F5] mb-2">{children}</h3>
                        ),
                        p: ({ children }) => (
                          <p className="text-[#CFCFCF] leading-relaxed mb-2">{children}</p>
                        ),
                        ul: ({ children }) => (
                          <ul className="list-disc list-inside text-[#CFCFCF] mb-2 space-y-1">{children}</ul>
                        ),
                        ol: ({ children }) => (
                          <ol className="list-decimal list-inside text-[#CFCFCF] mb-2 space-y-1">{children}</ol>
                        ),
                        li: ({ children }) => (
                          <li className="text-[#CFCFCF]">{children}</li>
                        ),
                        strong: ({ children }) => (
                          <strong className="font-semibold text-[#F5F5F5]">{children}</strong>
                        ),
                        em: ({ children }) => (
                          <em className="italic text-[#E0E0E0]">{children}</em>
                        ),
                        code: ({ children }) => (
                          <code className="bg-[#2E2E2E] text-[#FF4D4D] px-1 py-0.5 rounded text-xs font-mono">
                            {children}
                          </code>
                        ),
                        pre: ({ children }) => (
                          <pre className="bg-[#1C1C1C] border border-[#424242] rounded-lg p-3 overflow-x-auto">
                            {children}
                          </pre>
                        ),
                        blockquote: ({ children }) => (
                          <blockquote className="border-l-4 border-[#FF4D4D] pl-4 italic text-[#B0B0B0] my-2">
                            {children}
                          </blockquote>
                        )
                      }}
                    >
                      {msg.content}
                    </ReactMarkdown>
                  </div>
                  
                  {/* Show suggested prompts after AI response */}
                  {msg.role === 'assistant' && suggestedPrompts.length > 0 && onSuggestedPromptClick && !isLoading && (
                    <div className="mt-4">
                      <SuggestedPrompts
                        prompts={suggestedPrompts}
                        onPromptClick={onSuggestedPromptClick}
                        isLoading={isLoading}
                        conversationId={conversation?.id}
                      />
                    </div>
                  )}
                  
                  <p className="text-xs text-[#A3A3A3] mt-3">
                    {new Date(msg.timestamp).toLocaleTimeString()}
                  </p>
                </div>
              </div>
            </div>
          </div>
          ))
        )}
        
        {isLoading && (
          <div className="flex justify-start">
            <div className="flex items-start gap-3">
              {/* AI Avatar */}
              <div className="flex-shrink-0">
                <AIAvatar className="w-6 h-6 sm:w-8 sm:h-8 flex-shrink-0" />
              </div>
              
              {/* Loading content */}
              <div className="flex-1 min-w-0">
                <div className="flex items-center gap-3 sm:gap-4 py-2 sm:py-3">
                  <TypingIndicator variant="dots" showText={false} />
                  {onStop && (
                    <button
                      onClick={onStop}
                      className="text-xs font-semibold px-2 sm:px-3 py-1 sm:py-1.5 rounded-full transition-all duration-200 bg-[#424242]/60 text-[#CFCFCF] hover:bg-[#424242] hover:text-[#F5F5F5] hover:scale-105"
                      aria-label="Stop generating response"
                    >
                      Stop
                    </button>
                  )}
                </div>
              </div>
            </div>
          </div>
        )}
        
        <div ref={messagesEndRef} />
      </div>

      {/* Image Preview */}
      {imagePreview && (
        <div className="p-4 border-t border-surface-light/20 flex-shrink-0">
          <div className="relative inline-block">
            <img
              src={imagePreview}
              alt="Preview"
              className="w-32 h-32 object-cover rounded-xl border-2 border-[#424242]/40"
            />
            <button
              onClick={removeImage}
              className="absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm hover:bg-red-600 transition-colors"
            >
              Ã—
            </button>
          </div>
        </div>
      )}


      {/* Sub-tabs Section - Show for released game conversations only (not Game Hub, not unreleased) */}
      {conversation && !conversation.isGameHub && !conversation.isUnreleased && conversation.subtabs && conversation.subtabs.length > 0 && (
        <div className="flex-shrink-0 px-3 pb-2">
          <SubTabs
            subtabs={conversation.subtabs}
            isLoading={isLoading}
          />
        </div>
      )}

      {/* Floating Chat Input Section with Gradient Border */}
      <div className="flex-shrink-0 bg-background/95 backdrop-blur-sm">
        <div className="mx-3 my-3 rounded-2xl p-px transition-all duration-300" style={{
          background: isFocused 
            ? 'linear-gradient(135deg, #FF4D4D, #FFAB40)'
            : 'transparent'
        }}>
          <form onSubmit={handleSubmit} className="relative p-3 rounded-2xl bg-gradient-to-r from-[#1A1A1A] to-[#0F0F0F] animate-pulse-glow" style={{
            background: 'linear-gradient(135deg, #1A1A1A 0%, #0F0F0F 100%)',
            boxShadow: '0 0 20px rgba(255, 77, 77, 0.3), 0 0 40px rgba(255, 171, 64, 0.2), 0 0 60px rgba(0, 0, 0, 0.1)'
          }}>
          
          {/* Autocomplete Dropdown */}
          {showAutocomplete && autocompleteSuggestions.length > 0 && (
            <div 
              ref={autocompleteRef}
              className="absolute bottom-full mb-2 left-3 right-3 bg-[#1C1C1C] border border-[#424242] rounded-lg shadow-lg z-50 max-h-48 overflow-y-auto"
            >
              <div className="p-2">
                <div className="text-xs text-[#A3A3A3] mb-2 px-2">
                  Select a subtab to update:
                </div>
                {autocompleteSuggestions.map((tabId, index) => {
                  const tab = conversation?.subtabs?.find(t => t.id === tabId);
                  return (
                    <button
                      key={tabId}
                      type="button"
                      onClick={() => handleSelectSuggestion(tabId)}
                      className={`w-full text-left px-3 py-2 rounded transition-colors ${
                        index === selectedSuggestionIndex
                          ? 'bg-[#E53A3A]/20 border border-[#E53A3A]/60'
                          : 'hover:bg-[#2A2A2A] border border-transparent'
                      }`}
                    >
                      <div className="flex items-center gap-2">
                        <span className="text-[#E53A3A] font-mono text-sm">@{tabId}</span>
                        {tab && (
                          <span className="text-[#888888] text-xs">- {tab.title}</span>
                        )}
                      </div>
                    </button>
                  );
                })}
              </div>
              <div className="px-3 py-2 border-t border-[#424242]/30 bg-[#1A1A1A]/50">
                <div className="text-xs text-[#888888]">
                  Use â†‘â†“ to navigate, Tab/Enter to select, Esc to cancel
                </div>
              </div>
            </div>
          )}

          {/* Textarea Container - Grows upward */}
          <div className="relative mb-2">
            <textarea
              ref={textareaRef}
              value={message}
              onChange={handleValueChange}
              onKeyDown={handleKeyDown}
              onFocus={() => setIsFocused(true)}
              onBlur={() => setIsFocused(false)}
              placeholder="Type your message..."
              className="w-full px-4 sm:px-6 text-base text-[#F5F5F5] placeholder-[#A3A3A3] resize-none overflow-y-auto focus:outline-none disabled:opacity-60 bg-transparent border-0 rounded-xl"
              style={{
                minHeight: '44px',
                maxHeight: '120px',
                lineHeight: '44px',
                height: '44px',
                paddingTop: '10px',
                paddingBottom: '10px'
              }}
              disabled={isLoading}
              rows={1}
            />
          </div>
          
          {/* Fixed Button Row - Always at bottom */}
          <div className="flex items-center space-x-2 sm:space-x-3">
            <div className="flex-1 flex items-center space-x-2 sm:space-x-3">
              <input
                type="file"
                ref={fileInputRef}
                onChange={handleImageUpload}
                accept="image/*"
                className="hidden"
              />
              <button
                type="button"
                onClick={() => fileInputRef.current?.click()}
                className="w-12 h-12 sm:w-14 sm:h-14 rounded-xl bg-gradient-to-r from-[#2E2E2E]/90 to-[#1C1C1C]/90 flex items-center justify-center transition-all duration-300 hover:scale-105 text-text-muted hover:text-text-primary"
              >
                <svg className="w-5 h-5 sm:w-6 sm:h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                </svg>
              </button>

              {/* Only show ScreenshotButton and ManualUploadToggle when connected to PC */}
              {isPCConnected && (
                <>
                  <ManualUploadToggle
                    isManualMode={isManualUploadMode}
                    onToggle={toggleManualUploadMode}
                    isConnected={isPCConnected}
                  />
                  <ScreenshotButton
                    isConnected={isPCConnected}
                    isProcessing={isLoading}
                    isManualUploadMode={isManualUploadMode}
                    onRequestConnect={onRequestConnect}
                    usage={{ tier: userTier as any }}
                  />
                </>
              )}

            </div>
            
            {/* Active Session Toggle - Show only for released game tabs */}
            {/* For unreleased games, show "Discuss" mode label with disabled toggle */}
            {conversation && gameTabService.isGameTab(conversation) && activeSession && (
              conversation.isUnreleased ? (
                <div className="flex items-center gap-2 px-4 py-2 bg-surface/50 rounded-lg border border-surface-light/20">
                  <span className="text-sm font-medium text-text-muted">Discuss Mode</span>
                  <div className="text-xs text-text-muted/60">(No Playing mode until release)</div>
                </div>
              ) : onToggleActiveSession && (
                <ActiveSessionToggle
                  isActive={activeSession.isActive && activeSession.currentGameId === conversation.id}
                  onClick={onToggleActiveSession}
                />
              )
            )}
            
            <button
              type="submit"
              disabled={!message.trim() && !imageFile}
              aria-label="Send message"
              className={`flex items-center justify-center w-12 h-12 sm:w-14 sm:h-14 rounded-xl transition-all duration-300 disabled:cursor-not-allowed ${
                (!message.trim() && !imageFile) || isLoading
                  ? 'bg-[#2E2E2E]/15 text-[#A3A3A3]/25 scale-100'
                  : 'bg-gradient-to-r from-[#FFAB40] to-[#FF8C00] text-[#181818] scale-100 hover:scale-105 hover:shadow-lg hover:shadow-[#FFAB40]/25 active:scale-95 font-semibold'
              }`}
            >
              {isLoading ? (
                <div className="animate-spin rounded-full h-5 w-5 border-b-2 border-current"></div>
              ) : (
                <SendIcon className="w-5 h-5 sm:w-6 sm:h-6" />
              )}
            </button>
          </div>
          </form>
        </div>
      </div>
    </div>
  );
};

export default ChatInterface;


```n

## src\components\features\GameProgressBar.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\features\GameProgressBar.tsx.Extension.TrimStart('.'))

import React from 'react';

interface GameProgressBarProps {
  progress: number; // 0-100
  gameTitle?: string;
  className?: string;
}

const GameProgressBar: React.FC<GameProgressBarProps> = ({ 
  progress,
  className = '' 
}) => {
  const clampedProgress = Math.min(Math.max(progress, 0), 100);
  
  return (
    <div className={`relative ${className}`}>
      {/* Progress Track */}
      <div className="relative h-2 bg-surface-light/20 rounded-full overflow-hidden">
        {/* Progress Fill */}
        <div
          className="absolute left-0 top-0 h-full bg-gradient-to-r from-primary to-primary-dark transition-all duration-500 ease-out"
          style={{ width: `${clampedProgress}%` }}
        />
        
        {/* Progress Dot */}
        <div
          className="absolute top-1/2 -translate-y-1/2 w-4 h-4 bg-white rounded-full shadow-lg border-2 border-primary transition-all duration-500 ease-out"
          style={{ 
            left: `${clampedProgress}%`,
            transform: `translateX(-50%) translateY(-50%)`
          }}
        >
          {/* Pulse animation for recent updates */}
          <div className="absolute inset-0 bg-primary/30 rounded-full animate-ping" />
        </div>
      </div>
    </div>
  );
};

export default GameProgressBar;


```n

## src\components\features\RichChatMessage.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\features\RichChatMessage.tsx.Extension.TrimStart('.'))


```n

## src\components\features\SubTabs.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\features\SubTabs.tsx.Extension.TrimStart('.'))

import React, { useState, useEffect } from 'react';
import { SubTab } from '../../types';
import ReactMarkdown from 'react-markdown';
import remarkGfm from 'remark-gfm';
import { ChevronDownIcon, ChevronUpIcon } from '@heroicons/react/24/outline';

interface SubTabsProps {
  subtabs: SubTab[];
  activeTabId?: string;
  onTabClick?: (tabId: string) => void;
  isLoading?: boolean;
}

const SubTabs: React.FC<SubTabsProps> = ({ 
  subtabs = [], 
  activeTabId, 
  onTabClick, 
  isLoading = false 
}) => {
  const [localActiveTab, setLocalActiveTab] = useState<string>(activeTabId || subtabs[0]?.id || '');
  const [isExpanded, setIsExpanded] = useState<boolean>(false);
  const [hasUserInteracted, setHasUserInteracted] = useState<boolean>(false);

  const currentActiveTab = activeTabId || localActiveTab;
  const activeTab = subtabs.find(tab => tab.id === currentActiveTab);

  // Auto-expand when subtabs finish loading (ONLY if user hasn't manually controlled it)
  useEffect(() => {
    // Only auto-expand if user hasn't manually interacted with the accordion
    if (hasUserInteracted) {
      return;
    }

    // Check if we have subtabs that are loaded (not loading and have content)
    const hasLoadedContent = subtabs.some(tab => 
      tab.status === 'loaded' && tab.content && tab.content.trim().length > 0
    );
    
    // Auto-expand if we have loaded content and we're not already expanded
    if (hasLoadedContent && !isExpanded) {
      console.log('ðŸ“‚ [SubTabs] Auto-expanding subtabs with loaded content');
      setIsExpanded(true);
    }
  }, [subtabs, isExpanded, hasUserInteracted]);

  const handleTabClick = (tabId: string) => {
    setLocalActiveTab(tabId);
    onTabClick?.(tabId);
  };

  const toggleExpanded = () => {
    setIsExpanded(!isExpanded);
    setHasUserInteracted(true); // Mark that user has manually controlled the accordion
  };

  // Return null if no subtabs (after hooks)
  if (!subtabs || subtabs.length === 0) {
    return null;
  }

  return (
    <div className="mb-4 bg-[#1C1C1C]/60 border border-[#424242]/40 rounded-xl backdrop-blur-sm transition-all duration-300">
      {/* Tab Headers with Expand/Collapse Button */}
      <div className={`flex items-center gap-2 p-2 ${isExpanded ? 'border-b border-[#424242]/40' : ''}`}>
        <div className="flex flex-wrap gap-1 flex-1">
          {subtabs.map((tab) => (
            <button
              key={tab.id}
              onClick={() => handleTabClick(tab.id)}
              className={`
                px-3 py-2 text-xs font-medium rounded-lg transition-all duration-200
                ${currentActiveTab === tab.id
                  ? 'bg-[#FF4D4D] text-white shadow-lg'
                  : 'bg-[#2E2E2E]/60 text-[#A3A3A3] hover:bg-[#424242]/60 hover:text-[#F5F5F5]'
                }
                ${tab.isNew ? 'ring-2 ring-[#FF4D4D]/50' : ''}
              `}
              disabled={isLoading}
            >
              <div className="flex items-center gap-2">
                {tab.isNew && (
                  <div className="w-2 h-2 bg-[#FF4D4D] rounded-full animate-pulse" />
                )}
                <span>{tab.title}</span>
                {tab.status === 'loading' && (
                  <div className="w-3 h-3 border border-current border-t-transparent rounded-full animate-spin" />
                )}
                {tab.status === 'error' && (
                  <div className="w-3 h-3 text-red-400">âš </div>
                )}
              </div>
            </button>
          ))}
        </div>
        
        {/* Expand/Collapse Button */}
        <button
          onClick={toggleExpanded}
          className="flex-shrink-0 p-2 rounded-lg bg-[#2E2E2E]/60 text-[#A3A3A3] hover:bg-[#424242]/60 hover:text-[#F5F5F5] transition-all duration-200"
          aria-label={isExpanded ? 'Collapse content' : 'Expand content'}
        >
          {isExpanded ? (
            <ChevronDownIcon className="w-4 h-4" />
          ) : (
            <ChevronUpIcon className="w-4 h-4" />
          )}
        </button>
      </div>

      {/* Tab Content - Only shown when expanded */}
      {isExpanded && activeTab && (
        <div className="p-4 max-h-64 overflow-y-auto transition-all duration-300">
          {activeTab.status === 'loading' || (!activeTab.content && isLoading) ? (
            <div className="flex items-center justify-center py-8">
              <div className="flex items-center gap-3 text-[#A3A3A3]">
                <div className="w-5 h-5 border-2 border-[#FF4D4D] border-t-transparent rounded-full animate-spin" />
                <span>Loading {activeTab.title}...</span>
              </div>
            </div>
          ) : activeTab.status === 'error' ? (
            <div className="text-center py-8 text-[#A3A3A3]">
              <div className="text-4xl mb-2">âš ï¸</div>
              <p>Failed to load {activeTab.title} content</p>
              <p className="text-sm mt-1">Please try again later</p>
            </div>
          ) : activeTab.content ? (
            <div className="prose prose-invert prose-sm max-w-none">
              <ReactMarkdown
                remarkPlugins={[remarkGfm]}
                components={{
                  h1: ({ children }) => (
                    <h1 className="text-lg font-bold text-[#F5F5F5] mb-3">{children}</h1>
                  ),
                  h2: ({ children }) => (
                    <h2 className="text-base font-semibold text-[#F5F5F5] mb-2">{children}</h2>
                  ),
                  h3: ({ children }) => (
                    <h3 className="text-sm font-semibold text-[#F5F5F5] mb-2">{children}</h3>
                  ),
                  p: ({ children }) => (
                    <p className="text-[#CFCFCF] leading-relaxed mb-2">{children}</p>
                  ),
                  ul: ({ children }) => (
                    <ul className="list-disc list-inside text-[#CFCFCF] mb-2 space-y-1">{children}</ul>
                  ),
                  ol: ({ children }) => (
                    <ol className="list-decimal list-inside text-[#CFCFCF] mb-2 space-y-1">{children}</ol>
                  ),
                  li: ({ children }) => (
                    <li className="text-[#CFCFCF]">{children}</li>
                  ),
                  strong: ({ children }) => (
                    <strong className="font-semibold text-[#F5F5F5]">{children}</strong>
                  ),
                  em: ({ children }) => (
                    <em className="italic text-[#E0E0E0]">{children}</em>
                  ),
                  code: ({ children }) => (
                    <code className="bg-[#2E2E2E] text-[#FF4D4D] px-1 py-0.5 rounded text-xs font-mono">
                      {children}
                    </code>
                  ),
                  pre: ({ children }) => (
                    <pre className="bg-[#1C1C1C] border border-[#424242] rounded-lg p-3 overflow-x-auto">
                      {children}
                    </pre>
                  ),
                  blockquote: ({ children }) => (
                    <blockquote className="border-l-4 border-[#FF4D4D] pl-4 italic text-[#B0B0B0] my-2">
                      {children}
                    </blockquote>
                  ),
                }}
              >
                {activeTab.content}
              </ReactMarkdown>
            </div>
          ) : (
            <div className="text-center py-8 text-[#A3A3A3]">
              <p>No content available for {activeTab.title}</p>
            </div>
          )}
        </div>
      )}
    </div>
  );
};

export default SubTabs;


```n

## src\components\features\SuggestedPrompts.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\features\SuggestedPrompts.tsx.Extension.TrimStart('.'))

import React, { useState, useEffect } from 'react';
import { suggestedPromptsService } from '../../services/suggestedPromptsService';
import { newsPrompts } from '../../types';

interface SuggestedPromptsProps {
  prompts: string[];
  onPromptClick: (prompt: string) => void;
  isLoading: boolean;
  conversationId?: string; // To detect "Game Hub" tab
}

const SuggestedPrompts: React.FC<SuggestedPromptsProps> = ({ 
  prompts, 
  onPromptClick, 
  isLoading,
  conversationId = ''
}) => {
  const [isMobile, setIsMobile] = useState(false);
  const [accordionOpen, setAccordionOpen] = useState(true);
  const [usedPrompts, setUsedPrompts] = useState<Set<string>>(new Set());

  const isGameHub = conversationId === 'game-hub' || conversationId === 'everything-else';
  
  // For Game Hub tab:
  // - If prompts match newsPrompts (initial state), show newsPrompts with usage tracking
  // - If prompts are different (AI-generated), show those instead (contextual suggestions after AI response)
  const isShowingNewsPrompts = isGameHub && 
    (prompts.length === newsPrompts.length && prompts.every((p, i) => p === newsPrompts[i]));
  
  const displayPrompts = isShowingNewsPrompts ? newsPrompts : prompts;

  // Check screen size for mobile accordion
  useEffect(() => {
    const mq = window.matchMedia('(max-width: 640px)');
    const apply = () => {
      setIsMobile(mq.matches);
      setAccordionOpen(!mq.matches); // Collapse by default on mobile
    };
    apply();
    mq.addEventListener('change', apply);
    return () => mq.removeEventListener('change', apply);
  }, []);

  // Load used prompts status (only for news prompts)
  useEffect(() => {
    if (isShowingNewsPrompts) {
      const used = new Set(newsPrompts.filter(p => suggestedPromptsService.isPromptUsed(p)));
      setUsedPrompts(used);
    }
  }, [isShowingNewsPrompts, displayPrompts]);

  // Handle prompt click
  const handlePromptClick = (prompt: string) => {
    if (isShowingNewsPrompts) {
      // Mark as used for news prompts
      suggestedPromptsService.markPromptAsUsed(prompt);
      setUsedPrompts(prev => new Set([...prev, prompt]));
    }
    onPromptClick(prompt);
  };

  // Don't show if loading or no prompts
  if (isLoading || displayPrompts.length === 0) {
    return null;
  }

  // Hide if all news prompts are used (only for news prompts view)
  if (isShowingNewsPrompts && suggestedPromptsService.areAllPromptsUsed(newsPrompts)) {
    return null;
  }

  return (
    <div className="pt-3 animate-fade-in">
      {/* Mobile accordion header - only for news prompts */}
      {isMobile && isShowingNewsPrompts && (
        <button
          type="button"
          aria-expanded={accordionOpen}
          onClick={() => setAccordionOpen(v => !v)}
          className="w-full flex items-center justify-between px-3 py-2 rounded-lg border border-[#424242]/40 bg-[#1C1C1C]/60 text-[#E5E5E5] text-sm font-medium mb-2"
        >
          <span>Gaming News Suggestions</span>
          <svg 
            className={`w-4 h-4 transition-transform ${accordionOpen ? 'rotate-180' : ''}`} 
            viewBox="0 0 20 20" 
            fill="currentColor"
          >
            <path 
              fillRule="evenodd" 
              d="M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.24a.75.75 0 01-1.06 0L5.25 8.29a.75.75 0 01-.02-1.08z" 
              clipRule="evenodd"
            />
          </svg>
        </button>
      )}

      {/* Prompts grid - show if not mobile or accordion is open */}
      {(!isMobile || accordionOpen) && (
        <div className="grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3">
          {displayPrompts.map((prompt, index) => {
            const isUsed = isShowingNewsPrompts && usedPrompts.has(prompt);
            
            return (
              <button
                key={index}
                onClick={() => !isUsed && handlePromptClick(prompt)}
                disabled={isUsed}
                className={`text-left p-3 sm:p-4 border rounded-lg sm:rounded-xl transition-all duration-200 backdrop-blur-sm ${
                  isUsed 
                    ? 'bg-[#2A2A2A]/60 border-[#555555]/30 text-[#888888] cursor-not-allowed opacity-70' 
                    : 'bg-[#1C1C1C]/60 border-[#424242]/40 text-[#CFCFCF] hover:bg-[#E53A3A]/20 hover:border-[#E53A3A]/60 hover:scale-[1.02] active:scale-95'
                }`}
              >
                <div className="flex items-start justify-between gap-2">
                  <p className={`font-medium text-xs sm:text-sm leading-relaxed flex-1 ${
                    isUsed ? 'text-[#888888]' : 'text-[#CFCFCF]'
                  }`}>
                    {prompt}
                  </p>
                  {isUsed && (
                    <span className="text-[#5CBB7B] text-sm flex-shrink-0" aria-label="Used">
                      âœ“
                    </span>
                  )}
                </div>
              </button>
            );
          })}
        </div>
      )}
    </div>
  );
};

export default SuggestedPrompts;


```n

## src\components\layout\Sidebar.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\layout\Sidebar.tsx.Extension.TrimStart('.'))

import React, { useState, useRef } from 'react';
import { Conversations, Conversation } from '../../types';
import ContextMenu from '../ui/ContextMenu';

interface SidebarProps {
  isOpen: boolean;
  onClose: () => void;
  conversations: Conversations;
  activeConversation: Conversation | null;
  onConversationSelect: (id: string) => void;
  onDeleteConversation: (id: string) => void;
  onPinConversation?: (id: string) => void;
  onUnpinConversation?: (id: string) => void;
  onClearConversation?: (id: string) => void;
  onAddGame?: () => void;
}

const Sidebar: React.FC<SidebarProps> = ({
  isOpen,
  onClose,
  conversations,
  activeConversation,
  onConversationSelect,
  onDeleteConversation,
  onPinConversation,
  onUnpinConversation,
  onClearConversation,
  onAddGame,
}) => {
  // Context menu state
  const [contextMenu, setContextMenu] = useState<{
    isOpen: boolean;
    position: { x: number; y: number };
    conversationId: string | null;
  }>({
    isOpen: false,
    position: { x: 0, y: 0 },
    conversationId: null,
  });

  // Long press detection
  const longPressTimer = useRef<NodeJS.Timeout | null>(null);
  const longPressDelay = 1500; // 1.5 seconds

  // Sort conversations: Game Hub first, then pinned, then others (newest last)
  const conversationList = Object.values(conversations).sort((a, b) => {
    // "Game Hub" always at top
    const aIsGameHub = a.isGameHub || a.id === 'game-hub' || a.title === 'Game Hub';
    const bIsGameHub = b.isGameHub || b.id === 'game-hub' || b.title === 'Game Hub';
    
    if (aIsGameHub && !bIsGameHub) {
      return -1;
    }
    if (!aIsGameHub && bIsGameHub) {
      return 1;
    }
    
    // Pinned conversations next (sorted by pinned date, oldest pinned first)
    if (a.isPinned && !b.isPinned) {
      return -1;
    }
    if (!a.isPinned && b.isPinned) {
      return 1;
    }
    if (a.isPinned && b.isPinned) {
      return (a.pinnedAt || 0) - (b.pinnedAt || 0);
    }
    
    // Then by creation date (oldest first, newest last)
    return a.createdAt - b.createdAt;
  });

  const handleContextMenu = (e: React.MouseEvent, conversationId: string) => {
    e.preventDefault();
    e.stopPropagation();
    
    setContextMenu({
      isOpen: true,
      position: { x: e.clientX, y: e.clientY },
      conversationId,
    });
  };

  const handleLongPressStart = (conversationId: string) => {
    longPressTimer.current = setTimeout(() => {
      setContextMenu({
        isOpen: true,
        position: { x: window.innerWidth / 2, y: window.innerHeight / 2 },
        conversationId,
      });
    }, longPressDelay);
  };

  const handleLongPressEnd = () => {
    if (longPressTimer.current) {
      clearTimeout(longPressTimer.current);
      longPressTimer.current = null;
    }
  };

  const closeContextMenu = () => {
    setContextMenu({
      isOpen: false,
      position: { x: 0, y: 0 },
      conversationId: null,
    });
  };

  const handleDelete = () => {
    if (contextMenu.conversationId) {
      onDeleteConversation(contextMenu.conversationId);
      closeContextMenu();
    }
  };

  const handlePin = () => {
    if (contextMenu.conversationId && onPinConversation) {
      onPinConversation(contextMenu.conversationId);
      closeContextMenu();
    }
  };

  const handleUnpin = () => {
    if (contextMenu.conversationId && onUnpinConversation) {
      onUnpinConversation(contextMenu.conversationId);
      closeContextMenu();
    }
  };

  const handleClearConversation = () => {
    if (contextMenu.conversationId && onClearConversation) {
      onClearConversation(contextMenu.conversationId);
      closeContextMenu();
    }
  };

  return (
    <>
      {/* Overlay */}
      {isOpen && (
        <div
          className="fixed inset-0 bg-black/60 backdrop-blur-md z-40 lg:hidden"
          onClick={onClose}
        />
      )}

      {/* Sidebar */}
      <div className={`fixed inset-y-0 left-0 z-50 w-72 sm:w-80 bg-gradient-to-b from-surface to-background border-r border-surface-light/20 transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0 ${
        isOpen ? 'translate-x-0' : '-translate-x-full'
      }`} style={{ zIndex: 50 }}>
        <div className="flex flex-col h-full">
          {/* Header */}
          <div className="p-4 sm:p-6 border-b border-surface-light/20 flex-shrink-0 relative" style={{ zIndex: 10 }}>
            <div className="flex items-center justify-between">
              <h2 className="text-xl sm:text-2xl font-bold text-text-primary">Conversations</h2>
              <button
                onClick={onClose}
                className="lg:hidden btn-icon p-3 text-text-muted hover:text-text-primary active:scale-95 min-h-[44px] min-w-[44px] flex items-center justify-center"
              >
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                </svg>
              </button>
            </div>
          </div>


          {/* Add Game Button */}
          {onAddGame && (
            <div className="px-4 sm:px-6 pt-4 pb-2">
              <button
                onClick={onAddGame}
                className="w-full px-4 py-3 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] hover:from-[#D42A2A] hover:to-[#C87A1A] text-white font-medium rounded-lg transition-all shadow-lg hover:shadow-xl active:scale-95 flex items-center justify-center gap-2"
              >
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4v16m8-8H4" />
                </svg>
                <span>Add Game</span>
              </button>
            </div>
          )}

          {/* Conversation List */}
          <div className="flex-1 overflow-y-auto px-4 sm:px-6 pb-4 sm:pb-6 custom-scrollbar" style={{ minHeight: 0 }}>
            <div className="space-y-2 sm:space-y-3 pt-2">
              {conversationList.map((conversation) => {
                const isGameHub = conversation.isGameHub || conversation.id === 'game-hub' || conversation.title === 'Game Hub';
                const isUnreleased = conversation.isUnreleased || false;
                const isRegularGame = !isGameHub && !isUnreleased && conversation.gameTitle;
                
                // Determine border color based on tab type
                let borderClass = '';
                let titleClass = 'text-text-primary';
                
                if (isGameHub) {
                  // Game Hub: Otagon brand gradient (red to orange)
                  borderClass = 'border-l-2 border-gradient-to-b from-[#FF4D4D] to-[#FFAB40]';
                  titleClass = 'bg-gradient-to-r from-[#FF4D4D] to-[#FFAB40] bg-clip-text text-transparent';
                } else if (isUnreleased) {
                  // Unreleased games: Yellow
                  borderClass = 'border-l-2 border-yellow-500';
                  titleClass = 'text-yellow-400';
                } else if (isRegularGame) {
                  // Regular games: Orange
                  borderClass = 'border-l-2 border-orange-500';
                  titleClass = 'text-orange-400';
                }
                // Non-game conversations: No border, default text color
                
                return (
                  <div
                    key={conversation.id}
                    className={`conversation-tab cursor-pointer transition-all duration-300 relative ${
                      activeConversation?.id === conversation.id
                        ? 'conversation-tab-active'
                        : ''
                    } ${borderClass}`}
                    onClick={() => onConversationSelect(conversation.id)}
                    onContextMenu={(e) => handleContextMenu(e, conversation.id)}
                    onMouseDown={() => handleLongPressStart(conversation.id)}
                    onMouseUp={handleLongPressEnd}
                    onMouseLeave={handleLongPressEnd}
                    onTouchStart={() => handleLongPressStart(conversation.id)}
                    onTouchEnd={handleLongPressEnd}
                    style={{ zIndex: 1 }}
                  >
                    <div className="flex items-center justify-between p-4 min-h-[60px]">
                      <div className="flex-1 min-w-0">
                        <div className="flex items-center space-x-2">
                          <p className={`text-xs font-medium truncate ${titleClass}`}>
                            {conversation.title}
                          </p>
                          {isUnreleased && (
                            <span className="flex-shrink-0 px-1.5 py-0.5 bg-yellow-500/20 border border-yellow-500/40 rounded text-[10px] text-yellow-400 font-medium">
                              UPCOMING
                            </span>
                          )}
                          {conversation.isPinned && (
                            <svg className="w-3 h-3 text-primary-dark flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                              <path d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z" />
                            </svg>
                          )}
                        </div>
                        <p className="text-xs text-text-muted mt-2">
                          {conversation.messages.length} messages
                        </p>
                        <p className="text-xs text-text-muted mt-1">
                          {new Date(conversation.updatedAt).toLocaleDateString()}
                        </p>
                    </div>
                    
                    {/* Delete button - only show for non-Game Hub conversations */}
                    {!isGameHub && (
                      <button
                        onClick={(e) => {
                          e.stopPropagation();
                          onDeleteConversation(conversation.id);
                        }}
                        className="opacity-0 group-hover:opacity-100 p-3 text-text-muted hover:text-red-400 transition-all duration-200 rounded-lg hover:bg-red-500/10 active:scale-95 min-h-[44px] min-w-[44px] flex items-center justify-center"
                      >
                        <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                        </svg>
                      </button>
                    )}
                  </div>
                </div>
                );
              })}
              
              {conversationList.length === 0 && (
                <div className="text-center py-12">
                  <div className="w-16 h-16 bg-gradient-to-r from-primary/20 to-secondary/20 rounded-full flex items-center justify-center mx-auto mb-4">
                    <svg className="w-8 h-8 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
                    </svg>
                  </div>
                  <p className="text-text-muted text-lg">No conversations yet</p>
                  <p className="text-sm text-text-muted mt-2">Create your first conversation to get started</p>
                </div>
              )}
            </div>
          </div>
        </div>
      </div>

      {/* Context Menu */}
      <ContextMenu
        isOpen={contextMenu.isOpen}
        position={contextMenu.position}
        onClose={closeContextMenu}
        onDelete={handleDelete}
        onPin={handlePin}
        onUnpin={handleUnpin}
        onClearConversation={handleClearConversation}
        canDelete={contextMenu.conversationId ? !conversations[contextMenu.conversationId]?.isGameHub : true}
        canPin={contextMenu.conversationId ? !conversations[contextMenu.conversationId]?.isGameHub : true}
        isPinned={contextMenu.conversationId ? conversations[contextMenu.conversationId]?.isPinned : false}
        isEverythingElse={contextMenu.conversationId ? conversations[contextMenu.conversationId]?.isGameHub === true : false}
      />
    </>
  );
};

export default Sidebar;


```n

## src\components\modals\AboutModal.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\modals\AboutModal.tsx.Extension.TrimStart('.'))

import React from 'react';
import Modal from '../ui/Modal';

interface AboutModalProps {
  isOpen: boolean;
  onClose: () => void;
}

const AboutModal: React.FC<AboutModalProps> = ({ isOpen, onClose }) => {
  return (
    <Modal isOpen={isOpen} onClose={onClose} title="About Otagon">
      <div className="space-y-6">
        <div className="text-left">
          <h3 className="text-2xl font-bold text-text-primary mb-4">
            Your Spoiler-Free Gaming Companion
          </h3>
          <p className="text-text-secondary leading-relaxed">
            Otagon is an AI-powered gaming assistant that helps you progress through games 
            without spoiling the experience. Upload screenshots, ask questions, and get 
            contextual hints that keep you playing.
          </p>
        </div>

        <div className="space-y-4">
          <h4 className="text-lg font-semibold text-text-primary">Key Features</h4>
          <ul className="space-y-2 text-text-secondary">
            <li className="flex items-start space-x-2">
              <span className="text-primary">â€¢</span>
              <span>Screenshot analysis for instant game context</span>
            </li>
            <li className="flex items-start space-x-2">
              <span className="text-primary">â€¢</span>
              <span>AI-powered hints without spoilers</span>
            </li>
            <li className="flex items-start space-x-2">
              <span className="text-primary">â€¢</span>
              <span>Real-time PC connection for seamless assistance</span>
            </li>
            <li className="flex items-start space-x-2">
              <span className="text-primary">â€¢</span>
              <span>Conversation history and game tracking</span>
            </li>
          </ul>
        </div>

        <div className="space-y-4">
          <h4 className="text-lg font-semibold text-text-primary">Version</h4>
          <p className="text-text-secondary">1.0.0 - Initial Release</p>
        </div>

        <div className="space-y-4">
          <h4 className="text-lg font-semibold text-text-primary">Frequently Asked Questions</h4>
          <div className="space-y-4">
            <div className="bg-gradient-to-r from-[#1C1C1C]/60 to-[#0A0A0A]/60 backdrop-blur-xl border border-neutral-800/60 rounded-lg p-4">
              <h5 className="text-base font-semibold text-text-primary mb-2">How does Otagon work?</h5>
              <p className="text-text-secondary text-sm leading-relaxed">Press a hotkey while gaming, and Otagon instantly captures your screen. Our AI analyzes the context and sends spoiler-free hints to your phone or second monitor, so you never have to leave your game.</p>
            </div>
            
            <div className="bg-gradient-to-r from-[#1C1C1C]/60 to-[#0A0A0A]/60 backdrop-blur-xl border border-neutral-800/60 rounded-lg p-4">
              <h5 className="text-base font-semibold text-text-primary mb-2">Is it really spoiler-free?</h5>
              <p className="text-text-secondary text-sm leading-relaxed">Absolutely! Our AI is trained to understand context and provide hints that guide you without revealing plot points, solutions, or surprises. We give you just enough to get unstuck.</p>
            </div>
            
            <div className="bg-gradient-to-r from-[#1C1C1C]/60 to-[#0A0A0A]/60 backdrop-blur-xl border border-neutral-800/60 rounded-lg p-4">
              <h5 className="text-base font-semibold text-text-primary mb-2">What games does it support?</h5>
              <p className="text-text-secondary text-sm leading-relaxed">Otagon works with any game! Our AI can understand visual context from any game genre - RPGs, puzzles, platformers, strategy games, and more. If you can see it on screen, we can help.</p>
            </div>
            
            <div className="bg-gradient-to-r from-[#1C1C1C]/60 to-[#0A0A0A]/60 backdrop-blur-xl border border-neutral-800/60 rounded-lg p-4">
              <h5 className="text-base font-semibold text-text-primary mb-2">When will it be available?</h5>
              <p className="text-text-secondary text-sm leading-relaxed">We're currently in closed beta with select testers. Join our waitlist to get early access when we launch! We expect to open up to more users in the coming months.</p>
            </div>
          </div>
        </div>

        <div className="space-y-4">
          <h4 className="text-lg font-semibold text-text-primary">Contact</h4>
          <p className="text-text-secondary">
            For support, feedback, or questions, please contact us through our support channels.
          </p>
        </div>
      </div>
    </Modal>
  );
};

export default AboutModal;


```n

## src\components\modals\AddGameModal.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\modals\AddGameModal.tsx.Extension.TrimStart('.'))

import React, { useState } from 'react';
import { XMarkIcon } from '@heroicons/react/24/outline';
import { PuzzlePieceIcon } from '@heroicons/react/24/solid';

interface AddGameModalProps {
  isOpen: boolean;
  onClose: () => void;
  onCreateGame: (gameName: string, query: string) => void;
}

const AddGameModal: React.FC<AddGameModalProps> = ({
  isOpen,
  onClose,
  onCreateGame,
}) => {
  const [gameName, setGameName] = useState('');
  const [query, setQuery] = useState('');
  const [isSubmitting, setIsSubmitting] = useState(false);
  const [error, setError] = useState('');

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setError('');

    // Validation
    if (!gameName.trim()) {
      setError('Please enter a game name');
      return;
    }
    if (!query.trim()) {
      setError('Please enter a query or question');
      return;
    }

    try {
      setIsSubmitting(true);
      await onCreateGame(gameName.trim(), query.trim());
      
      // Reset form and close modal on success
      setGameName('');
      setQuery('');
      onClose();
    } catch (err) {
      setError('Failed to create game tab. Please try again.');
      console.error('Error creating game:', err);
    } finally {
      setIsSubmitting(false);
    }
  };

  const handleClose = () => {
    if (!isSubmitting) {
      setGameName('');
      setQuery('');
      setError('');
      onClose();
    }
  };

  if (!isOpen) {
    return null;
  }

  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm">
      <div className="relative w-full max-w-lg bg-background rounded-2xl shadow-2xl border-2 border-transparent bg-clip-padding" style={{ backgroundImage: 'linear-gradient(#1a1a1a, #1a1a1a), linear-gradient(135deg, #FF4D4D, #FFAB40)', backgroundOrigin: 'border-box', backgroundClip: 'padding-box, border-box' }}>
        {/* Header */}
        <div className="flex items-center justify-between p-6 border-b border-gray-700">
          <div className="flex items-center gap-3">
            <div className="p-2 rounded-lg bg-gradient-to-br from-[#FF4D4D] to-[#FFAB40]">
              <PuzzlePieceIcon className="w-6 h-6 text-white" />
            </div>
            <h2 className="text-2xl font-bold text-white">Add Game</h2>
          </div>
          <button
            onClick={handleClose}
            disabled={isSubmitting}
            className="p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
            aria-label="Close modal"
          >
            <XMarkIcon className="w-5 h-5" />
          </button>
        </div>

        {/* Form */}
        <form onSubmit={handleSubmit} className="p-6 space-y-5">
          {/* Game Name Input */}
          <div>
            <label htmlFor="gameName" className="block text-sm font-medium text-gray-300 mb-2">
              Game Name *
            </label>
            <input
              id="gameName"
              type="text"
              value={gameName}
              onChange={(e) => setGameName(e.target.value)}
              placeholder="e.g., The Witcher 3, Elden Ring, Valorant"
              disabled={isSubmitting}
              className="w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#FF4D4D] focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed transition-all"
              maxLength={100}
            />
          </div>

          {/* Query Input */}
          <div>
            <label htmlFor="query" className="block text-sm font-medium text-gray-300 mb-2">
              Question or Query *
            </label>
            <textarea
              id="query"
              value={query}
              onChange={(e) => setQuery(e.target.value)}
              placeholder="What would you like to know about this game? (e.g., 'How do I get started?' or 'Best build for beginners?')"
              disabled={isSubmitting}
              rows={4}
              className="w-full px-4 py-3 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#FF4D4D] focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed transition-all resize-none"
              maxLength={500}
            />
            <p className="mt-1 text-xs text-gray-500">
              {query.length}/500 characters
            </p>
          </div>

          {/* Error Message */}
          {error && (
            <div className="p-3 bg-red-500/10 border border-red-500/50 rounded-lg">
              <p className="text-sm text-red-400">{error}</p>
            </div>
          )}

          {/* Action Buttons */}
          <div className="flex gap-3 pt-2">
            <button
              type="button"
              onClick={handleClose}
              disabled={isSubmitting}
              className="flex-1 px-4 py-3 bg-gray-700 hover:bg-gray-600 text-white font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
            >
              Cancel
            </button>
            <button
              type="submit"
              disabled={isSubmitting || !gameName.trim() || !query.trim()}
              className="flex-1 px-4 py-3 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] hover:from-[#D42A2A] hover:to-[#C87A1A] text-white font-medium rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl"
            >
              {isSubmitting ? (
                <span className="flex items-center justify-center gap-2">
                  <svg className="animate-spin h-4 w-4" viewBox="0 0 24 24">
                    <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4" fill="none" />
                    <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" />
                  </svg>
                  Creating...
                </span>
              ) : (
                'Create Game Tab'
              )}
            </button>
          </div>
        </form>

        {/* Helper Text */}
        <div className="px-6 pb-6">
          <p className="text-xs text-gray-500">
            ðŸ’¡ Tip: Otagon will create a dedicated chat tab for your game with AI-powered assistance and subtabs for different aspects.
          </p>
        </div>
      </div>
    </div>
  );
};

export default AddGameModal;


```n

## src\components\modals\ConnectionModal.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\modals\ConnectionModal.tsx.Extension.TrimStart('.'))

import React, { useState, useEffect, useRef } from 'react';
import { ConnectionStatus } from '../../types';

interface ConnectionModalProps {
  isOpen: boolean;
  onClose: () => void;
  onConnect: (code: string) => void;
  onDisconnect: () => void;
  status: ConnectionStatus;
  error: string | null;
  connectionCode: string | null;
  lastSuccessfulConnection: Date | null;
  onShowHowToUse?: () => void;
}

const ConnectionModal: React.FC<ConnectionModalProps> = ({
  isOpen,
  onClose,
  onConnect,
  onDisconnect,
  status,
  error,
  connectionCode,
  lastSuccessfulConnection,
  onShowHowToUse
}) => {
  const [code, setCode] = useState(connectionCode || '');
  const wasOpenedWhileConnectedRef = useRef(false);

  const isConnecting = status === ConnectionStatus.CONNECTING;
  const isConnected = status === ConnectionStatus.CONNECTED;

  // Track if modal was opened while already connected
  useEffect(() => {
    if (isOpen && isConnected) {
      wasOpenedWhileConnectedRef.current = true;
      console.log('ðŸ” Connection modal opened while already connected - will not auto-close');
    } else if (!isOpen) {
      wasOpenedWhileConnectedRef.current = false;
    }
  }, [isOpen, isConnected]);

  // Auto-close modal after successful connection (but not if manually opened)
  useEffect(() => {
    if (isConnected && !wasOpenedWhileConnectedRef.current) {
      const hasConnectedBefore = localStorage.getItem('otakonHasConnectedBefore') === 'true';
      
      if (!hasConnectedBefore) {
        // First time connecting - trigger onboarding flow
        console.log('ðŸŽ‰ First connection - triggering onboarding flow');
        
        // Close modal and let App.tsx handle onboarding progression
        setTimeout(() => {
          onClose();
          // Trigger onboarding update to show how-to-use splash screen
          if (onShowHowToUse) {
            onShowHowToUse();
          }
        }, 1000); // Small delay to show the success message first
      } else {
        // Returning user - auto-close modal and show chat screen
        console.log('ðŸ”„ Returning user connected - will auto-close modal');
        setTimeout(() => {
          onClose();
        }, 1500); // Show success message for 1.5 seconds then close
      }
    } else if (isConnected && wasOpenedWhileConnectedRef.current) {
      console.log('ðŸ” Modal manually opened - will not auto-close');
    }
  }, [isConnected, onClose, onShowHowToUse]);

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    if (code && /^\d{6}$/.test(code)) {
      onConnect(code);
    }
  };

  const formatLastConnection = (date: Date) => {
    const now = new Date();
    const diffInHours = Math.floor((now.getTime() - date.getTime()) / (1000 * 60 * 60));
    
    if (diffInHours < 1) {
      return 'Less than an hour ago';
    }
    if (diffInHours === 1) {
      return '1 hour ago';
    }
    if (diffInHours < 24) {
      return `${diffInHours} hours ago`;
    }
    
    const diffInDays = Math.floor(diffInHours / 24);
    if (diffInDays === 1) {
      return '1 day ago';
    }
    return `${diffInDays} days ago`;
  };

  if (!isOpen) {
    return null;
  }

  return (
    <div className="fixed inset-0 bg-gradient-to-br from-black/80 to-[#0A0A0A]/80 backdrop-blur-xl flex items-center justify-center p-6 z-50 animate-fade-in">
      <div className="bg-gradient-to-r from-[#1C1C1C]/95 to-[#0A0A0A]/95 backdrop-blur-xl border-2 border-[#424242]/60 rounded-3xl shadow-2xl max-w-lg w-full max-h-[90vh] overflow-y-auto animate-scale-in hover:border-[#424242]/80 transition-all duration-500">
        <div className="p-8">
          <button
            onClick={onClose}
            className="absolute top-6 right-6 text-neutral-400 hover:text-white transition-all duration-300 z-10 hover:scale-110"
            aria-label="Close modal"
          >
            <svg className="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M6 18L18 6M6 6l12 12"></path></svg>
          </button>
          
          <h2 className="text-3xl font-bold text-[#F5F5F5] mb-4 leading-tight">PC Connection</h2>
          <p className="text-[#A3A3A3] mb-6 text-lg leading-relaxed">Sync with the PC client to send screenshots directly from your game.</p>
          
          {/* Saved connection info */}
          {connectionCode && (
            <div className="mb-6 p-4 bg-gradient-to-r from-[#2E2E2E]/60 to-[#1A1A1A]/60 border-2 border-[#424242]/60 rounded-2xl backdrop-blur-sm">
              <div className="text-base text-[#A3A3A3]">
                <span className="font-medium text-[#F5F5F5]">Saved connection:</span> {connectionCode}
                {lastSuccessfulConnection && (
                  <span className="block text-sm text-[#6E6E6E] mt-2">
                    Last connected: {formatLastConnection(lastSuccessfulConnection)}
                  </span>
                )}
              </div>
            </div>
          )}
          
          <div className="mb-8">
            <div className="bg-gradient-to-r from-[#2E2E2E]/60 to-[#1A1A1A]/60 border-2 border-[#424242]/60 rounded-2xl p-6 backdrop-blur-sm">
              <div className="flex items-center justify-between mb-4">
                <h3 className="text-xl font-semibold text-[#F5F5F5]">PC Client</h3>
                <span className="text-sm text-[#A3A3A3] bg-gradient-to-r from-[#1C1C1C]/80 to-[#0A0A0A]/80 px-3 py-1.5 rounded-xl border border-[#424242]/60">
                  v1.0.0
                </span>
              </div>
              
              <div className="space-y-3 mb-4">
                <p className="text-base text-[#A3A3A3] leading-relaxed">
                  PC Client for Otagon - Your Spoiler-Free Gaming Companion
                </p>
                <div className="text-sm text-[#6E6E6E]">
                  Download and install to get started
                </div>
              </div>
              
              <button
                onClick={() => {
                  const downloadUrl = 'https://github.com/readmet3xt/otakon-pc-client/releases/tag/v1.0.0';
                  window.open(downloadUrl, '_blank');
                }}
                className="w-full bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white px-6 py-3 rounded-xl font-medium hover:from-[#D42A2A] hover:to-[#C87A1A] transition-all duration-300 hover:scale-105 hover:shadow-xl hover:shadow-[#E53A3A]/25"
              >
                Download PC Client
              </button>
            </div>
          </div>

          <form onSubmit={handleSubmit} className="space-y-6">
            <div>
              <label htmlFor="connection-code" className="block text-base font-medium text-[#CFCFCF] mb-3">
                6-Digit Connection Code
              </label>
              <div className="relative">
                <input
                  id="connection-code"
                  type="text"
                  value={code}
                  onChange={(e) => setCode(e.target.value)}
                  placeholder="123456"
                  maxLength={6}
                  pattern="\d{6}"
                  title="Enter exactly 6 digits"
                  disabled={isConnecting || isConnected}
                  required
                  className="w-full bg-gradient-to-r from-[#2E2E2E] to-[#1A1A1A] border-2 border-[#424242]/60 rounded-xl py-3 px-4 pr-12 text-[#F5F5F5] placeholder-[#6E6E6E] focus:outline-none focus:ring-2 focus:ring-[#FFAB40] focus:border-[#FFAB40]/60 disabled:opacity-50 text-lg backdrop-blur-sm"
                />
                {code && code.length === 6 && (
                  <div className="absolute right-3 top-1/2 transform -translate-y-1/2 text-green-400">
                    <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                      <path fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd" />
                    </svg>
                  </div>
                )}
              </div>
            </div>
            
            {error && <p className="text-[#E53A3A] text-base">{error}</p>}
            {isConnected && (
              <div className="space-y-4">
                <p className="text-[#5CBB7B] text-base">Connected successfully. Ready to receive screenshots.</p>
                
                {/* Enhanced Status for 6-digit connections */}
                <div className="p-4 bg-gradient-to-r from-green-600/10 to-emerald-600/10 border-2 border-green-600/20 rounded-2xl backdrop-blur-sm">
                  <div className="text-sm text-green-400 space-y-2">
                    <div className="flex items-center gap-3">
                      <span className="w-3 h-3 bg-green-400 rounded-full"></span>
                      Enhanced connector connected
                    </div>
                    <div>â€¢ Ready for screenshots and AI analysis</div>
                    <div>â€¢ Use F1 for single shot, F2 for batch capture</div>
                    <div>â€¢ All features unlocked and ready to use</div>
                  </div>
                  
                  {/* Auto-close indicator */}
                  {localStorage.getItem('otakonHasConnectedBefore') === 'true' && !wasOpenedWhileConnectedRef.current && (
                    <div className="mt-3 pt-3 border-t border-green-600/30">
                      <div className="flex items-center gap-2 text-xs text-green-300">
                        <div className="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                        Modal will close automatically in a moment...
                      </div>
                    </div>
                  )}
                  
                  {/* Manual open indicator */}
                  {wasOpenedWhileConnectedRef.current && (
                    <div className="mt-3 pt-3 border-t border-green-600/30">
                      <div className="flex items-center gap-2 text-xs text-green-300">
                        <div className="w-2 h-2 bg-green-400 rounded-full"></div>
                        Modal will stay open - you can close it manually
                      </div>
                    </div>
                  )}
                  
                  {/* First time connection indicator */}
                  {localStorage.getItem('otakonHasConnectedBefore') !== 'true' && !wasOpenedWhileConnectedRef.current && (
                    <div className="mt-3 pt-3 border-t border-green-600/30">
                      <div className="flex items-center gap-2 text-xs text-green-300">
                        <div className="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                        Modal will close automatically in a moment...
                      </div>
                    </div>
                  )}
                </div>
                
                {/* First-time user message */}
                {onShowHowToUse && localStorage.getItem('otakonHasConnectedBefore') !== 'true' && (
                  <div className="p-4 bg-gradient-to-r from-blue-600/10 to-sky-600/10 border-2 border-blue-600/20 rounded-2xl backdrop-blur-sm">
                    <div className="text-sm text-blue-400 space-y-2">
                      <div className="flex items-center gap-3">
                        <span className="w-3 h-3 bg-blue-400 rounded-full animate-pulse"></span>
                        First time connecting!
                      </div>
                      <div>â€¢ The "How to Use" guide will appear in a moment</div>
                      <div>â€¢ Learn about hotkeys, screenshot modes, and features</div>
                    </div>
                  </div>
                )}
              </div>
            )}

            <div className="flex flex-col sm:flex-row items-center pt-6 gap-4">
              {isConnected ? (
                  <div className="w-full space-y-3">
                    <button
                        type="button"
                        onClick={onDisconnect}
                        className="w-full flex items-center justify-center bg-gradient-to-r from-[#E53A3A] to-red-600 hover:from-red-600 hover:to-red-700 text-[#F5F5F5] font-bold py-4 px-6 rounded-xl transition-all duration-300 hover:scale-105 hover:shadow-xl hover:shadow-red-600/25"
                    >
                        Disconnect
                    </button>
                    {onShowHowToUse && (
                      <button
                          type="button"
                          onClick={onShowHowToUse}
                          className="w-full flex items-center justify-center bg-gradient-to-r from-[#2E2E2E] to-[#1A1A1A] hover:from-[#424242] hover:to-[#2A2A2A] text-[#CFCFCF] font-medium py-4 px-6 rounded-xl transition-all duration-300 hover:scale-105 hover:shadow-lg border-2 border-[#424242]/60 hover:border-[#5A5A5A]/60"
                      >
                          Show How to Use Guide
                      </button>
                    )}
                  </div>
              ) : (
                  <button
                      type="submit"
                      disabled={isConnecting || !/^\d{6}$/.test(code)}
                      className="w-full flex items-center justify-center bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] disabled:from-[#5A5A5A] disabled:to-[#424242] disabled:cursor-not-allowed text-[#F5F5F5] font-bold py-4 px-6 rounded-xl transition-all duration-300 hover:scale-105 hover:shadow-xl hover:shadow-[#E53A3A]/25"
                  >
                  {isConnecting ? (
                      <>
                      <div className="animate-spin rounded-full h-5 w-5 border-b-2 border-[#F5F5F5] mr-3"></div>
                      Connecting...
                      </>
                  ) : (
                      'Connect'
                  )}
                  </button>
              )}
            </div>
          </form>

        </div>
      </div>
    </div>
  );
};

export default React.memo(ConnectionModal);


```n

## src\components\modals\ContactUsModal.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\modals\ContactUsModal.tsx.Extension.TrimStart('.'))

import React, { useState, useEffect } from 'react';
import { toastService } from '../../services/toastService';

interface ContactUsModalProps {
  isOpen: boolean;
  onClose: () => void;
}

interface ContactFormData {
  name: string;
  email: string;
  subject: string;
  message: string;
}

const ContactUsModal: React.FC<ContactUsModalProps> = ({ isOpen, onClose }) => {
  const [formData, setFormData] = useState<ContactFormData>({
    name: '',
    email: '',
    subject: '',
    message: ''
  });
  const [isSubmitting, setIsSubmitting] = useState(false);
  const [submitStatus, setSubmitStatus] = useState<'idle' | 'success' | 'error'>('idle');

  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {
    const { name, value } = e.target;
    setFormData(prev => ({
      ...prev,
      [name]: value
    }));
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setIsSubmitting(true);
    setSubmitStatus('idle');

    try {
      // For now, just simulate success
      await new Promise(resolve => setTimeout(resolve, 1000));
      setSubmitStatus('success');
      setTimeout(() => {
        onClose();
      }, 2000);
    } catch (error) {
      console.error('Contact form error:', error);
      toastService.error('Failed to send message. Please try again.');
      setSubmitStatus('error');
    } finally {
      setIsSubmitting(false);
    }
  };

  const isFormValid = formData.name.trim() && formData.email.trim() && formData.subject.trim() && formData.message.trim();

  // Handle ESC key to close modal
  useEffect(() => {
    const handleEscKey = (event: KeyboardEvent) => {
      if (event.key === 'Escape') {
        onClose();
      }
    };

    if (isOpen) {
      document.addEventListener('keydown', handleEscKey);
      // Prevent body scroll when modal is open
      document.body.style.overflow = 'hidden';
    }

    return () => {
      document.removeEventListener('keydown', handleEscKey);
      document.body.style.overflow = 'unset';
    };
  }, [isOpen, onClose]);

  if (!isOpen) {
    return null;
  }

  return (
    <div 
      className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm"
      onClick={(e) => {
        if (e.target === e.currentTarget) {
          onClose();
        }
      }}
    >
      <div className="relative w-full max-w-2xl bg-gradient-to-br from-[#1C1C1C] to-[#0A0A0A] rounded-2xl border border-[#424242]/40 shadow-2xl flex flex-col max-h-[90vh]">
        {/* Header */}
        <div className="relative p-6 border-b border-[#424242]/40">
          <div className="absolute inset-0 bg-gradient-to-r from-[#E53A3A]/10 to-[#D98C1F]/10 rounded-t-2xl"></div>
          <div className="relative z-10">
            <h2 className="text-3xl font-bold text-white mb-2">Contact Us</h2>
            <p className="text-[#CFCFCF]">We'd love to hear from you. Send us a message and we'll respond as soon as possible.</p>
          </div>
          <button
            onClick={onClose}
            className="absolute top-4 right-4 p-2 text-[#A3A3A3] hover:text-white transition-colors rounded-lg hover:bg-white/10 active:scale-95 z-20"
          >
            <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>

        {/* Contact Information */}
        <div className="p-6 border-b border-[#424242]/40 bg-gradient-to-r from-[#1C1C1C]/50 to-[#0A0A0A]/50">
          <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div className="flex items-center space-x-3 text-[#CFCFCF]">
              <svg className="w-5 h-5 text-[#FF4D4D]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
              </svg>
              <span>support@otagon.app</span>
            </div>
            <div className="flex items-center space-x-3 text-[#CFCFCF]">
              <svg className="w-5 h-5 text-[#FFAB40]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
              </svg>
              <span>+91 8121602314</span>
            </div>
            <div className="flex items-center space-x-3 text-[#CFCFCF]">
              <svg className="w-5 h-5 text-[#5CBB7B]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
              </svg>
              <span>Hyderabad, India</span>
            </div>
          </div>
        </div>

        {/* Contact Form */}
        <div className="flex-1 overflow-y-auto p-6 min-h-0">
          {submitStatus === 'success' ? (
            <div className="text-center py-8">
              <div className="w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-4">
                <svg className="w-8 h-8 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                </svg>
              </div>
              <h3 className="text-xl font-semibold text-white mb-2">Message Sent!</h3>
              <p className="text-[#CFCFCF]">Thank you for contacting us. We'll get back to you soon!</p>
            </div>
          ) : (
            <form onSubmit={handleSubmit} className="space-y-4">
              <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <label htmlFor="name" className="block text-sm font-medium text-[#F5F5F5] mb-2">
                    Full Name *
                  </label>
                  <input
                    type="text"
                    id="name"
                    name="name"
                    value={formData.name}
                    onChange={handleInputChange}
                    required
                    className="w-full px-4 py-3 bg-[#2E2E2E] border border-[#424242] rounded-lg text-white placeholder-[#A3A3A3] focus:outline-none focus:ring-2 focus:ring-[#FF4D4D] focus:border-transparent transition-all duration-200"
                    placeholder="Enter your full name"
                  />
                </div>
                <div>
                  <label htmlFor="email" className="block text-sm font-medium text-[#F5F5F5] mb-2">
                    Email Address *
                  </label>
                  <input
                    type="email"
                    id="email"
                    name="email"
                    value={formData.email}
                    onChange={handleInputChange}
                    required
                    className="w-full px-4 py-3 bg-[#2E2E2E] border border-[#424242] rounded-lg text-white placeholder-[#A3A3A3] focus:outline-none focus:ring-2 focus:ring-[#FF4D4D] focus:border-transparent transition-all duration-200"
                    placeholder="Enter your email address"
                  />
                </div>
              </div>

              <div>
                <label htmlFor="subject" className="block text-sm font-medium text-[#F5F5F5] mb-2">
                  Subject *
                </label>
                <input
                  type="text"
                  id="subject"
                  name="subject"
                  value={formData.subject}
                  onChange={handleInputChange}
                  required
                  className="w-full px-4 py-3 bg-[#2E2E2E] border border-[#424242] rounded-lg text-white placeholder-[#A3A3A3] focus:outline-none focus:ring-2 focus:ring-[#FF4D4D] focus:border-transparent transition-all duration-200"
                  placeholder="What is this about?"
                />
              </div>

              <div>
                <label htmlFor="message" className="block text-sm font-medium text-[#F5F5F5] mb-2">
                  Message *
                </label>
                <textarea
                  id="message"
                  name="message"
                  value={formData.message}
                  onChange={handleInputChange}
                  required
                  rows={5}
                  className="w-full px-4 py-3 bg-[#2E2E2E] border border-[#424242] rounded-lg text-white placeholder-[#A3A3A3] focus:outline-none focus:ring-2 focus:ring-[#FF4D4D] focus:border-transparent transition-all duration-200 resize-none"
                  placeholder="Tell us more about your inquiry..."
                />
              </div>

              {submitStatus === 'error' && (
                <div className="p-3 bg-red-500/20 border border-red-500/40 rounded-lg text-red-400 text-sm">
                  An error occurred while sending your message. Please try again.
                </div>
              )}

              <div className="flex items-center justify-end space-x-3 pt-4">
                <button
                  type="button"
                  onClick={onClose}
                  className="px-6 py-3 text-[#CFCFCF] hover:text-white transition-colors rounded-lg hover:bg-white/10 active:scale-95"
                >
                  Cancel
                </button>
                <button
                  type="submit"
                  disabled={!isFormValid || isSubmitting}
                  className="px-6 py-3 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white font-medium rounded-lg hover:from-[#D42A2A] hover:to-[#C87A1A] transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed hover:scale-105 hover:shadow-lg active:scale-95 disabled:active:scale-100"
                >
                  {isSubmitting ? (
                    <div className="flex items-center space-x-2">
                      <div className="w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"></div>
                      <span>Sending...</span>
                    </div>
                  ) : (
                    'Send Message'
                  )}
                </button>
              </div>
            </form>
          )}
        </div>
      </div>
    </div>
  );
};

export default ContactUsModal;


```n

## src\components\modals\CreditModal.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\modals\CreditModal.tsx.Extension.TrimStart('.'))

import React from 'react';
import { User } from '../../types';
import StarIcon from '../ui/StarIcon';
import TextIcon from '../ui/TextIcon';
import ImageIcon from '../ui/ImageIcon';

interface CreditModalProps {
  isOpen: boolean;
  onClose: () => void;
  onUpgrade: () => void;
  user: User;
}

const CreditModal: React.FC<CreditModalProps> = ({ isOpen, onClose, onUpgrade, user }) => {
  if (!isOpen) {
    return null;
  }

  const { textCount, textLimit, imageCount, imageLimit, tier } = user.usage;
  const textRemaining = Math.max(0, textLimit - textCount);
  const imageRemaining = Math.max(0, imageLimit - imageCount);

  return (
    <div className="fixed inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in" onClick={onClose}>
      <div 
        className="bg-[#1C1C1C]/90 backdrop-blur-md border border-[#424242]/60 rounded-2xl shadow-2xl p-8 w-full max-w-sm m-4 relative animate-scale-in"
        style={{
          boxShadow: '0 25px 50px -12px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 0.05)',
        }}
        onClick={(e) => e.stopPropagation()}
      >
        <button
          onClick={onClose}
          className="absolute top-6 right-6 text-[#6E6E6E] hover:text-[#F5F5F5] transition-colors"
          aria-label="Close modal"
        >
          <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M6 18L18 6M6 6l12 12"></path></svg>
        </button>
        
        <h2 className="text-2xl font-bold text-[#F5F5F5] mb-2">Monthly Credits</h2>
        <p className="text-[#A3A3A3] mb-8">Your usage resets at the start of each month.</p>
        
        <div className="space-y-6">
          <div className="flex items-center gap-4 bg-[#2E2E2E]/40 backdrop-blur-sm p-4 rounded-lg border border-[#424242]/30">
            <TextIcon className="w-8 h-8 text-sky-400 flex-shrink-0" />
            <div className="flex-1">
              <p className="text-sm font-medium text-[#CFCFCF]">Text Queries</p>
              <p className="text-2xl font-bold text-white">
                {textRemaining.toLocaleString()}
                <span className="text-base font-normal text-[#A3A3A3]"> / {textLimit.toLocaleString()}</span>
              </p>
            </div>
          </div>

          <div className="flex items-center gap-4 bg-[#2E2E2E]/40 backdrop-blur-sm p-4 rounded-lg border border-[#424242]/30">
            <ImageIcon className="w-8 h-8 text-emerald-400 flex-shrink-0" />
            <div className="flex-1">
              <p className="text-sm font-medium text-[#CFCFCF]">Image Queries</p>
              <p className="text-2xl font-bold text-white">
                {imageRemaining.toLocaleString()}
                <span className="text-base font-normal text-[#A3A3A3]"> / {imageLimit.toLocaleString()}</span>
              </p>
            </div>
          </div>
        </div>

        {tier === 'free' && (
          <div className="mt-8 bg-[#2E2E2E]/30 backdrop-blur-sm p-4 rounded-lg border border-[#424242]/30">
            <button
              onClick={() => {
                onUpgrade();
                onClose();
              }}
              className="w-full flex items-center justify-center gap-2 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white font-bold py-3 px-4 rounded-lg transition-transform transform hover:scale-105"
            >
              <StarIcon className="w-5 h-5" />
              Upgrade to Pro for More
            </button>
          </div>
        )}
      </div>
    </div>
  );
};

export default CreditModal;


```n

## src\components\modals\HandsFreeModal.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\modals\HandsFreeModal.tsx.Extension.TrimStart('.'))

import React, { useState, useEffect } from 'react';
import TTSStatusIndicator from '../ui/TTSStatusIndicator';
import { ttsService } from '../../services/ttsService';

interface HandsFreeModalProps {
  isOpen: boolean;
  onClose: () => void;
  isHandsFree: boolean;
  onToggleHandsFree: () => void;
}

const SPEECH_RATE_KEY = 'otakonSpeechRate';

const HandsFreeModal: React.FC<HandsFreeModalProps> = ({
  isOpen,
  onClose,
  isHandsFree,
  onToggleHandsFree,
}) => {
  const [voices, setVoices] = useState<SpeechSynthesisVoice[]>([]);
  const [selectedVoiceURI, setSelectedVoiceURI] = useState<string>(
    () => localStorage.getItem('otakonPreferredVoiceURI') || ''
  );
  const [speechRate, setSpeechRate] = useState<number>(() => {
    const savedRate = localStorage.getItem(SPEECH_RATE_KEY);
    return savedRate ? parseFloat(savedRate) : 0.94;
  });

  useEffect(() => {
    const updateVoices = async () => {
      const allVoices = ttsService.getAvailableVoices();
      const englishVoices = allVoices.filter(v => v.lang.startsWith('en-'));
      
      const sortedVoices = englishVoices.sort((a, b) => {
        const aIsFemale = a.name.toLowerCase().includes('female');
        const bIsFemale = b.name.toLowerCase().includes('female');
        if (aIsFemale && !bIsFemale) {
          return -1;
        }
        if (!aIsFemale && bIsFemale) {
          return 1;
        }
        return a.name.localeCompare(b.name);
      });

      setVoices(sortedVoices);

      const savedURI = localStorage.getItem('otakonPreferredVoiceURI');
      if (savedURI && sortedVoices.some(v => v.voiceURI === savedURI)) {
        setSelectedVoiceURI(savedURI);
      } else if (sortedVoices.length > 0) {
        const defaultVoice = sortedVoices[0];
        if (defaultVoice) {
          setSelectedVoiceURI(defaultVoice.voiceURI);
          localStorage.setItem('otakonPreferredVoiceURI', defaultVoice.voiceURI);
        }
      }
    };

    const interval = setInterval(async () => {
        const currentVoices = ttsService.getAvailableVoices();
        // This condition is now more robust. It updates if the count is different,
        // OR if voices are available but the component state is empty (initial load).
        if (currentVoices.length !== voices.length || (currentVoices.length > 0 && voices.length === 0)) {
            updateVoices();
        }
    }, 500);
    
    updateVoices();

    return () => clearInterval(interval);
  }, [voices.length]);

  const handleVoiceChange = (e: React.ChangeEvent<HTMLSelectElement>) => {
    const uri = e.target.value;
    setSelectedVoiceURI(uri);
    localStorage.setItem('otakonPreferredVoiceURI', uri);
  };

  const handleRateChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const newRate = parseFloat(e.target.value);
    setSpeechRate(newRate);
    localStorage.setItem(SPEECH_RATE_KEY, newRate.toString());
  };

  if (!isOpen) {
    return null;
  }

  return (
    <div className="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 animate-fade-in" onClick={onClose}>
      <div 
        className="bg-[#1C1C1C] border border-[#424242] rounded-2xl shadow-2xl p-8 w-full max-w-md m-4 relative animate-scale-in"
        onClick={(e) => e.stopPropagation()}
    >
        <button
          onClick={onClose}
          className="absolute top-6 right-6 text-[#6E6E6E] hover:text-[#F5F5F5] transition-colors"
          aria-label="Close modal"
        >
          <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M6 18L18 6M6 6l12 12"></path></svg>
        </button>
        
        <h2 className="text-2xl font-bold text-[#F5F5F5] mb-2">Hands-Free Settings</h2>
        <p className="text-[#A3A3A3] mb-6">Configure voice responses for a truly hands-free experience.</p>
        
        <div className="space-y-6">
            <div className="flex items-center justify-between bg-[#2E2E2E]/60 p-4 rounded-lg">
                <label htmlFor="hands-free-toggle" className="text-base font-medium text-[#F5F5F5] cursor-pointer">
                    Enable Hands-Free Mode
                </label>
                <button
                    id="hands-free-toggle"
                    role="switch"
                    aria-checked={isHandsFree}
                    onClick={onToggleHandsFree}
                    className={`${isHandsFree ? 'bg-gradient-to-r from-[#E53A3A] to-[#D98C1F]' : 'bg-[#424242]'} relative inline-flex items-center h-6 rounded-full w-11 transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[#1C1C1C] focus:ring-[#FFAB40]`}
                >
                    <span
                        className={`${isHandsFree ? 'translate-x-6' : 'translate-x-1'} inline-block w-4 h-4 transform bg-white rounded-full transition-transform`}
                    />
                </button>
            </div>
            
            {/* TTS Status Indicator */}
            <div className="bg-[#2E2E2E]/60 p-4 rounded-lg">
                <h3 className="text-sm font-medium text-[#CFCFCF] mb-3">TTS Status</h3>
                <TTSStatusIndicator showDetails={true} />
            </div>
            
            <div>
                <label htmlFor="voice-select" className="block text-sm font-medium text-[#CFCFCF] mb-1">
                    Voice Selection
                </label>
                <select
                    id="voice-select"
                    value={selectedVoiceURI}
                    onChange={handleVoiceChange}
                    className="w-full bg-[#2E2E2E] border border-[#424242] rounded-md py-2 px-3 text-[#F5F5F5] focus:outline-none focus:ring-2 focus:ring-[#FFAB40]"
                    disabled={voices.length === 0}
                >
                    {voices.length > 0 ? (
                    voices.map(voice => (
                        <option key={voice.voiceURI} value={voice.voiceURI}>
                        {voice.name} ({voice.lang})
                        </option>
                    ))
                    ) : (
                    <option value="">Loading voices...</option>
                    )}
                </select>
            </div>
            
            <div>
                <label htmlFor="speech-rate" className="block text-sm font-medium text-[#CFCFCF] mb-5">
                    Speech Rate: {Math.round(speechRate * 100)}%
                </label>
                <input
                    id="speech-rate"
                    type="range"
                    min="0.5"
                    max="1.5"
                    step="0.01"
                    value={speechRate}
                    onChange={handleRateChange}
                    className="w-full h-2 bg-[#424242] rounded-lg appearance-none cursor-pointer accent-[#FF4D4D]"
                />
            </div>
        </div>
      </div>
    </div>
  );
};

export default HandsFreeModal;



```n

## src\components\modals\PrivacyModal.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\modals\PrivacyModal.tsx.Extension.TrimStart('.'))

import React from 'react';
import Modal from '../ui/Modal';

interface PrivacyModalProps {
  isOpen: boolean;
  onClose: () => void;
}

const PrivacyModal: React.FC<PrivacyModalProps> = ({ isOpen, onClose }) => {
  return (
    <Modal isOpen={isOpen} onClose={onClose} title="Privacy Policy" maxWidth="2xl">
      <div className="space-y-6 text-text-secondary">
        <div>
          <h3 className="text-lg font-semibold text-text-primary mb-2">Information We Collect</h3>
          <p>
            We collect information you provide directly to us, such as when you create an account, 
            use our services, or contact us for support. This may include your email address, 
            game screenshots, and conversation data.
          </p>
        </div>

        <div>
          <h3 className="text-lg font-semibold text-text-primary mb-2">How We Use Your Information</h3>
          <p>
            We use the information we collect to provide, maintain, and improve our services, 
            process transactions, send you technical notices and support messages, and respond 
            to your comments and questions.
          </p>
        </div>

        <div>
          <h3 className="text-lg font-semibold text-text-primary mb-2">Data Storage and Security</h3>
          <p>
            We implement appropriate security measures to protect your personal information. 
            Your data is stored securely and is not shared with third parties without your consent.
          </p>
        </div>

        <div>
          <h3 className="text-lg font-semibold text-text-primary mb-2">Your Rights</h3>
          <p>
            You have the right to access, update, or delete your personal information. 
            You can also opt out of certain communications from us.
          </p>
        </div>

        <div>
          <h3 className="text-lg font-semibold text-text-primary mb-2">Contact Us</h3>
          <p>
            If you have any questions about this Privacy Policy, please contact us through 
            our support channels.
          </p>
        </div>

        <div className="text-sm text-text-muted">
          <p>Last updated: January 2025</p>
        </div>
      </div>
    </Modal>
  );
};

export default PrivacyModal;


```n

## src\components\modals\RefundPolicyModal.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\modals\RefundPolicyModal.tsx.Extension.TrimStart('.'))

import React from 'react';
import Modal from '../ui/Modal';

interface RefundPolicyModalProps {
  isOpen: boolean;
  onClose: () => void;
}

const RefundPolicyModal: React.FC<RefundPolicyModalProps> = ({ isOpen, onClose }) => {
  return (
    <Modal isOpen={isOpen} onClose={onClose} title="Refund Policy">
      <div className="max-h-96 overflow-y-auto">
        <p className="text-neutral-400 mb-4 text-base">Last Updated: August 15, 2025</p>

        <p className="text-neutral-300 mb-6">
          At Otagon, we want you to be completely satisfied with your gaming companion experience. This Refund Policy outlines our approach to refunds and cancellations for our subscription services.
        </p>

        <h2 className="text-2xl font-bold text-white mt-8 mb-4">Subscription Cancellation</h2>
        <p className="text-neutral-300 mb-4">
          You can cancel your Otagon Pro or Pro Vanguard subscription at any time. Your subscription will remain active until the end of your current billing period (monthly or yearly), and you will not be charged again. You can manage your subscription through your account settings.
        </p>

        <h2 className="text-2xl font-bold text-white mt-8 mb-4">Refund Eligibility</h2>
        <p className="text-neutral-300 mb-4">Otagon subscriptions are non-refundable.</p>
        <p className="text-neutral-300 mb-4">
          When you purchase a subscription, you are charged for the entire billing period (one month or one year) at the beginning of that period. Once a charge has been processed, we are unable to provide any full or partial refunds, even if you cancel your subscription before the end of the billing period.
        </p>

        <h2 className="text-2xl font-bold text-white mt-8 mb-4">Free Tier</h2>
        <p className="text-neutral-300 mb-4">
          Our Free tier provides access to basic Otagon features without any charges. There are no refunds applicable to the Free tier as it is provided at no cost.
        </p>

        <h2 className="text-2xl font-bold text-white mt-8 mb-4">Technical Issues</h2>
        <p className="text-neutral-300 mb-4">
          If you experience technical issues that prevent you from using Otagon as intended, please contact our support team immediately. We will work to resolve any technical problems promptly. However, technical issues do not automatically qualify for refunds.
        </p>

        <h2 className="text-2xl font-bold text-white mt-8 mb-4">Our Commitment</h2>
        <p className="text-neutral-300 mb-4">
          We believe in the value Otagon provides and encourage users to make the most of our Free tier to decide if a Pro subscription is right for them. This policy allows us, a small team based in Hyderabad, India, to manage our resources effectively and continue building the best possible spoiler-free gaming companion for our global community.
        </p>

        <h2 className="text-2xl font-bold text-white mt-8 mb-4">Contact Us</h2>
        <p className="text-neutral-300 mb-4">
          If you have any questions about this policy, please contact us at <a href="mailto:support@otakon.app" className="text-[#FFAB40] hover:underline">support@otakon.app</a>.
        </p>
      </div>
    </Modal>
  );
};

export default RefundPolicyModal;


```n

## src\components\modals\SettingsModal.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\modals\SettingsModal.tsx.Extension.TrimStart('.'))

import React, { useState } from 'react';
import Modal from '../ui/Modal';
import { User, UserTier } from '../../types';
import { authService } from '../../services/authService';
import TrialBanner from '../trial/TrialBanner';

interface SettingsModalProps {
  isOpen: boolean;
  onClose: () => void;
  user: User | null;
}

const SettingsModal: React.FC<SettingsModalProps> = ({ 
  isOpen, 
  onClose, 
  user
}) => {
  const [activeTab, setActiveTab] = useState<'account' | 'tier' | 'preferences' | 'profile'>('account');
  
  // Profile preferences state
  const [playerFocus, setPlayerFocus] = useState(user?.profileData?.playerFocus || 'balanced');
  const [experienceLevel, setExperienceLevel] = useState(user?.profileData?.experienceLevel || 'intermediate');
  const [preferredContentStyle, setPreferredContentStyle] = useState(user?.profileData?.preferredContentStyle || 'detailed');
  const [spoilerPreference, setSpoilerPreference] = useState(user?.profileData?.spoilerPreference || 'minimal');

  if (!user) {

    return null;

  }


  const handleTrialStart = () => {
    // Refresh user data to reflect trial status
    const currentUser = authService.getCurrentUser();
    if (currentUser) {
      // The parent component should handle updating the user state
      // For now, we'll just close the modal to refresh the UI
      onClose();
    }
  };


  const getTierDisplayName = (tier: UserTier) => {
    switch (tier) {
      case 'free':
        return 'Free';
      case 'pro':
        return 'Pro';
      case 'vanguard_pro':
        return 'Vanguard Pro';
      default:
        return tier;
    }
  };

  const getTierColor = (tier: UserTier) => {
    switch (tier) {
      case 'free':
        return 'text-gray-400';
      case 'pro':
        return 'text-blue-400';
      case 'vanguard_pro':
        return 'text-purple-400';
      default:
        return 'text-gray-400';
    }
  };

  return (
    <Modal
      isOpen={isOpen}
      onClose={onClose}
      title="Settings"
      maxWidth="2xl"
    >
      <div className="space-y-6">
        {/* Tab Navigation */}
        <div className="flex space-x-1 bg-surface/50 rounded-lg p-1">
          <button
            onClick={() => setActiveTab('account')}
            className={`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors active:scale-95 ${
              activeTab === 'account'
                ? 'bg-primary text-white'
                : 'text-text-muted hover:text-text-primary'
            }`}
          >
            Account
          </button>
          <button
            onClick={() => setActiveTab('tier')}
            className={`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors active:scale-95 ${
              activeTab === 'tier'
                ? 'bg-primary text-white'
                : 'text-text-muted hover:text-text-primary'
            }`}
          >
            Tier & Usage
          </button>
          <button
            onClick={() => setActiveTab('preferences')}
            className={`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors active:scale-95 ${
              activeTab === 'preferences'
                ? 'bg-primary text-white'
                : 'text-text-muted hover:text-text-primary'
            }`}
          >
            Preferences
          </button>
          <button
            onClick={() => setActiveTab('profile')}
            className={`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors active:scale-95 ${
              activeTab === 'profile'
                ? 'bg-primary text-white'
                : 'text-text-muted hover:text-text-primary'
            }`}
          >
            Profile
          </button>
        </div>

        {/* Account Tab */}
        {activeTab === 'account' && (
          <div className="space-y-4">
            <div className="bg-surface/50 rounded-lg p-4">
              <h3 className="text-lg font-semibold text-text-primary mb-4">Account Information</h3>
              
              <div className="space-y-3">
                <div>
                  <label className="text-sm font-medium text-text-secondary">Email</label>
                  <div className="mt-1 text-text-primary">{user.email}</div>
                </div>
                
                <div>
                  <label className="text-sm font-medium text-text-secondary">User ID</label>
                  <div className="mt-1 text-text-primary font-mono text-sm">{user.id}</div>
                </div>
                
                <div>
                  <label className="text-sm font-medium text-text-secondary">Current Tier</label>
                  <div className={`mt-1 font-medium ${getTierColor(user.tier)}`}>
                    {getTierDisplayName(user.tier)}
                  </div>
                </div>
                
              </div>
            </div>

          </div>
        )}

        {/* Tier Tab */}
        {activeTab === 'tier' && (
          <div className="space-y-4">
            {/* Trial Banner */}
            <TrialBanner
              userTier={user.tier}
              onTrialStart={handleTrialStart}
            />
            
            <div className="bg-surface/50 rounded-lg p-4">
              <h3 className="text-lg font-semibold text-text-primary mb-4">Monthly Query Usage</h3>
              
              <div className="grid grid-cols-2 gap-4 mb-4">
                <div>
                  <div className="text-sm text-text-secondary mb-2">Text Queries</div>
                  <div className="text-2xl font-bold text-text-primary">
                    {user.usage.textCount} / {user.usage.textLimit}
                  </div>
                  <div className="w-full bg-surface-light/20 rounded-full h-2 mt-2">
                    <div
                      className="bg-primary h-2 rounded-full transition-all duration-300"
                      style={{
                        width: `${Math.min((user.usage.textCount / user.usage.textLimit) * 100, 100)}%`
                      }}
                    />
                  </div>
                </div>
                
                <div>
                  <div className="text-sm text-text-secondary mb-2">Image Queries</div>
                  <div className="text-2xl font-bold text-text-primary">
                    {user.usage.imageCount} / {user.usage.imageLimit}
                  </div>
                  <div className="w-full bg-surface-light/20 rounded-full h-2 mt-2">
                    <div
                      className="bg-secondary h-2 rounded-full transition-all duration-300"
                      style={{
                        width: `${Math.min((user.usage.imageCount / user.usage.imageLimit) * 100, 100)}%`
                      }}
                    />
                  </div>
                </div>
              </div>
              
              {/* Reset Date Info */}
              <div className="text-sm text-text-secondary text-center pt-3 border-t border-surface-light/20">
                Usage resets on the 1st of each month
                {user.tier === 'free' && (
                  <div className="mt-2 text-primary font-medium">
                    â­ Upgrade to Pro for 1,583 text + 328 image queries!
                  </div>
                )}
              </div>
            </div>

          </div>
        )}

        {/* Preferences Tab */}
        {activeTab === 'preferences' && (
          <div className="space-y-4">
            <div className="bg-surface/50 rounded-lg p-4">
              <h3 className="text-lg font-semibold text-text-primary mb-4">App Preferences</h3>
              
              <div className="space-y-4">
                <div className="flex items-center justify-between">
                  <div>
                    <div className="text-text-primary font-medium">Dark Mode</div>
                    <div className="text-sm text-text-secondary">Use dark theme</div>
                  </div>
                  <div className="w-12 h-6 bg-primary rounded-full relative">
                    <div className="w-5 h-5 bg-white rounded-full absolute right-0.5 top-0.5" />
                  </div>
                </div>
                
                <div className="flex items-center justify-between">
                  <div>
                    <div className="text-text-primary font-medium">Notifications</div>
                    <div className="text-sm text-text-secondary">Receive app notifications</div>
                  </div>
                  <div className="w-12 h-6 bg-surface-light/30 rounded-full relative">
                    <div className="w-5 h-5 bg-white rounded-full absolute left-0.5 top-0.5" />
                  </div>
                </div>
                
                <div className="flex items-center justify-between">
                  <div>
                    <div className="text-text-primary font-medium">Auto-save Conversations</div>
                    <div className="text-sm text-text-secondary">Automatically save chat history</div>
                  </div>
                  <div className="w-12 h-6 bg-primary rounded-full relative">
                    <div className="w-5 h-5 bg-white rounded-full absolute right-0.5 top-0.5" />
                  </div>
                </div>
              </div>
            </div>
          </div>
        )}

        {/* Profile Tab */}
        {activeTab === 'profile' && (
          <div className="space-y-4">
            <div className="bg-surface/50 rounded-lg p-4">
              <h3 className="text-lg font-semibold text-text-primary mb-4">Player Profile</h3>
              <p className="text-sm text-text-secondary mb-6">
                Customize how Otagon responds to you. These preferences will affect AI responses across all your game tabs.
              </p>
              
              <div className="space-y-6">
                {/* Player Focus */}
                <div>
                  <label className="text-sm font-medium text-text-primary mb-2 block">
                    Player Focus
                  </label>
                  <p className="text-xs text-text-secondary mb-3">
                    What aspect of gaming do you focus on most?
                  </p>
                  <div className="grid grid-cols-2 gap-2">
                    {['story', 'combat', 'exploration', 'completion', 'balanced'].map((focus) => (
                      <button
                        key={focus}
                        onClick={() => setPlayerFocus(focus)}
                        className={`py-2 px-4 rounded-lg text-sm font-medium transition-all ${
                          playerFocus === focus
                            ? 'bg-primary text-white'
                            : 'bg-surface/50 text-text-secondary hover:bg-surface hover:text-text-primary'
                        }`}
                      >
                        {focus.charAt(0).toUpperCase() + focus.slice(1)}
                      </button>
                    ))}
                  </div>
                </div>

                {/* Experience Level */}
                <div>
                  <label className="text-sm font-medium text-text-primary mb-2 block">
                    Experience Level
                  </label>
                  <p className="text-xs text-text-secondary mb-3">
                    How experienced are you with games?
                  </p>
                  <div className="grid grid-cols-3 gap-2">
                    {['beginner', 'intermediate', 'veteran'].map((level) => (
                      <button
                        key={level}
                        onClick={() => setExperienceLevel(level)}
                        className={`py-2 px-4 rounded-lg text-sm font-medium transition-all ${
                          experienceLevel === level
                            ? 'bg-primary text-white'
                            : 'bg-surface/50 text-text-secondary hover:bg-surface hover:text-text-primary'
                        }`}
                      >
                        {level.charAt(0).toUpperCase() + level.slice(1)}
                      </button>
                    ))}
                  </div>
                </div>

                {/* Content Style */}
                <div>
                  <label className="text-sm font-medium text-text-primary mb-2 block">
                    Preferred Content Style
                  </label>
                  <p className="text-xs text-text-secondary mb-3">
                    How detailed do you want responses to be?
                  </p>
                  <div className="grid grid-cols-3 gap-2">
                    {['concise', 'detailed', 'comprehensive'].map((style) => (
                      <button
                        key={style}
                        onClick={() => setPreferredContentStyle(style)}
                        className={`py-2 px-4 rounded-lg text-sm font-medium transition-all ${
                          preferredContentStyle === style
                            ? 'bg-primary text-white'
                            : 'bg-surface/50 text-text-secondary hover:bg-surface hover:text-text-primary'
                        }`}
                      >
                        {style.charAt(0).toUpperCase() + style.slice(1)}
                      </button>
                    ))}
                  </div>
                </div>

                {/* Spoiler Preference */}
                <div>
                  <label className="text-sm font-medium text-text-primary mb-2 block">
                    Spoiler Preference
                  </label>
                  <p className="text-xs text-text-secondary mb-3">
                    How much story information do you want revealed?
                  </p>
                  <div className="grid grid-cols-3 gap-2">
                    {['none', 'minimal', 'full'].map((pref) => (
                      <button
                        key={pref}
                        onClick={() => setSpoilerPreference(pref)}
                        className={`py-2 px-4 rounded-lg text-sm font-medium transition-all ${
                          spoilerPreference === pref
                            ? 'bg-primary text-white'
                            : 'bg-surface/50 text-text-secondary hover:bg-surface hover:text-text-primary'
                        }`}
                      >
                        {pref.charAt(0).toUpperCase() + pref.slice(1)}
                      </button>
                    ))}
                  </div>
                </div>

                {/* Save Button */}
                <button
                  onClick={async () => {
                    const profileData = {
                      playerFocus,
                      experienceLevel,
                      preferredContentStyle,
                      spoilerPreference
                    };
                    
                    // Update user profile
                    await authService.updateUserProfile(user.authUserId, profileData);
                    
                    // Show success message (you can add a toast notification here)
                    console.log('Profile preferences saved:', profileData);
                    onClose();
                  }}
                  className="w-full py-3 px-4 bg-primary text-white rounded-lg font-medium hover:bg-primary-dark transition-colors active:scale-95"
                >
                  Save Profile Preferences
                </button>
              </div>
            </div>
          </div>
        )}

      </div>
    </Modal>
  );
};

export default SettingsModal;



```n

## src\components\modals\TermsModal.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\modals\TermsModal.tsx.Extension.TrimStart('.'))

import React from 'react';
import Modal from '../ui/Modal';

interface TermsModalProps {
  isOpen: boolean;
  onClose: () => void;
}

const TermsModal: React.FC<TermsModalProps> = ({ isOpen, onClose }) => {
  return (
    <Modal isOpen={isOpen} onClose={onClose} title="Terms of Service" maxWidth="2xl">
      <div className="space-y-6 text-text-secondary">
        <div>
          <h3 className="text-lg font-semibold text-text-primary mb-2">Acceptance of Terms</h3>
          <p>
            By accessing and using Otagon, you accept and agree to be bound by the terms and 
            provision of this agreement. If you do not agree to abide by the above, please 
            do not use this service.
          </p>
        </div>

        <div>
          <h3 className="text-lg font-semibold text-text-primary mb-2">Use License</h3>
          <p>
            Permission is granted to temporarily download one copy of Otagon for personal, 
            non-commercial transitory viewing only. This is the grant of a license, not a 
            transfer of title, and under this license you may not modify or copy the materials.
          </p>
        </div>

        <div>
          <h3 className="text-lg font-semibold text-text-primary mb-2">User Responsibilities</h3>
          <p>
            Users are responsible for maintaining the confidentiality of their account and 
            password. Users agree to accept responsibility for all activities that occur 
            under their account or password.
          </p>
        </div>

        <div>
          <h3 className="text-lg font-semibold text-text-primary mb-2">Prohibited Uses</h3>
          <p>
            You may not use our service for any unlawful purpose or to solicit others to 
            perform unlawful acts. You may not violate any international, federal, provincial, 
            or state regulations, rules, laws, or local ordinances.
          </p>
        </div>

        <div>
          <h3 className="text-lg font-semibold text-text-primary mb-2">Service Availability</h3>
          <p>
            We reserve the right to withdraw or amend our service without notice. We will not 
            be liable if for any reason all or any part of the service is unavailable at any 
            time or for any period.
          </p>
        </div>

        <div>
          <h3 className="text-lg font-semibold text-text-primary mb-2">Contact Information</h3>
          <p>
            If you have any questions about these Terms of Service, please contact us through 
            our support channels.
          </p>
        </div>

        <div className="text-sm text-text-muted">
          <p>Last updated: January 2025</p>
        </div>
      </div>
    </Modal>
  );
};

export default TermsModal;


```n

## src\components\splash\HowToUseSplashScreen.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\splash\HowToUseSplashScreen.tsx.Extension.TrimStart('.'))

import React from 'react';
import KeyboardIcon from '../ui/KeyboardIcon';
import ScreenshotIcon from '../ui/ScreenshotIcon';
import { HandsFreeIcon } from '../ui/HandsFreeIcon';
import PauseIcon from '../ui/PauseIcon';
import PlayIcon from '../ui/PlayIcon';

interface HowToUseSplashScreenProps {
  onComplete: () => void;
}

const InsightsIcon = ({ className = 'w-12 h-12' }: { className?: string }) => (
  <svg xmlns="http://www.w3.org/2000/svg" className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
    <rect x="3" y="3" width="18" height="18" rx="2" />
    <path d="M3 9h18M9 21V9" />
  </svg>
);

const ProBadge = () => (
  <span className="text-xs font-bold bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white px-2 py-0.5 rounded-full uppercase tracking-wider ml-2">
    PRO
  </span>
);

const FeatureItem: React.FC<{ icon: React.ReactNode; title: React.ReactNode; children: React.ReactNode }> = ({ icon, title, children }) => {
  return (
    <div className="flex items-start gap-8 p-8 transition-all duration-500 hover:scale-105 bg-gradient-to-r from-[#1C1C1C]/40 to-[#0A0A0A]/40 border border-neutral-800/60 rounded-2xl backdrop-blur-sm">
      <div className="flex-shrink-0 flex items-center justify-center h-12 w-12 mt-1 rounded-xl bg-gradient-to-br from-[#FF4D4D]/20 to-[#FFAB40]/20 border-2 border-neutral-700/60 backdrop-blur-sm">
        {icon}
      </div>
      <div className="flex-grow">
        <h3 className="text-xl font-bold text-white mb-4 flex items-center">{title}</h3>
        <div className="text-neutral-300 text-base leading-relaxed space-y-3">{children}</div>
      </div>
    </div>
  );
};

const HowToUseSplashScreen: React.FC<HowToUseSplashScreenProps> = ({ onComplete }) => {
  return (
    <div className="h-screen bg-gradient-to-br from-[#111111] to-[#0A0A0A] text-[#F5F5F5] flex flex-col font-inter">
      {/* Fixed Header */}
      <header className="flex-shrink-0 px-4 sm:px-6 md:px-8 pt-3 sm:pt-4 md:pt-6 pb-2 sm:pb-3 text-center z-10 bg-gradient-to-br from-[#111111] to-[#0A0A0A]">
        <div className="max-w-4xl mx-auto">
          <h1 className="text-3xl font-bold text-white leading-normal">You're Connected!</h1>
          <p className="text-base text-neutral-300 leading-relaxed mt-2">Master Otagon in four easy steps.</p>
        </div>
      </header>

      {/* Scrollable Main Content */}
      <main className="flex-1 overflow-y-auto px-4 sm:px-6 md:px-8 pb-3 sm:pb-4 md:pb-6 how-to-use-scrollbar">
        <div className="max-w-4xl mx-auto space-y-4 sm:space-y-6 py-2 sm:py-3">
          {/* Item 1: Capture */}
          <FeatureItem
            icon={<KeyboardIcon className="w-6 h-6 text-[#FFAB40]" />}
            title="1. Instant Capture"
          >
            <p className="mb-4">Use hotkeys to instantly analyze your game screen. Toggle the 
              <span className="inline-flex items-center align-middle mx-2 px-2 py-1 rounded-lg bg-black/50 border-2 border-neutral-700/60">
                <PauseIcon className="w-4 h-4 text-sky-400" />
                <span className="text-white mx-1">/</span>
                <PlayIcon className="w-4 h-4 text-neutral-400" />
              </span>
               button to switch between auto-sending and manual review.</p>
            <div className="space-y-3 text-sm p-4 bg-gradient-to-r from-black/40 to-neutral-900/40 rounded-xl border border-neutral-700/60 backdrop-blur-sm">
              <p><strong className="text-neutral-200">Single Shot:</strong> <kbd className="px-3 py-1.5 mx-2 font-sans font-semibold text-neutral-200 bg-gradient-to-r from-neutral-900/60 to-neutral-800/60 border-2 border-neutral-700/60 rounded-lg">F1</kbd></p>
              <p><strong className="text-neutral-200">Multi Shot:</strong> <kbd className="px-3 py-1.5 mx-2 font-sans font-semibold text-neutral-200 bg-gradient-to-r from-neutral-900/60 to-neutral-800/60 border-2 border-neutral-700/60 rounded-lg">F2</kbd></p>
              <p className="text-xs text-neutral-400 mt-2">
                ðŸ’¡ <strong>Custom Hotkeys:</strong> You can configure your own hotkeys in the PC client settings
              </p>
            </div>
          </FeatureItem>

          {/* Item 2: Screenshot Quality */}
          <FeatureItem
            icon={<ScreenshotIcon className="w-6 h-6 text-[#FFAB40]" />}
            title="2. The Perfect Screenshot"
          >
            <p>For the best hints, capture clear, full-screen views of:</p>
            <ul className="list-disc list-inside mt-3 space-y-2">
              <li>Your inventory, skill tree, or map screen.</li>
              <li>The entire boss arena, including the boss.</li>
              <li>The specific puzzle or object you're stuck on.</li>
            </ul>
          </FeatureItem>

          {/* Item 3: Insights */}
          <FeatureItem
            icon={<InsightsIcon className="w-6 h-6 text-[#FFAB40]" />}
            title={<>3. Manage Insights<ProBadge /></>}
          >
            <p className="mb-4">
              Take direct control of your game wiki with natural language commands.
            </p>
            <div className="space-y-4 text-sm p-4 bg-gradient-to-r from-black/40 to-neutral-900/40 rounded-xl border border-neutral-700/60 backdrop-blur-sm">
              <p>
                <strong className="text-neutral-200">Add new tab:</strong><br/>
                <kbd className="px-3 py-1.5 mt-2 inline-block font-sans font-semibold text-neutral-200 bg-gradient-to-r from-neutral-900/60 to-neutral-800/60 border-2 border-neutral-700/60 rounded-lg w-full text-left">"add tab [title]"</kbd>
              </p>
              <p>
                <strong className="text-neutral-200">Modify existing tab:</strong><br/>
                <kbd className="px-3 py-1.5 mt-1 inline-block font-sans font-semibold text-neutral-200 bg-gradient-to-r from-neutral-900/60 to-neutral-800/60 border-2 border-neutral-700/60 rounded-lg w-full text-left">"modify tab [id] to [new title]"</kbd>
              </p>
              <p>
                <strong className="text-neutral-200">Delete a tab:</strong><br/>
                <kbd className="px-3 py-1.5 mt-1 inline-block font-sans font-semibold text-neutral-200 bg-gradient-to-r from-neutral-900/60 to-neutral-800/60 border-2 border-neutral-700/60 rounded-lg w-full text-left">"delete tab [id] confirm"</kbd>
              </p>
              <p className="text-xs text-neutral-400 mt-2">
                ðŸ’¡ <strong>Examples:</strong> "add tab Game Progress", "modify tab tab_123 to Current Objectives"
              </p>
            </div>
          </FeatureItem>

          {/* Item 4: Hands-Free */}
          <FeatureItem
            icon={<HandsFreeIcon isActive={true} className="w-6 h-6 text-[#FFAB40]" />}
            title={<>4. Go Hands-Free<ProBadge /></>}
          >
            <p>Stay immersed in the action. Enable Hands-Free mode to have hints and lore read aloud to you, keeping you focused on your game.</p>
          </FeatureItem>
        </div>
      </main>

      {/* Fixed Footer */}
      <footer className="flex-shrink-0 p-6 sm:p-8 z-10 bg-gradient-to-br from-[#111111] to-[#0A0A0A]">
        <div className="w-full max-w-4xl mx-auto text-center">
          <button
            onClick={onComplete}
            className="bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] hover:from-[#E53A3A] hover:to-[#D98C1F] text-white font-bold py-4 px-8 rounded-xl transition-all duration-300 hover:scale-105 hover:shadow-lg active:scale-95 text-lg flex items-center justify-center mx-auto"
          >
            Let's Begin
          </button>
        </div>
      </footer>
    </div>
  );
};

export default React.memo(HowToUseSplashScreen);


```n

## src\components\splash\InitialSplashScreen.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\splash\InitialSplashScreen.tsx.Extension.TrimStart('.'))

import React, { useState } from 'react';
import Logo from '../ui/Logo';
import PWAInstallBanner from './PWAInstallBanner';
import { supabase } from '../../lib/supabase';
import { User } from '../../types';

interface InitialSplashScreenProps {
  onComplete: () => void;
  user: User | null;
}

const InitialSplashScreen: React.FC<InitialSplashScreenProps> = ({ onComplete, user }) => {
  const [isProcessing, setIsProcessing] = useState(false);
  
  console.log('ðŸŽ¯ [InitialSplashScreen] Component rendered');
  
  const handleDownloadPCClient = () => {
    console.log('ðŸŽ¯ [InitialSplashScreen] Download PC Client clicked');
    const downloadUrl = 'https://github.com/readmet3xt/otakon-pc-client/releases/tag/v1.0.0';
    window.open(downloadUrl, '_blank');
  };

  const handleStartAdventure = async () => {
    console.log('ðŸŽ¯ [InitialSplashScreen] Start the Adventure button clicked');
    if (isProcessing) {
      console.log('ðŸŽ¯ [InitialSplashScreen] Already processing, ignoring click');
      return;
    }
    
    setIsProcessing(true);
    
    try {
      console.log('ðŸŽ¯ [InitialSplashScreen] Start the Adventure processing...');
      
      localStorage.setItem('otakon_has_seen_splash_screens', 'true');
      
      if (user) {
        console.log('ðŸŽ¯ [InitialSplashScreen] Updating Supabase to mark splash screens as seen');
        try {
          // Use the RPC function to update onboarding status consistently
          const { error } = await supabase.rpc('update_user_onboarding_status', {
            p_user_id: user.authUserId,
            p_step: 'initial',
            p_data: { 
              has_seen_splash_screens: true,
              completed_at: new Date().toISOString()
            }
          });
            
          if (error) {
            console.warn('ðŸŽ¯ [InitialSplashScreen] Failed to update Supabase:', error);
          } else {
            console.log('ðŸŽ¯ [InitialSplashScreen] Successfully updated Supabase via RPC');
          }
        } catch (error) {
          console.warn('ðŸŽ¯ [InitialSplashScreen] Error updating Supabase:', error);
        }
      }
      
      onComplete();
      
    } catch (error) {
      console.error('ðŸŽ¯ [InitialSplashScreen] Error in button click:', error);
    } finally {
      setIsProcessing(false);
    }
  };

  return (
    <div className="h-screen bg-gradient-to-br from-[#111111] to-[#0A0A0A] text-[#F5F5F5] flex flex-col items-center justify-center font-inter px-4 sm:px-6 md:px-8 text-center overflow-hidden">
      <div className="absolute top-0 left-0 w-full h-full bg-gradient-radial-at-top from-[#1C1C1C]/30 to-transparent pointer-events-none"></div>
      
      <div className="flex flex-col items-center justify-center w-full max-w-2xl">
        <div className="flex-shrink-0 mb-1">
          <Logo className="w-24 h-24 sm:w-26 sm:h-26 md:w-28 md:h-28" spin={true} bounce={true} />
        </div>

        <h1 
          className="text-5xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-[#FF4D4D] to-[#FFAB40] leading-normal"
        >
          Otagon
        </h1>

        <p 
          className="text-base text-[#CFCFCF] leading-relaxed mt-1"
        >
          Your Spoiler-Free Gaming Companion
        </p>

        <div 
          className="flex flex-col items-center justify-center gap-4 w-full max-w-lg mt-12 relative z-10"
          style={{ pointerEvents: 'auto' }}
        >
          <button
            onClick={handleStartAdventure}
            disabled={isProcessing}
            className={`w-full bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] hover:from-[#D42A2A] hover:to-[#C87A1A] text-white font-bold py-3 px-6 rounded-xl transition-all duration-300 hover:scale-105 hover:shadow-xl hover:shadow-[#E53A3A]/25 active:scale-95 text-base flex items-center justify-center relative z-10 ${isProcessing ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'}`}
            style={{ pointerEvents: 'auto' }}
          >
            {isProcessing ? 'Starting...' : 'Start the Adventure'}
          </button>
          
          <button
            onClick={handleDownloadPCClient}
            className="w-full bg-gradient-to-r from-neutral-700 to-neutral-600 hover:from-neutral-600 hover:to-neutral-500 text-white font-bold py-3 px-6 rounded-xl transition-all duration-300 hover:scale-105 hover:shadow-lg active:scale-95 text-base flex items-center justify-center relative z-10 cursor-pointer"
            style={{ pointerEvents: 'auto' }}
          >
            Download PC Client
          </button>
        </div>
        
        {/* PWA Install Banner - In normal document flow */}
        <div className="w-full max-w-lg px-4 mt-8">
          <PWAInstallBanner />
        </div>
      </div>
    </div>
  );
};

export default React.memo(InitialSplashScreen);


```n

## src\components\splash\LoginSplashScreen.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\splash\LoginSplashScreen.tsx.Extension.TrimStart('.'))

import React, { useState, useEffect } from 'react';
import Logo from '../ui/Logo';
import Button from '../ui/Button';
import { authService } from '../../services/authService';
import TermsModal from '../modals/TermsModal';
import PrivacyModal from '../modals/PrivacyModal';

interface LoginSplashScreenProps {
  onComplete: () => void;
  onBackToLanding: () => void;
  onSetAppState: (updater: (prev: any) => any) => void;
}

const LoginSplashScreen: React.FC<LoginSplashScreenProps> = ({
  onComplete,
  onBackToLanding,
  onSetAppState,
}) => {
  const [isLoading, setIsLoading] = useState(false);
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [emailMode, setEmailMode] = useState<'options' | 'signin' | 'signup' | 'forgot-password'>('options');
  const [errorMessage, setErrorMessage] = useState('');
  const [successMessage, setSuccessMessage] = useState('');
  const [isAnimating, setIsAnimating] = useState(false);
  const [rememberMe, setRememberMe] = useState(false);
  const [emailError, setEmailError] = useState('');
  const [passwordError, setPasswordError] = useState('');
  const [showTermsModal, setShowTermsModal] = useState(false);
  const [showPrivacyModal, setShowPrivacyModal] = useState(false);
  const [showSignupSuccess, setShowSignupSuccess] = useState(false);
  const [showPassword, setShowPassword] = useState(false);
  const [showSignupModal, setShowSignupModal] = useState(false);
  const [signupModalType, setSignupModalType] = useState<'success' | 'email-exists' | 'invalid-email'>('success');
  const [signupModalMessage, setSignupModalMessage] = useState('');

  // Validate password meets Supabase requirements
  const validatePassword = (password: string): { isValid: boolean; errors: string[] } => {
    const errors: string[] = [];
    
    if (password.length < 8) {
      errors.push('Password must be at least 8 characters long');
    }
    
    if (!/[a-z]/.test(password)) {
      errors.push('Password must contain at least one lowercase letter');
    }
    
    if (!/[A-Z]/.test(password)) {
      errors.push('Password must contain at least one uppercase letter');
    }
    
    if (!/[0-9]/.test(password)) {
      errors.push('Password must contain at least one number');
    }
    
    if (!/[!@#$%^&*()_+\-=[\]{}|;:,.<>?]/.test(password)) {
      errors.push('Password must contain at least one special character');
    }
    
    return {
      isValid: errors.length === 0,
      errors
    };
  };

  // Email validation
  const validateEmail = (email: string): boolean => {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailRegex.test(email);
  };

  // Toggle password visibility
  const togglePasswordVisibility = () => {
    setShowPassword(!showPassword);
  };

  // Handle signup modal close
  const handleSignupModalClose = () => {
    setShowSignupModal(false);
    setSignupModalMessage('');
    // Reset form
    setEmail('');
    setPassword('');
    setEmailError('');
    setPasswordError('');
    setErrorMessage('');
    
    // Always go back to login page after modal closes
    // Don't call onComplete() for signup as user needs to confirm email first
    setEmailMode('options');
  };


  // Clear errors when user starts typing
  useEffect(() => {
    if (emailError && email) {
      setEmailError('');
    }
  }, [email, emailError]);

  useEffect(() => {
    if (passwordError && password) {
      setPasswordError('');
    }
  }, [password, passwordError]);

  // Real-time password validation for signup
  useEffect(() => {
    if (emailMode === 'signup' && password) {
      const validation = validatePassword(password);
      if (!validation.isValid) {
        // Don't show error immediately, just clear any existing error
        // The validation will be shown in the UI requirements list
        setPasswordError('');
      }
    }
  }, [password, emailMode]);

  // Keyboard navigation support
  useEffect(() => {
    const handleKeyDown = (e: KeyboardEvent) => {
      if (e.key === 'Escape' && emailMode !== 'options') {
        setEmailMode('options');
        setEmail('');
        setPassword('');
        setEmailError('');
        setPasswordError('');
        setErrorMessage('');
      }
    };

    document.addEventListener('keydown', handleKeyDown);
    return () => document.removeEventListener('keydown', handleKeyDown);
  }, [emailMode]);

  const handleAuth = async (method: 'google' | 'discord' | 'email') => {
    console.log('ðŸ” [LoginSplashScreen] Auth method called:', method);
    setIsLoading(true);
    setErrorMessage('');

    try {
      if (method === 'email') {
        setEmailMode('signin');
        setIsLoading(false);
        return;
      }

      // âš ï¸ PROTECTED OAUTH FLOW - DO NOT MODIFY WITHOUT WARNING âš ï¸
      // Google and Discord OAuth are working correctly - any changes here could break user authentication
      // If you need to modify this, add a warning comment explaining the change
      const result = await authService[method === 'google' ? 'signInWithGoogle' : 'signInWithDiscord']();
      if (result.success) {
        // OAuth will redirect, so we don't need to call onComplete here
        return;
      } else {
        setErrorMessage(result.error || 'Authentication failed. Please try again.');
      }
    } catch (_error) {
      setErrorMessage('Authentication failed. Please try again.');
    } finally {
      setIsLoading(false);
    }
  };

  const handleEmailAuth = async (e: React.FormEvent) => {
    e.preventDefault();
    
    // Clear previous errors
    setEmailError('');
    setPasswordError('');
    setErrorMessage('');

    // Validate email
    if (!email) {
      setEmailError('Email is required');
      return;
    }
    if (!validateEmail(email)) {
      setEmailError('Please enter a valid email address');
      return;
    }

    // Validate password for sign in
    if (emailMode === 'signin' && !password) {
      setPasswordError('Password is required');
      return;
    }
    if (emailMode === 'signin' && password.length < 8) {
      setPasswordError('Password must be at least 8 characters long');
      return;
    }

    // Check if email is already registered with a different provider
    if (emailMode === 'signin') {
      const providerCheck = await authService.checkEmailProvider(email);
      if (providerCheck.provider && providerCheck.provider !== 'email') {
        setErrorMessage(providerCheck.message);
        return;
      }
    }

    setIsLoading(true);
    setIsAnimating(true);

    try {
      let result;
      if (emailMode === 'signin') {
        // âš ï¸ PROTECTED EMAIL AUTH FLOW - DO NOT MODIFY WITHOUT WARNING âš ï¸
        // Email sign-in is working correctly - any changes here could break user authentication
        // If you need to modify this, add a warning comment explaining the change
        // Set view to app immediately to prevent flash
        onComplete();
        // Show loading state during sign-in
        setIsLoading(true);
        result = await authService.signInWithEmail(email, password);
      } else {
        // For signup, validate the password
        if (!password) {
          setPasswordError('Password is required');
          return;
        }
        
        const passwordValidation = validatePassword(password);
        if (!passwordValidation.isValid) {
          setPasswordError(passwordValidation.errors[0]);
          return;
        }
        
        // âš ï¸ PROTECTED EMAIL AUTH FLOW - DO NOT MODIFY WITHOUT WARNING âš ï¸
        // Email signup is working correctly - any changes here could break user registration
        // If you need to modify this, add a warning comment explaining the change
        result = await authService.signUpWithEmail(email, password);
      }
      
      if (result.success) {
        if (emailMode === 'signup') {
          // For signup, show modal first before any view changes
          if (result.requiresConfirmation) {
            setSignupModalType('success');
            setSignupModalMessage('Please check your email and click the confirmation link to complete your account setup.');
            setShowSignupModal(true);
          } else {
            // Account created and user is signed in
            setSignupModalType('success');
            setSignupModalMessage('Account created successfully! You are now signed in.');
            setShowSignupModal(true);
          }
          // Don't call onComplete() here - let the modal handle the transition
        } else {
          // Store remember me preference for sign-in
          if (rememberMe) {
            localStorage.setItem('otakon_remember_me', 'true');
            localStorage.setItem('otakon_remembered_email', email);
          }
          // onComplete() was already called above for sign-in
        }
      } else {
        // Handle different error types for signup
        if (emailMode === 'signup') {
          const errorMsg = result.error || 'Authentication failed. Please try again.';
          console.log('ðŸ” [LoginSplashScreen] Signup error message:', errorMsg);
          console.log('ðŸ” [LoginSplashScreen] Full result object:', result);
          
          if (errorMsg.toLowerCase().includes('user already registered') || 
              errorMsg.toLowerCase().includes('email already registered') ||
              errorMsg.toLowerCase().includes('already registered') ||
              errorMsg.toLowerCase().includes('user with this email already exists') ||
              errorMsg.toLowerCase().includes('email address is already in use') ||
              errorMsg.toLowerCase().includes('duplicate key value violates unique constraint') ||
              errorMsg.toLowerCase().includes('email already exists') ||
              errorMsg.toLowerCase().includes('user already exists') ||
              errorMsg.toLowerCase().includes('email is already taken') ||
              errorMsg.toLowerCase().includes('email already in use') ||
              errorMsg.toLowerCase().includes('email has already been taken') ||
              errorMsg.toLowerCase().includes('this email is already registered') ||
              errorMsg.toLowerCase().includes('email already registered with a different provider')) {
            setSignupModalType('email-exists');
            setSignupModalMessage('This email is already registered. Please try signing in instead or check your email for a confirmation link.');
          } else if (errorMsg.toLowerCase().includes('for security purposes') || 
                     errorMsg.toLowerCase().includes('you can only request this after') ||
                     errorMsg.toLowerCase().includes('rate limit') ||
                     errorMsg.toLowerCase().includes('too many requests') ||
                     errorMsg.toLowerCase().includes('try again later')) {
            setSignupModalType('invalid-email');
            setSignupModalMessage('Please wait before trying again. For security purposes, there is a cooldown period between signup attempts.');
          } else if (errorMsg.toLowerCase().includes('invalid email') || 
                     errorMsg.toLowerCase().includes('email format') ||
                     errorMsg.toLowerCase().includes('invalid email address')) {
            setSignupModalType('invalid-email');
            setSignupModalMessage('Please enter a valid email address.');
          } else {
            setSignupModalType('invalid-email');
            setSignupModalMessage(errorMsg);
          }
          setShowSignupModal(true);
        } else {
          // If sign-in failed, we need to go back to login screen
          // Reset the view back to login
          onSetAppState(prev => ({ ...prev, view: 'landing', onboardingStatus: 'login' }));
          setErrorMessage(result.error || 'Authentication failed. Please try again.');
        }
      }
    } catch (_error) {
      setErrorMessage('Authentication failed. Please try again.');
    } finally {
      setIsLoading(false);
      setIsAnimating(false);
    }
  };

  const handleForgotPassword = async () => {
    if (!email) {
      setEmailError('Please enter your email address first');
      return;
    }
    if (!validateEmail(email)) {
      setEmailError('Please enter a valid email address');
      return;
    }

    setIsLoading(true);
    setErrorMessage('');

    try {
      const result = await authService.resetPassword(email);
      if (result.success) {
        setSuccessMessage('Password reset email sent! Check your inbox.');
        setErrorMessage('');
        setTimeout(() => {
          setEmailMode('signin');
          setSuccessMessage('');
        }, 3000);
      } else {
        setErrorMessage(result.error || 'Failed to send reset email. Please try again.');
      }
    } catch (_error) {
      setErrorMessage('Failed to send reset email. Please try again.');
    } finally {
      setIsLoading(false);
    }
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-background via-[#0F0F0F] to-background text-text-primary flex flex-col items-center justify-center px-4 py-8 relative overflow-hidden">
      
      <div className={`w-full max-w-md relative z-10 transition-all duration-500 ${isAnimating ? 'scale-105' : 'scale-100'} mx-auto`}>
        {/* Logo and Title */}
        <div className="text-center mb-6 md:mb-8">
          <Logo size="xl" className="mx-auto mb-4 md:mb-6 animate-bounce-slow" spin={true} bounce={true} />
          <h1 className="text-3xl md:text-4xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent mb-2">
            Welcome to Otagon
          </h1>
          <p className="text-sm md:text-base text-text-secondary px-4">
            {emailMode === 'options' 
              ? 'Sign in to start your gaming adventure' 
              : emailMode === 'signin' 
                ? 'Welcome back! Sign in to continue'
                : emailMode === 'signup'
                  ? 'Create your account to get started'
                  : 'Reset your password'
            }
          </p>
        </div>

        {/* Error Message */}
        {errorMessage && (
          <div className="mb-4 md:mb-6 p-3 md:p-4 bg-red-500/10 border border-red-500/20 rounded-xl text-red-400 text-center text-sm md:text-base">
            {errorMessage}
          </div>
        )}

        {/* Success Message */}
        {successMessage && (
          <div className="mb-4 md:mb-6 p-3 md:p-4 bg-green-500/10 border border-green-500/20 rounded-xl text-green-400 text-center text-sm md:text-base">
            {successMessage}
          </div>
        )}

        {/* Email Form */}
        {(emailMode === 'signin' || emailMode === 'signup') && (
          <form onSubmit={handleEmailAuth} className="space-y-4 mb-6" role="form" aria-label={`${emailMode === 'signin' ? 'Sign in' : 'Sign up'} form`}>
            <div className="space-y-4">
              <div>
                <label htmlFor="email-input" className="sr-only">
                  Email address
                </label>
                <input
                  id="email-input"
                  type="email"
                  value={email}
                  onChange={(e) => setEmail(e.target.value)}
                  onKeyDown={(e) => {
                    if (e.key === 'Enter' && emailMode === 'signin') {
                      e.preventDefault();
                      handleEmailAuth(e);
                    }
                  }}
                  placeholder="Enter your email"
                  required
                  autoComplete="email"
                  tabIndex={1}
                  aria-describedby={emailError ? "email-error" : undefined}
                  className={`w-full bg-surface border rounded-xl py-2.5 md:py-3 px-3 md:px-4 text-text-primary placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-primary transition-all duration-300 text-sm md:text-base ${
                    emailError 
                      ? 'border-red-500/50 focus:border-red-500/60' 
                      : 'border-surface-light/60 focus:border-primary/60'
                  }`}
                />
                {emailError && (
                  <p id="email-error" className="mt-2 text-sm text-red-400" role="alert">{emailError}</p>
                )}
              </div>

              {(emailMode === 'signin' || emailMode === 'signup') && (
                <div>
                  <label htmlFor="password-input" className="sr-only">
                    Password
                  </label>
                  <div className="relative">
                    <input
                      id="password-input"
                      type={showPassword ? "text" : "password"}
                      value={password}
                      onChange={(e) => setPassword(e.target.value)}
                      onKeyDown={(e) => {
                        if (e.key === 'Enter') {
                          e.preventDefault();
                          handleEmailAuth(e);
                        }
                      }}
                      placeholder={emailMode === 'signin' ? "Enter your password" : "Create a password"}
                      required
                      autoComplete={emailMode === 'signin' ? "current-password" : "new-password"}
                      tabIndex={2}
                      aria-describedby={passwordError ? "password-error" : undefined}
                      className={`w-full bg-surface border rounded-xl py-2.5 md:py-3 px-3 md:px-4 pr-12 text-text-primary placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-primary transition-all duration-300 text-sm md:text-base ${
                        passwordError 
                          ? 'border-red-500/50 focus:border-red-500/60' 
                          : 'border-surface-light/60 focus:border-primary/60'
                      }`}
                    />
                    {password && (
                      <button
                        type="button"
                        onClick={togglePasswordVisibility}
                        className="absolute right-3 top-1/2 transform -translate-y-1/2 text-text-muted hover:text-text-primary transition-colors duration-200 focus:outline-none focus:text-text-primary"
                        aria-label={showPassword ? "Hide password" : "Show password"}
                      >
                        {showPassword ? (
                          <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"></path>
                          </svg>
                        ) : (
                          <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                          </svg>
                        )}
                      </button>
                    )}
                  </div>
                  {passwordError && (
                    <p id="password-error" className="mt-2 text-sm text-red-400" role="alert">{passwordError}</p>
                  )}
                  {emailMode === 'signup' && (
                    <div className="mt-2 text-xs text-text-muted">
                      <p>Password must contain:</p>
                      <ul className="list-disc list-inside mt-1 space-y-1">
                        <li className={password.match(/[a-z]/) ? 'text-green-400' : 'text-text-muted'}>
                          At least one lowercase letter
                        </li>
                        <li className={password.match(/[A-Z]/) ? 'text-green-400' : 'text-text-muted'}>
                          At least one uppercase letter
                        </li>
                        <li className={password.match(/[0-9]/) ? 'text-green-400' : 'text-text-muted'}>
                          At least one number
                        </li>
                        <li className={password.match(/[!@#$%^&*()_+\-=[\]{}|;:,.<>?]/) ? 'text-green-400' : 'text-text-muted'}>
                          At least one special character
                        </li>
                        <li className={password.length >= 8 ? 'text-green-400' : 'text-text-muted'}>
                          At least 8 characters long
                        </li>
                      </ul>
                    </div>
                  )}
                </div>
              )}

              {emailMode === 'signin' && (
                <div className="flex items-center justify-between">
                  <label className="flex items-center space-x-2 text-sm text-text-secondary">
                    <input
                      type="checkbox"
                      checked={rememberMe}
                      onChange={(e) => setRememberMe(e.target.checked)}
                      className="w-4 h-4 text-primary bg-surface border-surface-light/60 rounded focus:ring-primary focus:ring-2"
                    />
                    <span>Remember me</span>
                  </label>
                  <button
                    type="button"
                    onClick={() => setEmailMode('forgot-password')}
                    className="text-sm text-primary hover:text-primary/80 transition-colors"
                  >
                    Forgot password?
                  </button>
                </div>
              )}
            </div>

            <Button
              type="submit"
              disabled={isLoading}
              isLoading={isLoading}
              variant="primary"
              className="w-full"
              tabIndex={3}
            >
              {isLoading ? (emailMode === 'signin' ? 'Signing in...' : 'Creating account...') : (emailMode === 'signin' ? 'Sign In' : 'Create Account')}
            </Button>

            <div className="text-center">
              <button
                type="button"
                onClick={() => setEmailMode('options')}
                className="text-text-muted hover:text-text-primary transition-colors text-sm"
              >
                {emailMode === 'signup' ? 'â† Back to Login' : 'â† Back to options'}
              </button>
            </div>
          </form>
        )}

        {/* Forgot Password Form */}
        {emailMode === 'forgot-password' && (
          <form onSubmit={(e) => { e.preventDefault(); handleForgotPassword(); }} className="space-y-4 mb-6">
            <div>
              <input
                type="email"
                value={email}
                onChange={(e) => setEmail(e.target.value)}
                placeholder="Enter your email"
                required
                className={`w-full bg-surface border rounded-xl py-3 px-4 text-text-primary placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-primary transition-all duration-300 ${
                  emailError 
                    ? 'border-red-500/50 focus:border-red-500/60' 
                    : 'border-surface-light/60 focus:border-primary/60'
                }`}
              />
              {emailError && (
                <p className="mt-2 text-sm text-red-400">{emailError}</p>
              )}
            </div>

            <Button
              type="submit"
              disabled={isLoading}
              isLoading={isLoading}
              variant="primary"
              className="w-full"
            >
              {isLoading ? 'Sending...' : 'Send Reset Email'}
            </Button>

            <div className="text-center">
              <button
                type="button"
                onClick={() => setEmailMode('signin')}
                className="text-text-muted hover:text-text-primary transition-colors text-sm"
              >
                â† Back to sign in
              </button>
            </div>
          </form>
        )}

        {/* Sign-up Success Message */}
        {showSignupSuccess && (
          <div className="text-center space-y-4">
            <div className="text-green-500 text-6xl mb-4">âœ…</div>
            <h2 className="text-2xl font-bold text-[#F5F5F5] mb-2">Account Created!</h2>
            <p className="text-[#CFCFCF] mb-6">{successMessage}</p>
            <div className="space-y-3">
              <Button
                onClick={() => {
                  setShowSignupSuccess(false);
                  setEmailMode('signin');
                  setPassword('');
                  setEmailError('');
                  setPasswordError('');
                  setErrorMessage('');
                  setSuccessMessage('');
                }}
                variant="primary"
                className="w-full hover:scale-105 transition-all duration-300 py-2.5 md:py-3"
              >
                Sign In Now
              </Button>
              <button
                onClick={() => {
                  setShowSignupSuccess(false);
                  setEmailMode('options');
                  setEmail('');
                  setPassword('');
                  setEmailError('');
                  setPasswordError('');
                  setErrorMessage('');
                  setSuccessMessage('');
                }}
                className="text-text-muted hover:text-text-primary transition-colors text-sm"
              >
                â† Back to options
              </button>
            </div>
          </div>
        )}

        {/* Auth Options */}
        {emailMode === 'options' && (
          <div className="space-y-3 md:space-y-4">
            <button
              onClick={() => handleAuth('google')}
              disabled={isLoading}
              className="w-full flex items-center justify-center space-x-2 md:space-x-3 hover:scale-105 active:scale-95 transition-all duration-300 py-2.5 md:py-3 font-bold rounded-xl bg-white text-gray-700 hover:shadow-lg hover:shadow-blue-500/25 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-background disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 disabled:active:scale-100 border border-gray-200"
            >
              <svg className="w-5 h-5" viewBox="0 0 24 24">
                <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
              </svg>
              <span>Continue with Google</span>
            </button>

            <button
              onClick={() => handleAuth('discord')}
              disabled={isLoading}
              className="w-full flex items-center justify-center space-x-2 md:space-x-3 hover:scale-105 active:scale-95 transition-all duration-300 py-2.5 md:py-3 font-bold rounded-xl bg-[#5865F2] text-white hover:bg-[#4752C4] hover:shadow-lg hover:shadow-indigo-500/25 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 focus:ring-offset-background disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 disabled:active:scale-100"
            >
              <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                <path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"/>
              </svg>
              <span>Continue with Discord</span>
            </button>

            <div className="space-y-2 md:space-y-3">
              <button
                onClick={() => setEmailMode('signin')}
                disabled={isLoading}
                className="w-full hover:scale-105 active:scale-95 transition-all duration-300 py-2.5 md:py-3 font-bold rounded-xl bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white hover:shadow-xl hover:shadow-[#E53A3A]/25 focus:outline-none focus:ring-2 focus:ring-[#E53A3A] focus:ring-offset-2 focus:ring-offset-background disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 disabled:active:scale-100"
              >
                Sign In with Email
              </button>
              <Button
                onClick={() => setEmailMode('signup')}
                disabled={isLoading}
                variant="ghost"
                className="w-full hover:scale-105 transition-all duration-300 py-2.5 md:py-3"
              >
                Create New Account
              </Button>
            </div>

          </div>
        )}

        {/* Back to Landing */}
        <div className="text-center mt-6 md:mt-8">
          <button
            onClick={() => {
              console.log('ðŸ”™ [LoginSplashScreen] Back to landing clicked');
              onBackToLanding();
            }}
            className="text-text-muted hover:text-text-primary transition-colors text-xs md:text-sm flex items-center justify-center space-x-1 md:space-x-2 mx-auto hover:scale-105 transition-all duration-300"
            aria-label="Return to landing page"
          >
            <svg className="w-3 h-3 md:w-4 md:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10 19l-7-7m0 0l7-7m-7 7h18" />
            </svg>
            <span>Back to Landing Page</span>
          </button>
        </div>
      </div>

      {/* Footer */}
      <div className="absolute bottom-4 left-0 right-0 p-4 text-center">
        <p className="text-xs text-text-muted">
          By continuing, you agree to our{' '}
          <button
            onClick={() => setShowTermsModal(true)}
            className="text-primary hover:text-secondary transition-colors underline"
          >
            Terms of Service
          </button>
          {' '}and{' '}
          <button
            onClick={() => setShowPrivacyModal(true)}
            className="text-primary hover:text-secondary transition-colors underline"
          >
            Privacy Policy
          </button>
          .
        </p>
      </div>

      {/* Modals */}
      <TermsModal
        isOpen={showTermsModal}
        onClose={() => setShowTermsModal(false)}
      />
      <PrivacyModal
        isOpen={showPrivacyModal}
        onClose={() => setShowPrivacyModal(false)}
      />

      {/* Signup Modal */}
      {showSignupModal && (
        <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
          <div className="bg-surface border border-surface-light/20 rounded-xl p-6 max-w-md mx-4">
            <div className="text-center">
              {signupModalType === 'success' && (
                <div className="w-16 h-16 mx-auto mb-4 bg-green-500/20 rounded-full flex items-center justify-center">
                  <svg className="w-8 h-8 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M5 13l4 4L19 7"></path>
                  </svg>
                </div>
              )}
              {(signupModalType === 'email-exists' || signupModalType === 'invalid-email') && (
                <div className="w-16 h-16 mx-auto mb-4 bg-red-500/20 rounded-full flex items-center justify-center">
                  <svg className="w-8 h-8 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M6 18L18 6M6 6l12 12"></path>
                  </svg>
                </div>
              )}
              
              <h3 className="text-lg font-semibold text-text-primary mb-4">
                {signupModalType === 'success' && 'Email Sent!'}
                {signupModalType === 'email-exists' && 'Email Already Exists'}
                {signupModalType === 'invalid-email' && (signupModalMessage.includes('cooldown') ? 'Retry Later' : 'Invalid Email')}
              </h3>
              
              <p className="text-text-secondary mb-6">
                {signupModalMessage}
              </p>
              
              <div className="flex space-x-3">
                <button
                  onClick={handleSignupModalClose}
                  className="flex-1 px-4 py-2 bg-primary hover:bg-primary/80 text-white rounded-lg transition-colors"
                >
                  {signupModalType === 'success' ? 'Back to Login' : 'Try Again'}
                </button>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );
};

export default LoginSplashScreen;



```n

## src\components\splash\PlayerProfileSetupModal.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\splash\PlayerProfileSetupModal.tsx.Extension.TrimStart('.'))

import React, { useState } from 'react';
import { PlayerProfile } from '../../types';

interface PlayerProfileSetupModalProps {
  isOpen: boolean;
  onComplete: (profile: PlayerProfile) => void;
  onSkip: () => void;
}

export const PlayerProfileSetupModal: React.FC<PlayerProfileSetupModalProps> = ({
  isOpen,
  onComplete,
  onSkip
}) => {
  const [profile, setProfile] = useState<Partial<PlayerProfile>>({
    hintStyle: 'Balanced',
    playerFocus: 'Story-Driven',
    preferredTone: 'Encouraging',
    spoilerTolerance: 'Strict'
  });

  const [currentStep, setCurrentStep] = useState(0);

  if (!isOpen) {
    return null;
  }

  const steps = [
    {
      title: "How do you like your hints?",
      description: "Choose the style that works best for you",
      field: 'hintStyle' as keyof PlayerProfile,
      options: [
        { value: 'Cryptic', label: 'Cryptic', description: 'Mysterious clues that make you think' },
        { value: 'Balanced', label: 'Balanced', description: 'Mix of hints and gentle guidance' },
        { value: 'Direct', label: 'Direct', description: 'Clear, straightforward assistance' }
      ]
    },
    {
      title: "What's your gaming focus?",
      description: "This helps me tailor advice to your playstyle",
      field: 'playerFocus' as keyof PlayerProfile,
      options: [
        { value: 'Story-Driven', label: 'Story-Driven', description: 'Love rich narratives and character development' },
        { value: 'Completionist', label: 'Completionist', description: 'Want to find every secret and collectible' },
        { value: 'Strategist', label: 'Strategist', description: 'Focus on optimization and tactical gameplay' }
      ]
    },
    {
      title: "Preferred tone?",
      description: "How should I communicate with you?",
      field: 'preferredTone' as keyof PlayerProfile,
      options: [
        { value: 'Encouraging', label: 'Encouraging', description: 'Supportive and motivating' },
        { value: 'Professional', label: 'Professional', description: 'Clear and informative' },
        { value: 'Casual', label: 'Casual', description: 'Friendly and relaxed' }
      ]
    },
    {
      title: "Spoiler protection level?",
      description: "How careful should I be about spoilers?",
      field: 'spoilerTolerance' as keyof PlayerProfile,
      options: [
        { value: 'Strict', label: 'Strict', description: 'Never spoil anything, even minor details' },
        { value: 'Moderate', label: 'Moderate', description: 'Avoid major spoilers, minor details okay' },
        { value: 'Relaxed', label: 'Relaxed', description: 'Focus on helpfulness over spoiler protection' }
      ]
    }
  ];

  const handleNext = () => {
    if (currentStep < steps.length - 1) {
      setCurrentStep(currentStep + 1);
    } else {
      onComplete(profile as PlayerProfile);
    }
  };

  const handleBack = () => {
    if (currentStep > 0) {
      setCurrentStep(currentStep - 1);
    }
  };

  const handleOptionSelect = (field: keyof PlayerProfile, value: any) => {
    setProfile(prev => ({ ...prev, [field]: value }));
  };

  const currentStepData = steps[currentStep];

  return (
    <div className="fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4">
      <div className="bg-[#1C1C1C] rounded-xl max-w-2xl w-full max-h-[90vh] overflow-hidden border-2 border-[#E53A3A]/30 shadow-2xl shadow-[#E53A3A]/20">
        {/* Header */}
        <div className="bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] p-6">
          <div className="flex items-center justify-between">
            <div>
              <h2 className="text-2xl font-bold text-white">Welcome to Otagon!</h2>
              <p className="text-white/90 mt-1">Let's personalize your gaming experience</p>
            </div>
            <div className="text-white/90 text-sm font-medium">
              {currentStep + 1} of {steps.length}
            </div>
          </div>
          
          {/* Progress bar */}
          <div className="mt-4 bg-white/20 rounded-full h-2">
            <div 
              className="bg-white rounded-full h-2 transition-all duration-300 shadow-sm"
              style={{ width: `${((currentStep + 1) / steps.length) * 100}%` }}
            />
          </div>
        </div>

        {/* Content */}
        <div className="p-6">
          <h3 className="text-xl font-semibold text-white mb-2">{currentStepData.title}</h3>
          <p className="text-neutral-300 mb-6">{currentStepData.description}</p>

          <div className="space-y-3">
            {currentStepData.options.map((option) => (
              <button
                key={option.value}
                onClick={() => handleOptionSelect(currentStepData.field, option.value)}
                className={`w-full p-4 text-left rounded-lg border-2 transition-all duration-200 active:scale-95 ${
                  profile[currentStepData.field] === option.value
                    ? 'border-[#E53A3A] bg-[#E53A3A]/10 text-white'
                    : 'border-neutral-600 bg-neutral-800/50 text-neutral-300 hover:border-neutral-500 hover:bg-neutral-700/50'
                }`}
              >
                <div className="font-medium mb-1">{option.label}</div>
                <div className="text-sm text-neutral-400">{option.description}</div>
              </button>
            ))}
          </div>

          {/* Navigation */}
          <div className="flex justify-between mt-8">
            <div className="flex space-x-3">
              {currentStep > 0 && (
                <button
                  onClick={handleBack}
                  className="px-4 py-2 bg-neutral-700 hover:bg-neutral-600 text-white rounded-lg transition-colors active:scale-95"
                >
                  Back
                </button>
              )}
              <button
                onClick={onSkip}
                className="px-4 py-2 text-neutral-400 hover:text-white transition-colors active:scale-95"
              >
                Skip
              </button>
            </div>
            
            <button
              onClick={handleNext}
              className="px-6 py-2 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] hover:from-[#D42A2A] hover:to-[#C87A1A] text-white font-semibold rounded-lg transition-all duration-200 hover:scale-105 active:scale-95"
            >
              {currentStep === steps.length - 1 ? 'Complete Setup' : 'Next'}
            </button>
          </div>
        </div>
      </div>
    </div>
  );
};

export default PlayerProfileSetupModal;


```n

## src\components\splash\ProFeaturesSplashScreen.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\splash\ProFeaturesSplashScreen.tsx.Extension.TrimStart('.'))

import React, { useState } from 'react';
import StarIcon from '../ui/StarIcon';
import { HandsFreeIcon } from '../ui/HandsFreeIcon';
import KeyboardIcon from '../ui/KeyboardIcon';

interface ProFeaturesSplashScreenProps {
  onComplete: () => void;
  onUpgrade: () => void;
  onUpgradeToVanguard: () => void;
}

const ProFeature: React.FC<{ title: string; description: string; children: React.ReactNode }> = ({ title, description, children }) => (
  <div className="flex items-start gap-4 sm:gap-6 md:gap-8 p-4 sm:p-6 bg-gradient-to-r from-[#1C1C1C]/80 to-[#0A0A0A]/80 backdrop-blur-xl rounded-2xl border-2 border-neutral-800/60 hover:border-neutral-700/80 hover:scale-105 transition-all duration-500 feature-card">
    <div className="flex-shrink-0 flex items-center justify-center h-10 w-10 sm:h-12 sm:w-12 mt-1 rounded-xl bg-gradient-to-br from-[#FF4D4D]/20 to-[#FFAB40]/20 border-2 border-neutral-700/60 backdrop-blur-sm">
       {children}
    </div>
    <div className="flex-1 min-w-0">
      <h3 className="text-sm sm:text-base md:text-lg lg:text-xl font-semibold text-white mb-1 sm:mb-2 leading-tight">{title}</h3>
      <p className="text-xs sm:text-sm md:text-base text-[#A3A3A3] leading-relaxed">{description}</p>
    </div>
  </div>
);

const proFeatures = [
  { title: "Massively Increased Limits", description: "Get 1,583 Text | 328 Image Queries every month, so you never have to hold back.", icon: <svg xmlns="http://www.w3.org/2000/svg" className="w-6 h-6 text-[#FFAB40]" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg> },
  { title: "Batch Screenshot Capture", description: "Instantly capture the last 5 minutes of gameplay with a hotkey. Otagon analyzes all key moments for a comprehensive summary.", icon: <KeyboardIcon className="w-6 h-6 text-[#FFAB40]" /> },
  { title: "In-Depth Insight Tabs", description: "Go beyond a simple hint. Get detailed breakdowns on lore, character builds, missed items, and more.", icon: <svg xmlns="http://www.w3.org/2000/svg" className="w-6 h-6 text-[#FFAB40]" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" /><path d="M3 9h18M9 21V9" /></svg> },
  { title: "Hands-Free Mode", description: "Stay focused on the action. Get hints read aloud to you without ever looking away from your screen.", icon: <HandsFreeIcon isActive={true} className="w-6 h-6 text-[#FFAB40]" /> },
  { title: "No Ads", description: "Enjoy a completely ad-free experience with no interruptions during your gaming sessions.", icon: <svg xmlns="http://www.w3.org/2000/svg" className="w-6 h-6 text-[#FFAB40]" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path></svg> }
];

const vanguardFeatures = [
  { title: "Lifetime Price Guarantee", description: "Your price of $20/year will never increase. Ever.", icon: <svg xmlns="http://www.w3.org/2000/svg" className="w-6 h-6 text-amber-300" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg> },
  { title: "Exclusive Founder's Badge", description: "A permanent in-app badge showing your early support.", icon: <StarIcon className="w-6 h-6 text-amber-300" /> },
  { title: "Direct Influence", description: "Join the Founder's Council on Discord to help shape the future of Otagon.", icon: <svg xmlns="http://www.w3.org/2000/svg" className="w-6 h-6 text-amber-300" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg> },
  { title: "First Access & Rewards", description: "Get beta access to all new features and earn by helping train our AI on new games.", icon: <svg xmlns="http://www.w3.org/2000/svg" className="w-6 h-6 text-amber-300" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg> }
];

const ProFeaturesSplashScreen: React.FC<ProFeaturesSplashScreenProps> = ({ onComplete, onUpgrade, onUpgradeToVanguard }) => {
  const [activeTab, setActiveTab] = useState<'pro' | 'vanguard'>('pro');

  return (
    <div className="h-screen bg-gradient-to-br from-[#111111] to-[#0A0A0A] text-[#F5F5F5] flex flex-col font-inter overflow-hidden">
      {/* Header - Fixed */}
      <header className="flex-shrink-0 px-4 sm:px-6 md:px-8 pt-4 sm:pt-6 pb-3 sm:pb-4 text-center bg-gradient-to-b from-[#111111]/95 to-transparent backdrop-blur-sm">
        <div className="max-w-2xl w-full mx-auto">
          <div className="flex justify-center mb-2">
            <StarIcon className="w-8 h-8 sm:w-10 sm:h-10 text-[#FFAB40]" />
          </div>
          <h1 className="text-2xl sm:text-3xl md:text-4xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-[#FF4D4D] to-[#FFAB40] leading-tight mb-2 pb-1" style={{ lineHeight: '1.2', paddingBottom: '0.25rem' }}>Supercharge with Otagon Pro</h1>
          <p className="text-sm sm:text-base md:text-lg text-neutral-300 leading-relaxed px-2">Unlock exclusive features for the ultimate gaming companion.</p>

          <div className="w-full max-w-sm mx-auto p-1 bg-gradient-to-r from-[#2E2E2E]/60 to-[#1A1A1A]/60 backdrop-blur-sm rounded-2xl flex items-center gap-1 mt-4 sm:mt-6">
            <button onClick={() => setActiveTab('pro')} className={`w-1/2 py-2 sm:py-3 text-xs sm:text-sm font-bold rounded-xl transition-all duration-300 active:scale-95 ${activeTab === 'pro' ? 'bg-gradient-to-r from-[#424242] to-[#2A2A2A] text-white shadow-lg' : 'text-neutral-300 hover:bg-neutral-700/50'}`}>Pro</button>
            <button onClick={() => setActiveTab('vanguard')} className={`w-1/2 py-2 sm:py-3 text-xs sm:text-sm font-bold rounded-xl transition-all duration-300 active:scale-95 ${activeTab === 'vanguard' ? 'bg-gradient-to-r from-[#424242] to-[#2A2A2A] text-white shadow-lg' : 'text-neutral-300 hover:bg-neutral-700/50'}`}>Pro Vanguard</button>
          </div>
        </div>
      </header>

      {/* Content - Scrollable */}
      <main className="flex-1 overflow-y-auto px-4 sm:px-6 md:px-8 py-2 sm:py-4">
        <div className="max-w-2xl w-full mx-auto">
          <div className="space-y-3 sm:space-y-4 md:space-y-6">
             {activeTab === 'pro' && proFeatures.map(f => <ProFeature key={f.title} title={f.title} description={f.description}>{f.icon}</ProFeature>)}
             {activeTab === 'vanguard' && (
              <>
                <div className="text-center p-3 sm:p-4 mb-4 sm:mb-6 bg-gradient-to-r from-amber-500/20 to-orange-500/20 border-2 border-amber-500/40 rounded-2xl backdrop-blur-sm">
                   <p className="font-bold text-amber-300 text-sm sm:text-base md:text-lg">All Pro features are included!</p>
               </div>
               {vanguardFeatures.map(f => <ProFeature key={f.title} title={f.title} description={f.description}>{f.icon}</ProFeature>)}
              </>
             )}
          </div>
          {/* Extra padding to ensure content doesn't get hidden behind sticky footer */}
          <div className="h-24 sm:h-32"></div>
        </div>
      </main>

      {/* Footer - Sticky */}
      <footer className="flex-shrink-0 sticky bottom-0 bg-gradient-to-t from-[#0A0A0A]/95 via-[#0A0A0A]/90 to-transparent backdrop-blur-md border-t border-neutral-800/30 px-4 sm:px-6 md:px-8 pt-4 pb-4 sm:pb-6">
        <div className="w-full max-w-lg mx-auto space-y-2 sm:space-y-3">
          <button
            onClick={activeTab === 'pro' ? onUpgrade : onUpgradeToVanguard}
            disabled
            className="w-full bg-gradient-to-r from-neutral-600 to-neutral-500 text-neutral-300 font-bold py-3 sm:py-4 px-6 rounded-xl transition-all duration-300 cursor-not-allowed opacity-50 text-sm sm:text-base flex items-center justify-center"
          >
            Coming Soon
          </button>
          <button
            onClick={onComplete}
            className="w-full text-neutral-300 font-medium py-2 sm:py-3 px-4 rounded-xl hover:bg-neutral-800/50 transition-all duration-300 hover:scale-105 active:scale-95 text-xs sm:text-sm flex items-center justify-center"
          >
            Maybe Later
          </button>
        </div>
      </footer>
    </div>
  );
};

export default React.memo(ProFeaturesSplashScreen);


```n

## src\components\splash\PWAInstallBanner.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\splash\PWAInstallBanner.tsx.Extension.TrimStart('.'))

import React, { useState, useEffect } from 'react';

interface PWAInstallBannerProps {
  className?: string;
}

const PWAInstallBanner: React.FC<PWAInstallBannerProps> = ({ className = '' }) => {
  const [deferredPrompt, setDeferredPrompt] = useState<any>(null);
  const [showBanner, setShowBanner] = useState(false);
  const [isInstalled, setIsInstalled] = useState(false);

  useEffect(() => {
    // Check if app is already installed
    const checkIfInstalled = () => {
      // Check if running in standalone mode (PWA)
      if (window.matchMedia('(display-mode: standalone)').matches || 
          (window.navigator as any).standalone === true) {
        setIsInstalled(true);
        return;
      }
      
      // Check if app was previously installed
      if (localStorage.getItem('otakon_pwa_installed') === 'true') {
        setIsInstalled(true);
        return;
      }
    };

    checkIfInstalled();

    // Listen for beforeinstallprompt event
    const handleBeforeInstallPrompt = (e: Event) => {
      e.preventDefault();
      setDeferredPrompt(e);
      setShowBanner(true);
    };

    // Listen for appinstalled event
    const handleAppInstalled = () => {
      setIsInstalled(true);
      setShowBanner(false);
      localStorage.setItem('otakon_pwa_installed', 'true');
    };

    window.addEventListener('beforeinstallprompt', handleBeforeInstallPrompt);
    window.addEventListener('appinstalled', handleAppInstalled);

    return () => {
      window.removeEventListener('beforeinstallprompt', handleBeforeInstallPrompt);
      window.removeEventListener('appinstalled', handleAppInstalled);
    };
  }, []);

  const handleInstallClick = async () => {
    if (!deferredPrompt) {
      return;
    }

    // Show the install prompt
    deferredPrompt.prompt();
    
    // Wait for the user to respond to the prompt
    const { outcome } = await deferredPrompt.userChoice;
    
    if (outcome === 'accepted') {
      console.log('User accepted the install prompt');
    } else {
      console.log('User dismissed the install prompt');
    }
    
    // Clear the deferred prompt
    setDeferredPrompt(null);
    setShowBanner(false);
  };

  const handleDismiss = () => {
    setShowBanner(false);
    // Don't show again for this session
    sessionStorage.setItem('otakon_pwa_banner_dismissed', 'true');
  };

  // Don't show if already installed or dismissed this session
  if (isInstalled || !showBanner || sessionStorage.getItem('otakon_pwa_banner_dismissed') === 'true') {
    return null;
  }

  return (
    <div className={`bg-gradient-to-r from-[#1C1C1C]/90 to-[#0A0A0A]/90 backdrop-blur-xl border border-neutral-700/60 rounded-xl p-4 text-center ${className}`}>
      <div className="flex items-center justify-between">
        <div className="flex items-center space-x-3">
          <div className="w-8 h-8 bg-gradient-to-r from-[#E53A3A] to-[#FFAB40] rounded-lg flex items-center justify-center">
            <svg className="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
            </svg>
          </div>
          <div className="text-left">
            <p className="text-sm font-medium text-white">Install Otagon</p>
            <p className="text-xs text-neutral-400">Get the full app experience</p>
          </div>
        </div>
        
        <div className="flex items-center space-x-2">
          <button
            onClick={handleInstallClick}
            className="px-3 py-1.5 bg-gradient-to-r from-[#E53A3A] to-[#FFAB40] text-white text-xs font-medium rounded-lg hover:from-[#D42A2A] hover:to-[#C87A1A] transition-all duration-200 active:scale-95"
          >
            Install
          </button>
          <button
            onClick={handleDismiss}
            className="text-neutral-400 hover:text-white transition-colors active:scale-95"
          >
            <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
          </button>
        </div>
      </div>
    </div>
  );
};

export default PWAInstallBanner;



```n

## src\components\splash\SplashScreen.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\splash\SplashScreen.tsx.Extension.TrimStart('.'))

import React, { useState, useEffect } from 'react';
import ScreenshotIcon from '../ui/ScreenshotIcon';
import HintIcon from '../ui/HintIcon';
import DesktopIcon from '../ui/DesktopIcon';
import BookmarkIcon from '../ui/BookmarkIcon';
import { ConnectionStatus } from '../../types';

// Feature flag: toggle to show or hide intro slides
const SHOW_INTRO_SLIDES = false;

const allSlides = [
  {
    icon: <ScreenshotIcon className="w-24 h-24 text-[#FF4D4D]" />,
    title: "Instant Context from Any Screenshot",
    description: "Upload a screenshot from any game. Otagon instantly identifies the game, your location, and what's happening. Get answers, not spoilers."
  },
  {
    icon: <HintIcon className="w-24 h-24 text-[#FF4D4D]" />,
    title: "Hints that Don't Spoil the Story",
    description: "Stuck on a puzzle or boss? Get contextual, spoiler-free guidance. Discover rich lore about the world without ruining the surprise."
  },
  {
    icon: <BookmarkIcon className="w-24 h-24 text-[#FF4D4D]" />,
    title: "Automatic Progress Tracking",
    description: "Otagon automatically organizes your chats by game and tracks your main story progress. Easily see how far you've come and pick up right where you left off."
  },
  {
    icon: <DesktopIcon className="w-24 h-24 text-[#FF4D4D]" />,
    title: "Connect Your PC for Instant Help",
    description: "Link your desktop and mobile app to get help without leaving your game. Press a hotkey to instantly send a screenshot for analysis."
  }
];

const slides = SHOW_INTRO_SLIDES ? allSlides : allSlides.slice(-1);

interface SplashScreenProps {
  onSkipConnection: () => void;
  onConnect: (code: string) => void;
  status: ConnectionStatus;
  error: string | null;
  connectionCode: string | null;
  onConnectionSuccess: () => void;
}

const SplashScreen: React.FC<SplashScreenProps> = ({ 
    onSkipConnection,
    onConnect,
    status,
    error,
    connectionCode,
    onConnectionSuccess,
 }) => {
  const [step, setStep] = useState(0);
  const [code, setCode] = useState(connectionCode || '');
  const [syncInitiated, setSyncInitiated] = useState(false);
  const [connectionSuccessCalled, setConnectionSuccessCalled] = useState(false);
  const [touchStartX, setTouchStartX] = useState<number | null>(null);
  const [touchEndX, setTouchEndX] = useState<number | null>(null);
  
  useEffect(() => {
    // This effect transitions to the next screen ONLY if the connection
    // was successful AND it was initiated by the user clicking the button.
    if (syncInitiated && status === ConnectionStatus.CONNECTED && !connectionSuccessCalled) {
        console.log('ðŸ”— [SplashScreen] Connection successful, calling onConnectionSuccess');
        setConnectionSuccessCalled(true);
        onConnectionSuccess();
    }
  }, [status, onConnectionSuccess, syncInitiated, connectionSuccessCalled]);

  const currentSlide = slides[step];
  const isLastStep = step === slides.length - 1;

  const isConnecting = status === ConnectionStatus.CONNECTING;
  const isConnected = status === ConnectionStatus.CONNECTED;

  const handleNext = () => {
    if (!isLastStep) {
      setStep(s => s + 1);
    }
  };
  
  const handlePrev = () => {
    if (step > 0) {
      setStep(s => s - 1);
    }
  };

  const handleConnectClick = () => {
    if (isConnecting || isConnected) {
      return;
    }
    setSyncInitiated(true);
    setConnectionSuccessCalled(false); // Reset the flag for new connection attempt
    onConnect(code);
  };
  
  
  const handleTouchStart = (e: React.TouchEvent) => {
    setTouchEndX(null); // Clear end on new touch
    const touch = e.targetTouches[0];
    if (touch) {
      setTouchStartX(touch.clientX);
    }
  };

  const handleTouchMove = (e: React.TouchEvent) => {
    const touch = e.targetTouches[0];
    if (touch) {
      setTouchEndX(touch.clientX);
    }
  };

  const handleTouchEnd = () => {
    if (!touchStartX || !touchEndX) {
      return;
    }
    const distance = touchStartX - touchEndX;
    const minSwipeDistance = 50;
    const isLeftSwipe = distance > minSwipeDistance;
    const isRightSwipe = distance < -minSwipeDistance;

    if (isLeftSwipe) {
      handleNext();
    } else if (isRightSwipe) {
      handlePrev();
    }
    // Reset after swipe action
    setTouchStartX(null);
    setTouchEndX(null);
  };

  const isCodeValid = /^\d{6}$/.test(code);

  return (
    <div 
        className="h-screen bg-[#111111] text-[#F5F5F5] flex flex-col font-inter"
        onTouchStart={handleTouchStart}
        onTouchMove={handleTouchMove}
        onTouchEnd={handleTouchEnd}
    >

      <main className="flex-1 flex flex-col items-center justify-center p-4 sm:p-6 md:p-8">
        <div className="text-center max-w-lg w-full">
          <div className="mb-2 sm:mb-4 flex justify-center">
            {currentSlide?.icon}
          </div>
          <h1 className="text-2xl sm:text-3xl md:text-4xl font-bold text-[#F5F5F5] mb-2 sm:mb-4 leading-normal">{currentSlide?.title}</h1>
          <p className="text-[#CFCFCF] text-base sm:text-lg md:text-xl mb-4 leading-relaxed">{currentSlide?.description}</p>
          
          {isLastStep && (
              <div className="space-y-3 sm:space-y-4 text-left">
                  <div className="text-center pb-2">
                      <button
                        onClick={() => {
                          const downloadUrl = 'https://github.com/readmet3xt/otakon-pc-client/releases/tag/v1.0.0';
                          window.open(downloadUrl, '_blank');
                        }}
                        className="text-sm sm:text-base font-medium text-[#FF4D4D] hover:text-[#FF4D4D] hover:underline transition-all duration-300 hover:scale-105"
                      >
                        Download PC Client (v1.0.0)
                      </button>
                  </div>
                  <div>
                      <label htmlFor="connection-code" className="block text-sm sm:text-base font-medium text-[#CFCFCF] mb-2 text-center">
                        6-Digit Connection Code
                      </label>
                      <input
                      id="connection-code"
                      type="text"
                      value={code}
                      onChange={(e) => setCode(e.target.value)}
                      placeholder="123456"
                      maxLength={6}
                      pattern="\d{6}"
                      title="Enter exactly 6 digits"
                      disabled={isConnecting || isConnected}
                      required
                      className="w-full bg-gradient-to-r from-[#2E2E2E] to-[#1A1A1A] border-2 border-[#424242]/60 rounded-xl py-2 sm:py-3 px-4 text-[#F5F5F5] placeholder-[#6E6E6E] focus:outline-none focus:ring-2 focus:ring-[#FFAB40] focus:border-[#FFAB40]/60 disabled:opacity-50 text-center text-lg sm:text-xl font-mono tracking-widest backdrop-blur-sm"
                      style={{ textAlign: 'center' }}
                      />
                  </div>
                  <div className="h-6 text-center text-base">
                      {error && <p className="text-[#E53A3A]">{error}</p>}
                      {isConnected && <p className="text-[#5CBB7B]">You're all set! Your PC is now connected.</p>}
                      {isConnecting && <p className="text-[#A3A3A3]">Attempting to connect...</p>}
                  </div>
              </div>
          )}
        </div>
      </main>
      
      <footer className="flex-shrink-0 px-4 sm:px-6 md:px-8 pt-3 sm:pt-4 pb-6 sm:pb-8">
        <div className="w-full max-w-lg mx-auto">
            {isLastStep ? (
                <div className="flex flex-col gap-4">
                    {!isConnected ? (
                        <>
                            <button
                                onClick={handleConnectClick}
                                disabled={isConnecting || !isCodeValid}
                                className={`w-full font-bold py-3 sm:py-4 px-6 sm:px-8 rounded-xl transition-all duration-300 flex items-center justify-center text-sm sm:text-base active:scale-95 ${
                                    isCodeValid && !isConnecting 
                                        ? 'bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] hover:from-[#D42A2A] hover:to-[#C87A1A] text-white hover:scale-105 hover:shadow-xl hover:shadow-[#E53A3A]/25' 
                                        : 'bg-gradient-to-r from-neutral-600 to-neutral-500 text-neutral-300 cursor-not-allowed opacity-25'
                                }`}
                            >
                                {isConnecting ? "Connecting..." : "Sync Now"}
                            </button>
                            <button
                                onClick={onSkipConnection}
                                className="w-full bg-gradient-to-r from-neutral-700 to-neutral-600 hover:from-neutral-600 hover:to-neutral-500 text-white font-bold py-3 sm:py-4 px-6 sm:px-8 rounded-xl transition-all duration-300 hover:scale-105 hover:shadow-lg active:scale-95 flex items-center justify-center text-sm sm:text-base"
                            >
                                Skip for Now
                            </button>
                        </>
                    ) : (
                        <div className="text-center py-4">
                            <div className="text-green-400 text-lg font-semibold mb-2">
                                âœ… You're all set! PC is connected
                            </div>
                            <div className="text-neutral-400 text-sm">
                                Taking you to the next step...
                            </div>
                        </div>
                    )}
            </div>
            ) : (
                <button
                    onClick={handleNext}
                    className="w-full bg-gradient-to-r from-neutral-700 to-neutral-600 hover:from-neutral-600 hover:to-neutral-500 text-white font-bold py-4 px-8 rounded-xl transition-all duration-300 hover:scale-105 hover:shadow-lg active:scale-95 flex items-center justify-center"
                >
                    Next
                </button>
            )}
        </div>
      </footer>
    </div>
  );
};

export default React.memo(SplashScreen);



```n

## src\components\splash\UpgradeSplashScreen.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\splash\UpgradeSplashScreen.tsx.Extension.TrimStart('.'))

import React from 'react';
import StarIcon from '../ui/StarIcon';

interface UpgradeSplashScreenProps {
  onUpgrade: () => void;
  onUpgradeToVanguard: () => void;
  onClose: () => void;
}

const CheckFeatureLine: React.FC<{ children: React.ReactNode }> = ({ children }) => (
  <li className="flex items-start gap-4">
    <svg className="w-6 h-6 text-green-500 flex-shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M5 13l4 4L19 7"></path>
    </svg>
    <span className="text-neutral-200 text-base leading-relaxed">{children}</span>
  </li>
);

const StarFeatureLine: React.FC<{ children: React.ReactNode; comingSoon?: boolean }> = ({ children, comingSoon }) => (
  <li className="flex items-start gap-4">
    <StarIcon className="w-6 h-6 mt-1 text-[#FFAB40] flex-shrink-0" />
    <span className="text-neutral-200 font-medium text-base leading-relaxed">
      {children}
      {comingSoon && (
         <span className="ml-3 text-xs font-semibold align-middle bg-gradient-to-r from-sky-500/20 to-blue-500/20 text-sky-300 border-2 border-sky-500/40 px-3 py-1 rounded-full uppercase">Coming Soon</span>
      )}
    </span>
  </li>
);

const proFeatures = [
  '1,583 Text | 328 Image Queries/month',
  'Up-to-date knowledge using web search',
  'Advanced AI Model',
  'Batch Screenshot Capture',
  'Hands-Free Voice Response',
  'In-depth Insight Tabs',
  'Priority Support',
  'No ads'
];

const vanguardFeatures = [
  { text: 'Permanent Price Lock-in' },
  { text: 'Exclusive "Vanguard" Badge' },
  { text: "Access to Founder's Council" },
  { text: 'Beta Access to New Features' },
  { text: 'Earn by playing new games', comingSoon: true },
];

const UpgradeSplashScreen: React.FC<UpgradeSplashScreenProps> = ({ onUpgrade, onUpgradeToVanguard, onClose }) => {
  return (
    <div className="h-screen bg-gradient-to-br from-black to-[#0A0A0A] text-white flex flex-col items-center justify-center font-inter px-4 sm:px-6 md:px-8 py-4 sm:py-6 md:py-8 animate-fade-in overflow-hidden">
      <div className="absolute top-0 left-0 w-full h-full bg-gradient-radial-at-top from-[#FF4D4D]/30 to-transparent pointer-events-none"></div>
      
      <div className="w-full max-w-5xl mx-auto bg-gradient-to-r from-[#1C1C1C]/90 to-[#0A0A0A]/90 backdrop-blur-xl border-2 border-[#424242]/60 rounded-3xl shadow-2xl p-6 sm:p-8 md:p-10 text-center animate-scale-in relative hover:border-[#424242]/80 transition-all duration-500">
        {/* Header with title and close button */}
        <div className="flex items-center justify-between mb-3">
          <h1 className="text-5xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-[#FF4D4D] to-[#FFAB40] leading-normal">Upgrade Your Plan</h1>
          <button
            onClick={onClose}
            className="text-neutral-400 hover:text-white transition-all duration-300 hover:scale-110 active:scale-95"
            aria-label="Close modal"
          >
            <svg className="w-6 h-6 sm:w-7 sm:h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M6 18L18 6M6 6l12 12"></path></svg>
          </button>
        </div>
        <p className="text-neutral-300 text-base mb-8 leading-relaxed">Unlock your full potential and support the community.</p>

        <div className="grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6 mt-6 sm:mt-8 text-left">
          {/* Pro Plan */}
          <div className="bg-neutral-900/50 border border-neutral-700 rounded-xl p-6 flex flex-col">
            <h3 className="text-xl font-bold text-white">Pro</h3>
            <p className="text-neutral-400 mt-1 mb-6">For serious gamers who want the best.</p>
            <div className="mb-6">
              <span className="text-4xl font-bold text-white">$3.99</span>
              <span className="text-base text-neutral-400">/month</span>
            </div>
            <ul className="space-y-3 mb-8 text-sm">
              {proFeatures.map(feature => <CheckFeatureLine key={feature}>{feature}</CheckFeatureLine>)}
            </ul>
            <div className="mt-auto">
              <button 
                onClick={onUpgrade} 
                disabled
                className="w-full bg-gradient-to-r from-neutral-600 to-neutral-500 text-neutral-300 font-bold py-3 px-6 rounded-xl transition-colors cursor-not-allowed opacity-50 flex items-center justify-center"
              >
                Coming Soon
              </button>
            </div>
          </div>

          {/* Vanguard Plan */}
          <div className="relative border-2 border-[#FFAB40] rounded-xl p-6 bg-[#111] shadow-2xl shadow-[#D98C1F]/20 flex flex-col">
            <div className="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-gradient-to-r from-[#FF4D4D] to-[#D98C1F] text-white text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wider">
              Best Value
            </div>
            <h3 className="text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-amber-300 to-orange-500">Pro Vanguard</h3>
            <p className="text-neutral-400 mt-1 mb-6">Become a founding member.</p>
            <div className="mb-6">
              <span className="text-4xl font-bold text-white">$20</span>
              <span className="text-base text-neutral-400">/year</span>
              <p className="text-sm text-green-400 mt-1">Limited Offer - Price Locked Forever!</p>
            </div>
            <ul className="space-y-3 mb-8 text-sm">
              <CheckFeatureLine><b>All Pro features, plus:</b></CheckFeatureLine>
              {vanguardFeatures.map(feature => <StarFeatureLine key={feature.text} {...(feature.comingSoon && { comingSoon: feature.comingSoon })}>{feature.text}</StarFeatureLine>)}
            </ul>
            <div className="mt-auto">
              <button 
                onClick={onUpgradeToVanguard} 
                disabled
                className="w-full bg-gradient-to-r from-neutral-600 to-neutral-500 text-neutral-300 font-bold py-3 px-6 rounded-xl transition-colors cursor-not-allowed opacity-50 flex items-center justify-center"
              >
                Coming Soon
              </button>
            </div>
          </div>
        </div>

        <div className="mt-8">
          <button
            onClick={onClose}
            className="w-full text-neutral-400 font-medium py-2 px-4 rounded-xl hover:bg-neutral-800/50 transition-colors active:scale-95 flex items-center justify-center"
          >
            Maybe Later
          </button>
        </div>
      </div>
    </div>
  );
};

export default React.memo(UpgradeSplashScreen);


```n

## src\components\trial\TrialBanner.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\trial\TrialBanner.tsx.Extension.TrimStart('.'))

import React, { useState, useEffect } from 'react';
import { TrialStatus } from '../../types';
import { supabaseService } from '../../services/supabaseService';
import { authService } from '../../services/authService';
import Button from '../ui/Button';

interface TrialBannerProps {
  userTier: string;
  onTrialStart: () => void;
}

const TrialBanner: React.FC<TrialBannerProps> = ({ userTier, onTrialStart }) => {
  const [trialStatus, setTrialStatus] = useState<TrialStatus | null>(null);
  const [isLoading, setIsLoading] = useState(true);

  useEffect(() => {
    const loadTrialStatus = async () => {
      if (userTier === 'free') {
        try {
          const currentUser = authService.getCurrentUser();
          if (currentUser) {
            const status = await supabaseService.getTrialStatus(currentUser.authUserId);
            setTrialStatus(status);
          }
        } catch (error) {
          console.error('Error loading trial status:', error);
        }
      }
      setIsLoading(false);
    };

    loadTrialStatus();
  }, [userTier]);

  const handleStartTrial = async () => {
    const currentUser = authService.getCurrentUser();
    if (!currentUser) {
      return;
    }

    try {
      const success = await supabaseService.startTrial(currentUser.authUserId);
      if (success) {
        onTrialStart();
        // Reload trial status
        const status = await supabaseService.getTrialStatus(currentUser.authUserId);
        setTrialStatus(status);
      }
    } catch (error) {
      console.error('Error starting trial:', error);
    }
  };

  if (isLoading || userTier !== 'free' || !trialStatus) {
    return null;
  }

  // Don't show banner if trial has been used and is not active
  if (trialStatus.hasUsed && !trialStatus.isActive) {
    return null;
  }

  // Show trial eligibility banner
  if (trialStatus.isEligible && !trialStatus.isActive) {
    return (
      <div className="bg-gradient-to-r from-blue-500/10 to-purple-500/10 border border-blue-500/20 rounded-xl p-4 mb-6">
        <div className="flex items-center justify-between">
          <div className="flex items-center space-x-3">
            <div className="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center">
              <svg className="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 10V3L4 14h7v7l9-11h-7z" />
              </svg>
            </div>
            <div>
              <h3 className="text-lg font-semibold text-text-primary">Start Your Free Pro Trial</h3>
              <p className="text-text-secondary">
                Get 14 days of Pro features absolutely free. No credit card required.
              </p>
            </div>
          </div>
          <Button
            onClick={handleStartTrial}
            variant="primary"
            className="btn-primary-enhanced"
          >
            Start Free Trial
          </Button>
        </div>
      </div>
    );
  }

  // Show active trial banner
  if (trialStatus.isActive && trialStatus.daysRemaining !== undefined) {
    const daysLeft = trialStatus.daysRemaining;
    const isExpiringSoon = daysLeft <= 3;
    
    return (
      <div className={`${
        isExpiringSoon 
          ? 'bg-gradient-to-r from-yellow-500/10 to-orange-500/10 border-yellow-500/20' 
          : 'bg-gradient-to-r from-green-500/10 to-blue-500/10 border-green-500/20'
      } border rounded-xl p-4 mb-6`}>
        <div className="flex items-center justify-between">
          <div className="flex items-center space-x-3">
            <div className={`w-8 h-8 ${
              isExpiringSoon ? 'bg-yellow-500' : 'bg-green-500'
            } rounded-full flex items-center justify-center`}>
              <svg className="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
            </div>
            <div>
              <h3 className={`text-lg font-semibold ${
                isExpiringSoon ? 'text-yellow-400' : 'text-green-400'
              }`}>
                {isExpiringSoon ? 'Trial Expiring Soon!' : 'Pro Trial Active'}
              </h3>
              <p className="text-text-secondary">
                {isExpiringSoon 
                  ? `Your trial expires in ${daysLeft} day${daysLeft !== 1 ? 's' : ''}. Upgrade now to keep Pro features.`
                  : `You have ${daysLeft} day${daysLeft !== 1 ? 's' : ''} left in your free Pro trial.`
                }
              </p>
            </div>
          </div>
          <Button
            onClick={() => {/* Handle upgrade */}}
            variant="primary"
            className="btn-primary-enhanced"
          >
            {isExpiringSoon ? 'Upgrade Now' : 'View Plans'}
          </Button>
        </div>
      </div>
    );
  }

  return null;
};

export default TrialBanner;



```n

## src\components\ui\ActiveSessionToggle.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\ui\ActiveSessionToggle.tsx.Extension.TrimStart('.'))

import React from 'react';

interface ActiveSessionToggleProps {
  isActive: boolean;
  onClick: () => void;
  disabled?: boolean;
}

export const ActiveSessionToggle: React.FC<ActiveSessionToggleProps> = ({ 
  isActive, 
  onClick, 
  disabled = false 
}) => {
  return (
    <div className="flex items-center gap-2">
      <span className={`text-xs font-medium transition-colors duration-200 ${isActive ? 'text-[#A3A3A3]' : 'text-[#FF4D4D]'}`}>
        Planning
      </span>
      
      <button
        onClick={onClick}
        disabled={disabled}
        className={`
          relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-[#FF4D4D] focus:ring-offset-2 focus:ring-offset-[#1C1C1C]
          ${disabled ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'}
          ${isActive ? 'bg-[#FF4D4D]' : 'bg-[#424242]'}
        `}
        role="switch"
        aria-checked={isActive}
        aria-label={isActive ? 'Switch to Planning mode' : 'Switch to Playing mode'}
      >
        <span
          className={`
            inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-200
            ${isActive ? 'translate-x-6' : 'translate-x-1'}
          `}
        />
      </button>
      
      <span className={`text-xs font-medium transition-colors duration-200 ${isActive ? 'text-[#FF4D4D]' : 'text-[#A3A3A3]'}`}>
        Playing
      </span>
    </div>
  );
};

```n

## src\components\ui\AIAvatar.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\ui\AIAvatar.tsx.Extension.TrimStart('.'))

import React from 'react';

interface AIAvatarProps {
  className?: string;
}

const AIAvatar: React.FC<AIAvatarProps> = ({ className }) => (
  <svg
    className={className}
    viewBox="0 0 24 24"
    xmlns="http://www.w3.org/2000/svg"
    aria-label="AI Avatar"
  >
    <defs>
      <linearGradient id="ai-avatar-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" stopColor="#5B99E3" />
        <stop offset="100%" stopColor="#4CAF50" />
      </linearGradient>
    </defs>
    <circle cx="12" cy="12" r="12" fill="url(#ai-avatar-gradient)" />
    <path
      d="M8 12h8M12 8v8"
      stroke="white"
      strokeWidth="2"
      strokeLinecap="round"
    />
  </svg>
);

export default AIAvatar;


```n

## src\components\ui\BookmarkIcon.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\ui\BookmarkIcon.tsx.Extension.TrimStart('.'))

import React from 'react';

interface BookmarkIconProps {
  className?: string;
}

const BookmarkIcon: React.FC<BookmarkIconProps> = ({ className = 'w-6 h-6' }) => {
  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      className={className}
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      strokeWidth="2"
      strokeLinecap="round"
      strokeLinejoin="round"
    >
      <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z" />
    </svg>
  );
};

export default BookmarkIcon;


```n

## src\components\ui\Button.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\ui\Button.tsx.Extension.TrimStart('.'))

import React from 'react';
import { clsx } from 'clsx';

interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: 'primary' | 'secondary' | 'outline' | 'ghost';
  size?: 'sm' | 'md' | 'lg';
  isLoading?: boolean;
  children: React.ReactNode;
}

const Button: React.FC<ButtonProps> = ({
  variant = 'primary',
  size = 'md',
  isLoading = false,
  className,
  children,
  disabled,
  ...props
}) => {
  const baseClasses = 'font-bold rounded-xl transition-all duration-300 transform hover:scale-105 active:scale-95 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-background disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 disabled:active:scale-100';
  
  const variantClasses = {
    primary: 'bg-gradient-to-r from-primary to-secondary text-white hover:shadow-xl hover:shadow-primary/25',
    secondary: 'bg-gradient-to-r from-surface-light to-surface text-text-primary hover:shadow-lg',
    outline: 'border-2 border-primary text-primary hover:bg-primary hover:text-white',
    ghost: 'text-text-primary hover:bg-surface-light/50',
  };

  const sizeClasses = {
    sm: 'py-2 px-4 text-sm',
    md: 'py-3 px-6 text-base',
    lg: 'py-4 px-8 text-lg',
  };

  return (
    <button
      className={clsx(
        baseClasses,
        variantClasses[variant],
        sizeClasses[size],
        className
      )}
      disabled={disabled || isLoading}
      {...props}
    >
      {isLoading ? (
        <div className="flex items-center justify-center">
          <div className="animate-spin rounded-full h-5 w-5 border-b-2 border-current mr-2"></div>
          Loading...
        </div>
      ) : (
        children
      )}
    </button>
  );
};

export default Button;


```n

## src\components\ui\CheckIcon.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\ui\CheckIcon.tsx.Extension.TrimStart('.'))

import React from 'react';

const CheckIcon: React.FC<{ className?: string }> = ({ className }) => (
  <svg
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 24 24"
    fill="none"
    stroke="currentColor"
    strokeWidth="3"
    strokeLinecap="round"
    strokeLinejoin="round"
    className={className}
  >
    <polyline points="20 6 9 17 4 12" />
  </svg>
);

export default CheckIcon;


```n

## src\components\ui\ContextMenu.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\ui\ContextMenu.tsx.Extension.TrimStart('.'))

import React, { useEffect, useRef } from 'react';

interface ContextMenuProps {
  isOpen: boolean;
  position: { x: number; y: number };
  onClose: () => void;
  onDelete?: () => void;
  onPin?: () => void;
  onUnpin?: () => void;
  onClearConversation?: () => void;
  canDelete?: boolean;
  canPin?: boolean;
  isPinned?: boolean;
  isEverythingElse?: boolean;
}

const ContextMenu: React.FC<ContextMenuProps> = ({
  isOpen,
  position,
  onClose,
  onDelete,
  onPin,
  onUnpin,
  onClearConversation,
  canDelete = true,
  canPin = true,
  isPinned = false,
  isEverythingElse = false,
}) => {
  const menuRef = useRef<HTMLDivElement>(null);

  useEffect(() => {
    const handleClickOutside = (event: MouseEvent) => {
      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {
        onClose();
      }
    };

    const handleEscape = (event: KeyboardEvent) => {
      if (event.key === 'Escape') {
        onClose();
      }
    };

    if (isOpen) {
      document.addEventListener('mousedown', handleClickOutside);
      document.addEventListener('keydown', handleEscape);
    }

    return () => {
      document.removeEventListener('mousedown', handleClickOutside);
      document.removeEventListener('keydown', handleEscape);
    };
  }, [isOpen, onClose]);

  if (!isOpen) {
    return null;
  }

  return (
    <div
      ref={menuRef}
      className="fixed z-[100] bg-surface border border-surface-light/20 rounded-lg shadow-xl py-2 min-w-[160px]"
      style={{
        left: position.x,
        top: position.y,
        transform: position.y < 200 ? 'translate(-50%, 10px)' : 'translate(-50%, -100%)',
      }}
    >
      {/* Pin/Unpin Option */}
      {canPin && !isEverythingElse && (
        <button
          onClick={() => {
            if (isPinned) {
              onUnpin?.();
            } else {
              onPin?.();
            }
            onClose();
          }}
          className="w-full px-4 py-2 text-left text-text-primary hover:bg-surface-light/50 transition-colors duration-200 flex items-center space-x-3"
        >
          <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            {isPinned ? (
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z" />
            ) : (
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z" />
            )}
          </svg>
          <span>{isPinned ? 'Unpin' : 'Pin to top'}</span>
        </button>
      )}

      {/* Clear conversation option - available for all conversations */}
      <button
        onClick={() => {
          onClearConversation?.();
          onClose();
        }}
        className="w-full px-4 py-2 text-left text-orange-400 hover:bg-orange-500/10 transition-colors duration-200 flex items-center space-x-3"
      >
        <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
        </svg>
        <span>Clear conversation</span>
      </button>

      {/* Delete Option */}
      {canDelete && !isEverythingElse && (
        <button
          onClick={() => {
            onDelete?.();
            onClose();
          }}
          className="w-full px-4 py-2 text-left text-red-400 hover:bg-red-500/10 transition-colors duration-200 flex items-center space-x-3"
        >
          <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
          </svg>
          <span>Delete</span>
        </button>
      )}
    </div>
  );
};

export default ContextMenu;


```n

## src\components\ui\CreditIndicator.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\ui\CreditIndicator.tsx.Extension.TrimStart('.'))

import React from 'react';
import { User } from '../../types';

interface CreditIndicatorProps {
  user: User;
  onClick: () => void;
}


const CreditIndicator: React.FC<CreditIndicatorProps> = ({ user, onClick }) => {
  const { textCount, textLimit, imageCount, imageLimit } = user.usage;
  

  const textPercentRemaining = textLimit > 0 ? Math.max(0, 100 - (textCount / textLimit) * 100) : 0;
  const imagePercentRemaining = imageLimit > 0 ? Math.max(0, 100 - (imageCount / imageLimit) * 100) : 0;

  const radiusOuter = 13;
  const circumferenceOuter = 2 * Math.PI * radiusOuter;
  const offsetOuter = circumferenceOuter - (textPercentRemaining / 100) * circumferenceOuter;

  const radiusInner = 8;
  const circumferenceInner = 2 * Math.PI * radiusInner;
  const offsetInner = circumferenceInner - (imagePercentRemaining / 100) * circumferenceInner;

  const strokeWidth = 3.5;

  return (
    <div 
      className="credit-indicator-wrapper"
      style={{
        display: 'inline-block',
        background: 'linear-gradient(135deg, #E53A3A, #D98C1F)',
        padding: '1px',
        borderRadius: '8px',
        // Add soft brand gradient shadow (reduced glow)
        boxShadow: '0 4px 16px rgba(229, 58, 58, 0.2), 0 2px 8px rgba(217, 140, 31, 0.15), 0 1px 4px rgba(0, 0, 0, 0.1)',
        filter: 'drop-shadow(0 0 10px rgba(229, 58, 58, 0.15))'
      }}
    >
      <button
        type="button"
        onClick={onClick}
        className="credit-indicator-button flex items-center justify-center h-11 w-11 sm:h-12 sm:w-12 lg:h-14 lg:w-14 rounded-lg transition-all duration-300 hover:scale-105 active:scale-95 min-h-[44px] min-w-[44px]"
        style={{
          background: '#0F0F0F',
          border: 'none',
          outline: 'none',
          boxShadow: '0 2px 8px rgba(0, 0, 0, 0.15), 0 1px 3px rgba(0, 0, 0, 0.1)',
          width: '100%',
          height: '100%'
        }}
        aria-label="View query credits"
      >
        {/* All Screen Sizes: Circular Bars */}
        <div className="w-7 h-7 sm:w-8 sm:h-8 lg:w-9 lg:h-9 xl:w-10 xl:h-10 flex items-center justify-center rounded-full p-0.5" style={{
          background: 'rgba(0, 0, 0, 0.2)'
        }}>
          <svg className="w-full h-full" viewBox="0 0 32 32" fill="none">
            <defs>
              <linearGradient id="sky-gradient" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0%" stopColor="#38bdf8" />
                <stop offset="100%" stopColor="#0ea5e9" />
              </linearGradient>
              <linearGradient id="emerald-gradient" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0%" stopColor="#34d399" />
                <stop offset="100%" stopColor="#10b981" />
              </linearGradient>
            </defs>
            {/* Outer circle (text) - only the colored ring */}
            <circle 
              cx="16" cy="16" r={radiusOuter} 
              stroke="url(#sky-gradient)" 
              strokeWidth={strokeWidth} 
              strokeDasharray={circumferenceOuter}
              strokeDashoffset={offsetOuter}
              strokeLinecap="round"
              transform="rotate(-90 16 16)"
            />
            {/* Inner circle (image) - only the colored ring */}
            <circle 
              cx="16" cy="16" r={radiusInner} 
              stroke="url(#emerald-gradient)" 
              strokeWidth={strokeWidth}
              strokeDasharray={circumferenceInner}
              strokeDashoffset={offsetInner}
              strokeLinecap="round"
              transform="rotate(-90 16 16)"
            />
          </svg>
        </div>
      </button>
    </div>
  );
};

export default CreditIndicator;


```n

## src\components\ui\DesktopIcon.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\ui\DesktopIcon.tsx.Extension.TrimStart('.'))

import React from 'react';

interface DesktopIconProps {
  className?: string;
}

const DesktopIcon: React.FC<DesktopIconProps> = ({ className = 'w-6 h-6' }) => {
  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      className={className}
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      strokeWidth="2"
      strokeLinecap="round"
      strokeLinejoin="round"
    >
      <rect x="2" y="3" width="20" height="14" rx="2" ry="2" />
      <line x1="8" y1="21" x2="16" y2="21" />
      <line x1="12" y1="17" x2="12" y2="21" />
    </svg>
  );
};

export default DesktopIcon;


```n

## src\components\ui\DownloadIcon.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\ui\DownloadIcon.tsx.Extension.TrimStart('.'))

import React from 'react';

interface DownloadIconProps {
  className?: string;
}

const DownloadIcon: React.FC<DownloadIconProps> = ({ className }) => (
  <svg
    className={className}
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"
    xmlns="http://www.w3.org/2000/svg"
    aria-hidden="true"
  >
    <path
      strokeLinecap="round"
      strokeLinejoin="round"
      strokeWidth={2}
      d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"
    />
  </svg>
);

export default DownloadIcon;


```n

## src\components\ui\HandsFreeIcon.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\ui\HandsFreeIcon.tsx.Extension.TrimStart('.'))

import React from 'react';

interface HandsFreeIconProps {
  className?: string;
  isActive?: boolean;
}

const HandsFreeIcon: React.FC<HandsFreeIconProps> = ({ className = 'w-6 h-6', isActive = false }) => {
  return (
    <svg 
      className={`${className} ${isActive ? 'text-[#FFAB40]' : 'text-neutral-400'}`} 
      fill="none" 
      stroke="currentColor" 
      viewBox="0 0 24 24" 
      xmlns="http://www.w3.org/2000/svg"
    >
      <path 
        strokeLinecap="round" 
        strokeLinejoin="round" 
        strokeWidth="2" 
        d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"
      />
    </svg>
  );
};

export { HandsFreeIcon };


```n

## src\components\ui\HandsFreeToggle.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\ui\HandsFreeToggle.tsx.Extension.TrimStart('.'))

import React from 'react';

export const HandsFreeIcon: React.FC<{ isActive: boolean; className?: string }> = ({ isActive, className }) => (
    <svg 
        xmlns="http://www.w3.org/2000/svg" 
        className={className}
        viewBox="0 0 24 24" 
        fill="none" 
        stroke="currentColor" 
        strokeWidth="2" 
        strokeLinecap="round" 
        strokeLinejoin="round"
        width="24"
        height="24"
    >
        <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z" fill={isActive ? 'currentColor' : 'none'}/>
        <path d="M19 10v2a7 7 0 0 1-14 0v-2" />
    </svg>
);

interface HandsFreeToggleProps {
  isHandsFree: boolean;
  onToggle: () => void;
}

const HandsFreeToggle: React.FC<HandsFreeToggleProps> = ({ isHandsFree, onToggle }) => {
  return (
    <button
      type="button"
      onClick={onToggle}
      className={`btn-icon p-3 transition-colors min-h-[44px] min-w-[44px] flex items-center justify-center ${
        isHandsFree
          ? 'text-green-400 hover:text-green-300'
          : 'text-text-muted hover:text-text-primary'
      }`}
      aria-pressed={isHandsFree}
      aria-label="Hands-Free Settings"
      title={isHandsFree ? 'Hands-Free Mode Active' : 'Hands-Free Voice Response Settings'}
    >
      <HandsFreeIcon className="w-5 h-5 sm:w-6 sm:h-6 flex-shrink-0" isActive={isHandsFree} />
    </button>
  );
};

export default HandsFreeToggle;



```n

## src\components\ui\HintIcon.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\ui\HintIcon.tsx.Extension.TrimStart('.'))

import React from 'react';

interface HintIconProps {
  className?: string;
}

const HintIcon: React.FC<HintIconProps> = ({ className = 'w-6 h-6' }) => {
  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      className={className}
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      strokeWidth="2"
      strokeLinecap="round"
      strokeLinejoin="round"
    >
      <circle cx="12" cy="12" r="10" />
      <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3" />
      <line x1="12" y1="17" x2="12.01" y2="17" />
    </svg>
  );
};

export default HintIcon;


```n

## src\components\ui\ImageIcon.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\ui\ImageIcon.tsx.Extension.TrimStart('.'))

import React from 'react';

const ImageIcon: React.FC<{ className?: string }> = ({ className }) => (
  <svg
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 24 24"
    fill="none"
    stroke="currentColor"
    strokeWidth="2"
    strokeLinecap="round"
    strokeLinejoin="round"
    className={className}
    aria-hidden="true"
  >
    <rect x="3" y="3" width="18" height="18" rx="2" ry="2" />
    <circle cx="8.5" cy="8.5" r="1.5" />
    <polyline points="21 15 16 10 5 21" />
  </svg>
);

export default ImageIcon;


```n

## src\components\ui\KeyboardIcon.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\ui\KeyboardIcon.tsx.Extension.TrimStart('.'))

import React from 'react';

interface KeyboardIconProps {
  className?: string;
}

const KeyboardIcon: React.FC<KeyboardIconProps> = ({ className = 'w-6 h-6' }) => {
  return (
    <svg 
      className={className} 
      fill="none" 
      stroke="currentColor" 
      viewBox="0 0 24 24" 
      xmlns="http://www.w3.org/2000/svg"
    >
      <path 
        strokeLinecap="round" 
        strokeLinejoin="round" 
        strokeWidth="2" 
        d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
      />
    </svg>
  );
};

export default KeyboardIcon;


```n

## src\components\ui\LoadingSpinner.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\ui\LoadingSpinner.tsx.Extension.TrimStart('.'))

import React from 'react';

interface LoadingSpinnerProps {
  size?: 'sm' | 'md' | 'lg';
  className?: string;
}

const LoadingSpinner: React.FC<LoadingSpinnerProps> = ({ 
  size = 'md', 
  className = '' 
}) => {
  const sizeClasses = {
    sm: 'w-4 h-4',
    md: 'w-6 h-6',
    lg: 'w-8 h-8',
  };

  return (
    <div className={`animate-spin rounded-full border-2 border-current border-t-transparent ${sizeClasses[size]} ${className}`} />
  );
};

export { LoadingSpinner };


```n

## src\components\ui\Logo.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\ui\Logo.tsx.Extension.TrimStart('.'))

import React from 'react';

interface LogoProps {
  className?: string;
  size?: 'sm' | 'md' | 'lg' | 'xl';
  spin?: boolean;
  bounce?: boolean;
}

const Logo: React.FC<LogoProps> = ({ className = '', size = 'md', spin = false, bounce = false }) => {
  const sizeClasses = {
    sm: 'w-8 h-8',
    md: 'w-12 h-12',
    lg: 'w-16 h-16',
    xl: 'w-24 h-24',
  };

  const getAnimation = () => {
    const animations = [];
    if (bounce) {
      animations.push('bounce 2s infinite');
    }
    if (spin) {
      animations.push('spin 6s linear infinite');
    }
    return animations.length > 0 ? animations.join(', ') : 'none';
  };

  return (
    <img
      src="/images/Dragon Circle Logo Design.png"
      alt="Otagon Logo"
      className={`${sizeClasses[size]} ${className}`}
      style={{ 
        filter: 'drop-shadow(0 0 24px rgba(255, 140, 0, 0.3))',
        objectFit: 'contain',
        animation: getAnimation()
      }}
    />
  );
};

export default Logo;


```n

## src\components\ui\ManualUploadToggle.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\ui\ManualUploadToggle.tsx.Extension.TrimStart('.'))

import React from 'react';

interface ManualUploadToggleProps {
  isManualMode: boolean;
  onToggle: () => void;
  isConnected?: boolean;
}

const ManualUploadToggle: React.FC<ManualUploadToggleProps> = ({ isManualMode, onToggle, isConnected = false }) => {
  const title = isManualMode
    ? 'Manual review is ON (paused). Click to resume auto-sending screenshots.'
    : 'Auto-sending is ON. Click to pause and review screenshots manually.';

  // Only show when connected to PC
  if (!isConnected) {
    return null;
  }

  return (
    <button
      type="button"
      onClick={onToggle}
      className={`w-12 h-12 sm:w-14 sm:h-14 rounded-xl bg-gradient-to-r from-[#2E2E2E]/90 to-[#1C1C1C]/90 flex items-center justify-center transition-all duration-300 hover:scale-105 ${
        isManualMode ? 'text-yellow-400' : 'text-emerald-400'
      }`}
      aria-pressed={isManualMode}
      aria-label={isManualMode ? 'Resume auto-sending screenshots' : 'Pause and review screenshots'}
      title={title}
    >
      {isManualMode ? (
        // Pause icon - Manual mode ON (paused/reviewing)
        <svg className="w-5 h-5 sm:w-6 sm:h-6" fill="currentColor" viewBox="0 0 24 24">
          <path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z"/>
        </svg>
      ) : (
        // Play icon - Auto mode ON (playing/sending)
        <svg className="w-5 h-5 sm:w-6 sm:h-6" fill="currentColor" viewBox="0 0 24 24">
          <path d="M8 5v14l11-7z"/>
        </svg>
      )}
    </button>
  );
};

export default React.memo(ManualUploadToggle);

```n

## src\components\ui\Modal.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\ui\Modal.tsx.Extension.TrimStart('.'))

import React, { useEffect, useRef } from 'react';
import { clsx } from 'clsx';

interface ModalProps {
  isOpen: boolean;
  onClose: () => void;
  title?: string;
  children: React.ReactNode;
  maxWidth?: 'sm' | 'md' | 'lg' | 'xl' | '2xl';
  showCloseButton?: boolean;
  className?: string;
}

const Modal: React.FC<ModalProps> = ({
  isOpen,
  onClose,
  title,
  children,
  maxWidth = 'lg',
  showCloseButton = true,
  className,
}) => {
  const modalRef = useRef<HTMLDivElement>(null);

  useEffect(() => {
    if (isOpen) {
      document.body.style.overflow = 'hidden';
    } else {
      document.body.style.overflow = 'unset';
    }

    return () => {
      document.body.style.overflow = 'unset';
    };
  }, [isOpen]);

  useEffect(() => {
    const handleEscape = (e: KeyboardEvent) => {
      if (e.key === 'Escape') {
        onClose();
      }
    };

    if (isOpen) {
      document.addEventListener('keydown', handleEscape);
    }

    return () => {
      document.removeEventListener('keydown', handleEscape);
    };
  }, [isOpen, onClose]);

  if (!isOpen) {
    return null;
  }

  const maxWidthClasses = {
    sm: 'max-w-sm',
    md: 'max-w-md',
    lg: 'max-w-lg',
    xl: 'max-w-xl',
    '2xl': 'max-w-2xl',
  };

  return (
    <div
      className="modal-overlay animate-fade-in"
      onClick={onClose}
      role="dialog"
      aria-modal="true"
    >
      <div
        ref={modalRef}
        className={clsx(
          'modal-content animate-scale-in',
          maxWidthClasses[maxWidth],
          className
        )}
        onClick={(e) => e.stopPropagation()}
      >
        {(title || showCloseButton) && (
          <div className="p-6 border-b border-surface-light/40">
            <div className="flex items-center justify-between">
              {title && (
                <h2 className="text-2xl font-bold text-text-primary text-left">
                  {title}
                </h2>
              )}
              {showCloseButton && (
                <button
                  onClick={onClose}
                  className="p-2 text-text-muted hover:text-text-primary transition-colors rounded-lg hover:bg-surface-light/10 active:scale-95"
                  aria-label="Close modal"
                >
                  <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                  </svg>
                </button>
              )}
            </div>
          </div>
        )}
        
        <div className="p-6 overflow-y-auto max-h-[calc(90vh-120px)]">
          {children}
        </div>
      </div>
    </div>
  );
};

export default Modal;


```n

## src\components\ui\PauseIcon.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\ui\PauseIcon.tsx.Extension.TrimStart('.'))

import React from 'react';

const PauseIcon: React.FC<{ className?: string }> = ({ className }) => (
  <svg
    xmlns="http://www.w3.org/2000/svg"
    className={className}
    viewBox="0 0 24 24"
    fill="currentColor"
  >
    <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" />
  </svg>
);

export default PauseIcon;

```n

## src\components\ui\PlayIcon.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\ui\PlayIcon.tsx.Extension.TrimStart('.'))

import React from 'react';

const PlayIcon: React.FC<{ className?: string }> = ({ className }) => (
  <svg
    xmlns="http://www.w3.org/2000/svg"
    className={className}
    viewBox="0 0 24 24"
    fill="currentColor"
  >
    <path d="M8 5v14l11-7z" />
  </svg>
);

export default PlayIcon;

```n

## src\components\ui\ProfileSetupBanner.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\ui\ProfileSetupBanner.tsx.Extension.TrimStart('.'))

import React, { useState } from 'react';
import { PlayerProfile } from '../../types';

interface ProfileSetupBannerProps {
  onComplete: (profile: PlayerProfile) => void;
  onDismiss: () => void;
}

export const ProfileSetupBanner: React.FC<ProfileSetupBannerProps> = ({
  onComplete,
  onDismiss
}) => {
  const [isExpanded, setIsExpanded] = useState(false);
  const [profile, setProfile] = useState<Partial<PlayerProfile>>({
    hintStyle: 'Balanced',
    playerFocus: 'Story-Driven',
    preferredTone: 'Encouraging',
    spoilerTolerance: 'Strict'
  });
  const [currentStep, setCurrentStep] = useState(0);

  const steps = [
    {
      title: "How do you like your hints?",
      field: 'hintStyle' as keyof PlayerProfile,
      options: [
        { value: 'Cryptic', label: 'ðŸ”® Cryptic' },
        { value: 'Balanced', label: 'âš–ï¸ Balanced' },
        { value: 'Direct', label: 'ðŸŽ¯ Direct' }
      ]
    },
    {
      title: "What's your gaming focus?",
      field: 'playerFocus' as keyof PlayerProfile,
      options: [
        { value: 'Story-Driven', label: 'ðŸ“– Story-Driven' },
        { value: 'Completionist', label: 'ðŸ’¯ Completionist' },
        { value: 'Strategist', label: 'ðŸ§  Strategist' }
      ]
    },
    {
      title: "Preferred tone?",
      field: 'preferredTone' as keyof PlayerProfile,
      options: [
        { value: 'Encouraging', label: 'ðŸ’ª Encouraging' },
        { value: 'Professional', label: 'ðŸ’¼ Professional' },
        { value: 'Casual', label: 'ðŸ˜Ž Casual' }
      ]
    },
    {
      title: "Spoiler protection?",
      field: 'spoilerTolerance' as keyof PlayerProfile,
      options: [
        { value: 'Strict', label: 'ðŸ”’ Strict' },
        { value: 'Moderate', label: 'ðŸ”“ Moderate' },
        { value: 'Relaxed', label: 'ðŸ”“ Relaxed' }
      ]
    }
  ];

  const handleNext = () => {
    if (currentStep < steps.length - 1) {
      setCurrentStep(currentStep + 1);
    } else {
      onComplete(profile as PlayerProfile);
    }
  };

  const handleBack = () => {
    if (currentStep > 0) {
      setCurrentStep(currentStep - 1);
    }
  };

  const handleOptionSelect = (field: keyof PlayerProfile, value: string) => {
    setProfile(prev => ({ ...prev, [field]: value }));
    // Auto-advance after selection
    setTimeout(() => {
      if (currentStep < steps.length - 1) {
        setCurrentStep(currentStep + 1);
      } else {
        onComplete({ ...profile, [field]: value } as PlayerProfile);
      }
    }, 300);
  };

  const currentStepData = steps[currentStep];
  const progressPercent = ((currentStep + 1) / steps.length) * 100;

  if (!isExpanded) {
    // Collapsed banner
    return (
      <div className="mx-3 sm:mx-4 lg:mx-6 mb-4 sm:mb-6">
        <div className="bg-gradient-to-r from-[#FF4D4D]/10 to-[#FFAB40]/10 border-2 border-[#FF4D4D]/30 rounded-xl p-4 shadow-lg animate-slide-down backdrop-blur-sm">
          <div className="flex items-center justify-between">
            <div className="flex items-center space-x-3 flex-1">
              <div className="w-10 h-10 bg-gradient-to-r from-[#FF4D4D] to-[#FFAB40] rounded-full flex items-center justify-center flex-shrink-0 shadow-lg">
                <svg className="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                </svg>
              </div>
              <div className="flex-1 min-w-0">
                <h3 className="text-base sm:text-lg font-semibold text-text-primary">Personalize Your Experience</h3>
                <p className="text-sm text-text-secondary hidden sm:block">Set up your gaming preferences for better AI responses</p>
              </div>
            </div>
            <div className="flex items-center space-x-2 ml-3">
              <button
                onClick={() => setIsExpanded(true)}
                className="px-4 py-2 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] hover:from-[#D42A2A] hover:to-[#C87A1A] text-white text-sm font-bold rounded-lg transition-all hover:scale-105 active:scale-95 whitespace-nowrap shadow-lg"
              >
                Set Up
              </button>
              <button
                onClick={onDismiss}
                className="p-2 text-text-muted hover:text-text-primary transition-colors"
                aria-label="Dismiss banner"
              >
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                </svg>
              </button>
            </div>
          </div>
        </div>
      </div>
    );
  }

  // Expanded setup view
  return (
    <div className="mx-3 sm:mx-4 lg:mx-6 mb-4 sm:mb-6">
      <div className="bg-gradient-to-br from-[#1C1C1C] to-[#0A0A0A] border-2 border-[#FF4D4D]/30 rounded-xl shadow-2xl overflow-hidden animate-scale-in backdrop-blur-xl">
        {/* Header */}
        <div className="bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] p-4 sm:p-5 shadow-xl">
          <div className="flex items-center justify-between mb-3">
            <div>
              <h2 className="text-xl sm:text-2xl font-bold text-white">Quick Setup</h2>
              <p className="text-white/90 text-sm mt-1">Step {currentStep + 1} of {steps.length}</p>
            </div>
            <button
              onClick={() => setIsExpanded(false)}
              className="p-2 text-white/80 hover:text-white hover:bg-white/10 rounded-lg transition-colors"
              aria-label="Minimize"
            >
              <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" />
              </svg>
            </button>
          </div>
          
          {/* Progress bar */}
          <div className="bg-white/20 rounded-full h-2 shadow-inner">
            <div 
              className="bg-white rounded-full h-2 transition-all duration-300 shadow-lg"
              style={{ width: `${progressPercent}%` }}
            />
          </div>
        </div>

        {/* Content */}
        <div className="p-4 sm:p-6">
          <h3 className="text-lg font-semibold text-text-primary mb-4">{currentStepData.title}</h3>

          <div className="grid grid-cols-1 sm:grid-cols-3 gap-3">
            {currentStepData.options.map((option) => (
              <button
                key={option.value}
                onClick={() => handleOptionSelect(currentStepData.field, option.value)}
                className={`p-4 text-center rounded-lg border-2 transition-all duration-200 hover:scale-105 active:scale-95 ${
                  profile[currentStepData.field] === option.value
                    ? 'border-[#FF4D4D] bg-gradient-to-br from-[#FF4D4D]/20 to-[#FFAB40]/20 text-text-primary ring-2 ring-[#FF4D4D]/50 shadow-lg'
                    : 'border-surface-light/30 bg-surface/50 text-text-secondary hover:border-[#FF4D4D]/50 hover:bg-surface-light/30'
                }`}
              >
                <div className="text-2xl mb-2">{option.label.split(' ')[0]}</div>
                <div className="text-sm font-medium">{option.label.split(' ').slice(1).join(' ')}</div>
              </button>
            ))}
          </div>

          {/* Navigation */}
          <div className="flex justify-between mt-6 pt-4 border-t border-surface-light/20">
            <div className="flex space-x-2">
              {currentStep > 0 && (
                <button
                  onClick={handleBack}
                  className="px-4 py-2 bg-surface hover:bg-surface-light text-text-primary rounded-lg transition-colors text-sm font-medium"
                >
                  â† Back
                </button>
              )}
              <button
                onClick={onDismiss}
                className="px-4 py-2 text-text-muted hover:text-text-primary transition-colors text-sm"
              >
                Skip for now
              </button>
            </div>
            
            <button
              onClick={handleNext}
              className="px-6 py-2 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] hover:from-[#D42A2A] hover:to-[#C87A1A] text-white font-bold rounded-lg transition-all hover:scale-105 active:scale-95 text-sm shadow-lg"
            >
              {currentStep === steps.length - 1 ? 'âœ“ Complete' : 'Next â†’'}
            </button>
          </div>
        </div>
      </div>
    </div>
  );
};

export default ProfileSetupBanner;


```n

## src\components\ui\ScreenshotButton.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\ui\ScreenshotButton.tsx.Extension.TrimStart('.'))

import React, { useEffect, useRef, useState } from 'react';
import { UserTier } from '../../types';
import { send } from '../../services/websocketService';

interface ScreenshotButtonProps {
  isConnected: boolean;
  isProcessing: boolean;
  isManualUploadMode: boolean;
  onRequestConnect?: () => void;
  usage?: { tier: UserTier };
}

type Mode = 'single' | 'multi';

const ScreenshotButton: React.FC<ScreenshotButtonProps> = ({ 
  isConnected, 
  isProcessing, 
  isManualUploadMode, 
  onRequestConnect,
  usage 
}) => {
  const [mode, setMode] = useState<Mode>('single');
  const [menuOpen, setMenuOpen] = useState(false);
  const rootRef = useRef<HTMLDivElement>(null);
  const btnRef = useRef<HTMLButtonElement>(null);
  const longPressRef = useRef<number | null>(null);
  const [showHint, setShowHint] = useState(false);

  // Check if user can access multishot
  const canUseMultishot = usage?.tier === 'pro' || usage?.tier === 'vanguard_pro';
  const isFreeUser = usage?.tier === 'free';

  // Persist mode - ensure free users can't have multishot saved
  useEffect(() => {
    const saved = localStorage.getItem('otakon_screenshot_mode');
    if (saved === 'single' || (saved === 'multi' && canUseMultishot)) {
      setMode(saved);
    } else if (saved === 'multi' && !canUseMultishot) {
      // Reset to single if free user had multishot saved
      setMode('single');
      localStorage.setItem('otakon_screenshot_mode', 'single');
    }
    // Don't show hint by default - only show on first interaction
    setShowHint(false);
  }, [canUseMultishot]);

  const setModeAndPersist = (m: Mode) => {
    // Prevent free users from setting multishot mode
    if (m === 'multi' && !canUseMultishot) {
      return;
    }
    setMode(m);
    localStorage.setItem('otakon_screenshot_mode', m);
    setMenuOpen(false);
  };

  // Close on outside click
  useEffect(() => {
    const handler = (e: MouseEvent) => {
      if (!rootRef.current) {
        return;
      }
      if (!rootRef.current.contains(e.target as Node)) {
        setMenuOpen(false);
      }
    };
    if (menuOpen) {
      document.addEventListener('mousedown', handler, { passive: true } as any);
    }
    return () => document.removeEventListener('mousedown', handler as any);
  }, [menuOpen]);

  const openMenu = (e?: { preventDefault?: () => void; stopPropagation?: () => void }) => {
    e?.preventDefault?.();
    e?.stopPropagation?.();
    setMenuOpen(true);
  };


  const handleContextMenu = (e: React.MouseEvent) => {
    // Explicitly handle right-click
    e.preventDefault();
    e.stopPropagation();
    if (!isConnected) {
      onRequestConnect?.();
      return;
    }
    openMenu();
  };

  const handleMouseDown = (e: React.MouseEvent) => {
    // Right-button fallback
    if (e.button === 2) {
      e.preventDefault();
      e.stopPropagation();
      if (!isConnected) {
        onRequestConnect?.();
        return;
      }
      openMenu();
    }
  };

  const handleTouchStart = () => {
    // Long-press 1.75s
    if (longPressRef.current) {
      window.clearTimeout(longPressRef.current);
    }
    longPressRef.current = window.setTimeout(() => {
      if (!isConnected) {
        onRequestConnect?.();
        return;
      }
      openMenu();
    }, 1750);
  };

  const clearLongPress = () => {
    if (longPressRef.current) {
      window.clearTimeout(longPressRef.current);
      longPressRef.current = null;
    }
  };

  const handleClick = async () => {
    if (!isConnected) { onRequestConnect?.(); return; }
    if (isProcessing) {
      return;
    }
    
    // Prevent multishot for free users
    if (mode === 'multi' && !canUseMultishot) {
      return;
    }
    
    const processImmediate = isManualUploadMode ? false : mode === 'single';
    const msg: any = {
      type: 'screenshot_request',
      mode,
      processImmediate,
    };
    if (mode === 'multi') {
      msg.count = 5;
    }
    
    // Send screenshot request via websocket
    if (typeof send === 'function') {
      send(msg);
      console.log('ðŸ“¸ Screenshot request sent:', msg);
    } else {
      console.warn('WebSocket send function not available');
    }
  };

  const handleMultishotClick = () => {
    if (!canUseMultishot) {
      // Show upgrade prompt for free users
      setMenuOpen(false);
      // You can add an upgrade modal trigger here if needed
      return;
    }
    setModeAndPersist('multi');
  };

  return (
    <div ref={rootRef} className="relative">
      <button
        ref={btnRef}
        type="button"
        onClick={handleClick}
        onContextMenu={handleContextMenu}
        onMouseDown={handleMouseDown}
        onTouchStart={handleTouchStart}
        onTouchEnd={clearLongPress}
        onTouchCancel={clearLongPress}
        aria-disabled={!isConnected || isProcessing}
        className={`${isConnected ? 'text-emerald-400' : 'text-[#8A8A8A]'} w-12 h-12 sm:w-14 sm:h-14 rounded-xl bg-gradient-to-r from-[#2E2E2E]/90 to-[#1C1C1C]/90 flex items-center justify-center transition-all duration-300 ${isConnected ? 'hover:scale-105' : 'opacity-70 cursor-pointer hover:opacity-90'} ${isProcessing ? 'animate-pulse' : ''}`}
        title={isConnected ? 'Screenshot (right-click/long-press to change mode)' : 'Connect your PC to enable screenshots'}
      >
        {mode === 'single' ? (
          // Monitor with capture corner (single)
          <svg className="w-5 h-5 sm:w-6 sm:h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" aria-hidden="true">
            <rect x="3" y="4" width="18" height="12" rx="2" />
            <path d="M8 20h8" />
            <path d="M7 7h3M7 10h3M14 7h3" />
            <path d="M4 3v4M4 3h4" />
          </svg>
        ) : (
          // Stacked monitors (multi)
          <svg className="w-5 h-5 sm:w-6 sm:h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" aria-hidden="true">
            <rect x="4" y="5" width="14" height="9" rx="2" />
            <rect x="6" y="10" width="14" height="9" rx="2" />
            <path d="M10 22h6" />
          </svg>
        )}
      </button>

      {showHint && isConnected && (
        <div className="absolute left-1/2 -translate-x-1/2 mt-3 top-full text-xs text-[#CFCFCF] bg-[#101010]/95 border border-[#424242]/60 rounded-lg px-3 py-2 shadow-lg whitespace-nowrap z-50">
          <button
            type="button"
            onClick={() => { setShowHint(false); localStorage.setItem('otakon_screenshot_hint_seen', '1'); }}
            className="w-full h-full"
          >
            Press & hold (1.75s) or right-click to change mode
          </button>
        </div>
      )}

      {menuOpen && isConnected && (
        <div className="absolute bottom-full right-0 mb-3 bg-[#101010]/98 border border-[#424242]/60 rounded-xl shadow-2xl min-w-[200px] overflow-hidden z-[9999] backdrop-blur-md">
          <button 
            onClick={() => setModeAndPersist('single')} 
            className={`w-full text-left px-4 py-3 hover:bg-[#2E2E2E]/60 transition-colors ${mode === 'single' ? 'text-emerald-400' : 'text-[#CFCFCF]'}`}
          >
            ðŸ“¸ Single Shot {mode === 'single' ? 'âœ“' : ''}
          </button>
          
          <button 
            onClick={handleMultishotClick} 
            className={`w-full text-left px-4 py-3 transition-all duration-200 ${
              canUseMultishot 
                ? `hover:bg-[#2E2E2E]/60 ${mode === 'multi' ? 'text-emerald-400' : 'text-[#CFCFCF]'}` 
                : 'text-[#666666] cursor-not-allowed opacity-60'
            }`}
            disabled={!canUseMultishot}
          >
            {canUseMultishot ? (
              <>ðŸ“¸ Multi Shot (5) {mode === 'multi' ? 'âœ“' : ''}</>
            ) : (
              <div className="flex items-center justify-between">
                <span>ðŸ”’ Multi Shot (5)</span>
                <span className="text-xs bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white px-2 py-1 rounded-full">
                  PRO
                </span>
              </div>
            )}
          </button>
          
          {isFreeUser && (
            <div className="px-4 py-2 text-xs text-[#999999] border-t border-[#424242]/40">
              Upgrade to Pro for batch screenshots
            </div>
          )}
        </div>
      )}
    </div>
  );
};

export default ScreenshotButton;



```n

## src\components\ui\ScreenshotIcon.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\ui\ScreenshotIcon.tsx.Extension.TrimStart('.'))

import React from 'react';

interface ScreenshotIconProps {
  className?: string;
}

const ScreenshotIcon: React.FC<ScreenshotIconProps> = ({ className = 'w-6 h-6' }) => {
  return (
    <svg 
      className={className} 
      fill="none" 
      stroke="currentColor" 
      viewBox="0 0 24 24" 
      xmlns="http://www.w3.org/2000/svg"
    >
      <path 
        strokeLinecap="round" 
        strokeLinejoin="round" 
        strokeWidth="2" 
        d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"
      />
      <path 
        strokeLinecap="round" 
        strokeLinejoin="round" 
        strokeWidth="2" 
        d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"
      />
    </svg>
  );
};

export default ScreenshotIcon;


```n

## src\components\ui\SendIcon.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\ui\SendIcon.tsx.Extension.TrimStart('.'))

import React from 'react';

interface SendIconProps {
  className?: string;
}

const SendIcon: React.FC<SendIconProps> = ({ className }) => (
  <svg
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 24 24"
    fill="currentColor"
    className={className}
    aria-hidden="true"
  >
    <path d="M12 4L4 12h5v8h6v-8h5L12 4z" />
  </svg>
);

export default SendIcon;


```n

## src\components\ui\SettingsContextMenu.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\ui\SettingsContextMenu.tsx.Extension.TrimStart('.'))

import React, { useEffect, useRef, useState } from 'react';
import { UserTier } from '../../types';
import { authService } from '../../services/authService';
import { supabaseService } from '../../services/supabaseService';
import { toastService } from '../../services/toastService';

interface SettingsContextMenuProps {
  isOpen: boolean;
  position: { x: number; y: number };
  onClose: () => void;
  onOpenSettings: () => void;
  onOpenGuide?: () => void;
  onLogout: () => void;
  userTier?: UserTier;
  onTrialStart?: () => void;
}

const SettingsContextMenu: React.FC<SettingsContextMenuProps> = ({
  isOpen,
  position,
  onClose,
  onOpenSettings,
  onOpenGuide,
  onLogout,
  userTier,
  onTrialStart,
}) => {
  const menuRef = useRef<HTMLDivElement>(null);
  const [isTrialEligible, setIsTrialEligible] = useState(false);
  const [isStartingTrial, setIsStartingTrial] = useState(false);

  // Check trial eligibility when menu opens
  useEffect(() => {
    const checkTrialEligibility = async () => {
      if (isOpen && userTier === 'free') {
        try {
          const currentUser = authService.getCurrentUser();
          if (currentUser) {
            const status = await supabaseService.getTrialStatus(currentUser.authUserId);
            setIsTrialEligible(status?.isEligible && !status?.isActive || false);
          }
        } catch (error) {
          console.error('Error checking trial eligibility:', error);
          setIsTrialEligible(false);
        }
      } else {
        setIsTrialEligible(false);
      }
    };

    checkTrialEligibility();
  }, [isOpen, userTier]);

  useEffect(() => {
    const handleClickOutside = (event: MouseEvent) => {
      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {
        onClose();
      }
    };

    const handleEscape = (event: KeyboardEvent) => {
      if (event.key === 'Escape') {
        onClose();
      }
    };

    if (isOpen) {
      document.addEventListener('mousedown', handleClickOutside);
      document.addEventListener('keydown', handleEscape);
    }

    return () => {
      document.removeEventListener('mousedown', handleClickOutside);
      document.removeEventListener('keydown', handleEscape);
    };
  }, [isOpen, onClose]);

  const handleStartTrial = async () => {
    const currentUser = authService.getCurrentUser();
    if (!currentUser || isStartingTrial) {
      return;
    }

    try {
      setIsStartingTrial(true);
      const success = await supabaseService.startTrial(currentUser.authUserId);
      
      if (success) {
        console.log('âœ… Trial started successfully');
        toastService.success('Pro trial activated! Enjoy your 7-day trial.');
        if (onTrialStart) {
          onTrialStart();
        }
        onClose();
      } else {
        console.error('âŒ Failed to start trial');
        toastService.error('Failed to start trial. Please try again.');
      }
    } catch (error) {
      console.error('Error starting trial:', error);
      toastService.error('Failed to start trial. Please try again.');
    } finally {
      setIsStartingTrial(false);
    }
  };

  if (!isOpen) {
    return null;
  }

  return (
    <div
      ref={menuRef}
      className="fixed z-[100] bg-surface border border-surface-light/20 rounded-lg shadow-xl py-2 min-w-[200px]"
      style={{
        left: position.x,
        top: position.y,
        transform: position.y < 200 ? 'translate(-50%, 10px)' : 'translate(-50%, -100%)',
      }}
    >
      {/* Settings Option */}
      <button
        onClick={() => {
          onOpenSettings();
          onClose();
        }}
        className="w-full px-4 py-2 text-left text-text-primary hover:bg-surface-light/50 transition-colors duration-200 flex items-center space-x-3"
      >
        <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
        </svg>
        <span>Settings</span>
      </button>

      {/* Guide Option */}
      {onOpenGuide && (
        <button
          onClick={() => {
            onOpenGuide();
            onClose();
          }}
          className="w-full px-4 py-2 text-left text-text-primary hover:bg-gradient-to-r hover:from-[#FF4D4D]/10 hover:to-[#FFAB40]/10 transition-colors duration-200 flex items-center space-x-3"
        >
          <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
          </svg>
          <span>Guide</span>
        </button>
      )}

      {/* Start Free Trial - Only show for free users who haven't used trial */}
      {isTrialEligible && (
        <button
          onClick={handleStartTrial}
          disabled={isStartingTrial}
          className="w-full px-4 py-2 text-left text-blue-400 hover:bg-blue-500/10 transition-colors duration-200 flex items-center space-x-3 disabled:opacity-50 disabled:cursor-not-allowed"
        >
          <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 10V3L4 14h7v7l9-11h-7z" />
          </svg>
          <span>{isStartingTrial ? 'Starting...' : 'Start 14-Day Pro Trial'}</span>
        </button>
      )}

      {/* Divider before logout */}
      <div className="border-t border-surface-light/20 my-1" />

      {/* Logout Option */}
      <button
        onClick={() => {
          onLogout();
          onClose();
        }}
        className="w-full px-4 py-2 text-left text-red-400 hover:bg-red-500/10 transition-colors duration-200 flex items-center space-x-3"
      >
        <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
        </svg>
        <span>Logout</span>
      </button>
    </div>
  );
};

export default SettingsContextMenu;



```n

## src\components\ui\Skeletons.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\ui\Skeletons.tsx.Extension.TrimStart('.'))

import React from 'react';

/**
 * Loading Skeleton Components
 * Replace spinners with content-aware skeletons for better perceived performance
 */

// ===========================================
// Base Skeleton Component
// ===========================================

interface SkeletonProps {
  className?: string;
  variant?: 'text' | 'circular' | 'rectangular';
  animation?: 'pulse' | 'wave' | 'none';
}

export const Skeleton: React.FC<SkeletonProps> = ({ 
  className = '', 
  variant = 'text',
  animation = 'pulse'
}) => {
  const baseClasses = 'bg-surface-light';
  const variantClasses = {
    text: 'h-4 rounded',
    circular: 'rounded-full',
    rectangular: 'rounded-lg'
  };
  const animationClasses = {
    pulse: 'animate-pulse',
    wave: 'animate-shimmer bg-gradient-to-r from-surface-light via-surface to-surface-light bg-[length:200%_100%]',
    none: ''
  };

  return (
    <div 
      className={`
        ${baseClasses} 
        ${variantClasses[variant]} 
        ${animationClasses[animation]}
        ${className}
      `}
      aria-label="Loading..."
    />
  );
};

// ===========================================
// Chat Message Skeleton
// ===========================================

export const ChatMessageSkeleton: React.FC = () => {
  return (
    <div className="flex gap-3 p-4">
      {/* Avatar */}
      <Skeleton variant="circular" className="w-8 h-8 flex-shrink-0" />
      
      {/* Message content */}
      <div className="flex-1 space-y-2">
        {/* Name */}
        <Skeleton className="h-3 w-20" />
        
        {/* Message lines */}
        <Skeleton className="h-4 w-full" />
        <Skeleton className="h-4 w-5/6" />
        <Skeleton className="h-4 w-4/6" />
      </div>
    </div>
  );
};

// ===========================================
// Chat Interface Skeleton
// ===========================================

export const ChatInterfaceSkeleton: React.FC = () => {
  return (
    <div className="flex flex-col h-full">
      {/* Header */}
      <div className="border-b border-surface-light p-4">
        <div className="flex items-center justify-between">
          <Skeleton className="h-6 w-32" />
          <Skeleton variant="circular" className="w-8 h-8" />
        </div>
      </div>

      {/* Messages */}
      <div className="flex-1 overflow-hidden p-4 space-y-4">
        <ChatMessageSkeleton />
        <ChatMessageSkeleton />
        <ChatMessageSkeleton />
      </div>

      {/* Input area */}
      <div className="border-t border-surface-light p-4">
        <Skeleton className="h-12 w-full rounded-full" />
      </div>
    </div>
  );
};

// ===========================================
// Conversation List Skeleton
// ===========================================

export const ConversationItemSkeleton: React.FC = () => {
  return (
    <div className="p-3 space-y-2">
      <div className="flex items-center gap-3">
        <Skeleton variant="circular" className="w-10 h-10" />
        <div className="flex-1 space-y-2">
          <Skeleton className="h-4 w-3/4" />
          <Skeleton className="h-3 w-1/2" />
        </div>
      </div>
    </div>
  );
};

export const ConversationListSkeleton: React.FC<{ count?: number }> = ({ count = 5 }) => {
  return (
    <div className="space-y-2">
      {Array.from({ length: count }).map((_, i) => (
        <ConversationItemSkeleton key={i} />
      ))}
    </div>
  );
};

// ===========================================
// Settings Modal Skeleton
// ===========================================

export const SettingsSkeleton: React.FC = () => {
  return (
    <div className="space-y-6 p-6">
      {/* Section 1 */}
      <div className="space-y-3">
        <Skeleton className="h-5 w-24" />
        <Skeleton variant="rectangular" className="h-10 w-full" />
        <Skeleton variant="rectangular" className="h-10 w-full" />
      </div>

      {/* Section 2 */}
      <div className="space-y-3">
        <Skeleton className="h-5 w-32" />
        <Skeleton variant="rectangular" className="h-20 w-full" />
      </div>

      {/* Section 3 */}
      <div className="space-y-3">
        <Skeleton className="h-5 w-28" />
        <div className="flex gap-3">
          <Skeleton variant="rectangular" className="h-10 flex-1" />
          <Skeleton variant="rectangular" className="h-10 flex-1" />
        </div>
      </div>
    </div>
  );
};

// ===========================================
// Game Hub Skeleton
// ===========================================

export const GameCardSkeleton: React.FC = () => {
  return (
    <div className="border border-surface-light rounded-lg p-4 space-y-3">
      {/* Game image */}
      <Skeleton variant="rectangular" className="h-40 w-full" />
      
      {/* Game title */}
      <Skeleton className="h-5 w-3/4" />
      
      {/* Game description */}
      <Skeleton className="h-3 w-full" />
      <Skeleton className="h-3 w-5/6" />
      
      {/* Action button */}
      <Skeleton variant="rectangular" className="h-9 w-full" />
    </div>
  );
};

export const GameHubSkeleton: React.FC = () => {
  return (
    <div className="p-6 space-y-6">
      {/* Header */}
      <div className="space-y-2">
        <Skeleton className="h-8 w-48" />
        <Skeleton className="h-4 w-64" />
      </div>

      {/* Game grid */}
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        <GameCardSkeleton />
        <GameCardSkeleton />
        <GameCardSkeleton />
        <GameCardSkeleton />
        <GameCardSkeleton />
        <GameCardSkeleton />
      </div>
    </div>
  );
};

// ===========================================
// Profile Skeleton
// ===========================================

export const ProfileSkeleton: React.FC = () => {
  return (
    <div className="p-6 space-y-6">
      {/* Avatar and name */}
      <div className="flex items-center gap-4">
        <Skeleton variant="circular" className="w-20 h-20" />
        <div className="flex-1 space-y-2">
          <Skeleton className="h-6 w-32" />
          <Skeleton className="h-4 w-48" />
        </div>
      </div>

      {/* Stats */}
      <div className="grid grid-cols-3 gap-4">
        <div className="text-center space-y-2">
          <Skeleton className="h-8 w-16 mx-auto" />
          <Skeleton className="h-3 w-20 mx-auto" />
        </div>
        <div className="text-center space-y-2">
          <Skeleton className="h-8 w-16 mx-auto" />
          <Skeleton className="h-3 w-20 mx-auto" />
        </div>
        <div className="text-center space-y-2">
          <Skeleton className="h-8 w-16 mx-auto" />
          <Skeleton className="h-3 w-20 mx-auto" />
        </div>
      </div>

      {/* Bio */}
      <div className="space-y-2">
        <Skeleton className="h-4 w-full" />
        <Skeleton className="h-4 w-5/6" />
        <Skeleton className="h-4 w-4/6" />
      </div>
    </div>
  );
};

// ===========================================
// Generic List Skeleton
// ===========================================

export const ListItemSkeleton: React.FC = () => {
  return (
    <div className="flex items-center gap-3 p-3">
      <Skeleton variant="circular" className="w-10 h-10" />
      <div className="flex-1 space-y-2">
        <Skeleton className="h-4 w-3/4" />
        <Skeleton className="h-3 w-1/2" />
      </div>
      <Skeleton variant="circular" className="w-6 h-6" />
    </div>
  );
};

export const ListSkeleton: React.FC<{ count?: number }> = ({ count = 5 }) => {
  return (
    <div className="divide-y divide-surface-light">
      {Array.from({ length: count }).map((_, i) => (
        <ListItemSkeleton key={i} />
      ))}
    </div>
  );
};

// ===========================================
// Full Page Loading Skeleton
// ===========================================

export const PageSkeleton: React.FC = () => {
  return (
    <div className="min-h-screen p-6 space-y-6">
      {/* Header */}
      <div className="space-y-2">
        <Skeleton className="h-10 w-64" />
        <Skeleton className="h-5 w-96" />
      </div>

      {/* Content */}
      <div className="space-y-4">
        <Skeleton variant="rectangular" className="h-48 w-full" />
        <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
          <Skeleton variant="rectangular" className="h-32 w-full" />
          <Skeleton variant="rectangular" className="h-32 w-full" />
        </div>
        <Skeleton variant="rectangular" className="h-64 w-full" />
      </div>
    </div>
  );
};

// ===========================================
// All skeletons exported individually above
// Import as: import { ChatMessageSkeleton, Skeleton, etc. } from './Skeletons'
// ===========================================


```n

## src\components\ui\StarIcon.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\ui\StarIcon.tsx.Extension.TrimStart('.'))

import React from 'react';

const StarIcon: React.FC<{ className?: string }> = ({ className }) => (
  <svg
    xmlns="http://www.w3.org/2000/svg"
    className={className}
    viewBox="0 0 24 24"
    fill="none"
    stroke="currentColor"
    strokeWidth="2"
    strokeLinecap="round"
    strokeLinejoin="round"
    aria-hidden="true"
  >
    <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" />
  </svg>
);

export default StarIcon;

```n

## src\components\ui\TextIcon.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\ui\TextIcon.tsx.Extension.TrimStart('.'))

import React from 'react';

const TextIcon: React.FC<{ className?: string }> = ({ className }) => (
  <svg
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 24 24"
    fill="none"
    stroke="currentColor"
    strokeWidth="2"
    strokeLinecap="round"
    strokeLinejoin="round"
    className={className}
    aria-hidden="true"
  >
    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" />
  </svg>
);

export default TextIcon;


```n

## src\components\ui\ToastContainer.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\ui\ToastContainer.tsx.Extension.TrimStart('.'))

import React, { useEffect, useState } from 'react';
import { Toast, toastService } from '../../services/toastService';
import { 
  CheckCircleIcon,
  XCircleIcon,
  ExclamationTriangleIcon,
  InformationCircleIcon,
  XMarkIcon
} from '@heroicons/react/24/solid';

const ToastIcon: React.FC<{ type: Toast['type'] }> = ({ type }) => {
  const className = "w-5 h-5 flex-shrink-0";
  
  switch (type) {
    case 'success':
      return <CheckCircleIcon className={`${className} text-green-500`} />;
    case 'error':
      return <XCircleIcon className={`${className} text-red-500`} />;
    case 'warning':
      return <ExclamationTriangleIcon className={`${className} text-yellow-500`} />;
    case 'info':
      return <InformationCircleIcon className={`${className} text-blue-500`} />;
  }
};

const ToastItem: React.FC<{ toast: Toast }> = ({ toast }) => {
  const getBackgroundColor = () => {
    switch (toast.type) {
      case 'success':
        return 'bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800';
      case 'error':
        return 'bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800';
      case 'warning':
        return 'bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800';
      case 'info':
        return 'bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800';
    }
  };

  const getTextColor = () => {
    switch (toast.type) {
      case 'success':
        return 'text-green-900 dark:text-green-100';
      case 'error':
        return 'text-red-900 dark:text-red-100';
      case 'warning':
        return 'text-yellow-900 dark:text-yellow-100';
      case 'info':
        return 'text-blue-900 dark:text-blue-100';
    }
  };

  return (
    <div
      className={`
        ${getBackgroundColor()}
        ${getTextColor()}
        p-4 rounded-lg shadow-lg border
        max-w-md w-full
        pointer-events-auto
        animate-slide-in
      `}
    >
      <div className="flex items-start gap-3">
        <ToastIcon type={toast.type} />
        
        <div className="flex-1 min-w-0">
          <p className="text-sm font-medium break-words">
            {toast.message}
          </p>
          
          {toast.action && (
            <button
              onClick={async () => {
                await toast.action?.onClick();
                toastService.dismiss(toast.id);
              }}
              className="
                text-xs mt-2 font-semibold underline
                hover:no-underline
                transition-all
                focus:outline-none focus:ring-2 focus:ring-offset-2
              "
            >
              {toast.action.label}
            </button>
          )}
        </div>

        {toast.dismissible && (
          <button
            onClick={() => toastService.dismiss(toast.id)}
            className="
              flex-shrink-0
              text-current opacity-50 hover:opacity-100
              transition-opacity
              focus:outline-none focus:ring-2 focus:ring-offset-2
              rounded
              p-1
            "
            aria-label="Dismiss"
          >
            <XMarkIcon className="w-4 h-4" />
          </button>
        )}
      </div>
    </div>
  );
};

export const ToastContainer: React.FC = () => {
  const [toasts, setToasts] = useState<Toast[]>([]);

  useEffect(() => {
    const unsubscribe = toastService.subscribe(setToasts);
    return unsubscribe;
  }, []);

  return (
    <div 
      className="
        fixed bottom-4 right-4 z-50
        flex flex-col gap-2
        pointer-events-none
        max-h-screen overflow-hidden
      "
      aria-live="polite"
      aria-atomic="true"
    >
      {toasts.map(toast => (
        <ToastItem key={toast.id} toast={toast} />
      ))}
    </div>
  );
};


```n

## src\components\ui\TTSStatusIndicator.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\ui\TTSStatusIndicator.tsx.Extension.TrimStart('.'))

import React, { useState, useEffect } from 'react';

export interface TTSStatus {
  status: 'available' | 'unavailable' | 'error' | 'testing';
  message: string;
  lastError?: any;
}

export const TTSStatusIndicator: React.FC<{
  className?: string;
  showDetails?: boolean;
}> = ({ className = '', showDetails = false }) => {
  const [ttsStatus, setTtsStatus] = useState<TTSStatus>({
    status: 'testing',
    message: 'Checking TTS availability...'
  });

  useEffect(() => {
    checkTTSAvailability();
  }, []);

  const checkTTSAvailability = async () => {
    try {
      // Check if TTS is supported
      if (!('speechSynthesis' in window)) {
        setTtsStatus({
          status: 'unavailable',
          message: 'TTS not supported'
        });
        return;
      }

      // Test TTS with silent utterance
      const testUtterance = new SpeechSynthesisUtterance('');
      testUtterance.volume = 0; // Silent test
      testUtterance.rate = 0.1; // Very fast to minimize delay
      
      testUtterance.onerror = (e) => {
        setTtsStatus({
          status: 'error',
          message: 'TTS error detected',
          lastError: e
        });
      };
      
      testUtterance.onend = () => {
        setTtsStatus({
          status: 'available',
          message: 'TTS ready'
        });
      };
      
      // Set a timeout in case the test doesn't complete
      setTimeout(() => {
        if (ttsStatus.status === 'testing') {
          setTtsStatus({
            status: 'available',
            message: 'TTS ready'
          });
        }
      }, 2000);
      
      speechSynthesis.speak(testUtterance);
    } catch (error) {
      setTtsStatus({
        status: 'error',
        message: 'TTS test failed',
        lastError: error
      });
    }
  };

  const getStatusIcon = () => {
    switch (ttsStatus.status) {
      case 'available':
        return 'ðŸ”Š';
      case 'unavailable':
        return 'ðŸ”‡';
      case 'error':
        return 'âš ï¸';
      case 'testing':
        return 'ðŸ”„';
      default:
        return 'â“';
    }
  };

  const getStatusColor = () => {
    switch (ttsStatus.status) {
      case 'available':
        return 'text-green-600';
      case 'unavailable':
        return 'text-gray-500';
      case 'error':
        return 'text-red-600';
      case 'testing':
        return 'text-blue-600';
      default:
        return 'text-gray-500';
    }
  };

  const handleRetry = () => {
    setTtsStatus({
      status: 'testing',
      message: 'Rechecking TTS availability...'
    });
    checkTTSAvailability();
  };

  return (
    <div className={`tts-status-indicator ${className}`}>
      <div className={`flex items-center space-x-2 ${getStatusColor()}`}>
        <span className="text-sm">{getStatusIcon()}</span>
        <span className="text-sm font-medium">{ttsStatus.message}</span>
        
        {ttsStatus.status === 'error' && (
          <button
            onClick={handleRetry}
            className="text-xs px-2 py-1 bg-red-100 text-red-700 rounded hover:bg-red-200 transition-colors"
          >
            Retry
          </button>
        )}
      </div>
      
      {showDetails && ttsStatus.lastError && (
        <div className="mt-2 p-2 bg-gray-100 rounded text-xs text-gray-600">
          <details>
            <summary className="cursor-pointer font-medium">Error Details</summary>
            <pre className="mt-1 whitespace-pre-wrap">
              {JSON.stringify(ttsStatus.lastError, null, 2)}
            </pre>
          </details>
        </div>
      )}
    </div>
  );
};

export default TTSStatusIndicator;



```n

## src\components\ui\TypingIndicator.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\ui\TypingIndicator.tsx.Extension.TrimStart('.'))

import React from 'react';

interface TypingIndicatorProps {
  variant?: 'dots' | 'skeleton' | 'wave' | 'circular';
  showText?: boolean;
  className?: string;
}

const TypingIndicator: React.FC<TypingIndicatorProps> = ({ 
  variant = 'dots', 
  showText = true, 
  className = '' 
}) => {
  // Dots animation (default)
  if (variant === 'dots') {
    return (
      <div className={`flex items-center gap-2 py-2 px-3 ${className}`}>
        <div className="flex items-center space-x-1">
          <div className="w-2 h-2 bg-[#FF4D4D] rounded-full animate-bounce" style={{ animationDelay: '0ms' }}></div>
          <div className="w-2 h-2 bg-[#FFAB40] rounded-full animate-bounce" style={{ animationDelay: '150ms' }}></div>
          <div className="w-2 h-2 bg-[#5CBB7B] rounded-full animate-bounce" style={{ animationDelay: '300ms' }}></div>
        </div>
        {showText && <span className="text-sm text-[#A3A3A3] font-medium">AI is thinking...</span>}
      </div>
    );
  }

  // Skeleton animation
  if (variant === 'skeleton') {
    return (
      <div className={`flex flex-col gap-3 py-3 px-4 ${className}`}>
        <div className="flex items-center gap-2">
          <div className="w-8 h-8 bg-gradient-to-r from-[#FF4D4D] to-[#FFAB40] rounded-full animate-pulse"></div>
          <div className="flex-1 space-y-2">
            <div className="h-3 bg-gradient-to-r from-[#FF4D4D]/20 to-[#FFAB40]/20 rounded animate-pulse" style={{ width: '60%' }}></div>
            <div className="h-3 bg-gradient-to-r from-[#FFAB40]/20 to-[#5CBB7B]/20 rounded animate-pulse" style={{ width: '80%' }}></div>
          </div>
        </div>
        <div className="space-y-2">
          <div className="h-4 bg-gradient-to-r from-[#5CBB7B]/20 to-[#FF4D4D]/20 rounded animate-pulse"></div>
          <div className="h-4 bg-gradient-to-r from-[#FF4D4D]/20 to-[#FFAB40]/20 rounded animate-pulse" style={{ width: '70%' }}></div>
          <div className="h-4 bg-gradient-to-r from-[#FFAB40]/20 to-[#5CBB7B]/20 rounded animate-pulse" style={{ width: '90%' }}></div>
        </div>
        {showText && <span className="text-sm text-[#A3A3A3] font-medium">AI is thinking...</span>}
      </div>
    );
  }

  // Wave animation
  if (variant === 'wave') {
    return (
      <div className={`flex items-center gap-3 py-3 px-4 ${className}`}>
        <div className="flex items-center space-x-1">
          <div className="w-1 h-4 bg-[#FF4D4D] rounded-full animate-pulse" style={{ animationDelay: '0ms' }}></div>
          <div className="w-1 h-4 bg-[#FFAB40] rounded-full animate-pulse" style={{ animationDelay: '150ms' }}></div>
          <div className="w-1 h-4 bg-[#5CBB7B] rounded-full animate-pulse" style={{ animationDelay: '300ms' }}></div>
          <div className="w-1 h-4 bg-[#FF4D4D] rounded-full animate-pulse" style={{ animationDelay: '450ms' }}></div>
        </div>
        {showText && <span className="text-sm text-[#A3A3A3] font-medium">AI is thinking...</span>}
      </div>
    );
  }

  // Circular progress
  if (variant === 'circular') {
    return (
      <div className={`flex items-center gap-3 py-3 px-4 ${className}`}>
        <div className="relative w-8 h-8">
          {/* Outer ring */}
          <div className="absolute inset-0 w-8 h-8 border-2 border-[#424242]/30 rounded-full"></div>
          {/* Animated ring */}
          <div className="absolute inset-0 w-8 h-8 border-2 border-transparent border-t-[#E53A3A] border-r-[#D98C1F] border-b-transparent rounded-full animate-spin"></div>
          {/* Center dot */}
          <div className="absolute inset-0 flex items-center justify-center">
            <div className="w-2 h-2 bg-gradient-to-r from-[#FF4D4D] to-[#FFAB40] rounded-full animate-pulse"></div>
          </div>
        </div>
        {showText && <span className="text-sm text-[#A3A3A3] font-medium">AI is thinking...</span>}
      </div>
    );
  }

  return null;
};

export default TypingIndicator;


```n

## src\components\ui\UserAvatar.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\ui\UserAvatar.tsx.Extension.TrimStart('.'))

import React from 'react';

interface UserAvatarProps {
  className?: string;
}

const UserAvatar: React.FC<UserAvatarProps> = ({ className }) => (
  <svg
    className={className}
    viewBox="0 0 24 24"
    xmlns="http://www.w3.org/2000/svg"
    aria-label="User Avatar"
  >
    <defs>
      <linearGradient id="avatar-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" stopColor="#FF4D4D" />
        <stop offset="100%" stopColor="#FFAB40" />
      </linearGradient>
    </defs>
    <circle cx="12" cy="12" r="12" fill="url(#avatar-gradient)" />
  </svg>
);

export default UserAvatar;


```n

## src\components\welcome\WelcomeScreen.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\welcome\WelcomeScreen.tsx.Extension.TrimStart('.'))

import React, { useState } from 'react';

interface WelcomeScreenProps {
  onStartChat: () => void;
  onAddGame?: () => void;
}

type TabType = 'overview' | 'features' | 'hotkeys' | 'best-practices';

const WelcomeScreen: React.FC<WelcomeScreenProps> = ({ onStartChat, onAddGame: _onAddGame }) => {
  const [activeTab, setActiveTab] = useState<TabType>('overview');

  const tabs = [
    { id: 'overview' as TabType, label: 'Overview' },
    { id: 'features' as TabType, label: 'Features' },
    { id: 'hotkeys' as TabType, label: 'PC Hotkeys' },
    { id: 'best-practices' as TabType, label: 'Best Practices' }
  ];

  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4">
      {/* Modal Container */}
      <div className="relative w-full max-w-5xl max-h-[90vh] bg-background rounded-2xl shadow-2xl border border-transparent bg-clip-padding flex flex-col overflow-hidden" style={{ backgroundImage: 'linear-gradient(#1a1a1a, #1a1a1a), linear-gradient(135deg, #FF4D4D, #FFAB40)', backgroundOrigin: 'border-box', backgroundClip: 'padding-box, border-box' }}>
        {/* Close Button */}
        <button
          onClick={onStartChat}
          className="absolute top-4 right-4 z-10 p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-colors"
          aria-label="Close guide"
        >
          <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>

        {/* Tabs */}
        <div className="flex-shrink-0 border-b border-gray-700 px-3 sm:px-6 pt-6">
          <div className="flex justify-center gap-2 sm:gap-3 overflow-x-auto pr-12">
            {tabs.map((tab) => (
              <button
                key={tab.id}
                onClick={() => setActiveTab(tab.id)}
                className={`flex items-center justify-center px-4 sm:px-6 py-3 min-h-[48px] text-xs sm:text-sm font-medium whitespace-nowrap transition-all duration-200 border-b-2 flex-shrink-0 ${
                  activeTab === tab.id
                    ? 'border-[#FF4D4D] text-white bg-gradient-to-b from-[#FF4D4D]/10 to-transparent'
                    : 'border-transparent text-gray-400 hover:text-white hover:bg-gray-700/50'
                }`}
              >
                <span>{tab.label}</span>
              </button>
            ))}
          </div>
        </div>

        {/* Content Area - Scrollable */}
        <div className="flex-1 overflow-y-auto px-6 py-6 custom-scrollbar">
          <div className="max-w-4xl mx-auto">
            {activeTab === 'overview' && <OverviewTab />}
            {activeTab === 'features' && <FeaturesTab />}
            {activeTab === 'hotkeys' && <HotkeysTab />}
            {activeTab === 'best-practices' && <BestPracticesTab />}
          </div>
        </div>

        {/* CTA Buttons - Fixed at bottom */}
        <div className="flex-shrink-0 py-3 sm:py-4 px-3 sm:px-6 border-t border-gray-700 bg-background">
          <div className="flex flex-col sm:flex-row gap-2 sm:gap-3 items-stretch sm:items-center justify-center">
            {/* Close Guide Button */}
            <button
              onClick={onStartChat}
              className="inline-flex items-center gap-2 px-6 sm:px-8 py-2.5 sm:py-3 text-xs sm:text-sm font-bold text-white bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] hover:from-[#D42A2A] hover:to-[#C87A1A] rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 active:scale-95"
            >
              <span>Start Chatting</span>
              <svg 
                className="w-5 h-5 flex-shrink-0" 
                fill="none" 
                stroke="currentColor" 
                viewBox="0 0 24 24"
              >
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 7l5 5m0 0l-5 5m5-5H6" />
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>
  );
};

// Overview Tab Component
const OverviewTab = () => (
  <div className="space-y-6">
    <div className="bg-gradient-to-br from-[#1C1C1C] to-[#0A0A0A] border border-[#FF4D4D]/30 rounded-xl p-6 shadow-xl">
      <h2 className="text-xl sm:text-2xl font-bold text-text-primary mb-4 flex items-center">
        <span className="mr-3">ðŸŽ¯</span>
        What is Otagon?
      </h2>
      <p className="text-sm sm:text-base text-text-muted leading-relaxed mb-4">
        Otagon is your intelligent gaming companion powered by AI. It helps you overcome challenges, 
        discover secrets, and master any game without spoiling the experience. Whether you're stuck 
        on a boss, need strategic advice, or want to understand game mechanics, Otagon has your back.
      </p>
      <div className="grid grid-cols-1 sm:grid-cols-2 gap-4 mt-6">
        <div className="bg-gradient-to-br from-blue-500/10 to-blue-600/10 border border-blue-500/30 rounded-lg p-4">
          <div className="text-3xl mb-2">ðŸ“¸</div>
          <h3 className="font-semibold text-text-primary mb-2">Screenshot Analysis</h3>
          <p className="text-sm text-text-muted">Upload any game screenshot for instant insights</p>
        </div>
        <div className="bg-gradient-to-br from-purple-500/10 to-purple-600/10 border border-purple-500/30 rounded-lg p-4">
          <div className="text-3xl mb-2">ðŸŽ®</div>
          <h3 className="font-semibold text-text-primary mb-2">Game-Specific Tabs</h3>
          <p className="text-sm text-text-muted">Auto-organized tabs for each game you play</p>
        </div>
        <div className="bg-gradient-to-br from-green-500/10 to-green-600/10 border border-green-500/30 rounded-lg p-4">
          <div className="text-3xl mb-2">ðŸ“š</div>
          <h3 className="font-semibold text-text-primary mb-2">Smart Insights</h3>
          <p className="text-sm text-text-muted">Story, tips, builds auto-generated for you</p>
        </div>
        <div className="bg-gradient-to-br from-orange-500/10 to-orange-600/10 border border-orange-500/30 rounded-lg p-4">
          <div className="text-3xl mb-2">âš¡</div>
          <h3 className="font-semibold text-text-primary mb-2">Dual Modes</h3>
          <p className="text-sm text-text-muted">Playing vs Planning for different needs</p>
        </div>
      </div>
    </div>

    <div className="bg-surface/50 border border-surface-light/30 rounded-xl p-6">
      <h2 className="text-lg sm:text-xl font-bold text-text-primary mb-4 flex items-center">
        <span className="mr-3">ðŸš€</span>
        Quick Start Guide
      </h2>
      <ol className="space-y-4">
        <li className="flex items-start">
          <span className="flex-shrink-0 w-8 h-8 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] rounded-full flex items-center justify-center text-white font-bold text-sm mr-3">1</span>
          <div className="flex-1">
            <h3 className="font-semibold text-text-primary mb-1">Start in Game Hub</h3>
            <p className="text-sm text-text-muted">Ask general gaming questions or upload screenshots</p>
          </div>
        </li>
        <li className="flex items-start">
          <span className="flex-shrink-0 w-8 h-8 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] rounded-full flex items-center justify-center text-white font-bold text-sm mr-3">2</span>
          <div className="flex-1">
            <h3 className="font-semibold text-text-primary mb-1">Create Game Tabs</h3>
            <p className="text-sm text-text-muted">Mention a game or upload its screenshot to create a dedicated tab</p>
          </div>
        </li>
        <li className="flex items-start">
          <span className="flex-shrink-0 w-8 h-8 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] rounded-full flex items-center justify-center text-white font-bold text-sm mr-3">3</span>
          <div className="flex-1">
            <h3 className="font-semibold text-text-primary mb-1">Explore Insight Tabs</h3>
            <p className="text-sm text-text-muted">AI auto-generates Story, Tips, Builds tabs as you ask questions</p>
          </div>
        </li>
        <li className="flex items-start">
          <span className="flex-shrink-0 w-8 h-8 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] rounded-full flex items-center justify-center text-white font-bold text-sm mr-3">4</span>
          <div className="flex-1">
            <h3 className="font-semibold text-text-primary mb-1">Toggle Modes</h3>
            <p className="text-sm text-text-muted">Switch between Playing (active help) and Planning (strategy)</p>
          </div>
        </li>
      </ol>
    </div>
  </div>
);

// Features Tab Component
const FeaturesTab = () => {
  const features = [
    {
      icon: 'ðŸ“¸',
      title: 'Screenshot Analysis',
      description: 'Upload any game screenshot and get instant tactical advice, lore explanations, and hidden secrets.',
      tips: [
        'Works with any game - from AAA titles to indie gems',
        'AI analyzes HUD elements, enemy types, inventory, and environment',
        'Get tactical positioning advice and item recommendations'
      ]
    },
    {
      icon: 'ðŸŽ®',
      title: 'Game-Specific Tabs',
      description: 'Otagon automatically creates dedicated tabs for each game you mention or screenshot.',
      tips: [
        'Each game gets its own organized conversation space',
        'Tabs persist across sessions - your knowledge builds over time',
        'Easily switch between multiple games you\'re playing'
      ]
    },
    {
      icon: 'ðŸ“š',
      title: 'Smart Insight Tabs',
      description: 'AI automatically generates and updates specialized tabs for story, tips, builds, and more.',
      tips: [
        'Story tab: Spoiler-free lore and character backgrounds',
        'Tips tab: Combat strategies, secrets, and optimizations',
        'Builds tab: Character builds, skill trees, and equipment loadouts'
      ]
    },
    {
      icon: 'âš¡',
      title: 'Playing vs Planning Mode',
      description: 'Toggle between active gameplay help and strategic planning modes.',
      tips: [
        'Playing Mode: Real-time tactical advice during active gameplay',
        'Planning Mode: Strategic planning, builds, and long-term goals',
        'AI adapts its responses based on your current mode'
      ]
    },
    {
      icon: 'ðŸ”—',
      title: 'PC Connection',
      description: 'Connect your PC client to send screenshots with a single hotkey press.',
      tips: [
        'No alt-tabbing required - stay in your game',
        'Instant screenshot capture with F1 or F2',
        'Automatic image upload and AI analysis'
      ]
    },
    {
      icon: 'ðŸŽ¤',
      title: 'Hands-Free Mode',
      description: 'Have AI responses read aloud while you focus on the game.',
      tips: [
        'Perfect for action games where you can\'t look away',
        'Natural voice synthesis for comfortable listening',
        'Toggle on/off anytime from the header'
      ]
    },
    {
      icon: 'ðŸ’¬',
      title: 'Command Centre',
      description: 'Use @ commands to manage insight tabs with natural language.',
      tips: [
        'Add new tabs: "add tab Boss Strategies"',
        'Update existing: "update @Tips with this strategy"',
        'Delete tabs: "delete @Builds tab"'
      ]
    },
    {
      icon: 'ðŸŽ¯',
      title: 'Context-Aware AI',
      description: 'AI remembers your conversation history and game progress.',
      tips: [
        'Follows up on previous questions naturally',
        'Tracks your game progress across sessions',
        'Provides personalized recommendations based on your playstyle'
      ]
    }
  ];

  return (
    <div className="grid grid-cols-1 gap-6">
      {features.map((feature, index) => (
        <div
          key={index}
          className="bg-gradient-to-br from-[#1C1C1C] to-[#0A0A0A] border border-surface-light/30 rounded-xl p-5 sm:p-6 hover:border-[#FF4D4D]/50 transition-all duration-300"
        >
          <div className="flex items-start space-x-4">
            <div className="text-3xl sm:text-4xl flex-shrink-0">{feature.icon}</div>
            <div className="flex-1 min-w-0">
              <h3 className="text-lg sm:text-xl font-bold text-text-primary mb-2">{feature.title}</h3>
              <p className="text-sm sm:text-base text-text-muted mb-4 leading-relaxed">{feature.description}</p>
              <div className="space-y-2">
                {feature.tips.map((tip, tipIndex) => (
                  <div key={tipIndex} className="flex items-start text-xs sm:text-sm">
                    <span className="text-[#FF4D4D] mr-2 mt-0.5 flex-shrink-0">â–¸</span>
                    <span className="text-text-secondary">{tip}</span>
                  </div>
                ))}
              </div>
            </div>
          </div>
        </div>
      ))}
    </div>
  );
};

// Hotkeys Tab Component
const HotkeysTab = () => (
  <div className="space-y-6">
    <div className="bg-gradient-to-r from-[#FF4D4D]/10 to-[#FFAB40]/10 border-2 border-[#FF4D4D]/30 rounded-xl p-6 shadow-xl">
      <div className="flex items-start space-x-4 mb-6">
        <div className="text-4xl">ðŸ–¥ï¸</div>
        <div className="flex-1">
          <h2 className="text-xl sm:text-2xl font-bold text-text-primary mb-2">Download PC Client</h2>
          <p className="text-sm sm:text-base text-text-muted mb-4">
            Get the Otagon PC client to enable hotkey screenshot capture. Stay in your game and send screenshots instantly!
          </p>
          <a
            href="https://github.com/readmet3xt/otakon-pc-client/releases/tag/v1.0.0"
            target="_blank"
            rel="noopener noreferrer"
            className="inline-flex items-center px-6 py-3 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] hover:from-[#D42A2A] hover:to-[#C87A1A] text-white font-bold rounded-lg transition-all duration-300 hover:scale-105 active:scale-95 shadow-lg text-sm sm:text-base"
          >
            <svg className="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
              <path fillRule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clipRule="evenodd" />
            </svg>
            Download PC Client
          </a>
        </div>
      </div>
    </div>

    <div className="bg-gradient-to-br from-[#1C1C1C] to-[#0A0A0A] border border-surface-light/30 rounded-xl p-6">
      <h2 className="text-xl sm:text-2xl font-bold text-text-primary mb-6 flex items-center">
        <span className="mr-3">âŒ¨ï¸</span>
        Default Hotkeys
      </h2>
      
      <div className="space-y-4">
        <div className="flex items-center justify-between p-4 bg-surface/30 rounded-lg border border-surface-light/20">
          <div className="flex-1">
            <h3 className="font-semibold text-text-primary mb-1">Single Screenshot</h3>
            <p className="text-sm text-text-muted">Capture current game screen</p>
          </div>
          <kbd className="px-4 py-2 font-mono font-bold text-white bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] rounded-lg shadow-lg text-lg">F1</kbd>
        </div>

        <div className="flex items-center justify-between p-4 bg-surface/30 rounded-lg border border-surface-light/20">
          <div className="flex-1">
            <h3 className="font-semibold text-text-primary mb-1">Batch Screenshot (PRO)</h3>
            <p className="text-sm text-text-muted">Capture last 5 minutes of gameplay</p>
          </div>
          <kbd className="px-4 py-2 font-mono font-bold text-white bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] rounded-lg shadow-lg text-lg">F2</kbd>
        </div>
      </div>
    </div>

    <div className="bg-surface/50 border border-surface-light/30 rounded-xl p-6">
      <h2 className="text-lg sm:text-xl font-bold text-text-primary mb-4 flex items-center">
        <span className="mr-3">ðŸ”§</span>
        Setup Instructions
      </h2>
      <ol className="space-y-4">
        <li className="flex items-start">
          <span className="flex-shrink-0 w-8 h-8 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] rounded-full flex items-center justify-center text-white font-bold text-sm mr-3">1</span>
          <div className="flex-1">
            <h3 className="font-semibold text-text-primary mb-1">Download & Install</h3>
            <p className="text-sm text-text-muted">Download the PC client from the link above and run the installer</p>
          </div>
        </li>
        <li className="flex items-start">
          <span className="flex-shrink-0 w-8 h-8 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] rounded-full flex items-center justify-center text-white font-bold text-sm mr-3">2</span>
          <div className="flex-1">
            <h3 className="font-semibold text-text-primary mb-1">Connect to Otagon</h3>
            <p className="text-sm text-text-muted">Click the connection icon in Otagon and enter the 6-digit code from the PC client</p>
          </div>
        </li>
        <li className="flex items-start">
          <span className="flex-shrink-0 w-8 h-8 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] rounded-full flex items-center justify-center text-white font-bold text-sm mr-3">3</span>
          <div className="flex-1">
            <h3 className="font-semibold text-text-primary mb-1">Start Gaming</h3>
            <p className="text-sm text-text-muted">Launch your game and press F1 or F2 to capture screenshots</p>
          </div>
        </li>
        <li className="flex items-start">
          <span className="flex-shrink-0 w-8 h-8 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] rounded-full flex items-center justify-center text-white font-bold text-sm mr-3">4</span>
          <div className="flex-1">
            <h3 className="font-semibold text-text-primary mb-1">Customize (Optional)</h3>
            <p className="text-sm text-text-muted">Configure custom hotkeys in the PC client settings</p>
          </div>
        </li>
      </ol>
    </div>

    <div className="bg-blue-500/10 border border-blue-500/30 rounded-xl p-5">
      <div className="flex items-start space-x-3">
        <div className="text-2xl">ðŸ’¡</div>
        <div className="flex-1">
          <h3 className="font-semibold text-text-primary mb-2">Pro Tip</h3>
          <p className="text-sm text-text-muted leading-relaxed">
            Toggle between manual and auto-send mode using the pause/play button in Otagon. 
            Manual mode lets you review screenshots before sending, while auto mode sends them instantly for faster help.
          </p>
        </div>
      </div>
    </div>
  </div>
);

// Best Practices Tab Component
const BestPracticesTab = () => {
  const practices = [
    {
      category: 'ðŸ“¸ Screenshot Best Practices',
      tips: [
        {
          title: 'Capture Full Screen',
          description: 'Include the entire game screen with HUD visible for better context',
          example: 'âœ… Full arena view with health/mana bars visible'
        },
        {
          title: 'Focus on the Problem',
          description: 'Center the area you need help with in the screenshot',
          example: 'âœ… Boss in frame, puzzle clearly visible, skill tree fully shown'
        },
        {
          title: 'Include UI Elements',
          description: 'Don\'t crop out menus, inventories, or skill trees',
          example: 'âœ… Show entire inventory screen, full skill tree, complete map'
        },
        {
          title: 'Timing Matters',
          description: 'Capture at the right moment for best results',
          example: 'âœ… Before engaging boss, at decision points, when stuck'
        }
      ]
    },
    {
      category: 'ðŸ’¬ Asking Questions',
      tips: [
        {
          title: 'Be Specific',
          description: 'Clear questions get better answers',
          example: 'âœ… "How do I beat the second phase of Margit?" vs âŒ "Help with boss"'
        },
        {
          title: 'Provide Context',
          description: 'Mention your character level, gear, and what you\'ve tried',
          example: 'âœ… "I\'m level 25 with +3 sword, tried dodge rolling but still dying"'
        },
        {
          title: 'Ask Follow-ups',
          description: 'Otagon remembers conversation history',
          example: 'âœ… "What about for mage builds?" after asking about warrior strategies'
        },
        {
          title: 'Use Natural Language',
          description: 'Talk to Otagon like a gaming buddy',
          example: 'âœ… "I keep dying to this attack, any tips?"'
        }
      ]
    },
    {
      category: 'ðŸŽ® Tab Management',
      tips: [
        {
          title: 'One Game Per Tab',
          description: 'Create separate tabs for each game you play',
          example: 'âœ… "Elden Ring" tab, "Baldur\'s Gate 3" tab, etc.'
        },
        {
          title: 'Use @ Commands',
          description: 'Manage insight tabs with natural language',
          example: 'âœ… "add tab Boss Strategies", "update @Tips with this info"'
        },
        {
          title: 'Keep Game Hub Clean',
          description: 'Use Game Hub for general questions, create game tabs for specific games',
          example: 'âœ… Game Hub: "Best RPGs of 2024?" â†’ Game-specific tab: actual gameplay'
        },
        {
          title: 'Pin Important Tabs',
          description: 'Pin up to 3 frequently used tabs for quick access',
          example: 'âœ… Pin your current main game and frequently referenced guides'
        }
      ]
    },
    {
      category: 'âš¡ Mode Usage',
      tips: [
        {
          title: 'Playing Mode',
          description: 'Use during active gameplay for real-time tactical help',
          example: 'âœ… Boss fights, difficult platforming, combat encounters'
        },
        {
          title: 'Planning Mode',
          description: 'Use when planning builds, routes, or long-term strategy',
          example: 'âœ… Character builds, quest routing, gear optimization'
        },
        {
          title: 'Switch Freely',
          description: 'Toggle between modes based on your current needs',
          example: 'âœ… Playing during raid, Planning during downtime'
        },
        {
          title: 'Session Summaries',
          description: 'AI creates summaries when you switch modes',
          example: 'âœ… Captures key learnings from your playing session'
        }
      ]
    }
  ];

  return (
    <div className="space-y-6">
      {practices.map((section, sectionIndex) => (
        <div
          key={sectionIndex}
          className="bg-gradient-to-br from-[#1C1C1C] to-[#0A0A0A] border border-surface-light/30 rounded-xl p-5 sm:p-6"
        >
          <h2 className="text-lg sm:text-xl font-bold text-text-primary mb-6">{section.category}</h2>
          <div className="space-y-5">
            {section.tips.map((tip, tipIndex) => (
              <div key={tipIndex} className="bg-surface/30 border border-surface-light/20 rounded-lg p-4">
                <div className="flex items-start space-x-3 mb-2">
                  <span className="text-[#FF4D4D] text-xl font-bold mt-0.5">â–¸</span>
                  <div className="flex-1">
                    <h3 className="font-semibold text-text-primary mb-1">{tip.title}</h3>
                    <p className="text-sm text-text-muted mb-2">{tip.description}</p>
                    <div className="bg-surface/50 border border-surface-light/10 rounded px-3 py-2 mt-2">
                      <p className="text-xs text-text-secondary font-mono">{tip.example}</p>
                    </div>
                  </div>
                </div>
              </div>
            ))}
          </div>
        </div>
      ))}

      <div className="bg-gradient-to-r from-green-500/10 to-emerald-500/10 border border-green-500/30 rounded-xl p-5">
        <div className="flex items-start space-x-3">
          <div className="text-3xl">ðŸŽ¯</div>
          <div className="flex-1">
            <h3 className="font-semibold text-text-primary mb-2 text-lg">Remember</h3>
            <p className="text-sm text-text-muted leading-relaxed mb-3">
              Otagon learns your playstyle over time. The more you interact, the better it gets at providing 
              personalized advice. Don't be afraid to ask for clarification or alternative strategies!
            </p>
            <div className="flex flex-wrap gap-2 mt-4">
              <span className="px-3 py-1 bg-green-500/20 border border-green-500/40 rounded-full text-xs text-green-300">
                âœ“ Be specific
              </span>
              <span className="px-3 py-1 bg-green-500/20 border border-green-500/40 rounded-full text-xs text-green-300">
                âœ“ Provide context
              </span>
              <span className="px-3 py-1 bg-green-500/20 border border-green-500/40 rounded-full text-xs text-green-300">
                âœ“ Use screenshots
              </span>
              <span className="px-3 py-1 bg-green-500/20 border border-green-500/40 rounded-full text-xs text-green-300">
                âœ“ Ask follow-ups
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default WelcomeScreen;


```n

## src\components\AppRouter.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\AppRouter.tsx.Extension.TrimStart('.'))

import React from 'react';
import { AuthState, AppState, ActiveModal, ConnectionStatus } from '../types';
import LandingPage from './LandingPage';
import LoginSplashScreen from './splash/LoginSplashScreen';
import InitialSplashScreen from './splash/InitialSplashScreen';
import HowToUseSplashScreen from './splash/HowToUseSplashScreen';
import ProFeaturesSplashScreen from './splash/ProFeaturesSplashScreen';
import SplashScreen from './splash/SplashScreen';
import MainApp from './MainApp';
import AuthCallback from './auth/AuthCallback';
import AboutModal from './modals/AboutModal';
import PrivacyModal from './modals/PrivacyModal';
import TermsModal from './modals/TermsModal';
import RefundPolicyModal from './modals/RefundPolicyModal';
import ContactUsModal from './modals/ContactUsModal';
import SettingsModal from './modals/SettingsModal';
import { authService } from '../services/authService';
import { onboardingService } from '../services/onboardingService';

interface AppRouterProps {
  appState: AppState;
  authState: AuthState;
  activeModal: ActiveModal;
  settingsOpen: boolean;
  showLogoutConfirm: boolean;
  isInitializing: boolean;
  hasEverLoggedIn: boolean;
  connectionStatus: ConnectionStatus;
  connectionError: string | null;
  handleGetStarted: () => void;
  handleLoginComplete: () => void;
  handleBackToLanding: () => void;
  handleOAuthSuccess: () => void;
  handleOAuthError: (_error: string) => void;
  handleLogout: () => void;
  confirmLogout: () => void;
  openModal: (_modal: ActiveModal) => void;
  closeModal: () => void;
  handleOnboardingComplete: (_step: string) => void;
  handleConnect: (_code: string) => void;
  handleConnectionSuccess: () => void;
  handleDisconnect: () => void;
  handleSkipConnection: () => void;
  // eslint-disable-next-line @typescript-eslint/no-explicit-any
  handleProfileSetupComplete: (_profileData: any) => void;
  handleProfileSetupSkip: () => void;
  setSettingsOpen: (_isOpen: boolean) => void;
  setShowLogoutConfirm: (_isOpen: boolean) => void;
  // eslint-disable-next-line @typescript-eslint/no-explicit-any
  mainAppMessageHandlerRef: React.MutableRefObject<((_data: any) => void) | null>;
  isManualNavigationRef: React.MutableRefObject<boolean>;
}

const AppRouter: React.FC<AppRouterProps> = ({
  appState,
  authState,
  activeModal,
  settingsOpen,
  showLogoutConfirm,
  isInitializing,
  hasEverLoggedIn,
  connectionStatus,
  connectionError,
  handleGetStarted,
  handleLoginComplete,
  handleBackToLanding,
  handleOAuthSuccess,
  handleOAuthError,
  handleLogout,
  confirmLogout,
  openModal,
  closeModal,
  handleOnboardingComplete,
  handleConnect,
  handleConnectionSuccess,
  handleDisconnect,
  handleSkipConnection,
  handleProfileSetupComplete,
  handleProfileSetupSkip,
  setSettingsOpen,
  setShowLogoutConfirm,
  mainAppMessageHandlerRef,
  isManualNavigationRef,
}) => {
  if (window.location.pathname === '/auth/callback') {
    return (
      <AuthCallback
        onAuthSuccess={handleOAuthSuccess}
        onAuthError={handleOAuthError}
      />
    );
  }

  const shouldShowLoading = (isInitializing || authState.isLoading) &&
    !(appState.view === 'landing' && !hasEverLoggedIn);

  if (shouldShowLoading) {
    return (
      <div className="h-screen bg-gradient-to-br from-[#111111] to-[#0A0A0A] flex items-center justify-center">
        <div className="text-center">
          <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-[#FF4D4D] mx-auto mb-4"></div>
          <p className="text-[#CFCFCF] text-lg">Loading Otagon...</p>
        </div>
      </div>
    );
  }

  if (appState.view === 'landing' && !authState.user) {
    return (
      <>
        <LandingPage
          onGetStarted={handleGetStarted}
          onOpenAbout={() => openModal('about')}
          onOpenPrivacy={() => openModal('privacy')}
          onOpenRefund={() => openModal('refund')}
          onOpenTerms={() => openModal('terms')}
          onDirectNavigation={() => {
            // Direct navigation handler for landing page links
          }}
        />
        <AboutModal isOpen={activeModal === 'about'} onClose={closeModal} />
        <PrivacyModal isOpen={activeModal === 'privacy'} onClose={closeModal} />
        <TermsModal isOpen={activeModal === 'terms'} onClose={closeModal} />
        <RefundPolicyModal isOpen={activeModal === 'refund'} onClose={closeModal} />
        <ContactUsModal isOpen={activeModal === 'contact'} onClose={closeModal} />
      </>
    );
  }

  if (appState.onboardingStatus === 'login') {
    return (
      <LoginSplashScreen
        onComplete={handleLoginComplete}
        onBackToLanding={handleBackToLanding}
        onSetAppState={() => {}}
      />
    );
  }

  if (appState.onboardingStatus === 'loading') {
    return (
      <div className="h-screen bg-gradient-to-br from-[#111111] to-[#0A0A0A] flex items-center justify-center">
        <div className="text-center">
          <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-[#FF4D4D] mx-auto mb-4"></div>
          <p className="text-[#CFCFCF] text-lg">Signing you in...</p>
        </div>
      </div>
    );
  }

  if (authState.user && appState.view === 'app') {
    if (appState.onboardingStatus === 'initial' && !isInitializing) {
      return <InitialSplashScreen onComplete={() => handleOnboardingComplete('initial')} user={authState.user} />;
    }

    if (appState.onboardingStatus === 'how-to-use') {
      return (
        <SplashScreen
          onSkipConnection={handleSkipConnection}
          onConnect={handleConnect}
          status={connectionStatus}
          error={connectionError}
          connectionCode={null}
          onConnectionSuccess={handleConnectionSuccess}
        />
      );
    }

    if (appState.onboardingStatus === 'features-connected') {
      return (
        <HowToUseSplashScreen
          onComplete={async () => {
            if (authState.user) {
              try {
                await onboardingService.updateOnboardingStatus(authState.user.authUserId, 'features-connected', {
                  has_seen_features_connected: true,
                });
                // Prevent auth subscription from overriding navigation
                isManualNavigationRef.current = true;
                await authService.refreshUser();
              } catch (error) {
                console.error('ðŸŽ¯ [AppRouter] Error updating features-connected status:', error);
                isManualNavigationRef.current = false;
              }
            }
            handleOnboardingComplete('features-connected');
          }}
        />
      );
    }

    if (appState.onboardingStatus === 'pro-features') {
      return (
        <ProFeaturesSplashScreen
          onComplete={async () => {
            if (authState.user) {
              try {
                await onboardingService.updateOnboardingStatus(authState.user.authUserId, 'pro-features', {
                  has_seen_pro_features: true,
                  onboarding_completed: true,
                });
                // Prevent auth subscription from overriding navigation
                isManualNavigationRef.current = true;
                await authService.refreshUser();
              } catch (error) {
                console.error('ðŸŽ¯ [AppRouter] Error updating pro-features status:', error);
                isManualNavigationRef.current = false;
              }
            }
            handleOnboardingComplete('pro-features');
          }}
          onUpgrade={() => {
            // Upgrade functionality coming soon
          }}
          onUpgradeToVanguard={() => {
            // Vanguard upgrade functionality coming soon
          }}
        />
      );
    }

    if (appState.onboardingStatus === 'complete') {
      return (
        <>
          <MainApp
            onLogout={handleLogout}
            onOpenSettings={() => setSettingsOpen(true)}
            onOpenAbout={() => openModal('about')}
            onOpenPrivacy={() => openModal('privacy')}
            onOpenRefund={() => openModal('refund')}
            onOpenContact={() => openModal('contact')}
            onOpenTerms={() => openModal('terms')}
            connectionStatus={connectionStatus}
            connectionError={connectionError}
            onConnect={handleConnect}
            onDisconnect={handleDisconnect}
            onWebSocketMessage={(handler) => {
              mainAppMessageHandlerRef.current = handler;
            }}
            showProfileSetupBanner={authState.user ? !authState.user.hasProfileSetup : false}
            onProfileSetupComplete={handleProfileSetupComplete}
            onProfileSetupDismiss={handleProfileSetupSkip}
          />
          <AboutModal isOpen={activeModal === 'about'} onClose={closeModal} />
          <PrivacyModal isOpen={activeModal === 'privacy'} onClose={closeModal} />
          <TermsModal isOpen={activeModal === 'terms'} onClose={closeModal} />
          <RefundPolicyModal isOpen={activeModal === 'refund'} onClose={closeModal} />
          <ContactUsModal isOpen={activeModal === 'contact'} onClose={closeModal} />
          <SettingsModal isOpen={settingsOpen} onClose={() => setSettingsOpen(false)} user={authState.user} />
          {showLogoutConfirm && (
            <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
              <div className="bg-surface border border-surface-light/20 rounded-xl p-6 max-w-md mx-4">
                <h3 className="text-lg font-semibold text-text-primary mb-4">Confirm Logout</h3>
                <p className="text-text-secondary mb-6">
                  Are you sure you want to sign out? You'll need to log in again to access your account.
                </p>
                <div className="flex space-x-3">
                  <button
                    onClick={() => setShowLogoutConfirm(false)}
                    className="flex-1 px-4 py-2 text-text-muted hover:text-text-primary transition-colors"
                  >
                    Cancel
                  </button>
                  <button
                    onClick={confirmLogout}
                    className="flex-1 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors"
                  >
                    Sign Out
                  </button>
                </div>
              </div>
            </div>
          )}
        </>
      );
    }
  }

  return (
    <div className="h-screen bg-gradient-to-br from-background via-[#0F0F0F] to-background flex items-center justify-center">
      <div className="text-center">
        <p className="text-text-muted">Something went wrong. Please refresh the page.</p>
      </div>
    </div>
  );
};

export default AppRouter;


```n

## src\components\ErrorBoundary.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\ErrorBoundary.tsx.Extension.TrimStart('.'))

import { Component, ErrorInfo, ReactNode } from 'react';

interface Props {
  children: ReactNode;
  fallback?: ReactNode;
}

interface State {
  hasError: boolean;
  error: Error | null;
  errorInfo: ErrorInfo | null;
}

class ErrorBoundary extends Component<Props, State> {
  constructor(props: Props) {
    super(props);
    this.state = {
      hasError: false,
      error: null,
      errorInfo: null,
    };
  }

  static getDerivedStateFromError(error: Error): State {
    // Update state so the next render will show the fallback UI
    return {
      hasError: true,
      error,
      errorInfo: null,
    };
  }

  componentDidCatch(error: Error, errorInfo: ErrorInfo) {
    // Log error details
    console.error('ðŸš¨ [ErrorBoundary] Caught error:', error);
    console.error('ðŸš¨ [ErrorBoundary] Error info:', errorInfo);
    
    // Update state with error info
    this.setState({
      error,
      errorInfo,
    });
    
    // You can also log to an error reporting service here
    // Example: errorReportingService.logError(error, errorInfo);
  }

  handleReset = () => {
    this.setState({
      hasError: false,
      error: null,
      errorInfo: null,
    });
  };

  render() {
    if (this.state.hasError) {
      // Custom fallback UI
      if (this.props.fallback) {
        return this.props.fallback;
      }

      // Default fallback UI
      return (
        <div className="min-h-screen bg-gradient-to-br from-[#111111] to-[#0A0A0A] flex items-center justify-center p-4">
          <div className="max-w-md w-full bg-[#1C1C1C] border border-[#424242] rounded-xl p-6 text-center">
            <div className="text-6xl mb-4">âš ï¸</div>
            <h1 className="text-2xl font-bold text-[#F5F5F5] mb-2">Something Went Wrong</h1>
            <p className="text-[#CFCFCF] mb-4">
              We encountered an unexpected error. Don't worry, your data is safe.
            </p>
            
            {this.state.error && (
              <div className="bg-[#2E2E2E] rounded-lg p-4 mb-4 text-left">
                <p className="text-xs font-mono text-[#FF4D4D] mb-2">
                  {this.state.error.toString()}
                </p>
                {this.state.errorInfo && (
                  <details className="text-xs text-[#A3A3A3]">
                    <summary className="cursor-pointer hover:text-[#CFCFCF] transition-colors">
                      Error Details
                    </summary>
                    <pre className="mt-2 overflow-auto max-h-40">
                      {this.state.errorInfo.componentStack}
                    </pre>
                  </details>
                )}
              </div>
            )}
            
            <div className="flex gap-3">
              <button
                onClick={this.handleReset}
                className="flex-1 px-4 py-2 bg-gradient-to-r from-[#FF4D4D] to-[#FFAB40] text-white rounded-lg font-semibold hover:scale-105 transition-transform"
              >
                Try Again
              </button>
              <button
                onClick={() => window.location.reload()}
                className="flex-1 px-4 py-2 bg-[#2E2E2E] text-[#CFCFCF] rounded-lg font-semibold hover:bg-[#424242] transition-colors"
              >
                Reload Page
              </button>
            </div>
          </div>
        </div>
      );
    }

    return this.props.children;
  }
}

export default ErrorBoundary;



```n

## src\components\FounderImage.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\FounderImage.tsx.Extension.TrimStart('.'))

import React from 'react';

interface FounderImageProps {
  className?: string;
  size?: 'sm' | 'md' | 'lg' | 'xl';
  showBorder?: boolean;
  showShadow?: boolean;
  showBadge?: boolean;
  showStatus?: boolean;
}

const FounderImage: React.FC<FounderImageProps> = ({ 
  className = "", 
  size = 'md',
  showBorder = true,
  showShadow = true,
  showBadge = true,
  showStatus = true
}) => {
  const sizeClasses = {
    sm: 'w-16 h-16',
    md: 'w-24 h-24',
    lg: 'w-32 h-32',
    xl: 'w-40 h-40'
  };

  const borderClasses = showBorder 
    ? 'border-2 border-[#E53A3A]/30 ring-2 ring-[#D98C1F]/20' 
    : '';

  const shadowClasses = showShadow 
    ? 'shadow-lg shadow-[#E53A3A]/20' 
    : '';

  return (
    <div className={`relative ${className}`}>
      {/* Founder Portrait */}
      <div className={`relative overflow-hidden rounded-full ${sizeClasses[size]} ${borderClasses} ${shadowClasses}`}>
        <img
          src="/images/founder-image.jpg"
          alt="Otagon Founder - AI Gaming Visionary"
          className="w-full h-full object-cover object-center"
          style={{
            objectPosition: 'center 30%' // Position to show face clearly
          }}
          onError={(e) => {
            // Fallback if image doesn't load
            const target = e.target as HTMLImageElement;
            target.style.display = 'none';
            const fallback = target.parentElement?.querySelector('.fallback') as HTMLElement;
            if (fallback) {
              fallback.style.display = 'flex';
            }
          }}
        />
        
        {/* Fallback Avatar */}
        <div className="fallback hidden absolute inset-0 bg-gradient-to-br from-[#E53A3A] to-[#D98C1F] rounded-full items-center justify-center">
          <div className="text-white font-bold text-center">
            <div className="text-2xl">ðŸ‘¨â€ðŸ’»</div>
            <div className="text-xs mt-1">Founder</div>
          </div>
        </div>
      </div>

      {/* Status Indicator */}
      {showStatus && (
        <div className="absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-white rounded-full">
          <div className="w-full h-full bg-green-400 rounded-full animate-pulse"></div>
        </div>
      )}

      {/* Founder Badge */}
      {showBadge && (
        <div className="absolute -top-2 -right-2 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white text-xs px-2 py-1 rounded-full font-bold shadow-lg">
          FOUNDER
        </div>
      )}
    </div>
  );
};

export default FounderImage;


```n

## src\components\LandingPage.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\LandingPage.tsx.Extension.TrimStart('.'))

import React, { useState, useEffect, useRef } from 'react';
import Logo from './ui/Logo';
import CheckIcon from './ui/CheckIcon';
import StarIcon from './ui/StarIcon';
import FounderImage from './FounderImage';
import ContactUsModal from './modals/ContactUsModal';
import { WaitlistService } from '../services/waitlistService';
import { toastService } from '../services/toastService';

const GamepadIcon = ({ className }: { className?: string }) => (
    <svg xmlns="http://www.w3.org/2000/svg" className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <rect x="2" y="6" width="20" height="12" rx="2"></rect>
        <path d="M6 12h4"></path>
        <path d="M14 10v4"></path>
        <path d="M18 10v4"></path>
        <path d="M10 10v4"></path>
    </svg>
);


const ProBadge = () => (
    <span className="text-sm font-bold bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white px-2.5 py-1 rounded-full uppercase tracking-wider ml-3">
        PRO
    </span>
);

const FeatureIcon = ({ icon }: { icon: 'eye' | 'bookmark' | 'network' | 'mic' | 'insights' | 'cpu' }) => {
    const icons = {
        eye: (
            <>
                <path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z" />
                <circle cx="12" cy="12" r="3" />
            </>
        ),
        bookmark: (
            <>
                <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z" />
            </>
        ),
        network: (
            <>
                <rect x="16" y="16" width="6" height="6" rx="1" />
                <rect x="2" y="16" width="6" height="6" rx="1" />
                <rect x="9" y="2" width="6" height="6" rx="1" />
                <path d="M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3" />
                <path d="M12 12V8" />
            </>
        ),
        mic: (
            <>
                <path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z" />
                <path d="M19 10v2a7 7 0 0 1-14 0v-2" />
                <line x1="12" y1="19" x2="12" y2="22" />
            </>
        ),
        insights: (
            <>
                <rect x="3" y="3" width="18" height="18" rx="2" />
                <path d="M3 9h18M9 21V9" />
            </>
        ),
        cpu: (
            <>
                <rect x="4" y="4" width="16" height="16" rx="2" ry="2"></rect>
                <rect x="9" y="9" width="6" height="6"></rect>
                <line x1="9" y1="1" x2="9" y2="4"></line>
                <line x1="15" y1="1" x2="15" y2="4"></line>
                <line x1="9" y1="20" x2="9" y2="23"></line>
                <line x1="15" y1="20" x2="15" y2="23"></line>
                <line x1="20" y1="9" x2="23" y2="9"></line>
                <line x1="20" y1="14" x2="23" y2="14"></line>
                <line x1="1" y1="9" x2="4" y2="9"></line>
                <line x1="1" y1="14" x2="4" y2="14"></line>
            </>
        )
    }

    return (
        <div className="relative flex h-full w-full items-center justify-center rounded-2xl p-4 group hover:scale-105 transition-all duration-500" style={{ pointerEvents: 'auto' }}>
            <div className="absolute inset-0 bg-gradient-to-r from-[#E53A3A]/20 to-[#D98C1F]/20 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500" style={{ pointerEvents: 'none' }}></div>
            <svg
                xmlns="http://www.w3.org/2000/svg"
                width="60"
                height="60"
                viewBox="0 0 24 24"
                fill="none"
                stroke="url(#feature-gradient)"
                strokeWidth="1.5"
                strokeLinecap="round"
                strokeLinejoin="round"
                className="opacity-60 group-hover:opacity-100 transition-opacity duration-500"
            >
                <defs>
                    <linearGradient id="feature-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" stopColor="#E53A3A" />
                        <stop offset="100%" stopColor="#D98C1F" />
                    </linearGradient>
                </defs>
                {icons[icon]}
            </svg>
        </div>
    );
};

const Feature = React.memo(({ title, description, icon }: { title: React.ReactNode, description: string, icon: 'eye' | 'bookmark' | 'network' | 'mic' | 'insights' | 'cpu' }) => (
        <div className="flex flex-col items-center text-center group p-6 rounded-2xl hover:bg-gradient-to-br hover:from-neutral-800/20 hover:to-neutral-900/20 transition-all duration-500">
            <div className="w-20 h-20 mb-6 animate-fade-slide-up group-hover:scale-110 transition-transform duration-500">
                <FeatureIcon icon={icon} />
            </div>
            <div className="animate-fade-slide-up group-hover:translate-y-1 transition-transform duration-500">
                <h3 className="text-2xl lg:text-3xl font-bold tracking-tight text-white mb-4 leading-tight group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-[#E53A3A] group-hover:to-[#D98C1F] transition-all duration-500">{title}</h3>
                <p className="text-lg text-neutral-300 leading-relaxed group-hover:text-neutral-200 transition-colors duration-500">{description}</p>
            </div>
        </div>
    ));

const FeatureListItem = ({ children }: { children: React.ReactNode }) => (
    <li className="flex items-start gap-4">
        <CheckIcon className="w-6 h-6 mt-1 text-green-500 flex-shrink-0" />
        <span className="text-neutral-200 text-base leading-relaxed">{children}</span>
    </li>
);

const VanguardFeatureListItem = ({ children, comingSoon = false }: { children: React.ReactNode, comingSoon?: boolean }) => (
    <li className="flex items-start gap-4">
        <StarIcon className="w-6 h-6 mt-1 text-[#FFAB40] flex-shrink-0" />
        <div className="flex-1">
            <span className="text-neutral-200 font-medium text-base leading-relaxed block">
                {children}
            </span>
            {comingSoon && (
                <span className="inline-block mt-2 text-xs font-semibold bg-gradient-to-r from-sky-500/20 to-blue-500/20 text-sky-300 border-2 border-sky-500/40 px-3 py-1 rounded-full uppercase">Coming Soon</span>
            )}
        </div>
    </li>
);

const QuoteIcon = () => (
    <svg className="w-12 h-12 text-neutral-600 mb-6" viewBox="0 0 24 24" fill="currentColor">
        <path d="M6.5,10c0,2.21-1.79,4-4,4v-2c1.1,0,2-0.9,2-2h-2V4h6V10z M18.5,10c0,2.21-1.79,4-4,4v-2c1.1,0,2-0.9,2-2h-2V4h6V10z"></path>
    </svg>
);

const Testimonial = React.memo(({ quote, author, title }: { quote: string, author: string, title: string }) => (
    <div className="bg-gradient-to-r from-[#1C1C1C]/60 to-[#0A0A0A]/60 backdrop-blur-xl border-2 border-neutral-800/60 rounded-3xl p-10 flex flex-col justify-between h-full animate-fade-slide-up transition-all duration-500 hover:bg-gradient-to-r hover:from-[#1C1C1C]/80 hover:to-[#0A0A0A]/80 hover:border-neutral-700/80 hover:scale-105 hover:shadow-2xl hover:shadow-[#E53A3A]/10">
        <div className="mb-8">
            <QuoteIcon />
            <p className="text-xl text-neutral-200 leading-relaxed">"{quote}"</p>
        </div>
        <div>
            <p className="font-bold text-white text-lg">{author}</p>
            <p className="text-base text-neutral-400">{title}</p>
        </div>
    </div>
));

interface LandingPageProps {
  onGetStarted: () => void;
  onOpenAbout: () => void;
  onOpenPrivacy: () => void;
  onOpenRefund: () => void;
  onOpenTerms: () => void;
  onDirectNavigation: (_path: string) => void;
}

const LandingPage: React.FC<LandingPageProps> = ({ onGetStarted, onOpenAbout, onOpenPrivacy, onOpenRefund, onOpenTerms, onDirectNavigation }) => {
  const [email, setEmail] = useState('');
  const [isSubmitting, setIsSubmitting] = useState(false);
  const [submitMessage, setSubmitMessage] = useState('');
  const [showContactModal, setShowContactModal] = useState(false);
  const [scrollY, setScrollY] = useState(0);
  const backgroundRef = useRef<HTMLDivElement>(null);

    // Handle direct URL navigation on component mount
    useEffect(() => {
        const path = window.location.pathname;
        if (path !== '/' && path !== '') {
            onDirectNavigation(path);
        }
    }, [onDirectNavigation]);

    // Parallax scroll effect
    useEffect(() => {
        const handleScroll = () => {
            setScrollY(window.scrollY);
        };

        window.addEventListener('scroll', handleScroll);
        return () => window.removeEventListener('scroll', handleScroll);
    }, []);

  const handleWaitlistSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    if (!email) {
      return;
    }

    setIsSubmitting(true);
    setSubmitMessage('');

    try {
      const result = await WaitlistService.addToWaitlist(email, 'landing_page');
      
      if (result.success) {
        if (result.alreadyExists) {
          setSubmitMessage('You\'re already on our waitlist! We\'ll email you when access is ready.');
        } else {
          setSubmitMessage('Thanks for joining! We\'ll email you when access is ready.');
        }
        setEmail('');
      } else {
        setSubmitMessage(result.error || 'Failed to join waitlist. Please try again.');
      }
    } catch (error) {
      console.error('Waitlist submission error:', error);
      toastService.error('Failed to join waitlist. Please try again.');
      setSubmitMessage('An unexpected error occurred. Please try again.');
    } finally {
      setIsSubmitting(false);
    }
  };


    const handleScrollTo = (id: string) => (e: React.MouseEvent) => {
        e.preventDefault();
        document.getElementById(id)?.scrollIntoView({ behavior: 'smooth' });
    };


  return (
        <div 
            ref={backgroundRef}
            className="text-white font-inter overflow-x-hidden relative custom-scrollbar animate-fade-in"
            style={{
                backgroundColor: '#111111',
                minHeight: '100vh',
                height: 'auto'
            }}
        >
            {/* Enhanced Background Glows */}
            <div className="absolute top-0 left-0 w-full h-full -z-15 pointer-events-none hero-glow-texture-top"></div>
            <div className="absolute bottom-0 left-0 w-full h-full -z-15 pointer-events-none hero-glow-texture-bottom"></div>
            
            {/* Animated Floating Particles with Parallax */}
            <div className="absolute inset-0 -z-12 pointer-events-none">
                {[...Array(40)].map((_, i) => (
                    <div
                        key={i}
                        className="absolute w-1 h-1 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] rounded-full opacity-40 animate-float"
                        style={{
                            left: `${Math.random() * 100}%`,
                            top: `${Math.random() * 100}%`,
                            transform: `translateY(${scrollY * (0.2 + Math.random() * 0.4)}px)`,
                            animationDelay: `${Math.random() * 3}s`,
                            animationDuration: `${4 + Math.random() * 4}s`
                        }}
                    />
                ))}
          </div>
          
            {/* Floating Geometric Shapes with Parallax */}
            <div className="absolute inset-0 -z-12 pointer-events-none">
                {[...Array(16)].map((_, i) => (
                    <div
                        key={`shape-${i}`}
                        className="absolute opacity-15 animate-drift"
                        style={{
                            left: `${Math.random() * 100}%`,
                            top: `${Math.random() * 100}%`,
                            transform: `translateY(${scrollY * (0.1 + Math.random() * 0.3)}px)`,
                            animationDelay: `${Math.random() * 4}s`,
                            animationDuration: `${6 + Math.random() * 4}s`
                        }}
                    >
                        <div className="w-4 h-4 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] transform rotate-45"></div>
          </div>
                ))}
        </div>

            {/* Full Page Grid Pattern */}
            <div 
                className="absolute inset-0 -z-10 opacity-10 pointer-events-none"
                style={{
                    background: 'linear-gradient(90deg, #FF4D4D10 1px, transparent 1px), linear-gradient(0deg, #FF4D4D10 1px, transparent 1px)',
                    backgroundSize: '30px 30px',
                }}
            ></div>

            {/* Fade out gradients for background pattern */}
            <div className="absolute top-0 left-0 w-full h-64 bg-gradient-to-b from-[#111111] via-[#111111]/80 to-transparent -z-5 pointer-events-none"></div>
            <div className="absolute bottom-0 left-0 w-full h-64 bg-gradient-to-t from-[#111111] via-[#111111]/80 to-transparent -z-5 pointer-events-none"></div>

            {/* Main Content */}
            <main>
      {/* Hero Section */}
                <section className="relative pt-20 pb-6 md:pb-8 text-center">
                    
                    <div className="container mx-auto px-6 relative overflow-visible">
                        <div className="flex flex-col items-center justify-center gap-4 mb-10 overflow-visible">
                            <Logo className="h-32 w-32" spin={true} bounce={true} />
                            <h1 
                                className="text-6xl md:text-7xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-[#FF4D4D] to-[#FFAB40] leading-none py-2"
                                style={{
                                    lineHeight: '1.3',
                                    paddingTop: '1rem',
                                    paddingBottom: '1rem',
                                    display: 'block',
                                    overflow: 'visible',
                                    minHeight: '1.3em',
                                    height: 'auto'
                                }}
                            >
              Otagon
            </h1>
          </div>
          
                        <h2 className="text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-bold tracking-tight mb-6 text-white leading-tight">
                            Never Get Stuck Again
                        </h2>
                        
                        <p className="text-lg sm:text-xl md:text-2xl lg:text-3xl text-neutral-300 mb-8 font-medium px-4">
                            Get instant, spoiler-free hints without leaving your game
                        </p>
                        
                        {/* Social Proof */}
                        <div className="flex flex-col sm:flex-row items-center justify-center gap-6 mb-8">
                            <div className="flex items-center gap-2 text-lg text-neutral-300">
                                <div className="flex -space-x-2">
                                    {[...Array(5)].map((_, i) => (
                                        <div key={i} className="w-8 h-8 rounded-full overflow-hidden">
                                            <img 
                                                src={`/images/landing/${i + 1}.png`}
                                                alt={`Gamer ${i + 1}`}
                                                className="w-full h-full rounded-full object-cover"
                                            />
                                        </div>
                                    ))}
                                </div>
                                <span className="ml-2">
                                    <span className="font-bold text-white">1000+</span> gamers waiting
                                </span>
                            </div>
                            <div className="hidden sm:block w-px h-6 bg-neutral-600"></div>
                            <div className="flex items-center gap-2 text-lg text-neutral-300">
                                <svg className="w-5 h-5 text-[#FFAB40]" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"/>
                                </svg>
                                <span>Trusted by <span className="font-bold text-white">50+</span> beta testers</span>
                            </div>
                        </div>

                        <div className="relative mx-auto my-16 w-full max-w-2xl h-auto rounded-3xl bg-black/60 backdrop-blur-xl p-2 shadow-2xl border-2 border-[#424242]/40 group hover:border-[#E53A3A]/60 transition-all duration-500 hover:shadow-2xl hover:shadow-[#E53A3A]/25 hover:scale-105" style={{
                            animation: 'glow 2s ease-in-out infinite alternate',
                            boxShadow: '0 0 20px rgba(229, 58, 58, 0.3), 0 0 40px rgba(229, 58, 58, 0.1), 0 0 60px rgba(229, 58, 58, 0.1)'
                        }}>
                            <div className="bg-transparent rounded-2xl p-6 space-y-6">
                                {/* User Prompt */}
                                <div className="flex justify-end">
                                    <p className="text-base text-[#F5F5F5] bg-gradient-to-r from-rose-900/15 to-rose-800/15 py-3 px-6 rounded-2xl rounded-br-none border-2 border-rose-500/40 backdrop-blur-sm shadow-lg">
                                        What should I do here?
                                    </p>
                                </div>
                                {/* Model Response */}
                                <div className="flex justify-start">
                                    <div className="border-2 border-neutral-700/60 bg-gradient-to-r from-neutral-800/15 to-neutral-700/15 p-6 rounded-2xl rounded-bl-none max-w-[80%] text-left backdrop-blur-sm shadow-lg">
                                        <p className="text-base font-bold text-white mb-2">Hint:</p>
                                        <p className="text-base text-[#F5F5F5] leading-relaxed">
                                        The contraption on the far wall seems to be missing a gear. Perhaps there's one nearby?
                                        </p>
                                    </div>
                                </div>
          </div>
        </div>
                        
                        <p className="text-xl md:text-2xl text-neutral-300 max-w-4xl mx-auto mb-8 leading-relaxed">
              Otagon sees your screen and gives you the perfect nudge to keep you playingâ€”without ruining the surprise. Stop searching, start playing.
            </p>

                        {/* Enhanced Waitlist Form */}
                        <div className="max-w-2xl mx-auto px-4">
                            <form id="waitlist-form" onSubmit={handleWaitlistSubmit} className="flex flex-col sm:flex-row gap-4 mb-4">
                                <div className="flex-grow relative group">
            <input
              type="email"
              value={email}
              onChange={(e) => setEmail(e.target.value)}
              placeholder="Enter your email address"
              required
              disabled={isSubmitting}
                                        className="w-full bg-gradient-to-r from-[#1C1C1C] to-[#0A0A0A] border-2 border-neutral-800/60 rounded-xl py-4 sm:py-5 px-4 sm:px-6 text-white placeholder-neutral-400 focus:outline-none focus:ring-4 focus:ring-[#FFAB40]/30 focus:border-[#FFAB40] transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed text-base sm:text-lg backdrop-blur-sm hover:border-neutral-700/80"
              aria-label="Email for waitlist"
            />
                                </div>
                                <button
              type="submit"
              disabled={isSubmitting}
                                    className="bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white font-bold py-4 sm:py-5 px-8 sm:px-12 rounded-xl transition-all duration-300 transform hover:scale-105 hover:shadow-2xl hover:shadow-[#E53A3A]/30 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 disabled:active:scale-100 text-base sm:text-lg relative overflow-hidden group min-h-[56px]"
                                >
                                    <div className="absolute inset-0 bg-gradient-to-r from-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                                    <span className="relative z-10">
                                        {isSubmitting ? (
                                            <div className="flex items-center justify-center">
                                                <div className="animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"></div>
                                                Joining...
                                            </div>
                                        ) : (
                                            'Join the Waitlist'
                                        )}
                                    </span>
                                </button>
          </form>

                            {/* Trust Indicators */}
                            <div className="flex flex-col sm:flex-row items-center justify-center gap-6 text-sm text-neutral-400">
                                <div className="flex items-center gap-2">
                                    <CheckIcon className="w-4 h-4 text-green-400" />
                                    <span>No spam, ever</span>
                                </div>
                                <div className="flex items-center gap-2">
                                    <CheckIcon className="w-4 h-4 text-green-400" />
                                    <span>Free to join</span>
                                </div>
                                <div className="flex items-center gap-2">
                                    <CheckIcon className="w-4 h-4 text-green-400" />
                                    <span>Early access</span>
                                </div>
                            </div>
                        </div>

          {submitMessage && (
                            <div className={`mt-6 text-center text-lg ${submitMessage.includes('Thanks') ? 'text-green-400' : 'text-red-400'}`}>
              {submitMessage}
            </div>
          )}

                        <p className="text-sm text-neutral-400 mt-4">
                            Join thousands of gamers on the waitlist!
                        </p>
                    </div>
                </section>


                {/* How It Works Section */}
                <section className="py-10 md:py-14 bg-transparent relative">
                    <div className="container mx-auto px-8 max-w-6xl relative">
                        <div className="text-center mb-8 md:mb-10 animate-fade-slide-up">
                            <h2 className="text-5xl md:text-6xl font-bold tracking-tight text-white mb-6">How It Works</h2>
                            <p className="text-xl text-neutral-300 mt-6 leading-relaxed">Get unstuck, get smart, get back to gamingâ€”all without leaving your game.</p>
                        </div>
                        
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-12">
                            {/* Step 1 */}
                            <div className="text-center animate-fade-slide-up">
                                <div className="flex items-center justify-center mx-auto mb-6">
                                    <svg className="w-16 h-16" fill="url(#keyboard-gradient)" viewBox="0 0 16 16">
                                        <defs>
                                            <linearGradient id="keyboard-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                                <stop offset="0%" stopColor="#E53A3A" />
                                                <stop offset="100%" stopColor="#D98C1F" />
                                            </linearGradient>
                                        </defs>
                                        <path d="M0 6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6zm13 .25v.5c0 .138.112.25.25.25h.5a.25.25 0 0 0 .25-.25v-.5a.25.25 0 0 0-.25-.25h-.5a.25.25 0 0 0-.25.25zM2.25 8a.25.25 0 0 0-.25.25v.5c0 .138.112.25.25.25h.5A.25.25 0 0 0 3 8.75v-.5A.25.25 0 0 0 2.75 8h-.5zM4 8.25v.5c0 .138.112.25.25.25h.5A.25.25 0 0 0 5 8.75v-.5A.25.25 0 0 0 4.75 8h-.5a.25.25 0 0 0-.25.25zM6.25 8a.25.25 0 0 0-.25.25v.5c0 .138.112.25.25.25h.5A.25.25 0 0 0 7 8.75v-.5A.25.25 0 0 0 6.75 8h-.5zM8 8.25v.5c0 .138.112.25.25.25h.5A.25.25 0 0 0 9 8.75v-.5A.25.25 0 0 0 8.75 8h-.5a.25.25 0 0 0-.25.25zM13.25 8a.25.25 0 0 0-.25.25v.5c0 .138.112.25.25.25h.5a.25.25 0 0 0 .25-.25v-.5a.25.25 0 0 0-.25-.25h-.5zm0 2a.25.25 0 0 0-.25.25v.5c0 .138.112.25.25.25h.5a.25.25 0 0 0 .25-.25v-.5a.25.25 0 0 0-.25-.25h-.5zm-3-2a.25.25 0 0 0-.25.25v.5c0 .138.112.25.25.25h1.5a.25.25 0 0 0 .25-.25v-.5A.25.25 0 0 0 10.75 8h-1.5zm.75 2.25v.5c0 .138.112.25.25.25h.5a.25.25 0 0 0 .25-.25v-.5a.25.25 0 0 0-.25-.25h-.5a.25.25 0 0 0-.25.25zM11.25 6a.25.25 0 0 0-.25.25v.5c0 .138.112.25.25.25h.5a.25.25 0 0 0 .25-.25v-.5a.25.25 0 0 0-.25-.25h-.5zM9 6.25v.5c0 .138.112.25.25.25h.5a.25.25 0 0 0 .25-.25v-.5A.25.25 0 0 0 9.75 6h-.5a.25.25 0 0 0-.25.25zM7.25 6a.25.25 0 0 0-.25.25v.5c0 .138.112.25.25.25h.5A.25.25 0 0 0 8 6.75v-.5A.25.25 0 0 0 7.75 6h-.5zM5 6.25v.5c0 .138.112.25.25.25h.5A.25.25 0 0 0 6 6.75v-.5A.25.25 0 0 0 5.75 6h-.5a.25.25 0 0 0-.25.25zM2.25 6a.25.25 0 0 0-.25.25v.5c0 .138.112.25.25.25h1.5A.25.25 0 0 0 4 6.75v-.5A.25.25 0 0 0 3.75 6h-1.5zM2 10.25v.5c0 .138.112.25.25.25h.5a.25.25 0 0 0 .25-.25v-.5a.25.25 0 0 0-.25-.25h-.5a.25.25 0 0 0-.25.25zM4.25 10a.25.25 0 0 0-.25.25v.5c0 .138.112.25.25.25h5.5a.25.25 0 0 0 .25-.25v-.5a.25.25 0 0 0-.25-.25h-5.5z"/>
                                    </svg>
                                </div>
                                <h3 className="text-2xl font-bold text-white mb-4">Press a Hotkey on Your PC</h3>
                                <p className="text-lg text-neutral-300 leading-relaxed">
                                    Instantly capture and analyze PC screenshots
                                </p>
                            </div>
                            
                            {/* Step 2 */}
                            <div className="text-center animate-fade-slide-up">
                                <div className="flex items-center justify-center mx-auto mb-6">
                                    <svg className="w-16 h-16" fill="url(#message-gradient)" viewBox="0 0 24 24">
                                        <defs>
                                            <linearGradient id="message-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                                <stop offset="0%" stopColor="#E53A3A" />
                                                <stop offset="100%" stopColor="#D98C1F" />
                                            </linearGradient>
                                        </defs>
                                        <path d="M2 8.994A5.99 5.99 0 0 1 8 3h8c3.313 0 6 2.695 6 5.994V21H8c-3.313 0-6-2.695-6-5.994V8.994zM14 11v2h2v-2h-2zm-6 0v2h2v-2H8z"/>
                                    </svg>
                                </div>
                                <h3 className="text-2xl font-bold text-white mb-4">Get an Instant Hint on Your Phone</h3>
                                <p className="text-lg text-neutral-300 leading-relaxed">
                                    AI analyzes your situation and delivers spoiler-free hints to your mobile or second monitor
                                </p>
                            </div>
                            
                            {/* Step 3 */}
                            <div className="text-center animate-fade-slide-up">
                                <div className="flex items-center justify-center mx-auto mb-6">
                                    <svg className="w-16 h-16" fill="url(#joystick-gradient)" viewBox="0 0 24 24">
                                        <defs>
                                            <linearGradient id="joystick-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                                <stop offset="0%" stopColor="#E53A3A" />
                                                <stop offset="100%" stopColor="#D98C1F" />
                                            </linearGradient>
                                        </defs>
                                        <path d="M16 6H8a6 6 0 0 0 0 12h8a6 6 0 0 0 0-12zm-5 7H9v2H7v-2H5v-2h2V9h2v2h2v2zm3.5 2a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm3-3a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/>
                                    </svg>
                                </div>
                                <h3 className="text-2xl font-bold text-white mb-4">Keep Playing</h3>
                                <p className="text-lg text-neutral-300 leading-relaxed">
                                    Get the nudge you need and dive back into action without alt-tabbing or overlays
                                </p>
                            </div>
                        </div>
                    </div>
                </section>

                {/* Features Section */}
                <section id="features" className="py-10 md:py-14 bg-transparent relative">
                    <div className="container mx-auto px-8 max-w-6xl relative">
                        <div className="text-center mb-8 md:mb-10 animate-fade-slide-up">
                            <h2 className="text-5xl md:text-6xl font-bold tracking-tight text-white mb-6 leading-tight" style={{ lineHeight: '1.3', minHeight: '1.3em', height: 'auto', paddingTop: '0.5rem', paddingBottom: '0.5rem' }}>Your All-in-One Gaming Assistant</h2>
                            <p className="text-xl text-neutral-300 mt-6 leading-relaxed">Features built to enhance your gameplay, not spoil it</p>
                        </div>
                        {/* Desktop: 2x2 Grid, Mobile: Vertical Stack */}
                        <div className="grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12">
                            <Feature
                                title="Instant Contextual Hints"
                                description="Our context-aware AI vision doesn't just see a gameâ€”it understands your moment. Get guidance on puzzles, lore, and boss strategies, all without spoilers."
                                icon="eye"
                            />
                            <Feature
                                title="Seamless PC-to-Mobile Sync"
                                description="Connect your desktop and phone for the ultimate uninterrupted experience. A single hotkey is all it takes to get help without ever minimizing your game."
                                icon="network"
                            />
                            <Feature
                                title="Your Personal Gaming Hub"
                                description="Track your entire gaming journey. The Otaku Diary is your private journal, the Wishlist manages your backlog, and Automatic Progress Tracking organizes your game chats and story progress."
                                icon="bookmark"
                            />
                            <Feature
                                title={<>Go Pro for the Ultimate Edge<ProBadge /></>}
                                description="Unlock In-Depth Insight Tabs to auto-generate a wiki for your game, use Hands-Free Voice Responses for ultimate immersion, and capture more details with Batch Screenshot Capture."
                                icon="insights"
                            />
                        </div>
                    </div>
                </section>

                {/* For Every Gamer, For Every Genre Section */}
                <section className="py-10 md:py-14 bg-transparent relative">
                    <div className="container mx-auto px-8 max-w-6xl relative">
                        <div className="text-center mb-8 md:mb-10 animate-fade-slide-up">
                            <h2 className="text-5xl md:text-6xl font-bold tracking-tight text-white mb-6">For Every Challenge, In Every World</h2>
                        </div>
                        
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                            {/* Souls-likes & Action RPGs */}
                            <div className="text-center animate-fade-slide-up">
                                <div className="flex items-center justify-center mx-auto mb-4">
                                    <svg className="w-16 h-16" fill="url(#souls-gradient)" viewBox="0 0 800 800">
                                        <defs>
                                            <linearGradient id="souls-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                                <stop offset="0%" stopColor="#E53A3A" />
                                                <stop offset="100%" stopColor="#D98C1F" />
                                            </linearGradient>
                                        </defs>
                                        <path d="M750.5,225H576v-75h40c6.6,0,12-5.4,12-12V12c0-6.6-5.4-12-12-12h-89.5h-253H184c-6.6,0-12,5.4-12,12v126c0,6.6,5.4,12,12,12h40v75H49.5C22.2,225,0,247.2,0,274.5v476C0,777.8,22.2,800,49.5,800h701c27.3,0,49.5-22.2,49.5-49.5v-476C800,247.2,777.8,225,750.5,225z M299,150h202v106H299V150z M725,725H75V300h152.6c7.3,18.2,25.1,31,45.9,31h253c20.8,0,38.6-12.8,45.9-31H725V725z"/>
                                        <path d="M383.6,428h-13.5c-0.7,0-1.3,0.1-2,0.2c-2.5,0.3-4.9,1.5-6.8,3.4l-29.9,29.9l-29.9-29.9c-1.9-1.9-4.3-3-6.8-3.4c-0.7-0.1-1.3-0.2-2-0.2h-13.5c-6.6,0-12,5.4-12,12v155c0,6.6,5.4,12,12,12h13.5c6.6,0,12-5.4,12-12V487.8l17.7,17.7c2.5,2.5,5.8,3.6,9.1,3.5c3.3,0.2,6.6-1,9.1-3.5l17.7-17.7V595c0,6.6,5.4,12,12,12h13.5c6.6,0,12-5.4,12-12V440C395.6,433.4,390.2,428,383.6,428z"/>
                                        <path d="M520.9,427h-67c-0.4,0-0.8,0-1.1,0.1c-0.4,0-0.7-0.1-1.1-0.1h-13.5c-6.6,0-12,5.4-12,12v155c0,6.6,5.4,12,12,12h13.5c6.6,0,12-5.4,12-12v-59h57.3c6.6,0,12-5.4,12-12v-6v-7v-58v-2v-11C532.9,432.4,527.5,427,520.9,427z M495.9,498h-32.3v-34h32.3V498z"/>
                                    </svg>
                                </div>
                                <h3 className="text-xl font-bold text-white mb-3">Souls-likes & Action RPGs</h3>
                                <p className="text-neutral-300 leading-relaxed">
                                    Master tough bosses and find hidden paths without rage-quitting. We'll give you a hint, not the easy way out.
              </p>
            </div>

                            {/* RPGs */}
                            <div className="text-center animate-fade-slide-up">
                                <div className="flex items-center justify-center mx-auto mb-4">
                                    <svg className="w-16 h-16" viewBox="0 0 64 64">
                                        <path fill="#ea8039" d="M53.5,13.81l2.83-6.13-6.1,2.81a24.35,24.35,0,0,1-6.93,2.2A7.16,7.16,0,0,0,38.18,16a7.13,7.13,0,1,0,13,5.22A34.82,34.82,0,0,1,53.5,13.81Z"/>
                                        <path fill="#ea8039" d="M50.3,23.49a9.21,9.21,0,0,1-4.13-2.4,9.44,9.44,0,0,1-.8-12.41,9.42,9.42,0,0,0-6.18,16.07l.07.06c.1.1.2.18.3.27a7.12,7.12,0,0,0,9.74-.3A7.31,7.31,0,0,0,50.3,23.49Z"/>
                                        <path fill="#ea8039" d="M40.51,13.71a9.43,9.43,0,0,0,14.82,4.92,9.42,9.42,0,0,1-16.07,6.18l-.07-.07-.27-.3a7,7,0,0,1,1.59-10.73Z"/>
                                        <path fill="#e8a63a" d="M37.76,15.2l-.12-6.75-4.27,5.18a24.26,24.26,0,0,1-5.28,5,7.12,7.12,0,1,0,10.65,8.29,7,7,0,0,0,.19-4A34.56,34.56,0,0,1,37.76,15.2Z"/>
                                        <path fill="#ea8039" d="M39.08,25.31a9.36,9.36,0,0,1-10.76-6.86,9.48,9.48,0,0,1-.11-4.34,9.42,9.42,0,0,0,1.42,17.16l.09,0,.39.11a7.12,7.12,0,0,0,8.63-4.5A6.44,6.44,0,0,0,39.08,25.31Z"/>
                                        <path fill="#e8a63a" d="M23.37,25.17l-3.61-4,.17,5.35a19.15,19.15,0,0,1-.55,5.75,5.73,5.73,0,0,0,.84,4.79,5.67,5.67,0,1,0,7.88-7.93A27.66,27.66,0,0,1,23.37,25.17Z"/>
                                        <path fill="#ea8039" d="M29.47,30.52a7.41,7.41,0,0,1-3,2.28,7.5,7.5,0,0,1-7-.74,7.42,7.42,0,0,1-2.34-2.54,7.49,7.49,0,0,0,9.84,9.53L27,39l.3-.13a5.67,5.67,0,0,0,2.8-7.23A5.19,5.19,0,0,0,29.47,30.52Z"/>
                                        <path fill="#e85b23" d="M48.8,26.25l6.76.12-5.19,4.27a24.27,24.27,0,0,0-5,5.28,7.13,7.13,0,0,1-5.22,3.16,7,7,0,0,1-6.77-3.33A7.13,7.13,0,0,1,37.1,25.26a7,7,0,0,1,4-.19A35,35,0,0,0,48.8,26.25Z"/>
                                        <path fill="#ea8039" d="M38.69,24.92a9.26,9.26,0,0,0,.37,4.76A9.45,9.45,0,0,0,49.89,35.8a9.41,9.41,0,0,1-17.15-1.42.29.29,0,0,1,0-.1c-.05-.12-.08-.26-.12-.38a7.13,7.13,0,0,1,4.51-8.64A7.53,7.53,0,0,1,38.69,24.92Z"/>
                                        <path fill="#e85b23" d="M38.84,40.63l4,3.61-5.34-.16a19.54,19.54,0,0,0-5.76.54,5.67,5.67,0,1,1,3.14-8.72A27.79,27.79,0,0,0,38.84,40.63Z"/>
                                        <path fill="#ea8039" d="M33.48,34.53a7.52,7.52,0,0,0,1,12.39A7.49,7.49,0,0,1,25,37.07L25,37c0-.1.09-.19.14-.29a5.66,5.66,0,0,1,7.22-2.81A6.19,6.19,0,0,1,33.48,34.53Z"/>
                                        <path fill="#e5cfb3" d="M46.6,17.16,36.77,20.3a1.51,1.51,0,0,0-.53.32L22,34.91a5.05,5.05,0,0,0,0,7.14h0a5,5,0,0,0,7.14,0L43.38,27.77a1.26,1.26,0,0,0,.32-.53l3.15-9.84A.19.19,0,0,0,46.6,17.16Z"/>
                                        <path fill="#d1baa1" d="M29.09,42.05,43.38,27.77a1.26,1.26,0,0,0,.32-.53l3.15-9.84a.21.21,0,0,0-.05-.2L22,42.05A5,5,0,0,0,29.09,42.05Z"/>
                                        <path fill="#f4e4d3" d="M46.85,17.4a.19.19,0,0,0-.25-.24l-9.45,3-3,9.45a.19.19,0,0,0,.24.25l9.45-3Z"/>
                                        <path fill="#f9f3ed" d="M22,37.48,36.32,23.19a1.26,1.26,0,0,1,.53-.32L46,19.93l.81-2.53a.19.19,0,0,0-.25-.24L36.77,20.3a1.51,1.51,0,0,0-.53.32L22,34.91a5.06,5.06,0,0,0-1.27,5A5,5,0,0,1,22,37.48Z"/>
                                        <path fill="#5df9e6" d="M43.3,27.07l3.14-9.83a.18.18,0,0,0,0-.2L45,18.44l-2.51,7.83a1.26,1.26,0,0,1-.32.53L27.88,41.09a5,5,0,0,1-2.44,1.33,5,5,0,0,1-2.56.42,5,5,0,0,0,5.81-1L43,27.6A1.32,1.32,0,0,0,43.3,27.07Z"/>
                                        <path fill="#041256" d="M25.52,44.53a6,6,0,0,1-4.28-10.32L35.53,19.92a2.3,2.3,0,0,1,.93-.57L46.3,16.2h0a1.21,1.21,0,0,1,1.21.3,1.18,1.18,0,0,1,.29,1.21l-3.15,9.83a2.22,2.22,0,0,1-.56.93L29.8,42.76A6,6,0,0,1,25.52,44.53Zm19.9-25.95-8.35,2.67a.57.57,0,0,0-.13.08L22.66,35.62a4,4,0,0,0,0,5.73,4.07,4.07,0,0,0,5.73,0L42.67,27.06a.35.35,0,0,0,.08-.13Z"/>
                                        <rect fill="#d0e0ef" height="2.61" rx="0.89" transform="translate(36.31 -2.85) rotate(45)" width="15.43" x="13.88" y="41.11"/>
                                        <path fill="#fff" d="M16.5,38.58a.89.89,0,0,1,1.26,0l9.29,9.29.29-.29a.9.9,0,0,0,0-1.27l-9.65-9.65a.91.91,0,0,0-1.26,0l-.58.58a.9.9,0,0,0,0,1.27l.36.36Z"/>
                                        <path fill="#5df9e6" d="M26.9,46.31l-9.65-9.65a.83.83,0,0,0-.51-.23l9.05,9a.9.9,0,0,1,0,1.27l-.58.58a.93.93,0,0,1-.75.24l.6.6a.89.89,0,0,0,1.26,0l.58-.58A.9.9,0,0,0,26.9,46.31Z"/>
                                        <path fill="#385272" d="M18.42,50.73l4.82-4.83L18.1,40.76l-4.87,4.87a2.55,2.55,0,0,1-1.39.69,5,5,0,1,0,5.83,5.9A2.86,2.86,0,0,1,18.42,50.73Z"/>
                                        <rect fill="#577491" height="0.54" transform="translate(37.3 -0.51) rotate(45)" width="5.5" x="16.51" y="44.5"/>
                                        <rect fill="#577491" height="0.54" transform="translate(37.82 0.75) rotate(45)" width="5.5" x="15.26" y="45.75"/>
                                        <rect fill="#577491" height="0.54" transform="translate(38.33 2) rotate(45)" width="5.5" x="14" y="47"/>
                                        <rect fill="#577491" height="0.54" transform="translate(38.85 3.25) rotate(45)" width="5.5" x="12.75" y="48.26"/>
                                        <path fill="#5df9e6" d="M17.41,51.72a2.72,2.72,0,0,1,.75-1.49L23,45.4l-5.15-5.14-.33.33,4.34,4.34L17,49.75a2.79,2.79,0,0,0-.75,1.5,5,5,0,0,1-1.39,2.62A5,5,0,0,1,10,55.15a5,5,0,0,0,7.46-3.43Z"/>
                                        <path fill="#577491" d="M8.91,50a5,5,0,0,1,3.33-2.2,2.55,2.55,0,0,0,1.4-.69l5.42-5.42-1-1-4.87,4.87a2.55,2.55,0,0,1-1.39.69,5,5,0,0,0-3.72,7A4.94,4.94,0,0,1,8.91,50Z"/>
                                        <path fill="#041256" d="M26.13,49.42a1.88,1.88,0,0,1-1.34-.56l-9.65-9.65a1.87,1.87,0,0,1,0-2.67l.58-.58a1.9,1.9,0,0,1,2.68,0l9.65,9.65a1.91,1.91,0,0,1,0,2.68l-.58.57A1.89,1.89,0,0,1,26.13,49.42Zm.07-2h0Zm-9.57-9.57,9.52,9.52.41-.45-9.5-9.5Zm10,9h0Z"/>
                                        <path fill="#041256" d="M12.73,57.33a5.83,5.83,0,0,1-.59,0,6.1,6.1,0,0,1-4.45-2.67,6,6,0,0,1,4-9.29,1.61,1.61,0,0,0,.86-.42l4.87-4.87a1,1,0,1,1,1.42,1.42l-4.87,4.87a3.63,3.63,0,0,1-1.93,1,4.08,4.08,0,0,0-2.68,1.76,4,4,0,0,0,6.25,5.07A4,4,0,0,0,16.69,52a3.82,3.82,0,0,1,1-2l4.83-4.82A1,1,0,0,1,24,46.61l-4.82,4.82a2,2,0,0,0-.48,1A5.91,5.91,0,0,1,17,55.55,6,6,0,0,1,12.73,57.33Z"/>
                                        <path fill="#041256" d="M13.16,52A.83.83,0,0,1,12,52a.85.85,0,0,1,0-1.18A.83.83,0,0,1,13.16,52Z"/>
                                    </svg>
                                </div>
                                <h3 className="text-xl font-bold text-white mb-3">RPGs</h3>
                                <p className="text-neutral-300 leading-relaxed">
                                    Uncover deep lore and track complex quests without accidentally reading major story spoilers.
              </p>
            </div>

                            {/* Puzzle Games */}
                            <div className="text-center animate-fade-slide-up">
                                <div className="flex items-center justify-center mx-auto mb-4">
                                    <svg className="w-16 h-16" viewBox="0 0 500 500">
                                        <path fill="#E53A3A" d="M202.78,371.74a34.27,34.27,0,0,1,36.11-13.5,34,34,0,0,1-8.18,67.09,34.17,34.17,0,0,1-27.93-14.46v76.51h171.7A20.55,20.55,0,0,0,395,466.83V295.23h-76.9a34,34,0,1,0-38.35,0h-77Z"/>
                                        <path fill="#D98C1F" d="M362.63,295.23v171.6a20.55,20.55,0,0,1-20.55,20.55h32.4A20.55,20.55,0,0,0,395,466.83V295.23Z"/>
                                        <path fill="#E53A3A" d="M126.17,295.23a34,34,0,1,1-39.13,0H10.53v171.6a20.55,20.55,0,0,0,20.55,20.55h171.7V410.47a33.83,33.83,0,0,0,32,14.63,34,34,0,0,0-4-67.82,33.82,33.82,0,0,0-28,14.85v-76.9Z"/>
                                        <path fill="#D98C1F" d="M374.46,203.72a33.84,33.84,0,1,1,38.92,0h76.09V34a21.33,21.33,0,0,0-21.33-21.33H298.27V89.1a33.64,33.64,0,0,0-31.84-14.54,33.84,33.84,0,0,0,4,67.45,33.63,33.63,0,0,0,27.85-14.77v76.48Z"/>
                                        <path fill="#E53A3A" d="M468.14,12.62h-32.4A21.33,21.33,0,0,1,457.07,34V203.72h32.4V34A21.33,21.33,0,0,0,468.14,12.62Z"/>
                                        <path fill="#D98C1F" d="M202.78,218.72a34.27,34.27,0,0,1-36.11,13.5,34,34,0,0,1,8.18-67.09,34.17,34.17,0,0,1,27.93,14.46V103.08H31.08a20.55,20.55,0,0,0-20.55,20.54V295.23H87.44a34,34,0,1,0,38.34,0h77Z"/>
                                    </svg>
                                </div>
                                <h3 className="text-xl font-bold text-white mb-3">Puzzle Games</h3>
                                <p className="text-neutral-300 leading-relaxed">
                                    Get a clue for that brain-bending puzzle, not the entire solution. Preserve your "aha!" moment.
              </p>
            </div>

                            {/* Open-World Adventures */}
                            <div className="text-center animate-fade-slide-up">
                                <div className="flex items-center justify-center mx-auto mb-4">
                                    <img src="/icons/openworld.svg" alt="Open World Adventures" className="w-16 h-16" />
                                </div>
                                <h3 className="text-xl font-bold text-white mb-3">Open-World Adventures</h3>
                                <p className="text-neutral-300 leading-relaxed">
                                    Hunt down every last collectible and conquer secret challenges with a gentle nudge in the right direction.
              </p>
            </div>

                            {/* Metroidvanias */}
                            <div className="text-center animate-fade-slide-up">
                                <div className="flex items-center justify-center mx-auto mb-4">
                                    <svg className="w-16 h-16" viewBox="0 0 1367 1562">
                                        <rect fill="#E62129" height="97.6415" width="780.786" x="293"/>
                                        <rect fill="#E62129" height="97.5262" width="976.069" x="195" y="98"/>
                                        <rect fill="#E62129" height="97.6415" width="195.283" x="195" y="195"/>
                                        <rect fill="#E62129" height="97.6415" width="195.168" x="976" y="195"/>
                                        <rect fill="#E62129" height="195.168" width="97.6415" x="293" y="293"/>
                                        <rect fill="#E62129" height="195.168" width="97.5262" x="390" y="390"/>
                                        <rect fill="#E62129" height="195.168" width="97.6415" x="976" y="293"/>
                                        <rect fill="#E62129" height="195.168" width="97.5262" x="879" y="390"/>
                                        <rect fill="#E62129" height="97.6415" width="780.786" x="293" y="586"/>
                                        <rect fill="#E62129" height="97.5262" width="585.503" x="391" y="683"/>
                                        <rect fill="#E62129" height="390.451" width="97.5262" x="98" y="488"/>
                                        <rect fill="#E62129" height="97.1804" width="97.6415" x="195" y="781"/>
                                        <rect fill="#E62129" height="390.335" width="97.6415" y="683"/>
                                        <rect fill="#E62129" height="390.451" width="97.5262" x="1171" y="488"/>
                                        <rect fill="#E62129" height="97.1804" width="97.6415" x="1074" y="781"/>
                                        <rect fill="#E62129" height="390.335" width="97.6415" x="1269" y="683"/>
                                        <rect fill="#F98812" height="292.809" width="97.6415" x="195" y="293"/>
                                        <rect fill="#F98812" height="97.6415" width="97.6415" x="293" y="488"/>
                                        <rect fill="#F98812" height="292.809" width="97.6415" x="1074" y="293"/>
                                        <rect fill="#F98812" height="97.6415" width="97.6415" x="976" y="488"/>
                                        <rect fill="#F98812" height="195.283" width="97.5262" x="390" y="195"/>
                                        <rect fill="#F98812" height="195" width="198" x="583" y="195"/>
                                        <rect fill="#F98812" height="195.283" width="99.1401" x="877" y="195"/>
                                        <rect fill="#F98812" height="195" width="391" x="488" y="390"/>
                                        <rect fill="#1D1819" height="195.283" width="94.9901" x="488" y="195"/>
                                        <rect fill="#1D1819" height="195.283" width="96.1429" x="781" y="195"/>
                                        <rect fill="#990000" height="195.629" width="97.6415" x="195" y="586"/>
                                        <rect fill="#990000" height="292.348" width="97.6415" x="293" y="684"/>
                                        <rect fill="#990000" height="293" width="195" x="390" y="781"/>
                                        <rect fill="#990000" height="195.629" width="97.7568" x="1074" y="586"/>
                                        <rect fill="#990000" height="292.809" width="97.5262" x="976" y="684"/>
                                        <rect fill="#990000" height="293" width="195" x="781" y="781"/>
                                        <rect fill="#990000" height="195" width="195" x="586" y="781"/>
                                        <rect fill="#F98812" height="97.5262" width="195.168" y="1171"/>
                                        <rect fill="#F98812" height="97.6415" width="292.809" y="1074"/>
                                        <rect fill="#F98812" height="97.6415" width="292.809" x="1074" y="1074"/>
                                        <rect fill="#F98812" height="97.5262" width="195.744" x="1171" y="1171"/>
                                        <rect fill="#E62129" height="97.5262" width="195.168" x="586" y="976"/>
                                        <rect fill="#E62129" height="97.6415" width="780.786" x="293" y="1074"/>
                                        <rect fill="#E62129" height="97.5262" width="196.897" x="584" y="1171"/>
                                        <rect fill="#E62129" height="97.6415" width="195.283" x="195" y="1269"/>
                                        <rect fill="#E62129" height="97.6415" width="390.451" x="195" y="1366"/>
                                        <rect fill="#E62129" height="97.5262" width="195.052" x="293" y="1464"/>
                                        <rect fill="#E62129" height="97.5262" width="195.168" x="878" y="1464"/>
                                        <rect fill="#E62129" height="97.6415" width="390.451" x="781" y="1366"/>
                                        <rect fill="#E62129" height="97.6415" width="195.168" x="976" y="1269"/>
                                        <rect fill="#F98812" height="293" width="195" x="98" y="878"/>
                                        <rect fill="#F98812" height="293" width="195" x="1074" y="878"/>
                                        <rect fill="#990000" height="97.5262" width="390.451" x="195" y="1171"/>
                                        <rect fill="#990000" height="97.6415" width="390.451" x="781" y="1171"/>
                                        <rect fill="#990000" height="97.6415" width="585.618" x="390" y="1269"/>
                                        <rect fill="#F98812" height="97.6415" width="97.6415" x="293" y="976"/>
                                        <rect fill="#F98812" height="97.1804" width="97.5262" x="976" y="976"/>
                                    </svg>
                                </div>
                                <h3 className="text-xl font-bold text-white mb-3">Metroidvanias</h3>
                                <p className="text-neutral-300 leading-relaxed">
                                    Lost after finding a new power? Discover which hidden path just opened up without checking a full map.
              </p>
            </div>

                            {/* Survival & Crafting */}
                            <div className="text-center animate-fade-slide-up">
                                <div className="flex items-center justify-center mx-auto mb-4">
                                    <svg className="w-16 h-16" viewBox="0 0 500 500">
                                        <path fill="#faae3b" d="M360.62,93.33c1.11,18.72-33.87,73.85-33.87,73.85C305.59,76.87,192.91,10.68,192.91,10.68s26.67,31.6-30.1,124-31.29,150.15-31.29,150.15h0c12.3,44.84,62.05,78.42,121.64,78.42s104-36.12,121.64-78.42h.05C411.52,203.21,360.62,93.33,360.62,93.33Z"/>
                                        <path fill="#ee3734" d="M201.59,311.38c0-29,51.16-88.94,51.16-88.94s51.15,60,51.15,88.94-22.9,52.48-51.15,52.48S201.59,340.37,201.59,311.38Z"/>
                                        <path fill="rgba(0,0,0,0.15)" d="M168.71,336.69c22.2,16.49,51.85,26.61,84.49,26.61,59.6,0,104-36.12,121.64-78.42h.05c36.63-81.67-14.27-191.55-14.27-191.55,1.11,18.72-33.87,73.85-33.87,73.85C305.59,76.87,192.91,10.68,192.91,10.68S438.82,258.17,168.71,336.69Z"/>
                                        <ellipse fill="#513b2c" cx="55.48" cy="453.93" rx="22.06" ry="36.04" transform="translate(-107.9 26.8) rotate(-13.96)"/>
                                        <path fill="#fff" d="M46,419.29c.27-.08.5-.26.78-.33l-.82.2Z"/>
                                        <path fill="#fff" d="M63.36,489.11l.82-.2c-.28.07-.57,0-.85.07Z"/>
                                        <path fill="#b3814b" d="M466.56,351.71a36,36,0,0,0-43.67-26.28L46.78,419c11.83-2.94,25.31,10.33,30.11,29.65S76,486,64.18,488.91l376.1-93.52A36,36,0,0,0,466.56,351.71Z"/>
                                        <polygon fill="rgba(0,0,0,0.15)" points="64.18 488.91 440.28 395.39 466.56 351.71 76.89 448.61 64.18 488.91"/>
                                        <ellipse fill="#513b2c" cx="444.52" cy="453.93" rx="36.04" ry="22.06" transform="translate(-103.27 775.77) rotate(-76.04)"/>
                                        <path fill="#fff" d="M454,419.29c-.27-.08-.5-.26-.78-.33l.82.2Z"/>
                                        <path fill="#fff" d="M436.64,489.11l-.82-.2c.28.07.57,0,.85.07Z"/>
                                        <path fill="#b3814b" d="M33.44,351.71a36,36,0,0,1,43.67-26.28L453.22,419c-11.83-2.94-25.31,10.33-30.11,29.65s.89,37.36,12.71,40.3L59.72,395.39A36,36,0,0,1,33.44,351.71Z"/>
                                        <polygon fill="rgba(0,0,0,0.15)" points="435.82 488.91 59.72 395.39 33.44 351.71 423.11 448.61 435.82 488.91"/>
                                    </svg>
                                </div>
                                <h3 className="text-xl font-bold text-white mb-3">Survival & Crafting</h3>
                                <p className="text-neutral-300 leading-relaxed">
                                    Need a specific resource? Learn where to find it or what recipe you're missing to build your ultimate base.
                                </p>
                            </div>
                        </div>
                    </div>
                </section>


                {/* Pricing Section */}
                <section id="pricing" className="py-8 md:py-10 bg-transparent">
                    <div className="container mx-auto px-8">
                        <div className="text-center mb-8 md:mb-10 animate-fade-slide-up">
                            <h2 className="text-4xl md:text-5xl font-bold tracking-tight text-white mb-4">Choose Your Plan</h2>
                            <p className="text-lg text-neutral-300 leading-relaxed">Start for free. Upgrade when you're ready.</p>
                        </div>

                        <div className="grid grid-cols-1 lg:grid-cols-3 gap-6 items-stretch">
                            
                        {/* Free Plan */}
                        <div className="bg-gradient-to-r from-[#1C1C1C]/60 to-[#0A0A0A]/60 backdrop-blur-xl border-2 border-neutral-800/60 rounded-2xl p-6 flex flex-col animate-fade-slide-up hover:border-neutral-700/80 hover:scale-105 hover:shadow-[0_0_30px_rgba(229,58,58,0.3)] hover:shadow-[#E53A3A]/20 transition-all duration-500 group cursor-pointer">
                                <h3 className="text-2xl font-bold text-white mb-2">Free</h3>
                                <p className="text-neutral-300 mb-6 text-sm">For the Casual Player</p>
                                <div className="mb-6">
                                    <span className="text-4xl font-bold text-white">$0</span>
                                    <span className="text-lg text-neutral-300">/month</span>
                                </div>
                                <ul className="space-y-3 mb-8">
                                    <FeatureListItem>55 Text | 25 Image Queries/month</FeatureListItem>
                                    <FeatureListItem>Knowledge till January 2025</FeatureListItem>
                                    <FeatureListItem>Standard AI Model</FeatureListItem>
                                    <FeatureListItem>PC-to-Mobile Sync</FeatureListItem>
                                    <FeatureListItem>Progress Tracking</FeatureListItem>
                                    <FeatureListItem>14 day free trial for Pro</FeatureListItem>
                                </ul>
                                <div className="mt-auto">
                                    <button
                                        onClick={() => window.scrollTo({ top: 0, behavior: 'smooth' })}
                                        className="w-full bg-gradient-to-r from-neutral-600 to-neutral-500 text-neutral-300 font-bold py-3 px-6 rounded-lg cursor-not-allowed opacity-50"
                                        disabled
                                        title="Coming Soon - Join the waitlist to be notified when pricing goes live!"
                                    >
                                        Coming Soon
                                    </button>
                                </div>
                            </div>

                        {/* Vanguard Plan (center and highlighted) */}
                        <div className="relative border-2 border-[#FFAB40] rounded-2xl p-6 bg-gradient-to-r from-[#111] to-[#0A0A0A] shadow-2xl shadow-[#D98C1F]/30 transform lg:scale-105 flex flex-col animate-fade-slide-up hover:shadow-[#D98C1F]/50 hover:scale-110 transition-all duration-500 group cursor-pointer animate-glow-pulse">
                                <div className="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white text-xs font-bold px-4 py-1 rounded-full uppercase tracking-wider shadow-2xl">
                                    Limited Offer
                                </div>
                                <h3 className="text-3xl font-bold tracking-tight text-transparent bg-clip-text bg-gradient-to-r from-[#FF4D4D] to-[#FFAB40] mb-2">Pro Vanguard</h3>
                                <p className="text-neutral-300 mb-6 text-sm">Become a Founding Member</p>
                                <div className="mb-6">
                                    <span className="text-4xl font-bold text-white">$20</span>
                                    <span className="text-lg text-neutral-300">/year</span>
                                    <p className="text-green-400 font-medium text-sm mt-1">Lifetime Price Guarantee!</p>
                                </div>
                                <ul className="space-y-3 mb-6">
                                    <FeatureListItem>Everything in Pro, plus:</FeatureListItem>
                                </ul>
                                <ul className="space-y-3 mb-8 border-l-2 border-[#FFAB40]/40 pl-4 ml-2">
                                    <VanguardFeatureListItem>Permanent Price Lock-in</VanguardFeatureListItem>
                                    <VanguardFeatureListItem>Exclusive 'Vanguard' Badge</VanguardFeatureListItem>
                                    <VanguardFeatureListItem>Founder's Council Access</VanguardFeatureListItem>
                                    <VanguardFeatureListItem>Beta Access to Features</VanguardFeatureListItem>
                                    <VanguardFeatureListItem comingSoon={true}>Revenue Sharing</VanguardFeatureListItem>
                                </ul>
                                <div className="mt-auto">
                                    <button 
                                        onClick={() => window.scrollTo({ top: 0, behavior: 'smooth' })}
                                        className="w-full bg-gradient-to-r from-neutral-600 to-neutral-500 text-neutral-300 font-bold py-3 px-6 rounded-lg cursor-not-allowed opacity-50"
                                        disabled
                                        title="Coming Soon - Join the waitlist to be notified when pricing goes live!"
                                    >
                                        Coming Soon
                                    </button>
            </div>
          </div>

                        {/* Pro (Monthly) Plan */}
                        <div className="bg-gradient-to-r from-[#1C1C1C]/60 to-[#0A0A0A]/60 backdrop-blur-xl border-2 border-neutral-800/60 rounded-2xl p-6 flex flex-col animate-fade-slide-up hover:border-neutral-700/80 hover:scale-105 hover:shadow-[0_0_30px_rgba(229,58,58,0.3)] hover:shadow-[#E53A3A]/20 transition-all duration-500 group cursor-pointer">
                                <h3 className="text-2xl font-bold text-white mb-2">Pro</h3>
                                <p className="text-neutral-300 mb-6 text-sm">For the Serious Gamer</p>
                                <div className="mb-6">
                                    <span className="text-4xl font-bold text-white">$3.99</span>
                                    <span className="text-lg text-neutral-300">/month</span>
                                </div>
                                <ul className="space-y-3 mb-8">
                                    <FeatureListItem>Everything in Free, plus:</FeatureListItem>
                                    <FeatureListItem>1,583 Text | 328 Image Queries/month</FeatureListItem>
                                    <FeatureListItem>Up-to-date knowledge using web search</FeatureListItem>
                                    <FeatureListItem>Advanced AI Model</FeatureListItem>
                                    <FeatureListItem>In-Depth Insight Tabs</FeatureListItem>
                                    <FeatureListItem>Hands-Free Voice Response</FeatureListItem>
                                    <FeatureListItem>Batch Screenshot Capture</FeatureListItem>
                                    <FeatureListItem>Priority Support & No Ads</FeatureListItem>
                                </ul>
                                <div className="mt-auto">
                                    <button 
                                        onClick={() => window.scrollTo({ top: 0, behavior: 'smooth' })}
                                        className="w-full bg-gradient-to-r from-neutral-600 to-neutral-500 text-neutral-300 font-bold py-3 px-6 rounded-lg cursor-not-allowed opacity-50"
                                        disabled
                                        title="Coming Soon - Join the waitlist to be notified when pricing goes live!"
                                    >
                                        Coming Soon
                                    </button>
                                </div>
            </div>
          </div>
        </div>
                </section>

                {/* Testimonials Section */}
                <section className="py-10 md:py-14 bg-transparent relative">
                    <div className="container mx-auto px-8 max-w-6xl relative">
                        <div className="text-center mb-8 md:mb-10 animate-fade-slide-up">
                            <h2 className="text-5xl md:text-6xl font-bold tracking-tight text-white mb-6 leading-tight" style={{ lineHeight: '1.3', minHeight: '1.3em', height: 'auto', paddingTop: '0.5rem', paddingBottom: '0.5rem' }}>What Gamers Are Saying</h2>
                        </div>
                        
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                            <Testimonial
                                quote="Finally, a gaming assistant that doesn't spoil the story! I was stuck on a puzzle in Elden Ring for hours, and Otagon gave me just the right hint to figure it out myself."
                                author="Sarah Chen"
                                title="Souls-like Enthusiast"
                            />
                            <Testimonial
                                quote="The PC-to-mobile sync is a game-changer. I can get help without alt-tabbing and losing my immersion. It's like having a gaming buddy who knows exactly when to chime in."
                                author="Marcus Rodriguez"
                                title="RPG Completionist"
                            />
                            <Testimonial
                                quote="I love how it tracks my progress across different games. The Otaku Diary feature helps me remember where I left off in complex RPGs with multiple storylines."
                                author="Alex Kim"
                                title="Open-World Explorer"
                            />
                        </div>
                    </div>
                </section>


                {/* Earn by Playing Section */}
                <section id="earn-by-playing" className="py-10 md:py-14 bg-transparent">
                    <div className="container mx-auto px-6 max-w-4xl">
                        {/* Gradient border wrapper */}
                        <div className="p-[1px] bg-gradient-to-br from-[#E53A3A]/50 to-[#D98C1F]/50 rounded-xl">
                            <div className="bg-[#111111] rounded-[11px] p-8 md:p-12 text-left flex flex-col">
                                <div>
                                    <div className="flex justify-start mb-4">
                                        <div className="flex items-center justify-center w-20 h-20 rounded-full bg-gradient-to-br from-[#E53A3A]/10 to-[#FFAB40]/10 border border-neutral-700/50">
                                            <GamepadIcon className="w-12 h-12 text-[#FFAB40]" />
                                        </div>
                                    </div>
                                    <h2 className="text-4xl md:text-5xl font-bold tracking-tight text-white mb-6">
                                        Earn by Playing
                                    </h2>
                                    <div className="mb-6">
                                        <span className="text-base font-bold bg-sky-500/20 text-sky-300 border border-sky-500/30 px-3 py-1 rounded-full uppercase tracking-wider">Coming when we reach 10,000 pro subs</span>
                                    </div>
                                    <p className="text-lg text-[#FFAB40] font-semibold mb-4">Exclusive to Vanguard Users</p>
                                </div>

                                <div className="flex-grow">
                                    <ul className="space-y-4 text-lg max-w-2xl mb-6 leading-relaxed">
                                        <VanguardFeatureListItem>Earn instant rewards for completing in-game challenges.</VanguardFeatureListItem>
                                        <VanguardFeatureListItem>Discover secrets, defeat bosses, find rare loot, or uncover lore.</VanguardFeatureListItem>
                                        <VanguardFeatureListItem>Each achievement helps train our AI and puts money in your pocket, rewarded based on the challenge.</VanguardFeatureListItem>
                                    </ul>
                                </div>

                                <div className="mt-auto">
                                    <button
                                        onClick={() => window.scrollTo({ top: 0, behavior: 'smooth' })}
                                        className="w-full bg-neutral-600 text-neutral-400 font-bold py-3 px-6 rounded-lg cursor-not-allowed opacity-50"
                                        disabled
                                        title="Coming when we reach 10,000 pro subs - Join the waitlist to be notified when this feature goes live!"
                                    >
                                        Coming when we reach 10,000 pro subs
                                    </button>
                                    <p className="text-xs text-neutral-500 mt-3 text-center">Join the waitlist to be notified when this feature goes live!</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                {/* Founder Section */}
                <section id="founder" className="py-10 md:py-14 bg-transparent">
                    <div className="container mx-auto px-8 md:px-10 max-w-5xl">
                        {/* Section Header */}
                        <div className="text-center mb-8 md:mb-10 animate-fade-slide-up">
                            <h2 className="text-4xl md:text-6xl font-bold tracking-tight text-white mb-6">
                                Meet Our Founder
                            </h2>
                            <p className="text-lg md:text-xl text-neutral-300 max-w-3xl mx-auto leading-relaxed">
                                Meet Amaan, a passionate gamer from Hyderabad who spent his early days printing cheat codes at internet cafes.
                                After graduating from Service Design at the Royal College of Art in London in 2021, he's building the future of gaming assistance.
              </p>
            </div>

                        {/* Hero-Style Layout */}
                        <div className="text-center animate-fade-slide-up">
                            {/* Founder Image - Centered */}
                            <div className="flex justify-center mb-8">
                                <FounderImage size="xl" showBadge={false} showStatus={false} />
                            </div>

                            {/* Decorative Gradient Line */}
                            <div className="w-24 h-1 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] mx-auto mb-8 rounded-full"></div>

                            {/* Name and Title - Centered */}
                            <div className="space-y-3 mb-8">
                                <h3 className="text-4xl md:text-5xl font-bold text-white">
                                    Amaan
                                </h3>
                                <p className="text-xl md:text-2xl text-neutral-300 font-medium">
                                    Service Designer
                                </p>
                            </div>                            {/* Personal Quote - Centered */}
                            <div className="max-w-4xl mx-auto mb-12">
                                <div className="bg-gradient-to-r from-[#0F0F0F]/60 to-[#1A1A1A]/60 border-2 border-neutral-700/60 rounded-2xl p-8 md:p-10 backdrop-blur-sm">
                                    <p className="text-[#CFCFCF] leading-relaxed text-lg md:text-xl italic">
                                        "Like you, I've spent my life passionate about games. From getting lost in the deep lore of modern RPGs
                                        to the frustration of needing a small hint and getting a massive spoiler in return. That's why I built Otagon
                                        - to preserve the magic of discovery while giving you just the nudge you need."
              </p>
            </div>
          </div>

                            {/* Contact Buttons - Centered */}
                            <div className="flex flex-col sm:flex-row items-center justify-center gap-6 md:gap-8">
                                <a
                                    href="https://www.linkedin.com/in/readmetxt/"
                                    target="_blank"
                                    rel="noopener noreferrer"
                                    className="inline-flex items-center justify-center gap-3 bg-gradient-to-r from-[#0077B5] to-[#005885] hover:from-[#005885] hover:to-[#004066] text-white font-semibold py-4 px-8 rounded-xl transition-all duration-300 hover:scale-105 active:scale-95 shadow-lg hover:shadow-xl hover:shadow-[#0077B5]/25"
                                >
                                    <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
                                        <rect x="2" y="9" width="4" height="12"></rect>
                                        <circle cx="4" cy="4" r="2"></circle>
                                    </svg>
                                    <span className="hidden sm:inline">Connect on LinkedIn</span>
                                    <span className="sm:hidden">LinkedIn</span>
                                </a>

                                <a
                                    href="mailto:support@otagon.app"
                                    className="inline-flex items-center justify-center gap-3 bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] hover:from-[#D42A2A] hover:to-[#C87A1A] text-white font-semibold py-4 px-8 rounded-xl transition-all duration-300 hover:scale-105 active:scale-95 shadow-lg hover:shadow-xl hover:shadow-[#E53A3A]/25"
                                >
                                    <svg className="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                                    </svg>
                                    <span className="hidden sm:inline">Email Amaan</span>
                                    <span className="sm:hidden">Email</span>
                                </a>
            </div>
          </div>
        </div>
                </section>
      </main>

      {/* Footer */}
            <footer className="bg-transparent border-t border-neutral-800/50">
                <div className="container mx-auto px-6 py-8">
                    <div className="flex flex-col md:flex-row justify-between items-center gap-6">
                        {/* Footer Links - Above logo on mobile, right side on desktop */}
                        <div className="flex items-center gap-6 text-sm font-medium text-neutral-400 order-1 md:order-2">
                           <a href="#pricing" onClick={handleScrollTo('pricing')} className="hover:text-white transition-colors">Pricing</a>
                           <button type="button" onClick={onOpenAbout} className="hover:text-white transition-colors active:scale-95">About</button>
                           <button type="button" onClick={onOpenTerms} className="hover:text-white transition-colors active:scale-95">Terms</button>
                           <button type="button" onClick={onOpenPrivacy} className="hover:text-white transition-colors active:scale-95">Privacy</button>
                           <button type="button" onClick={onOpenRefund} className="hover:text-white transition-colors active:scale-95">Refund Policy</button>
                           <button type="button" onClick={() => setShowContactModal(true)} className="hover:text-white transition-colors active:scale-95">Contact Us</button>
            </div>
            
                        {/* Logo and Branding - Centered on mobile, left side on desktop */}
                        <div className="flex flex-col items-center md:items-start text-center md:text-left order-2 md:order-1">
                            <button 
                                onClick={onGetStarted}
                                className="flex items-center gap-2 cursor-pointer hover:scale-105 transition-transform duration-300"
                            >
                                <Logo className="h-8 w-8" bounce={false} />
                                <span className="text-xl font-bold">Otagon</span>
              </button>
                             <p className="text-neutral-400 mt-2 text-sm">&copy; {new Date().getFullYear()} Otagon. All rights reserved.</p>
            </div>
          </div>
        </div>
      </footer>
            
            {/* Contact Us Modal */}
            <ContactUsModal 
                isOpen={showContactModal} 
                onClose={() => setShowContactModal(false)} 
            />
    </div>
  );
};

export default LandingPage;


```n

## src\components\LoadingScreen.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\LoadingScreen.tsx.Extension.TrimStart('.'))


```n

## src\components\MainApp.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\components\MainApp.tsx.Extension.TrimStart('.'))

import React, { useState, useEffect, useRef, useMemo } from 'react';
import { User, Conversation, Conversations, newsPrompts, ConnectionStatus } from '../types';
import { GAME_HUB_ID } from '../constants';
import { ConversationService } from '../services/conversationService';
import { authService } from '../services/authService';
import { aiService } from '../services/aiService';
import { useActiveSession } from '../hooks/useActiveSession';
import { suggestedPromptsService } from '../services/suggestedPromptsService';
import { sessionSummaryService } from '../services/sessionSummaryService';
import { gameTabService } from '../services/gameTabService';
import { errorRecoveryService } from '../services/errorRecoveryService';
import { UserService } from '../services/userService';
import { SupabaseService } from '../services/supabaseService';
import { tabManagementService } from '../services/tabManagementService';
import { ttsService } from '../services/ttsService';
import { toastService } from '../services/toastService';
import { MessageRoutingService } from '../services/messageRoutingService';
import Sidebar from './layout/Sidebar';
import ChatInterface from './features/ChatInterface';
import SettingsModal from './modals/SettingsModal';
import CreditModal from './modals/CreditModal';
import ConnectionModal from './modals/ConnectionModal';
import HandsFreeModal from './modals/HandsFreeModal';
import AddGameModal from './modals/AddGameModal';
import Logo from './ui/Logo';
import CreditIndicator from './ui/CreditIndicator';
import HandsFreeToggle from './ui/HandsFreeToggle';
import { LoadingSpinner } from './ui/LoadingSpinner';
import SettingsContextMenu from './ui/SettingsContextMenu';
import ProfileSetupBanner from './ui/ProfileSetupBanner';
import WelcomeScreen from './welcome/WelcomeScreen';
import GameProgressBar from './features/GameProgressBar';
import { connect, disconnect } from '../services/websocketService';

interface MainAppProps {
  onLogout: () => void;
  onOpenSettings: () => void;
  onOpenAbout?: () => void;
  onOpenPrivacy?: () => void;
  onOpenRefund?: () => void;
  onOpenContact?: () => void;
  onOpenTerms?: () => void;
  connectionStatus?: ConnectionStatus;
  connectionError?: string | null;
  onConnect?: (_code: string) => void;
  onDisconnect?: () => void;
  // eslint-disable-next-line @typescript-eslint/no-explicit-any
  onWebSocketMessage?: (_data: any) => void;
  showProfileSetupBanner?: boolean;
  // eslint-disable-next-line @typescript-eslint/no-explicit-any
  onProfileSetupComplete?: (_profileData: any) => void;
  onProfileSetupDismiss?: () => void;
}

const MainApp: React.FC<MainAppProps> = ({
  onLogout,
  onOpenSettings: _onOpenSettings,
  onOpenAbout: _onOpenAbout,
  onOpenPrivacy: _onOpenPrivacy,
  onOpenRefund: _onOpenRefund,
  onOpenContact: _onOpenContact,
  onOpenTerms: _onOpenTerms,
  connectionStatus: propConnectionStatus,
  connectionError: propConnectionError,
  onConnect: propOnConnect,
  onDisconnect: propOnDisconnect,
  onWebSocketMessage: propOnWebSocketMessage,
  showProfileSetupBanner = false,
  onProfileSetupComplete,
  onProfileSetupDismiss,
}) => {
  const [user, setUser] = useState<User | null>(null);
  const [conversations, setConversations] = useState<Conversations>({});
  const [activeConversation, setActiveConversation] = useState<Conversation | null>(null);
  const [isLoading, setIsLoading] = useState(false);
  const [isInitializing, setIsInitializing] = useState(true);
  const [suggestedPrompts, setSuggestedPrompts] = useState<string[]>([]);
  const [abortController, setAbortController] = useState<AbortController | null>(null);
  
  // Active session management
  const { session, toggleSession, setActiveSession } = useActiveSession();
  const [isManualUploadMode, setIsManualUploadMode] = useState(() => {
    // Restore from localStorage, default to true (auto-upload OFF)
    const saved = localStorage.getItem('otakon_manual_upload_mode');
    return saved !== null ? saved === 'true' : true;
  });
  const [sidebarOpen, setSidebarOpen] = useState(false);
  const [settingsOpen, setSettingsOpen] = useState(false);
  const [creditModalOpen, setCreditModalOpen] = useState(false);
  const [connectionModalOpen, setConnectionModalOpen] = useState(false);
  const [connectionCode, setConnectionCode] = useState<string | null>(null);
  const [lastSuccessfulConnection, setLastSuccessfulConnection] = useState<Date | null>(null);
  
  // Hands-free mode state
  const [isHandsFreeMode, setIsHandsFreeMode] = useState(false);
  const [handsFreeModalOpen, setHandsFreeModalOpen] = useState(false);
  
  // Input preservation for tab switching
  const [currentInputMessage, setCurrentInputMessage] = useState<string>('');
  
  // Welcome screen state
  const [showWelcomeScreen, setShowWelcomeScreen] = useState(false);
  
  // âœ… PERFORMANCE: Loading guards to prevent concurrent conversation loading
  const isLoadingConversationsRef = useRef(false);
  const hasLoadedConversationsRef = useRef(false);
  
  // âœ… PERFORMANCE: Memoize currentUser to prevent re-creating object on every render
  const currentUser = useMemo(() => user || { tier: 'free' } as User, [user]);
  
  // Add Game modal state
  const [addGameModalOpen, setAddGameModalOpen] = useState(false);
  
  // Helper function to deep clone conversations to force React re-renders
  const deepCloneConversations = (conversations: Conversations): Conversations => {
    const cloned: Conversations = {};
    Object.keys(conversations).forEach(key => {
      cloned[key] = {
        ...conversations[key],
        // Force new subtabs array reference if it exists
        subtabs: conversations[key].subtabs ? [...conversations[key].subtabs!] : undefined,
        // Force new messages array reference
        messages: [...conversations[key].messages]
      };
    });
    return cloned;
  };
  
  // Settings context menu state
  const [settingsContextMenu, setSettingsContextMenu] = useState<{
    isOpen: boolean;
    position: { x: number; y: number };
  }>({
    isOpen: false,
    position: { x: 0, y: 0 },
  });
  
  // Use props for connection state, fallback to local state if not provided
  const connectionStatus = propConnectionStatus ?? ConnectionStatus.DISCONNECTED;
  const connectionError = propConnectionError ?? null;

  // Restore connection state from localStorage on mount
  useEffect(() => {
    const savedConnectionCode = localStorage.getItem('otakon_connection_code');
    if (savedConnectionCode) {
      setConnectionCode(savedConnectionCode);
      const lastConnection = localStorage.getItem('otakon_last_connection');
      if (lastConnection) {
        setLastSuccessfulConnection(new Date(lastConnection));
      }
    }
  }, []);

  // Initialize TTS service on mount
  useEffect(() => {
    ttsService.init().catch((err: Error) => {
      console.warn('Failed to initialize TTS service:', err);
    });
  }, []);

  // Persist auto-upload mode setting to localStorage
  useEffect(() => {
    localStorage.setItem('otakon_manual_upload_mode', String(isManualUploadMode));
  }, [isManualUploadMode]);

  // Handle WebSocket messages for screenshot processing
  const handleWebSocketMessage = (data: any) => {
    console.log('ðŸ”— [MainApp] Received WebSocket message:', data);
    
    if (data.type === 'screenshot' && data.dataUrl) {
      console.log('ðŸ“¸ Processing screenshot in MainApp:', data);
      
      if (isManualUploadMode) {
        // In manual mode, queue the image in the input area for review instead of auto-sending
        console.log('ðŸ“¸ Manual mode: Screenshot queued for review in input area');
        setCurrentInputMessage(data.dataUrl);
        // TODO: Show toast notification that image is queued
        toastService.info('Screenshot queued. Review in chat input and send when ready.');
        return; // Don't send automatically in manual mode
      }
      
      // Auto mode: Send the screenshot to the active conversation immediately
      if (activeConversation) {
        handleSendMessage("", data.dataUrl);
      } else {
        console.warn('ðŸ“¸ No active conversation to send screenshot to');
        toastService.warning('No active conversation. Please select or create a conversation first.');
      }
    }
  };

  // Expose the message handler to parent
  useEffect(() => {
    if (propOnWebSocketMessage) {
      propOnWebSocketMessage(handleWebSocketMessage);
    }
  }, [propOnWebSocketMessage, activeConversation]);

  useEffect(() => {
    const loadData = async (retryCount = 0) => {
      // âœ… PERFORMANCE: Guard against concurrent loads
      if (isLoadingConversationsRef.current) {
        console.log('ðŸ” [MainApp] Already loading conversations, skipping...');
        return;
      }
      
      // âœ… PERFORMANCE: Skip if already loaded (unless retry)
      if (hasLoadedConversationsRef.current && retryCount === 0) {
        console.log('ðŸ” [MainApp] Conversations already loaded, skipping...');
        return;
      }
      
      isLoadingConversationsRef.current = true;
      
      try {
        // Get user from AuthService instead of UserService
        const currentUser = authService.getCurrentUser();
        if (currentUser) {
          setUser(currentUser);
          // Also sync to UserService for compatibility
          UserService.setCurrentUser(currentUser);
        } else if (retryCount === 0) {
          // If no user on first attempt, wait a bit for auth state to settle after onboarding
          console.log('ðŸ” [MainApp] No user found, retrying in 500ms...');
          setTimeout(() => loadData(1), 500);
          return;
        }

        console.log('ðŸ” [MainApp] Loading conversations (attempt', retryCount + 1, ')');
        const userConversations = await ConversationService.getConversations();
        console.log('ðŸ” [MainApp] Loaded conversations:', userConversations);
        
        // Check if this is a new user and show welcome screen
        const isNewUser = Object.keys(userConversations).length === 0 || 
          (Object.keys(userConversations).length === 1 && userConversations[GAME_HUB_ID]);
        
        if (isNewUser && !localStorage.getItem('otakon_welcome_shown')) {
          setShowWelcomeScreen(true);
          localStorage.setItem('otakon_welcome_shown', 'true');
        }
        
        // Migration: Fix old "Everything else" or ensure Game Hub exists
        // Note: conversationService.getConversations() already handles the migration
        
        setConversations(userConversations);

        let active = await ConversationService.getActiveConversation();
        console.log('ðŸ” [MainApp] Active conversation from service:', active);

        // Handle all cases to ensure "Game Hub" is always available and active by default
        const currentGameHub = Object.values(userConversations).find(
          conv => conv.isGameHub || conv.title === 'Game Hub' || conv.id === 'game-hub'
        );

        // Case 1: No conversations at all - create "Game Hub" and set as active
        if (Object.keys(userConversations).length === 0) {
          console.log('ðŸ” [MainApp] No conversations found, creating "Game Hub"...');
          const newConversation = ConversationService.createConversation('Game Hub', 'game-hub');
          await ConversationService.addConversation(newConversation);
          await ConversationService.setActiveConversation(newConversation.id);
          
          const updatedConversations = await ConversationService.getConversations();
          setConversations(updatedConversations);
          active = updatedConversations['game-hub'];
          setActiveConversation(active);
          console.log('ðŸ” [MainApp] Created and activated "Game Hub" conversation');
        }
        // Case 2: "Game Hub" exists but nothing is active - set "Game Hub" as active
        else if (!active && currentGameHub) {
          console.log('ðŸ” [MainApp] No active conversation, setting "Game Hub" as active');
          await ConversationService.setActiveConversation(currentGameHub.id);
          const updatedConversations = await ConversationService.getConversations();
          setConversations(updatedConversations);
          active = updatedConversations[currentGameHub.id];
          setActiveConversation(active);
        }
        // Case 3: No "Game Hub" conversation but other conversations exist - create and activate it
        else if (!currentGameHub) {
          console.log('ðŸ” [MainApp] "Game Hub" missing, creating it...');
          const newConversation = ConversationService.createConversation('Game Hub', 'game-hub');
          await ConversationService.addConversation(newConversation);
          
          // If no active conversation, make "Game Hub" active
          if (!active) {
            await ConversationService.setActiveConversation(newConversation.id);
            const updatedConversations = await ConversationService.getConversations();
            setConversations(updatedConversations);
            active = updatedConversations['game-hub'];
            setActiveConversation(active);
            console.log('ðŸ” [MainApp] Created "Game Hub" and set as active');
          } else {
            // Otherwise, just add it but keep current active conversation
            const updatedConversations = await ConversationService.getConversations();
            setConversations(updatedConversations);
            setActiveConversation(active);
            console.log('ðŸ” [MainApp] Created "Game Hub" but kept existing active conversation:', active.title);
          }
        }
        // Case 4: Active conversation exists - restore it
        else if (active) {
          console.log('ðŸ” [MainApp] Restoring active conversation:', active.title, 'with ID:', active.id);
          setActiveConversation(active);
        }

        // Set initial suggested prompts for the active conversation
        if (active) {
          if (active.isGameHub || active.id === GAME_HUB_ID) {
            // For Game Hub tab, show news prompts if no messages
            if (!active.messages || active.messages.length === 0) {
              setSuggestedPrompts(newsPrompts);
            } else {
              const fallbackPrompts = suggestedPromptsService.getFallbackSuggestions(active.id, active.isGameHub);
              setSuggestedPrompts(fallbackPrompts);
            }
          } else {
            // For game tabs, show fallback prompts
            const fallbackPrompts = suggestedPromptsService.getFallbackSuggestions(active.id, active.isGameHub);
            setSuggestedPrompts(fallbackPrompts);
          }
        }
        
        // Mark initialization as complete
        setIsInitializing(false);
        
        // âœ… PERFORMANCE: Mark conversations as successfully loaded
        hasLoadedConversationsRef.current = true;
      } catch (error) {
        console.error('ðŸ” [MainApp] Error loading data:', error);
        
        // Retry up to 3 times with exponential backoff
        if (retryCount < 3) {
          const delay = Math.pow(2, retryCount) * 1000; // 1s, 2s, 4s
          console.log(`ðŸ” [MainApp] Retrying in ${delay}ms...`);
          setTimeout(() => loadData(retryCount + 1), delay);
        } else {
          console.error('ðŸ” [MainApp] Failed to load data after 3 attempts');
          toastService.error('Failed to load conversations. Please refresh the page.', {
            action: {
              label: 'Refresh',
              onClick: () => window.location.reload()
            }
          });
          // Set a fallback state to prevent infinite loading
          setActiveConversation(null);
          setIsInitializing(false);
        }
      } finally {
        // âœ… PERFORMANCE: Always clear the loading flag
        isLoadingConversationsRef.current = false;
      }
    };

    loadData();
  }, []);

  // Safety timeout: Force initialization complete after 1 second to prevent infinite loading
  useEffect(() => {
    const timeout = setTimeout(() => {
      if (isInitializing) {
        // Only force complete if we have conversations, even without user
        if (Object.keys(conversations).length > 0 || activeConversation) {
          console.warn('âš ï¸ [MainApp] Initialization timeout - but we have conversations, forcing completion');
          setIsInitializing(false);
        } else {
          // Try to get user and load conversations one more time
          console.warn('âš ï¸ [MainApp] Initialization timeout - retrying to load user and conversations');
          const currentUser = authService.getCurrentUser();
          if (currentUser) {
            setUser(currentUser);
            UserService.setCurrentUser(currentUser);
            setIsInitializing(false);
          }
        }
      }
    }, 1000);
    
    return () => clearTimeout(timeout);
  }, [isInitializing, conversations, activeConversation]);

  // Poll for conversation updates when subtabs are loading
  useEffect(() => {
    const pollForSubtabUpdates = async () => {
      // Check if any conversation has loading subtabs
      const hasLoadingSubtabs = Object.values(conversations).some(conv => 
        conv.subtabs?.some(tab => tab.status === 'loading')
      );

      if (hasLoadingSubtabs) {
        console.log('ðŸ”„ [MainApp] Polling for subtab updates...');
        
        // âœ… FIX 1: Only update subtabs, don't overwrite entire conversations state
        // This prevents wiping out messages that were just migrated
        const updatedConversations = await ConversationService.getConversations();
        
        // âœ… FIX 2: Only update if subtabs actually changed (prevents unnecessary re-renders)
        setConversations(prevConversations => {
          const freshConversations = deepCloneConversations(updatedConversations);
          
          // Check if subtabs have actually been updated
          let hasChanges = false;
          Object.keys(freshConversations).forEach(convId => {
            const prev = prevConversations[convId];
            const curr = freshConversations[convId];
            
            if (prev && curr && prev.subtabs && curr.subtabs) {
              const prevLoadingCount = prev.subtabs.filter(t => t.status === 'loading').length;
              const currLoadingCount = curr.subtabs.filter(t => t.status === 'loading').length;
              
              if (prevLoadingCount !== currLoadingCount) {
                hasChanges = true;
              }
            }
          });
          
          // Only update if subtabs changed
          if (hasChanges) {
            console.log('ðŸ”„ [MainApp] Subtabs updated, refreshing state');
            
            // âœ… CRITICAL: Always update activeConversation when subtabs change
            // This ensures the user sees newly loaded content immediately without switching tabs
            if (activeConversation && freshConversations[activeConversation.id]) {
              console.log('ðŸ”„ [MainApp] Updating active conversation with fresh data (including subtab content)');
              setActiveConversation(freshConversations[activeConversation.id]);
            }
            
            return freshConversations;
          }
          
          console.log('ðŸ”„ [MainApp] No subtab changes, keeping current state');
          return prevConversations; // Keep existing state (preserves messages)
        });
      }
    };

    // âœ… FIX 3: Reduce polling frequency to 3 seconds (was 2 seconds)
    const interval = setInterval(pollForSubtabUpdates, 3000);
    
    // Cleanup on unmount
    return () => clearInterval(interval);
  }, [conversations, activeConversation]);

  // Function to refresh user data (for credit updates)
  const refreshUserData = async () => {
    try {
      const currentUser = authService.getCurrentUser();
      if (currentUser) {
        setUser(currentUser);
        UserService.setCurrentUser(currentUser);
        console.log('ðŸ“Š [MainApp] User data refreshed for credit update');
      }
    } catch (error) {
      console.warn('Failed to refresh user data:', error);
      toastService.warning('Failed to refresh user data. Please refresh the page if you experience issues.');
    }
  };

  // WebSocket message handling (only if using local websocket)
  useEffect(() => {
    if (propOnConnect) {
      // Using App.tsx connection state, no local websocket needed
      return;
    }


    const handleWebSocketError = (error: string) => {
      console.error('WebSocket error:', error);
    };

    const handleWebSocketOpen = () => {
      console.log('ðŸ”Œ WebSocket connected');
    };

    const handleWebSocketClose = () => {
      console.log('ðŸ”Œ WebSocket disconnected');
    };

    // Check if we have a stored connection code and try to reconnect
    const storedCode = localStorage.getItem('otakon_connection_code');
    if (storedCode) {
      setConnectionCode(storedCode);
      connect(storedCode, handleWebSocketOpen, handleWebSocketMessage, handleWebSocketError, handleWebSocketClose);
    }

    // Note: Removed automatic disconnect on unmount to maintain persistent connection
    // WebSocket should only disconnect when user explicitly disconnects or logs out
  }, [activeConversation, propOnConnect]);


  const handleConversationSelect = async (id: string) => {
    console.log('ðŸ”„ [MainApp] Switching to conversation:', id);
    
    // âœ… FIX: Use current conversations state instead of reloading from cache
    // This prevents losing newly created tabs that haven't been cached yet
    const targetConversation = conversations[id];
    if (!targetConversation) {
      console.warn('ðŸ”„ [MainApp] Conversation not found in state, reloading from service:', id);
      const updatedConversations = await ConversationService.getConversations();
      setConversations(updatedConversations);
      setActiveConversation(updatedConversations[id]);
    } else {
      // Update active conversation in service
      await ConversationService.setActiveConversation(id);
      setActiveConversation(targetConversation);
    }
    
    setSidebarOpen(false);

    // Set initial suggested prompts for Game Hub tab
    const conversation = conversations[id];
    if (conversation?.isGameHub || id === GAME_HUB_ID) {
      // If no messages yet, show news prompts (they will be displayed by SuggestedPrompts component)
      if (!conversation || !conversation.messages || conversation.messages.length === 0) {
        // SuggestedPrompts component will handle showing newsPrompts for Game Hub
        // We just need to ensure prompts array is not empty
        setSuggestedPrompts(newsPrompts);
      } else {
        // If there are messages, show contextual fallback prompts
        const fallbackPrompts = suggestedPromptsService.getFallbackSuggestions(id, conversation.isGameHub);
        setSuggestedPrompts(fallbackPrompts);
      }
    } else {
      // For game tabs, set appropriate fallback prompts
      const fallbackPrompts = suggestedPromptsService.getFallbackSuggestions(id, conversation?.isGameHub);
      setSuggestedPrompts(fallbackPrompts);
    }
  };

  const handleDeleteConversation = async (id: string) => {
    const wasActive = activeConversation?.id === id;
    
    // Delete the conversation
    await ConversationService.deleteConversation(id);
    
    // Get fresh conversations from service
    const updatedConversations = await ConversationService.getConversations();
    
    // Force a new object reference to ensure React detects the change
    const freshConversations = { ...updatedConversations };
    
    // Update conversations state immediately
    setConversations(freshConversations);
    
    if (wasActive) {
      // If we're deleting the current active conversation, switch to "Game Hub" tab
      const gameHubTab = freshConversations[GAME_HUB_ID] || freshConversations['game-hub'];
      if (gameHubTab) {
        // Persist the active conversation change
        await ConversationService.setActiveConversation(gameHubTab.id);
        setActiveConversation(gameHubTab);
        // Also clear any active session since we're switching away from a game tab
        setActiveSession('', false);
      } else {
        // Fallback to first available conversation
        const firstConversation = Object.values(freshConversations)[0] || null;
        if (firstConversation) {
          await ConversationService.setActiveConversation(firstConversation.id);
          setActiveConversation(firstConversation);
        } else {
          setActiveConversation(null);
        }
      }
      // Close sidebar on mobile after switching
      setSidebarOpen(false);
    }
  };

  const handlePinConversation = async (id: string) => {
    // Check if we can pin (max 3 pinned conversations)
    const pinnedCount = Object.values(conversations).filter((conv: Conversation) => conv.isPinned).length;
    if (pinnedCount >= 3) {
      alert('You can only pin up to 3 conversations. Please unpin another conversation first.');
      return;
    }

    await ConversationService.updateConversation(id, { 
      isPinned: true, 
      pinnedAt: Date.now() 
    });
    const updatedConversations = await ConversationService.getConversations();
    setConversations(updatedConversations);
  };

  const handleUnpinConversation = async (id: string) => {
    await ConversationService.updateConversation(id, { 
      isPinned: false, 
      pinnedAt: undefined 
    });
    const updatedConversations = await ConversationService.getConversations();
    setConversations(updatedConversations);
  };

  const handleClearConversation = async (id: string) => {
    await ConversationService.clearConversation(id);
    const updatedConversations = await ConversationService.getConversations();
    setConversations(updatedConversations);
    
    // If this was the active conversation, update it
    if (activeConversation?.id === id) {
      setActiveConversation(updatedConversations[id]);
    }
  };



  const handleCreditModalOpen = () => {
    setCreditModalOpen(true);
  };

  const handleCreditModalClose = () => {
    setCreditModalOpen(false);
  };

  const handleUpgrade = () => {
    // TODO: Implement upgrade functionality
    console.log('Upgrade clicked');
  };

  const handleStartChat = () => {
    console.log('ðŸ” [handleStartChat] Starting chat, current activeConversation:', activeConversation?.id);
    
    // Game Hub is guaranteed to exist from initial load - just activate it
    const currentGameHub = conversations[GAME_HUB_ID];
    console.log('ðŸ” [handleStartChat] Current Game Hub:', currentGameHub?.id);
    
    if (currentGameHub) {
      // Set Game Hub as active immediately (synchronous for instant UI)
      console.log('ðŸ” [handleStartChat] Activating Game Hub...');
      setActiveConversation(currentGameHub);
      
      // Update storage asynchronously in background
      ConversationService.setActiveConversation(GAME_HUB_ID);
      console.log('ðŸ” [handleStartChat] Game Hub activated');
    } else {
      // This should never happen, but as a fallback, try to find any Game Hub
      console.warn('âš ï¸ [handleStartChat] Game Hub not found in state, searching...');
      const anyGameHub = Object.values(conversations).find(
        conv => conv.isGameHub || conv.title === 'Game Hub' || conv.id === 'game-hub'
      );
      if (anyGameHub) {
        setActiveConversation(anyGameHub);
        ConversationService.setActiveConversation(anyGameHub.id);
      }
    }
    
    // Load suggested prompts for Game Hub (static news prompts)
    const newsPrompts = suggestedPromptsService.getStaticNewsPrompts();
    setSuggestedPrompts(newsPrompts);
    
    // Hide welcome screen immediately - activeConversation is already set
    setShowWelcomeScreen(false);
  };

  const handleOpenGuide = () => {
    setShowWelcomeScreen(true);
  };

  const handleAddGame = () => {
    // Close welcome screen if it's open
    setShowWelcomeScreen(false);
    setAddGameModalOpen(true);
  };

  const handleCreateGame = async (gameName: string, query: string) => {
    // Switch to Game Hub
    const gameHub = Object.values(conversations).find(
      (conv) => conv.isGameHub || conv.id === 'game-hub' || conv.title === 'Game Hub'
    );
    
    if (!gameHub) {
      toastService.error('Game Hub not found. Please refresh the page.');
      return;
    }

    // Switch to Game Hub and close modal
    await ConversationService.setActiveConversation(gameHub.id);
    setActiveConversation(gameHub);
    setAddGameModalOpen(false);
    
    // Send formatted query to Game Hub
    // Format: "I'm playing [GAME]. [USER_QUERY]"
    const formattedMessage = `I'm playing ${gameName}. ${query}`;
    
    // Show processing message
    toastService.info(`Checking ${gameName}...`);
    
    // Send message immediately - UI is already switched to Game Hub
    // The AI will respond and determine if it's a valid/released/unreleased game
    // The handleSendMessage flow will handle tab creation based on AI response
    handleSendMessage(formattedMessage);
  };

  const handleConnectionModalOpen = () => {
    setConnectionModalOpen(true);
  };

  const handleConnectionModalClose = () => {
    setConnectionModalOpen(false);
  };

  const handleHandsFreeToggle = () => {
    // Just open the modal - don't toggle the state
    setHandsFreeModalOpen(true);
  };

  const handleHandsFreeModalClose = () => {
    setHandsFreeModalOpen(false);
  };

  const handleToggleHandsFreeFromModal = () => {
    // This is the actual toggle that enables/disables hands-free mode
    const newMode = !isHandsFreeMode;
    setIsHandsFreeMode(newMode);
    
    // If disabling hands-free mode, stop any ongoing speech
    if (!newMode) {
      ttsService.cancel();
    }
  };

  // Settings context menu handlers
  const handleSettingsContextMenu = (e: React.MouseEvent) => {
    e.preventDefault();
    e.stopPropagation();
    
    setSettingsContextMenu({
      isOpen: true,
      position: { x: e.clientX, y: e.clientY },
    });
  };

  const closeSettingsContextMenu = () => {
    setSettingsContextMenu({
      isOpen: false,
      position: { x: 0, y: 0 },
    });
  };

  const handleOpenSettings = () => {
    setSettingsOpen(true);
  };

  const handleLogout = () => {
    onLogout();
  };

  const handleConnect = (code: string) => {
    setConnectionCode(code);
    
    // Store connection code for persistence
    localStorage.setItem('otakon_connection_code', code);
    localStorage.setItem('otakon_last_connection', new Date().toISOString());
    
    // Use prop handler if available, otherwise use local websocket
    if (propOnConnect) {
      propOnConnect(code);
    } else {
      // Fallback to local websocket connection
      connect(
        code,
        () => {
          setLastSuccessfulConnection(new Date());
          localStorage.setItem('otakonHasConnectedBefore', 'true');
        },
        (data: any) => {
          console.log('Connection message:', data);
        },
        (error: string) => {
          console.error('Connection error:', error);
        },
        () => {
          console.log('Connection closed');
        }
      );
    }
  };

  const handleDisconnect = () => {
    if (propOnDisconnect) {
      propOnDisconnect();
    } else {
      disconnect();
    }
    setConnectionCode(null);
    setLastSuccessfulConnection(null);
    localStorage.removeItem('otakon_connection_code');
    localStorage.removeItem('otakon_last_connection');
  };

  // Handle suggested prompt clicks
  const handleSuggestedPromptClick = (prompt: string) => {
    handleSendMessage(prompt);
  };

  // Handle input message change
  const handleInputMessageChange = (message: string) => {
    setCurrentInputMessage(message);
  };

  // Handle active session toggle with session summaries
  const handleToggleActiveSession = async () => {
    if (!activeConversation) {
      return;
    }

    const wasPlaying = session.isActive && session.currentGameId === activeConversation.id;
    const willBePlaying = !wasPlaying;

    // Create summary of current session before switching
    if (wasPlaying) {
      // Switching from Playing to Planning - create playing session summary
      console.log('ðŸ“ [MainApp] Creating Playing session summary for Planning mode');
      try {
        const playingSummary = await sessionSummaryService.generatePlayingSessionSummary(activeConversation);
        await sessionSummaryService.storeSessionSummary(activeConversation.id, playingSummary);
        
        // Add summary message to conversation
        const summaryMessage = {
          id: `msg_${Date.now()}`,
          content: `**Session Summary - Switching to Planning Mode**\n\n${playingSummary.summary}`,
          role: 'assistant' as const,
          timestamp: Date.now(),
        };
        
        setConversations(prev => {
          const updated = { ...prev };
          if (updated[activeConversation.id]) {
            updated[activeConversation.id] = {
              ...updated[activeConversation.id],
              messages: [...updated[activeConversation.id].messages, summaryMessage],
              updatedAt: Date.now()
            };
          }
          return updated;
        });
        
        await ConversationService.addMessage(activeConversation.id, summaryMessage);
      } catch (error) {
        console.error('Failed to create playing session summary:', error);
        toastService.error('Failed to create session summary.');
      }
    } else if (willBePlaying) {
      // Switching from Planning to Playing - create planning session summary
      console.log('ðŸ“ [MainApp] Creating Planning session summary for Playing mode');
      try {
        const planningSummary = await sessionSummaryService.generatePlanningSessionSummary(activeConversation);
        await sessionSummaryService.storeSessionSummary(activeConversation.id, planningSummary);
        
        // Add summary message to conversation
        const summaryMessage = {
          id: `msg_${Date.now()}`,
          content: `**Session Summary - Switching to Playing Mode**\n\n${planningSummary.summary}`,
          role: 'assistant' as const,
          timestamp: Date.now(),
        };
        
        setConversations(prev => {
          const updated = { ...prev };
          if (updated[activeConversation.id]) {
            updated[activeConversation.id] = {
              ...updated[activeConversation.id],
              messages: [...updated[activeConversation.id].messages, summaryMessage],
              updatedAt: Date.now()
            };
          }
          return updated;
        });
        
        await ConversationService.addMessage(activeConversation.id, summaryMessage);
      } catch (error) {
        console.error('Failed to create planning session summary:', error);
        toastService.error('Failed to create session summary.');
      }
    }

    // Toggle the session
    toggleSession(activeConversation.id);
  };

  // Handle stop AI request
  const handleStopAI = () => {
    if (abortController) {
      abortController.abort();
      setAbortController(null);
      setIsLoading(false);
      setSuggestedPrompts([]);
    }
  };

  // Poll for subtab updates when background insights are being generated
  const pollForSubtabUpdates = async (conversationId: string, attempts = 0, maxAttempts = 30) => {
    // Stop after 30 attempts (30 seconds)
    if (attempts >= maxAttempts) {
      console.log('ðŸŽ® [MainApp] â±ï¸ Stopped polling for subtab updates after', attempts, 'attempts');
      return;
    }

    // Wait 1 second before checking
    await new Promise(resolve => setTimeout(resolve, 1000));

    try {
      // âœ… CRITICAL FIX: Skip cache to ensure we get fresh data after Supabase sync
      // When subtabs finish loading, gameTabService calls updateConversation which:
      // 1. Updates Supabase (async)
      // 2. Calls setConversations which syncs (async)
      // 3. If we use cache here, we might get OLD data before sync completes!
      const updatedConversations = await ConversationService.getConversations(true); // skipCache = true
      const targetConv = updatedConversations[conversationId];

      if (targetConv) {
        const stillLoading = targetConv.subtabs?.some(tab => tab.status === 'loading');
        
        if (!stillLoading) {
          // Subtabs have finished loading!
          console.log('ðŸŽ® [MainApp] âœ… Background subtabs loaded successfully');
          
          // Deep clone to ensure React detects changes
          const freshConversations = deepCloneConversations(updatedConversations);
          
          setConversations(freshConversations);
          
          // Update active conversation with new reference
          if (activeConversation?.id === conversationId) {
            console.log('ðŸŽ® [MainApp] âœ… Updating active conversation with loaded subtabs');
            setActiveConversation(freshConversations[conversationId]);
          }
          return;
        }

        // Still loading, continue polling
        console.log('ðŸŽ® [MainApp] ðŸ”„ Subtabs still loading, polling again... (attempt', attempts + 1, ')');
        pollForSubtabUpdates(conversationId, attempts + 1, maxAttempts);
      }
    } catch (error) {
      console.error('Error polling for subtab updates:', error);
    }
  };

  // Placeholder for game tab creation - will be implemented in Week 3
  const handleCreateGameTab = async (gameInfo: { gameTitle: string; genre?: string; aiResponse?: any; isUnreleased?: boolean }): Promise<Conversation | null> => {
    console.log('ðŸŽ® [MainApp] Game tab creation requested:', gameInfo);
    
    try {
      const user = authService.getCurrentUser();
      if (!user) {
        console.error('User not authenticated for game tab creation');
        toastService.error('Please sign in to create game tabs.');
        return null;
      }

      // Generate unique conversation ID based on game title (without timestamp for consistency)
      const sanitizedTitle = gameInfo.gameTitle.toLowerCase().replace(/[^a-z0-9\s-]/g, '').replace(/\s+/g, '-');
      const conversationId = `game-${sanitizedTitle}`;
      
      // Check if game tab already exists
      const existingConversation = conversations[conversationId];
      if (existingConversation) {
        console.log('ðŸŽ® [MainApp] Game tab already exists, returning it');
        return existingConversation;
      }

      // Create new game tab with AI response data
      const newGameTab = await gameTabService.createGameTab({
        gameTitle: gameInfo.gameTitle,
        genre: gameInfo.genre || 'Action RPG',
        conversationId,
        userId: user.id,
        aiResponse: gameInfo.aiResponse, // Pass AI response for subtab population
        isUnreleased: gameInfo.isUnreleased || false // Pass unreleased status
      });

      // Add to conversations state
      setConversations(prev => ({
        ...prev,
        [conversationId]: newGameTab
      }));

      console.log('ðŸŽ® [MainApp] Game tab created successfully:', newGameTab.title);
      toastService.success(`Game tab "${gameInfo.gameTitle}" created!`);
      return newGameTab;
    } catch (error) {
      console.error('Failed to create game tab:', error);
      toastService.error('Failed to create game tab. Please try again.');
      return null;
    }
  };

  const handleSendMessage = async (message: string, imageUrl?: string) => {
    if (!activeConversation || isLoading) {
      return;
    }

    console.log('ðŸ“¸ [MainApp] Sending message with image:', { message, hasImage: !!imageUrl, imageUrl: imageUrl?.substring(0, 50) + '...' });

    // Auto-switch to Playing mode for game help requests (not in Game Hub)
    const isGameHelpRequest = imageUrl || 
      (message && (
        message.toLowerCase().includes('help') ||
        message.toLowerCase().includes('how to') ||
        message.toLowerCase().includes('what should') ||
        message.toLowerCase().includes('stuck') ||
        message.toLowerCase().includes('tutorial') ||
        message.toLowerCase().includes('guide')
      ));

    if (isGameHelpRequest && !activeConversation.isGameHub) {
      // Switch to Playing mode if not already active
      if (!session.isActive || session.currentGameId !== activeConversation.id) {
        console.log('ðŸŽ® [MainApp] Auto-switching to Playing mode for game help request');
        setActiveSession(activeConversation.id, true);
      }
    }

    const newMessage = {
      id: `msg_${Date.now()}`,
      content: message,
      role: 'user' as const,
      timestamp: Date.now(),
      imageUrl,
    };

    // Optimized: Update state immediately without re-fetching
    setConversations(prev => {
      const updated = { ...prev };
      if (updated[activeConversation.id]) {
        updated[activeConversation.id] = {
          ...updated[activeConversation.id],
          messages: [...updated[activeConversation.id].messages, newMessage],
          updatedAt: Date.now()
        };
        // Update activeConversation immediately so UI reflects the new message
        setActiveConversation(updated[activeConversation.id]);
      }
      return updated;
    });

    // Add message to service - MUST await to ensure it's saved before potential migration
    await ConversationService.addMessage(activeConversation.id, newMessage);

    // Clear the input message after sending
    setCurrentInputMessage('');

    // Check if message contains a tab command (for Command Centre)
    if (tabManagementService.hasTabCommand(message)) {
      const command = tabManagementService.parseTabCommand(message, activeConversation);
      if (command) {
        console.log('ðŸ“ [MainApp] Tab command detected:', command);
        console.log('ðŸ“ [MainApp] Command description:', tabManagementService.describeCommand(command));
      }
    }

    // Track credit usage based on query type
    const hasImage = !!imageUrl;
    
    // Determine query type: image+text or image-only = image query, text-only = text query
    const queryType = hasImage ? 'image' : 'text';
    
    // Check if user can make the request
    if (!UserService.canMakeRequest(queryType)) {
      const errorMessage = {
        id: `msg_${Date.now() + 1}`,
        content: `You've reached your ${queryType} query limit for this month. Upgrade to Pro for more queries.`,
        role: 'assistant' as const,
        timestamp: Date.now(),
      };
      
      // Add error message to conversation
      setConversations(prev => {
        const updated = { ...prev };
        if (updated[activeConversation.id]) {
          updated[activeConversation.id] = {
            ...updated[activeConversation.id],
            messages: [...updated[activeConversation.id].messages, errorMessage],
            updatedAt: Date.now()
          };
          // Update activeConversation immediately so UI reflects the error message
          setActiveConversation(updated[activeConversation.id]);
        }
        return updated;
      });
      
      // Save error message (non-blocking)
      ConversationService.addMessage(activeConversation.id, errorMessage)
        .catch(error => console.error('Failed to save error message:', error));
      return;
    }

    // Increment usage count
    UserService.incrementUsage(queryType);
    
    // Update in Supabase (non-blocking - fire and forget)
    if (user?.authUserId) {
      const supabaseService = new SupabaseService();
      supabaseService.incrementUsage(user.authUserId, queryType)
        .then(() => {
          console.log(`ðŸ“Š [MainApp] Credit usage updated: ${queryType} query`);
          // Refresh user data in background to update credit indicator
          return refreshUserData();
        })
        .catch(error => console.warn('Failed to update usage in Supabase:', error));
    }

    // Clear previous suggestions and start loading
    setSuggestedPrompts([]);
    setIsLoading(true);
    
    // Create abort controller for stop functionality
    const controller = new AbortController();
    setAbortController(controller);
    
    try {
      const user = authService.getCurrentUser();
      if (!user) {
        throw new Error('User not authenticated');
      }

      // Apply context summarization before sending to AI (keeps context manageable)
      let conversationWithOptimizedContext = activeConversation;
      if (activeConversation.messages.length > 10) {
        const { contextSummarizationService } = await import('../services/contextSummarizationService');
        
        if (contextSummarizationService.shouldSummarize(activeConversation)) {
          console.log('ðŸ“Š [MainApp] Applying context summarization...');
          const summarizedConversation = await contextSummarizationService.applyContextSummarization(activeConversation);
          
          // Update conversation with summarized context
          await ConversationService.updateConversation(activeConversation.id, summarizedConversation);
          conversationWithOptimizedContext = summarizedConversation;
          
          // Update local state
          setConversations(prev => ({
            ...prev,
            [activeConversation.id]: summarizedConversation
          }));
          setActiveConversation(summarizedConversation);
          
          console.log('âœ… [MainApp] Context summarized successfully');
        }
      }

      const response = await aiService.getChatResponseWithStructure(
        conversationWithOptimizedContext,
        user,
        message,
        session.isActive && session.currentGameId === activeConversation.id,
        !!imageUrl,
        imageUrl,
        controller.signal
      );

      // Check if request was aborted before adding response to conversation
      if (controller.signal.aborted) {
        console.log('AI request was aborted, skipping response');
        return;
      }

      const aiMessage = {
        id: `msg_${Date.now() + 1}`,
        content: response.content,
        role: 'assistant' as const,
        timestamp: Date.now(),
      };

      // Optimized: Update state immediately
      setConversations(prev => {
        const updated = { ...prev };
        if (updated[activeConversation.id]) {
          updated[activeConversation.id] = {
            ...updated[activeConversation.id],
            messages: [...updated[activeConversation.id].messages, aiMessage],
            updatedAt: Date.now()
          };
          // Update activeConversation immediately so UI reflects the new message
          setActiveConversation(updated[activeConversation.id]);
        }
        return updated;
      });

      // Add message to service - MUST await to ensure it's saved before potential migration
      await ConversationService.addMessage(activeConversation.id, aiMessage);

      // ðŸŽ¤ Hands-Free Mode: Read AI response aloud if enabled
      if (isHandsFreeMode && response.content) {
        try {
          // Strip markdown and special formatting for better TTS
          const cleanText = response.content
            .replace(/[*_~`]/g, '') // Remove markdown formatting
            .replace(/\[([^\]]+)\]\([^)]+\)/g, '$1') // Convert [text](url) to text
            .replace(/#{1,6}\s/g, '') // Remove heading markers
            .replace(/```[\s\S]*?```/g, '') // Remove code blocks
            .replace(/`([^`]+)`/g, '$1') // Remove inline code markers
            .trim();
          
          if (cleanText) {
            await ttsService.speak(cleanText);
          }
        } catch (ttsError) {
          console.error('TTS Error:', ttsError);
          // Don't block the flow if TTS fails
        }
      }

      // âœ… DEFERRED: Process suggested prompts AFTER tab migration (moved to after tab switch)
      // This ensures prompts are based on the FINAL active tab, not the intermediate Game Hub state
      console.log('ðŸ” [MainApp] Raw suggestions from AI:', response.suggestions);
      const suggestionsToUse = response.followUpPrompts || response.suggestions;
      const processedSuggestions = suggestedPromptsService.processAISuggestions(suggestionsToUse);
      console.log('ðŸ” [MainApp] Processed suggestions:', processedSuggestions);

      // Handle progressive insight updates (if AI provided updates to existing subtabs)
      if (response.progressiveInsightUpdates && response.progressiveInsightUpdates.length > 0) {
        console.log('ðŸ“ [MainApp] AI provided progressive insight updates:', response.progressiveInsightUpdates.length);
        
        // Update subtabs in background (non-blocking)
        gameTabService.updateSubTabsFromAIResponse(
          activeConversation.id,
          response.progressiveInsightUpdates
        ).then(() => {
          console.log('ðŸ“ [MainApp] Subtabs updated successfully');
          
          // Refresh conversations to show updated subtabs
          ConversationService.getConversations().then(updatedConversations => {
            const freshConversations = deepCloneConversations(updatedConversations);
            setConversations(freshConversations);
            
            // Update active conversation to reflect changes
            const refreshedConversation = freshConversations[activeConversation.id];
            if (refreshedConversation) {
              setActiveConversation(refreshedConversation);
            }
          });
        }).catch(error => {
          console.error('ðŸ“ [MainApp] Failed to update subtabs:', error);
        });
      }

      // Handle tab management commands (Command Centre)
      if (response.otakonTags.has('OTAKON_INSIGHT_UPDATE') || 
          response.otakonTags.has('OTAKON_INSIGHT_MODIFY_PENDING') || 
          response.otakonTags.has('OTAKON_INSIGHT_DELETE_REQUEST')) {
        
        console.log('ðŸ“ [MainApp] Processing tab management commands from AI');

        // Handle INSIGHT_UPDATE (update content of existing tab)
        if (response.otakonTags.has('OTAKON_INSIGHT_UPDATE')) {
          const updateData = response.otakonTags.get('OTAKON_INSIGHT_UPDATE');
          console.log('ðŸ“ [MainApp] INSIGHT_UPDATE:', updateData);
          
          if (typeof updateData === 'string') {
            try {
              const parsed = JSON.parse(updateData);
              if (parsed.id && parsed.content) {
                gameTabService.updateSubTabsFromAIResponse(
                  activeConversation.id,
                  [{ tabId: parsed.id, title: '', content: parsed.content }]
                ).then(() => {
                  console.log('ðŸ“ [MainApp] Tab updated via command:', parsed.id);
                  // Refresh UI
                  ConversationService.getConversations().then(updatedConversations => {
                    const freshConversations = deepCloneConversations(updatedConversations);
                    setConversations(freshConversations);
                    const refreshedConversation = freshConversations[activeConversation.id];
                    if (refreshedConversation) {
                      setActiveConversation(refreshedConversation);
                    }
                  });
                }).catch(error => console.error('Failed to update tab:', error));
              }
            } catch (error) {
              console.error('Failed to parse INSIGHT_UPDATE:', error);
            }
          }
        }

        // Handle INSIGHT_MODIFY_PENDING (modify/rename tab)
        if (response.otakonTags.has('OTAKON_INSIGHT_MODIFY_PENDING')) {
          const modifyData = response.otakonTags.get('OTAKON_INSIGHT_MODIFY_PENDING');
          console.log('ðŸ“ [MainApp] INSIGHT_MODIFY_PENDING:', modifyData);
          
          if (typeof modifyData === 'string') {
            try {
              const parsed = JSON.parse(modifyData);
              if (parsed.id && (parsed.title || parsed.content)) {
                gameTabService.updateSubTabsFromAIResponse(
                  activeConversation.id,
                  [{ tabId: parsed.id, title: parsed.title || '', content: parsed.content || '' }]
                ).then(() => {
                  console.log('ðŸ“ [MainApp] Tab modified via command:', parsed.id);
                  // Refresh UI
                  ConversationService.getConversations().then(updatedConversations => {
                    const freshConversations = deepCloneConversations(updatedConversations);
                    setConversations(freshConversations);
                    const refreshedConversation = freshConversations[activeConversation.id];
                    if (refreshedConversation) {
                      setActiveConversation(refreshedConversation);
                    }
                  });
                }).catch(error => console.error('Failed to modify tab:', error));
              }
            } catch (error) {
              console.error('Failed to parse INSIGHT_MODIFY_PENDING:', error);
            }
          }
        }

        // Handle INSIGHT_DELETE_REQUEST (delete tab)
        if (response.otakonTags.has('OTAKON_INSIGHT_DELETE_REQUEST')) {
          const deleteData = response.otakonTags.get('OTAKON_INSIGHT_DELETE_REQUEST');
          console.log('ðŸ“ [MainApp] INSIGHT_DELETE_REQUEST:', deleteData);
          
          if (typeof deleteData === 'string') {
            try {
              const parsed = JSON.parse(deleteData);
              if (parsed.id) {
                // Remove the subtab from conversation
                const updatedSubtabs = activeConversation.subtabs?.filter(tab => tab.id !== parsed.id) || [];
                ConversationService.updateConversation(activeConversation.id, {
                  subtabs: updatedSubtabs
                }).then(() => {
                  console.log('ðŸ“ [MainApp] Tab deleted via command:', parsed.id);
                  // Refresh UI
                  ConversationService.getConversations().then(updatedConversations => {
                    setConversations(updatedConversations);
                    const refreshedConversation = updatedConversations[activeConversation.id];
                    if (refreshedConversation) {
                      setActiveConversation(refreshedConversation);
                    }
                  });
                }).catch(error => console.error('Failed to delete tab:', error));
              }
            } catch (error) {
              console.error('Failed to parse INSIGHT_DELETE_REQUEST:', error);
            }
          }
        }
      }

      // Handle game tab creation if game is identified
      if (response.otakonTags.has('GAME_ID')) {
        const gameTitle = response.otakonTags.get('GAME_ID');
        const confidence = response.otakonTags.get('CONFIDENCE');
        const isUnreleased = response.otakonTags.get('GAME_STATUS') === 'unreleased';
        const genre = response.otakonTags.get('GENRE') || 'Default';

        console.log('ðŸŽ® [MainApp] Game detection:', { 
          gameTitle, 
          confidence, 
          isUnreleased, 
          genre,
          currentTab: activeConversation.id,
          messageIds: { user: newMessage.id, ai: aiMessage.id }
        });

        // Create game tab if:
        // 1. Confidence is high (game is valid)
        // 2. Game can be unreleased OR released - both get tabs
        // Invalid games (low confidence, no GAME_ID) stay in Game Hub
        const shouldCreateTab = confidence === 'high';

        if (shouldCreateTab) {
          // âœ… Check if game tab already exists using service (not stale state)
          const targetConvId = gameTabService.generateGameConversationId(gameTitle);
          const existingGameTab = await ConversationService.getConversation(targetConvId);

          let targetConversationId: string;
          
          if (existingGameTab) {
            console.log('ðŸŽ® [MainApp] Found existing game tab:', existingGameTab.title);
            targetConversationId = existingGameTab.id;
          } else {
            console.log('ðŸŽ® [MainApp] Creating new game tab for:', gameTitle, isUnreleased ? '(unreleased)' : '(released)');
            const gameInfo = { gameTitle, genre, aiResponse: response, isUnreleased };
            const newGameTab = await handleCreateGameTab(gameInfo);
            targetConversationId = newGameTab?.id || '';
          }

          // Move the user message and AI response to the game tab if we're currently in "Game Hub"
          const shouldMigrateMessages = targetConversationId && activeConversation.isGameHub;
          console.log('ðŸŽ® [MainApp] Should migrate messages?', shouldMigrateMessages, {
            hasTargetConversation: !!targetConversationId,
            currentConversationId: activeConversation.id,
            isGameHub: activeConversation.isGameHub
          });
          
          if (shouldMigrateMessages) {
            console.log('ðŸŽ® [MainApp] âœ… Starting ATOMIC message migration from Game Hub to game tab');
            console.log('ðŸŽ® [MainApp] Message IDs to move:', { userMsgId: newMessage.id, aiMsgId: aiMessage.id });
            
            // âœ… Use atomic migration service to prevent race conditions
            await MessageRoutingService.migrateMessagesAtomic(
              [newMessage.id, aiMessage.id],
              activeConversation.id,
              targetConversationId
            );
            console.log('ðŸŽ® [MainApp] âœ… Atomic migration complete');
            
            // Update state to reflect the changes
            const updatedConversations = await ConversationService.getConversations();
            setConversations(updatedConversations);
            
            // Switch to the game tab
            const gameTab = updatedConversations[targetConversationId];
            if (gameTab) {
              console.log('ðŸŽ® [MainApp] âœ… Switching to game tab:', gameTab.title, 'with', gameTab.messages.length, 'messages');
              await ConversationService.setActiveConversation(targetConversationId);
              setActiveConversation(gameTab);
              // Auto-switch to Playing mode for new/existing game tabs
              setActiveSession(targetConversationId, true);
              // Close sidebar on mobile
              setSidebarOpen(false);
              
              // âœ… Set suggested prompts AFTER tab switch (based on FINAL active tab)
              if (processedSuggestions.length > 0) {
                setSuggestedPrompts(processedSuggestions);
              } else {
                // Use fallback suggestions based on the GAME TAB, not Game Hub
                const fallbackSuggestions = suggestedPromptsService.getFallbackSuggestions(gameTab.id, false);
                console.log('ðŸ” [MainApp] Using fallback suggestions for game tab:', fallbackSuggestions);
                setSuggestedPrompts(fallbackSuggestions);
              }
              
              // Poll for subtab updates if they're still loading
              const hasLoadingSubtabs = gameTab.subtabs?.some(tab => tab.status === 'loading');
              if (hasLoadingSubtabs) {
                console.log('ðŸŽ® [MainApp] ðŸ”„ Starting background refresh for loading subtabs');
                pollForSubtabUpdates(targetConversationId);
              }
            }
          } else {
            console.log('ðŸŽ® [MainApp] âš ï¸ Skipping message migration - not in Everything Else tab or no target');
            
            // âœ… No migration - set prompts for current tab (Game Hub or existing game tab)
            if (processedSuggestions.length > 0) {
              setSuggestedPrompts(processedSuggestions);
            } else {
              const fallbackSuggestions = suggestedPromptsService.getFallbackSuggestions(activeConversation.id, activeConversation.isGameHub);
              console.log('ðŸ” [MainApp] Using fallback suggestions:', fallbackSuggestions);
              setSuggestedPrompts(fallbackSuggestions);
            }
          }
        } else {
          console.log('ðŸŽ® [MainApp] Not creating game tab:', { 
            reason: !confidence ? 'no confidence' : confidence !== 'high' ? 'low confidence' : 'unreleased game'
          });
        }
      }

    } catch (error) {
      console.error("Failed to get AI response:", error);
      
      // Check if it was aborted
      if (error instanceof Error && error.name === 'AbortError') {
        console.log('AI request was aborted by user');
        return;
      }
      
      // Use error recovery service
      const recoveryAction = await errorRecoveryService.handleAIError(
        error as Error,
        {
          operation: 'handleSendMessage',
          conversationId: activeConversation.id,
          userId: user?.id,
          timestamp: Date.now(),
          retryCount: 0
        }
      );
      
      // Add error message to chat
      const errorMessage = {
        id: `msg_${Date.now() + 1}`,
        content: recoveryAction.message || "Sorry, I'm having trouble thinking right now. Please try again.",
        role: 'assistant' as const,
        timestamp: Date.now(),
      };
      
      // Optimized: Update state immediately
      setConversations(prev => {
        const updated = { ...prev };
        if (updated[activeConversation.id]) {
          updated[activeConversation.id] = {
            ...updated[activeConversation.id],
            messages: [...updated[activeConversation.id].messages, errorMessage],
            updatedAt: Date.now()
          };
          // Update activeConversation immediately so UI reflects the error message
          setActiveConversation(updated[activeConversation.id]);
        }
        return updated;
      });

      await ConversationService.addMessage(activeConversation.id, errorMessage);
      
      // Display user notification if needed
      if (recoveryAction.type === 'user_notification') {
        errorRecoveryService.displayError(recoveryAction.message || 'An error occurred', 'error');
      }
    } finally {
      setIsLoading(false);
      setAbortController(null);
    }
  };

  if (isInitializing && (!user || Object.keys(conversations).length === 0)) {
    return (
      <div className="h-screen bg-background flex items-center justify-center">
        <div className="text-center">
          <LoadingSpinner size="lg" className="mx-auto mb-4" />
          <p className="text-text-muted">{!user ? 'Loading...' : 'Initializing chat...'}</p>
        </div>
      </div>
    );
  }

  // Show welcome screen for new users or when guide is opened
  if (showWelcomeScreen) {
    return <WelcomeScreen onStartChat={handleStartChat} onAddGame={handleAddGame} />;
  }

  // If no user but we have initialization done, still show error or redirect
  if (!user && !isInitializing) {
    return (
      <div className="h-screen bg-background flex items-center justify-center">
        <div className="text-center">
          <p className="text-text-muted">User not found. Please refresh the page.</p>
        </div>
      </div>
    );
  }

  return (
    <div className="h-screen bg-background flex overflow-hidden">
      {/* Sidebar */}
        <Sidebar
          isOpen={sidebarOpen}
          onClose={() => setSidebarOpen(false)}
          conversations={conversations}
          activeConversation={activeConversation}
          onConversationSelect={handleConversationSelect}
          onDeleteConversation={handleDeleteConversation}
          onPinConversation={handlePinConversation}
          onUnpinConversation={handleUnpinConversation}
          onClearConversation={handleClearConversation}
          onAddGame={handleAddGame}
        />

      {/* Main Content */}
      <div className="flex-1 flex flex-col overflow-hidden">
        {/* Header */}
        <header className="chat-header-fixed bg-gradient-to-r from-surface/50 to-background/50 backdrop-blur-sm border-b border-surface-light/20 px-3 py-3 sm:px-4 sm:py-4 lg:px-6 lg:py-6 flex items-center justify-between">
          <div className="flex items-center space-x-1">
            <button
              onClick={() => setSidebarOpen(true)}
              className="lg:hidden btn-icon p-3 text-text-muted hover:text-text-primary min-h-[44px] min-w-[44px] flex items-center justify-center"
            >
              <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 6h16M4 12h16M4 18h16" />
              </svg>
            </button>
            
            <Logo size="sm" bounce={false} />
          </div>

          <div className="flex items-center space-x-2 sm:space-x-3 lg:space-x-4">
            <div className="mr-1 sm:mr-2">
              <CreditIndicator 
                user={currentUser} 
                onClick={handleCreditModalOpen}
              />
            </div>

            <HandsFreeToggle
              isHandsFree={isHandsFreeMode}
              onToggle={handleHandsFreeToggle}
            />
            
            <button
              onClick={handleConnectionModalOpen}
              className={`btn-icon p-3 transition-colors min-h-[44px] min-w-[44px] flex items-center justify-center ${
                connectionStatus === ConnectionStatus.CONNECTED 
                  ? 'text-green-400 hover:text-green-300' 
                  : 'text-text-muted hover:text-text-primary'
              }`}
              title={connectionStatus === ConnectionStatus.CONNECTED ? 'PC Connected - Click to manage' : 'Connect to PC'}
            >
              <svg className="w-5 h-5 sm:w-6 sm:h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 12h.01M12 12h.01M16 12h.01" />
              </svg>
            </button>
            
            <button
              onClick={handleSettingsContextMenu}
              className="btn-icon p-3 text-text-muted hover:text-text-primary transition-colors min-h-[44px] min-w-[44px] flex items-center justify-center"
            >
              <svg className="w-5 h-5 sm:w-6 sm:h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
              </svg>
            </button>
            
          </div>
        </header>

        {/* Chat Area */}
        <div className="flex-1 flex flex-col overflow-hidden">
          {/* Profile Setup Banner - Show if user hasn't set up profile */}
          {showProfileSetupBanner && onProfileSetupComplete && onProfileSetupDismiss && (
            <div className="flex-shrink-0 pt-3 sm:pt-4 lg:pt-6">
              <ProfileSetupBanner
                onComplete={onProfileSetupComplete}
                onDismiss={onProfileSetupDismiss}
              />
            </div>
          )}

          {/* AdSense Placeholder Banner - Always show for free users */}
          {currentUser.tier === 'free' && (
            <div className="px-3 sm:px-4 lg:px-6 pt-0 sm:pt-1 flex-shrink-0">
              <div className="bg-gradient-to-r from-gray-100/10 to-gray-200/10 border border-gray-300/20 rounded-xl p-3 sm:p-4 mb-4 sm:mb-6">
                <div className="flex items-center justify-center h-16 sm:h-20 lg:h-24 bg-gray-100/20 rounded-lg border-2 border-dashed border-gray-300/40">
                  <div className="text-center">
                    <div className="text-gray-400 text-xs sm:text-sm font-medium mb-1">Advertisement</div>
                    <div className="text-gray-300 text-xs">AdSense Placeholder</div>
                  </div>
                </div>
              </div>
            </div>
          )}

          {/* Game Progress Bar - Show for game conversations (not Game Hub) */}
          {activeConversation && !activeConversation.isGameHub && activeConversation.gameTitle && (
            <div className="px-3 sm:px-4 lg:px-6 pb-3 sm:pb-4 flex-shrink-0">
              <GameProgressBar 
                progress={activeConversation.gameProgress || 0}
                className="px-3 sm:px-4"
              />
            </div>
          )}

          {/* Chat Thread Name - Show on mobile when sidebar is collapsed */}
          {activeConversation && (
            <div className="lg:hidden px-3 sm:px-4 mb-3 sm:mb-4 flex-shrink-0">
              <div className="bg-gradient-to-r from-surface/30 to-background/30 backdrop-blur-sm border border-surface-light/20 rounded-lg px-4 py-3">
                <h2 className="text-sm sm:text-base font-semibold bg-gradient-to-r from-[#FF4D4D] to-[#FFAB40] bg-clip-text text-transparent text-center">
                  {activeConversation.title}
                </h2>
              </div>
            </div>
          )}

          
            {/* Chat Interface - Takes remaining space */}
            <div className="flex-1 min-h-0">
              <ChatInterface
                conversation={activeConversation}
                onSendMessage={handleSendMessage}
                isLoading={isLoading}
                isPCConnected={connectionStatus === ConnectionStatus.CONNECTED}
                onRequestConnect={handleConnectionModalOpen}
                userTier={currentUser.tier}
                onStop={handleStopAI}
                isManualUploadMode={isManualUploadMode}
                onToggleManualUploadMode={() => setIsManualUploadMode(!isManualUploadMode)}
                suggestedPrompts={suggestedPrompts}
                onSuggestedPromptClick={handleSuggestedPromptClick}
                activeSession={session}
                onToggleActiveSession={handleToggleActiveSession}
                initialMessage={currentInputMessage}
                onMessageChange={handleInputMessageChange}
              />
            </div>
        </div>
      </div>

      {/* Settings Modal */}
      <SettingsModal
        isOpen={settingsOpen}
        onClose={() => setSettingsOpen(false)}
        user={currentUser}
      />

      {/* Credit Modal */}
      <CreditModal
        isOpen={creditModalOpen}
        onClose={handleCreditModalClose}
        onUpgrade={handleUpgrade}
        user={currentUser}
      />

      {/* Connection Modal */}
      <ConnectionModal
        isOpen={connectionModalOpen}
        onClose={handleConnectionModalClose}
        onConnect={handleConnect}
        onDisconnect={handleDisconnect}
        status={connectionStatus}
        error={connectionError}
        connectionCode={connectionCode}
        lastSuccessfulConnection={lastSuccessfulConnection}
      />

      {/* Hands-Free Modal */}
      <HandsFreeModal
        isOpen={handsFreeModalOpen}
        onClose={handleHandsFreeModalClose}
        isHandsFree={isHandsFreeMode}
        onToggleHandsFree={handleToggleHandsFreeFromModal}
      />

      {/* Add Game Modal */}
      <AddGameModal
        isOpen={addGameModalOpen}
        onClose={() => setAddGameModalOpen(false)}
        onCreateGame={handleCreateGame}
      />

      {/* Settings Context Menu */}
      <SettingsContextMenu
        isOpen={settingsContextMenu.isOpen}
        position={settingsContextMenu.position}
        onClose={closeSettingsContextMenu}
        onOpenSettings={handleOpenSettings}
        onOpenGuide={handleOpenGuide}
        onLogout={handleLogout}
        userTier={currentUser.tier}
        onTrialStart={async () => {
          // Refresh user data after trial starts
          await authService.refreshUser();
          const refreshedUser = authService.getCurrentUser();
          if (refreshedUser) {
            setUser(refreshedUser);
          }
        }}
      />
    </div>
  );
};

export default MainApp;


```n

## src\constants\index.ts

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\constants\index.ts.Extension.TrimStart('.'))

export const USER_TIERS = {
  FREE: 'free',
  PRO: 'pro',
  VANGUARD_PRO: 'vanguard_pro',
} as const;

export const TIER_LIMITS = {
  [USER_TIERS.FREE]: { text: 55, image: 25 },
  [USER_TIERS.PRO]: { text: 1583, image: 328 },
  [USER_TIERS.VANGUARD_PRO]: { text: 1583, image: 328 },
} as const;

export const TIER_FEATURES = {
  [USER_TIERS.FREE]: [
    '55 text queries per month',
    '25 image queries per month',
    'Basic conversation features',
    'Standard response quality'
  ],
  [USER_TIERS.PRO]: [
    '1,583 text queries per month',
    '328 image queries per month',
    'Enhanced conversation features',
    'Improved response quality',
    'Priority support',
    'No ads',
    'Grounding search enabled'
  ],
  [USER_TIERS.VANGUARD_PRO]: [
    '1,583 text queries per month',
    '328 image queries per month',
    'All Pro features',
    'Exclusive Vanguard content',
    'VIP support',
    'Early access to new features',
    'Grounding search enabled'
  ],
} as const;

export const TIER_PRICES = {
  [USER_TIERS.FREE]: undefined,
  [USER_TIERS.PRO]: 3.99,
  [USER_TIERS.VANGUARD_PRO]: 20.00,
} as const;

export const STORAGE_KEYS = {
  USER: 'otakon_user',
  APP_STATE: 'otakon_app_state',
  CONVERSATIONS: 'otakon_conversations',
  GAMES: 'otakon_games',
  WAITLIST: 'otakon_waitlist',
  USAGE: 'otakon_usage',
  PREFERENCES: 'otakon_preferences',
  ONBOARDING: 'otakon_onboarding',
  TRIAL: 'otakon_trial',
} as const;

export const GAME_HUB_ID = 'game-hub';
export const DEFAULT_CONVERSATION_TITLE = 'Game Hub';


```n

## src\hooks\useActiveSession.ts

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\hooks\useActiveSession.ts.Extension.TrimStart('.'))

import { useState, useCallback } from 'react';

export interface ActiveSessionState {
  isActive: boolean;
  currentGameId?: string; // Corresponds to conversation.id
}

export const useActiveSession = (initialState: ActiveSessionState = { isActive: false }) => {
  const [session, setSession] = useState<ActiveSessionState>(initialState);

  const toggleSession = useCallback((conversationId: string) => {
    setSession(prevSession => {
      // If toggling off, or switching to a new game's session
      if (prevSession.isActive && prevSession.currentGameId === conversationId) {
        return { isActive: false };
      } else {
        return { isActive: true, currentGameId: conversationId };
      }
    });
  }, []);

  const setActiveSession = useCallback((conversationId: string, isActive: boolean) => {
    setSession({
      isActive,
      currentGameId: isActive ? conversationId : undefined
    });
  }, []);

  return { 
    session, 
    toggleSession, 
    setActiveSession 
  };
};


```n

## src\hooks\useAppState.ts

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\hooks\useAppState.ts.Extension.TrimStart('.'))

import { useState, useCallback, useMemo } from 'react';
import { AuthState, AppState, ConnectionStatus } from '../types';

// UI State interface for modal and UI-specific state
interface UIState {
  activeModal: string | null;
  settingsOpen: boolean;
  showLogoutConfirm: boolean;
  isInitializing: boolean;
  connectionStatus: ConnectionStatus;
  connectionError: string | null;
}

// Initial state values
const initialAuthState: AuthState = {
  user: null,
  isLoading: true,
  error: null,
};

const initialAppState: AppState = {
  view: 'landing',
  onboardingStatus: 'initial',
  activeSubView: 'chat',
  isConnectionModalOpen: false,
  isHandsFreeModalOpen: false,
  isSettingsModalOpen: false,
  isCreditModalOpen: false,
  isOtakuDiaryModalOpen: false,
  isWishlistModalOpen: false,
  activeModal: null,
  isHandsFreeMode: false,
  showUpgradeScreen: false,
  showDailyCheckin: false,
  currentAchievement: null,
  loadingMessages: [],
  isCooldownActive: false,
  isFirstTime: true,
  contextMenu: null,
  feedbackModalState: null,
  confirmationModal: null,
  trialEligibility: null,
};

const initialUIState: UIState = {
  activeModal: null,
  settingsOpen: false,
  showLogoutConfirm: false,
  isInitializing: true,
  connectionStatus: ConnectionStatus.DISCONNECTED,
  connectionError: null,
};

/**
 * Custom hook for managing app state
 * Consolidates related state variables and provides optimized update methods
 */
export const useAppState = () => {
  // Core state
  const [authState, setAuthState] = useState<AuthState>(initialAuthState);
  const [appState, setAppState] = useState<AppState>(initialAppState);
  const [uiState, setUIState] = useState<UIState>(initialUIState);
  const [hasEverLoggedIn, setHasEverLoggedIn] = useState(false);

  // Optimized update methods
  const updateAuth = useCallback((updates: Partial<AuthState>) => {
    setAuthState(prev => ({ ...prev, ...updates }));
  }, []);

  const updateApp = useCallback((updates: Partial<AppState>) => {
    setAppState(prev => ({ ...prev, ...updates }));
  }, []);

  const updateUI = useCallback((updates: Partial<UIState>) => {
    setUIState(prev => ({ ...prev, ...updates }));
  }, []);

  // Computed values
  const isAuthenticated = useMemo(() => {
    return !!authState.user && !authState.isLoading;
  }, [authState.user, authState.isLoading]);

  const isOnboardingComplete = useMemo(() => {
    return appState.onboardingStatus === 'complete';
  }, [appState.onboardingStatus]);

  const shouldShowMainApp = useMemo(() => {
    return isAuthenticated && isOnboardingComplete;
  }, [isAuthenticated, isOnboardingComplete]);

  // Reset methods
  const resetAuth = useCallback(() => {
    setAuthState(initialAuthState);
  }, []);

  const resetApp = useCallback(() => {
    setAppState(initialAppState);
  }, []);

  const resetUI = useCallback(() => {
    setUIState(initialUIState);
  }, []);

  const resetAll = useCallback(() => {
    resetAuth();
    resetApp();
    resetUI();
    setHasEverLoggedIn(false);
  }, [resetAuth, resetApp, resetUI]);

  return {
    // State
    authState,
    appState,
    uiState,
    hasEverLoggedIn,
    
    // Update methods
    updateAuth,
    updateApp,
    updateUI,
    setHasEverLoggedIn,
    
    // Computed values
    isAuthenticated,
    isOnboardingComplete,
    shouldShowMainApp,
    
    // Reset methods
    resetAuth,
    resetApp,
    resetUI,
    resetAll,
  };
};


```n

## src\lib\db.js

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\lib\db.js.Extension.TrimStart('.'))

import postgres from 'postgres'

const connectionString = process.env.DATABASE_URL
const sql = postgres(connectionString)

export default sql

```n

## src\lib\supabase.ts

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\lib\supabase.ts.Extension.TrimStart('.'))

import { createClient } from '@supabase/supabase-js';

const supabaseUrl = (import.meta as any).env.VITE_SUPABASE_URL || 'https://qajcxgkqloumogioomiz.supabase.co';
const supabaseAnonKey = (import.meta as any).env.VITE_SUPABASE_ANON_KEY || 'sb_publishable_GoW6G_umt1lFF-KPbbm-Ow_D2PYxPLw';

console.log('Supabase URL:', supabaseUrl);
console.log('Supabase Key:', supabaseAnonKey ? 'Present' : 'Missing');
console.log('Supabase Key (first 10 chars):', supabaseAnonKey ? supabaseAnonKey.substring(0, 10) + '...' : 'Missing');

export const supabase = createClient(supabaseUrl, supabaseAnonKey, {
  auth: {
    autoRefreshToken: true,
    persistSession: true,
    detectSessionInUrl: true
  }
});

// Database types
export interface Database {
  public: {
    Tables: {
      users: {
        Row: {
          id: string;
          auth_user_id: string;
          email: string;
          full_name: string | null;
          avatar_url: string | null;
          tier: 'free' | 'pro' | 'vanguard_pro';
          has_profile_setup: boolean;
          has_seen_splash_screens: boolean;
          has_welcome_message: boolean;
          is_new_user: boolean;
          has_used_trial: boolean;
          trial_started_at: string | null;
          trial_expires_at: string | null;
          last_activity: string;
          preferences: Record<string, any>;
          usage: Record<string, any>;
          app_state: Record<string, any>;
          profile_data: Record<string, any>;
          onboarding_data: Record<string, any>;
          behavior_data: Record<string, any>;
          feedback_data: Record<string, any>;
          usage_data: Record<string, any>;
          created_at: string;
          updated_at: string;
          deleted_at: string | null;
        };
        Insert: {
          id?: string;
          auth_user_id: string;
          email: string;
          full_name?: string | null;
          avatar_url?: string | null;
          tier?: 'free' | 'pro' | 'vanguard_pro';
          has_profile_setup?: boolean;
          has_seen_splash_screens?: boolean;
          has_welcome_message?: boolean;
          is_new_user?: boolean;
          has_used_trial?: boolean;
          trial_started_at?: string | null;
          trial_expires_at?: string | null;
          last_activity?: string;
          preferences?: Record<string, any>;
          usage?: Record<string, any>;
          app_state?: Record<string, any>;
          profile_data?: Record<string, any>;
          onboarding_data?: Record<string, any>;
          behavior_data?: Record<string, any>;
          feedback_data?: Record<string, any>;
          usage_data?: Record<string, any>;
          created_at?: string;
          updated_at?: string;
          deleted_at?: string | null;
        };
        Update: {
          id?: string;
          auth_user_id?: string;
          email?: string;
          full_name?: string | null;
          avatar_url?: string | null;
          tier?: 'free' | 'pro' | 'vanguard_pro';
          has_profile_setup?: boolean;
          has_seen_splash_screens?: boolean;
          has_welcome_message?: boolean;
          is_new_user?: boolean;
          has_used_trial?: boolean;
          trial_started_at?: string | null;
          trial_expires_at?: string | null;
          last_activity?: string;
          preferences?: Record<string, any>;
          usage?: Record<string, any>;
          app_state?: Record<string, any>;
          profile_data?: Record<string, any>;
          onboarding_data?: Record<string, any>;
          behavior_data?: Record<string, any>;
          feedback_data?: Record<string, any>;
          usage_data?: Record<string, any>;
          created_at?: string;
          updated_at?: string;
          deleted_at?: string | null;
        };
      };
      conversations: {
        Row: {
          id: string;
          user_id: string;
          game_id: string | null;
          title: string;
          messages: Record<string, any>[];
          is_active: boolean;
          created_at: string;
          updated_at: string;
        };
        Insert: {
          id: string;
          user_id: string;
          game_id?: string | null;
          title: string;
          messages?: Record<string, any>[];
          is_active?: boolean;
          created_at?: string;
          updated_at?: string;
        };
        Update: {
          id?: string;
          user_id?: string;
          game_id?: string | null;
          title?: string;
          messages?: Record<string, any>[];
          is_active?: boolean;
          created_at?: string;
          updated_at?: string;
        };
      };
      games: {
        Row: {
          id: string;
          title: string;
          description: string | null;
          genre: string | null;
          platform: string | null;
          release_date: string | null;
          rating: number | null;
          image_url: string | null;
          metadata: Record<string, any>;
          created_at: string;
          updated_at: string;
        };
        Insert: {
          id: string;
          title: string;
          description?: string | null;
          genre?: string | null;
          platform?: string | null;
          release_date?: string | null;
          rating?: number | null;
          image_url?: string | null;
          metadata?: Record<string, any>;
          created_at?: string;
          updated_at?: string;
        };
        Update: {
          id?: string;
          title?: string;
          description?: string | null;
          genre?: string | null;
          platform?: string | null;
          release_date?: string | null;
          rating?: number | null;
          image_url?: string | null;
          metadata?: Record<string, any>;
          created_at?: string;
          updated_at?: string;
        };
      };
      waitlist: {
        Row: {
          id: string;
          email: string;
          source: string;
          created_at: string;
        };
        Insert: {
          id?: string;
          email: string;
          source?: string;
          created_at?: string;
        };
        Update: {
          id?: string;
          email?: string;
          source?: string;
          created_at?: string;
        };
      };
      user_usage: {
        Row: {
          id: string;
          user_id: string;
          text_count: number;
          image_count: number;
          text_limit: number;
          image_limit: number;
          total_requests: number;
          last_reset: string;
          created_at: string;
          updated_at: string;
        };
        Insert: {
          id?: string;
          user_id: string;
          text_count?: number;
          image_count?: number;
          text_limit?: number;
          image_limit?: number;
          total_requests?: number;
          last_reset?: string;
          created_at?: string;
          updated_at?: string;
        };
        Update: {
          id?: string;
          user_id?: string;
          text_count?: number;
          image_count?: number;
          text_limit?: number;
          image_limit?: number;
          total_requests?: number;
          last_reset?: string;
          created_at?: string;
          updated_at?: string;
        };
      };
    };
    Functions: {
      check_and_expire_trials: {
        Args: Record<PropertyKey, never>;
        Returns: undefined;
      };
      create_user_record: {
        Args: Record<PropertyKey, never>;
        Returns: undefined;
      };
      update_user_usage: {
        Args: {
          p_user_id: string;
          p_text_count?: number;
          p_image_count?: number;
        };
        Returns: undefined;
      };
      get_user_tier_limits: {
        Args: {
          p_user_id: string;
        };
        Returns: {
          text_limit: number;
          image_limit: number;
        }[];
      };
      start_free_trial: {
        Args: {
          p_user_id: string;
        };
        Returns: boolean;
      };
      save_conversation: {
        Args: {
          p_conversation_id: string;
          p_user_id: string;
          p_title: string;
          p_messages: Record<string, any>;
          p_game_id?: string;
        };
        Returns: undefined;
      };
      load_conversations: {
        Args: {
          p_user_id: string;
        };
        Returns: {
          id: string;
          title: string;
          messages: Record<string, any>;
          game_id: string | null;
          is_active: boolean;
          created_at: string;
          updated_at: string;
        }[];
      };
      get_complete_user_data: {
        Args: {
          p_auth_user_id: string;
        };
        Returns: {
          user_id: string;
          email: string;
          tier: string;
          has_used_trial: boolean;
          trial_expires_at: string | null;
          text_count: number;
          image_count: number;
          text_limit: number;
          image_limit: number;
          preferences: Record<string, any>;
          app_state: Record<string, any>;
          profile_data: Record<string, any>;
        }[];
      };
    };
  };
}


```n

## src\services\aiService.ts

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\services\aiService.ts.Extension.TrimStart('.'))

import { GoogleGenerativeAI, GenerativeModel, SchemaType, HarmCategory, HarmBlockThreshold, SafetySetting } from "@google/generative-ai";
import { parseOtakonTags } from './otakonTags';
import { AIResponse, Conversation, User, insightTabsConfig, PlayerProfile } from '../types';
import { cacheService } from './cacheService';
import { getPromptForPersona } from './promptSystem';
import { errorRecoveryService } from './errorRecoveryService';
import { characterImmersionService } from './characterImmersionService';
import { profileAwareTabService } from './profileAwareTabService';
import { toastService } from './toastService';

const API_KEY = (import.meta as any).env.VITE_GEMINI_API_KEY;

// âœ… FIX 1: Gemini API Safety Settings
const SAFETY_SETTINGS: SafetySetting[] = [
  {
    category: HarmCategory.HARM_CATEGORY_HARASSMENT,
    threshold: HarmBlockThreshold.BLOCK_MEDIUM_AND_ABOVE,
  },
  {
    category: HarmCategory.HARM_CATEGORY_HATE_SPEECH,
    threshold: HarmBlockThreshold.BLOCK_MEDIUM_AND_ABOVE,
  },
  {
    category: HarmCategory.HARM_CATEGORY_SEXUALLY_EXPLICIT,
    threshold: HarmBlockThreshold.BLOCK_MEDIUM_AND_ABOVE,
  },
  {
    category: HarmCategory.HARM_CATEGORY_DANGEROUS_CONTENT,
    threshold: HarmBlockThreshold.BLOCK_MEDIUM_AND_ABOVE,
  },
];

class AIService {
  private genAI: GoogleGenerativeAI;
  private flashModel: GenerativeModel;
  private proModel: GenerativeModel;

  constructor() {
    if (!API_KEY) {
      throw new Error("VITE_GEMINI_API_KEY is not set in the environment variables.");
    }
    this.genAI = new GoogleGenerativeAI(API_KEY);
    // Using the latest preview models (September 2025) for enhanced performance
    // âœ… FIX 2: Apply safety settings to all model initializations
    this.flashModel = this.genAI.getGenerativeModel({ 
      model: "gemini-2.5-flash-lite-preview-09-2025",
      safetySettings: SAFETY_SETTINGS
    });
    this.proModel = this.genAI.getGenerativeModel({ 
      model: "gemini-2.5-flash-preview-09-2025",
      safetySettings: SAFETY_SETTINGS
    });
  }

  /**
   * âœ… FIX 3: Check if AI response was blocked by safety filters
   */
  private checkSafetyResponse(result: any): { safe: boolean; reason?: string } {
    // Check if prompt was blocked
    if (result.response.promptFeedback?.blockReason) {
      return {
        safe: false,
        reason: `Content blocked: ${result.response.promptFeedback.blockReason}`
      };
    }
    
    // Check if response was blocked by safety filters
    const candidate = result.response.candidates?.[0];
    if (!candidate) {
      return {
        safe: false,
        reason: 'No response generated'
      };
    }
    
    if (candidate.finishReason === 'SAFETY') {
      return {
        safe: false,
        reason: 'Response blocked by safety filters'
      };
    }
    
    return { safe: true };
  }

  /**
   * Main method to get AI chat response
   */
  public async getChatResponse(
    conversation: Conversation,
    user: User,
    userMessage: string,
    isActiveSession: boolean,
    hasImages: boolean = false,
    imageData?: string,
    abortSignal?: AbortSignal
  ): Promise<AIResponse> {
    // âœ… QUERY LIMIT: Check if user can send this query
    const { ConversationService } = await import('./conversationService');
    const queryCheck = hasImages 
      ? await ConversationService.canSendImageQuery()
      : await ConversationService.canSendTextQuery();
    
    if (!queryCheck.allowed) {
      // Throw error with upgrade prompt
      throw new Error(queryCheck.reason || 'Query limit reached. Please upgrade your tier.');
    }
    
    console.log(`ðŸ“Š [AIService] Query limit check passed. ${hasImages ? 'Image' : 'Text'} queries: ${queryCheck.used}/${queryCheck.limit}`);
    
    // Create cache key for this request
    const cacheKey = `ai_response_${conversation.id}_${userMessage.substring(0, 50)}_${isActiveSession}`;
    
    // Check cache first (memory only for speed - skip Supabase for real-time operations)
    const cachedResponse = await cacheService.get<AIResponse>(cacheKey, true); // true = memory only
    if (cachedResponse) {
      return { ...cachedResponse, metadata: { ...cachedResponse.metadata, fromCache: true } };
    }

    // Skip session context for now - it's returning null and slowing things down
    // TODO: Implement proper session context when needed
    let sessionContext = '';

    // Get player profile from user preferences
    const playerProfile = user.profileData as any; // PlayerProfile is stored in profileData
    
    // Use the enhanced prompt system with session context and player profile
    const basePrompt = getPromptForPersona(
      conversation, 
      userMessage, 
      user, 
      isActiveSession, 
      hasImages,
      playerProfile
    );
    
    // Add immersion context for game conversations (not Game Hub)
    let immersionContext = '';
    if (!conversation.isGameHub && conversation.gameTitle && conversation.genre) {
      immersionContext = characterImmersionService.generateImmersionContext({
        gameTitle: conversation.gameTitle,
        genre: conversation.genre,
        currentLocation: conversation.activeObjective,
        playerProgress: conversation.gameProgress
      });
    }
    
    const prompt = basePrompt + sessionContext + '\n\n' + immersionContext;
    
    console.log('ðŸ¤– [AIService] Processing request:', { 
      hasImages, 
      hasImageData: !!imageData, 
      imageDataLength: imageData?.length,
      conversationId: conversation.id 
    });
    
    // Check if request was aborted before starting
    if (abortSignal?.aborted) {
      throw new DOMException('Request was aborted', 'AbortError');
    }
    
    try {
      // Use flash model for all conversations (could differentiate in future)
      const modelToUse = this.flashModel;
      
      // Prepare content for Gemini API
      let content: any;
      if (hasImages && imageData) {
        // Extract MIME type from data URL
        const mimeType = imageData.split(';')[0].split(':')[1] || 'image/jpeg';
        const base64Data = imageData.split(',')[1];
        
        // For image analysis, we need to send both text and image
        content = [
          {
            text: prompt
          },
          {
            inlineData: {
              mimeType: mimeType,
              data: base64Data
            }
          }
        ];
      } else {
        // For text-only requests
        content = prompt;
      }
      
      const result = await modelToUse.generateContent(content);
      
      // âœ… FIX 4: Check safety response
      const safetyCheck = this.checkSafetyResponse(result);
      if (!safetyCheck.safe) {
        toastService.error('Unable to generate response due to content policy');
        throw new Error(safetyCheck.reason);
      }
      
      // Check if request was aborted after API call but before processing
      if (abortSignal?.aborted) {
        throw new DOMException('Request was aborted', 'AbortError');
      }
      
      const rawContent = await result.response.text();
      const { cleanContent, tags } = parseOtakonTags(rawContent);

      const aiResponse: AIResponse = {
        content: cleanContent,
        suggestions: [],
        otakonTags: tags,
        rawContent: rawContent,
        metadata: {
          model: 'gemini-flash',
          timestamp: Date.now(),
          cost: 0, // Placeholder
          tokens: 0, // Placeholder
        }
      };
      
      // âœ… QUERY TRACKING: Record usage in database (non-blocking)
      const { SupabaseService } = await import('./supabaseService');
      const supabaseService = SupabaseService.getInstance();
      supabaseService.recordQuery(user.authUserId, hasImages ? 'image' : 'text')
        .catch(error => console.warn('Failed to record query usage:', error));
      
      // Invalidate user cache so next request gets fresh usage data
      const { authService } = await import('./authService');
      authService.refreshUser()
        .catch(error => console.warn('Failed to refresh user after query:', error));
      
      // Cache the response for 1 hour (non-blocking - fire and forget)
      cacheService.set(cacheKey, aiResponse, 60 * 60 * 1000)
        .catch(error => console.warn('Failed to cache AI response:', error));
      
      return aiResponse;

    } catch (error) {
      console.error("AI Service Error:", error);
      
      // âœ… FIX 4: Enhanced error handling for safety blocks
      const errorMessage = (error as Error).message || '';
      if (errorMessage.includes('blocked') || errorMessage.includes('SAFETY') || errorMessage.includes('content policy')) {
        toastService.error('Your message contains inappropriate content');
        throw new Error('Content blocked by safety filters');
      }
      
      toastService.error('AI response failed. Please try again.');
      
      // Use error recovery service
      const recoveryAction = await errorRecoveryService.handleAIError(
        error as Error,
        {
          operation: 'getChatResponse',
          conversationId: conversation.id,
          userId: user.id,
          timestamp: Date.now(),
          retryCount: 0
        }
      );
      
      if (recoveryAction.type === 'retry') {
        // Retry the request
        return this.getChatResponse(conversation, user, userMessage, isActiveSession, hasImages, imageData, abortSignal);
      } else if (recoveryAction.type === 'user_notification') {
        // Return a user-friendly error response
        return {
          content: recoveryAction.message || "I'm having trouble thinking right now. Please try again later.",
          suggestions: ["Try again", "Check your connection", "Contact support"],
          otakonTags: new Map(),
          rawContent: recoveryAction.message || "Error occurred",
          metadata: {
            model: 'error',
            timestamp: Date.now(),
            cost: 0,
            tokens: 0
          }
        };
      }
      
      throw new Error("Failed to get response from AI service.");
    }
  }

  /**
   * Enhanced method to get AI chat response with structured data
   * Returns enhanced AIResponse with optional fields for better integration
   * Falls back to OTAKON_TAG parsing if JSON mode fails
   */
  public async getChatResponseWithStructure(
    conversation: Conversation,
    user: User,
    userMessage: string,
    isActiveSession: boolean,
    hasImages: boolean = false,
    imageData?: string,
    abortSignal?: AbortSignal
  ): Promise<AIResponse> {
    // Create cache key for this request
    const cacheKey = `ai_structured_${conversation.id}_${userMessage.substring(0, 50)}_${isActiveSession}`;
    
    // Check cache first
    const cachedResponse = await cacheService.get<AIResponse>(cacheKey, true);
    if (cachedResponse) {
      return { ...cachedResponse, metadata: { ...cachedResponse.metadata, fromCache: true } };
    }

    // Get enhanced prompt with context
    const basePrompt = getPromptForPersona(conversation, userMessage, user, isActiveSession, hasImages);
    
    // Add immersion context for game conversations (not Game Hub)
    let immersionContext = '';
    if (!conversation.isGameHub && conversation.gameTitle && conversation.genre) {
      immersionContext = characterImmersionService.generateImmersionContext({
        gameTitle: conversation.gameTitle,
        genre: conversation.genre,
        currentLocation: conversation.activeObjective,
        playerProgress: conversation.gameProgress
      });
    }

    // Add structured response instructions
    const structuredInstructions = `

**ENHANCED RESPONSE FORMAT:**
In addition to your regular response, provide structured data in the following optional fields:

1. **followUpPrompts** (array of 3-4 strings): Generate contextual follow-up questions directly related to your response content
   ${!conversation.isGameHub ? `
   - Session Mode: ${isActiveSession ? 'PLAYING MODE - User is actively playing' : 'PLANNING MODE - User is preparing/strategizing'}
   - ${isActiveSession 
       ? 'Generate immediate, actionable prompts (e.g., "How do I beat this boss?", "What should I do next?")'
       : 'Generate strategic, planning prompts (e.g., "What should I prepare?", "What builds are recommended?")'
     }` : ''}
2. **progressiveInsightUpdates** (array): If conversation provides new info, update existing subtabs (e.g., story_so_far, characters)
3. **stateUpdateTags** (array): Detect game events (e.g., "OBJECTIVE_COMPLETE: true", "TRIUMPH: Boss Name")
4. **gamePillData** (object): ${conversation.isGameHub ? 'Set shouldCreate: true if user asks about a specific game, and include game details with pre-filled wikiContent' : 'Set shouldCreate: false (already in game tab)'}

Note: These are optional enhancements. If not applicable, omit or return empty arrays.
`;
    
    const prompt = basePrompt + immersionContext + structuredInstructions;
    
    console.log('ðŸ¤– [AIService] Processing structured request:', { 
      hasImages, 
      conversationId: conversation.id,
      useStructuredMode: !hasImages // Only use JSON mode for text
    });
    
    // Check if request was aborted
    if (abortSignal?.aborted) {
      throw new DOMException('Request was aborted', 'AbortError');
    }
    
    try {
      const modelToUse = this.flashModel;
      
      // Prepare content
      let content: any;
      if (hasImages && imageData) {
        const mimeType = imageData.split(';')[0].split(':')[1] || 'image/jpeg';
        const base64Data = imageData.split(',')[1];
        
        content = [
          { text: prompt },
          { inlineData: { mimeType, data: base64Data } }
        ];
        
        // For images, use regular mode (not JSON) because images don't work well with JSON schema
        const result = await modelToUse.generateContent(content);
        const rawContent = await result.response.text();
        const { cleanContent, tags } = parseOtakonTags(rawContent);
        
        const aiResponse: AIResponse = {
          content: cleanContent,
          suggestions: tags.get('SUGGESTIONS') || [],
          otakonTags: tags,
          rawContent: rawContent,
          metadata: {
            model: 'gemini-2.5-flash-lite-preview-09-2025',
            timestamp: Date.now(),
            cost: 0,
            tokens: 0,
          }
        };
        
        cacheService.set(cacheKey, aiResponse, 60 * 60 * 1000).catch(err => console.warn(err));
        return aiResponse;
      }
      
      // For text-only, try JSON schema mode for structured response
      try {
        const result = await modelToUse.generateContent({
          contents: [{ role: 'user', parts: [{ text: prompt }] }],
          generationConfig: {
            responseMimeType: "application/json",
            responseSchema: {
              type: SchemaType.OBJECT,
              properties: {
                content: { type: SchemaType.STRING, description: "The main chat response for the user" },
                followUpPrompts: { 
                  type: SchemaType.ARRAY, 
                  items: { type: SchemaType.STRING },
                  description: "3-4 contextual follow-up questions"
                },
                progressiveInsightUpdates: {
                  type: SchemaType.ARRAY,
                  items: {
                    type: SchemaType.OBJECT,
                    properties: {
                      tabId: { type: SchemaType.STRING },
                      title: { type: SchemaType.STRING },
                      content: { type: SchemaType.STRING }
                    }
                  }
                },
                stateUpdateTags: {
                  type: SchemaType.ARRAY,
                  items: { type: SchemaType.STRING }
                },
                gamePillData: {
                  type: SchemaType.OBJECT,
                  properties: {
                    shouldCreate: { type: SchemaType.BOOLEAN },
                    gameName: { type: SchemaType.STRING },
                    genre: { type: SchemaType.STRING },
                    wikiContent: { 
                      type: SchemaType.STRING,
                      description: "JSON string containing pre-filled subtab content"
                    }
                  }
                }
              },
              required: ["content"]
            }
          }
        });
        
        // âœ… FIX 5: Check safety response
        const safetyCheck = this.checkSafetyResponse(result);
        if (!safetyCheck.safe) {
          toastService.error('Unable to generate response due to content policy');
          throw new Error(safetyCheck.reason);
        }
        
        const rawResponse = await result.response.text();
        const structuredData = JSON.parse(rawResponse);
        
        // âœ… Clean content: Remove any JSON-like structured data from the main content
        let cleanContent = structuredData.content || '';
        
        // Remove structured fields if AI accidentally includes them in content
        // This handles cases where AI outputs: "Hint: ... followUpPrompts: [...]"
        cleanContent = cleanContent
          // Remove followUpPrompts section
          .replace(/followUpPrompts:\s*\[[\s\S]*?\](?=\s*(?:progressiveInsightUpdates|stateUpdateTags|gamePillData|$))/gi, '')
          // Remove progressiveInsightUpdates section
          .replace(/progressiveInsightUpdates:\s*\[[\s\S]*?\](?=\s*(?:followUpPrompts|stateUpdateTags|gamePillData|$))/gi, '')
          // Remove stateUpdateTags section
          .replace(/stateUpdateTags:\s*\[[\s\S]*?\](?=\s*(?:followUpPrompts|progressiveInsightUpdates|gamePillData|$))/gi, '')
          // Remove gamePillData section (most complex - handles multi-line objects)
          .replace(/gamePillData:\s*\{[\s\S]*?\}(?=\s*$)/gi, '')
          // Clean up any remaining JSON artifacts
          .replace(/\{[\s\S]*?"OTAKON_[A-Z_]+":[\s\S]*?\}/g, '')
          // Remove excessive newlines
          .replace(/\n{3,}/g, '\n\n')
          .trim();
        
        // Parse wikiContent if it's a JSON string
        let gamePillData = structuredData.gamePillData;
        if (gamePillData && typeof gamePillData.wikiContent === 'string') {
          try {
            gamePillData = {
              ...gamePillData,
              wikiContent: JSON.parse(gamePillData.wikiContent)
            };
          } catch {
            // If parsing fails, keep it as is
            console.warn('Failed to parse wikiContent as JSON');
          }
        }
        
        // Build enhanced AIResponse
        const aiResponse: AIResponse = {
          content: cleanContent,
          suggestions: structuredData.followUpPrompts || [],
          otakonTags: new Map(), // Empty for JSON mode
          rawContent: rawResponse,
          metadata: {
            model: 'gemini-2.5-flash-lite-preview-09-2025',
            timestamp: Date.now(),
            cost: 0,
            tokens: 0,
          },
          // Enhanced fields
          followUpPrompts: structuredData.followUpPrompts,
          progressiveInsightUpdates: structuredData.progressiveInsightUpdates,
          stateUpdateTags: structuredData.stateUpdateTags,
          gamePillData
        };
        
        cacheService.set(cacheKey, aiResponse, 60 * 60 * 1000).catch(err => console.warn(err));
        return aiResponse;
        
      } catch (jsonError) {
        console.warn('JSON mode failed, falling back to OTAKON_TAG parsing:', jsonError);
        
        // Fallback to regular OTAKON_TAG parsing
        const result = await modelToUse.generateContent(prompt);
        
        // âœ… FIX 5: Check safety response in fallback
        const safetyCheck = this.checkSafetyResponse(result);
        if (!safetyCheck.safe) {
          toastService.error('Unable to generate response due to content policy');
          throw new Error(safetyCheck.reason);
        }
        
        const rawContent = await result.response.text();
        const { cleanContent, tags } = parseOtakonTags(rawContent);
        
        const aiResponse: AIResponse = {
          content: cleanContent,
          suggestions: tags.get('SUGGESTIONS') || [],
          otakonTags: tags,
          rawContent: rawContent,
          metadata: {
            model: 'gemini-2.5-flash-lite-preview-09-2025',
            timestamp: Date.now(),
            cost: 0,
            tokens: 0,
          }
        };
        
        cacheService.set(cacheKey, aiResponse, 60 * 60 * 1000).catch(err => console.warn(err));
        return aiResponse;
      }
      
    } catch (error) {
      console.error("Structured AI Service Error:", error);
      
      // âœ… FIX 5: Enhanced error handling for safety blocks
      const errorMessage = (error as Error).message || '';
      if (errorMessage.includes('blocked') || errorMessage.includes('SAFETY') || errorMessage.includes('content policy')) {
        toastService.error('Your message contains inappropriate content');
        throw new Error('Content blocked by safety filters');
      }
      
      toastService.error('AI response failed. Please try again.');
      
      // Use error recovery
      const recoveryAction = await errorRecoveryService.handleAIError(
        error as Error,
        {
          operation: 'getChatResponseWithStructure',
          conversationId: conversation.id,
          userId: user.id,
          timestamp: Date.now(),
          retryCount: 0
        }
      );
      
      if (recoveryAction.type === 'retry') {
        return this.getChatResponseWithStructure(conversation, user, userMessage, isActiveSession, hasImages, imageData, abortSignal);
      } else if (recoveryAction.type === 'user_notification') {
        return {
          content: recoveryAction.message || "I'm having trouble thinking right now. Please try again later.",
          suggestions: ["Try again", "Check your connection", "Contact support"],
          otakonTags: new Map(),
          rawContent: recoveryAction.message || "Error occurred",
          metadata: {
            model: 'error',
            timestamp: Date.now(),
            cost: 0,
            tokens: 0
          }
        };
      }
      
      throw new Error("Failed to get structured response from AI service.");
    }
  }

  /**
   * Generates initial sub-tab content for a new game
   */
  public async generateInitialInsights(
    gameTitle: string, 
    genre: string,
    playerProfile?: PlayerProfile
  ): Promise<Record<string, string>> {
    const cacheKey = `insights_${gameTitle.toLowerCase().replace(/\s+/g, '-')}`;
    
    // Check cache first
    const cachedInsights = await cacheService.get<Record<string, string>>(cacheKey);
    if (cachedInsights) {
      return cachedInsights;
    }

    const config = insightTabsConfig[genre] || insightTabsConfig['Default'];
    const instructions = config
      .map(tab => `- ${tab.title} (${tab.id}): ${tab.instruction}`)
      .join('\n');

    // Get player profile context if available
    const profile = playerProfile || profileAwareTabService.getDefaultProfile();
    const profileContext = profileAwareTabService.buildProfileContext(profile);

    const prompt = `
      **Task:** Generate initial content for ${gameTitle} (${genre} game)
      **Format:** Respond with a single JSON object where keys are tab IDs and values are content strings
      
      **Player Profile:**
      ${profileContext}
      
      **Instructions:**
      ${instructions}
      
      **Rules:**
      - Content must be concise, spoiler-free, and suitable for new players
      - Output must be valid JSON: {"walkthrough":"content","tips":"content",...}
      - Each content should be 2-3 paragraphs maximum
      - Use markdown formatting for better readability
      - **IMPORTANT: Adapt content style based on the Player Profile above**
    `;

    try {
      const result = await this.proModel.generateContent(prompt);
      
      // âœ… FIX 6: Check safety response
      const safetyCheck = this.checkSafetyResponse(result);
      if (!safetyCheck.safe) {
        toastService.error('Unable to generate insights due to content policy');
        throw new Error(safetyCheck.reason);
      }
      
      const rawJson = await result.response.text();
      const cleanedJson = rawJson.replace(/```json\n?|\n?```/g, '').trim();
      const insights = JSON.parse(cleanedJson);

      // Cache for 24 hours
      await cacheService.set(cacheKey, insights, 24 * 60 * 60 * 1000);
      return insights;

    } catch (error) {
      console.error("Failed to generate initial insights:", error);
      
      // âœ… FIX 6: Enhanced error handling for safety blocks
      const errorMessage = (error as Error).message || '';
      if (errorMessage.includes('blocked') || errorMessage.includes('SAFETY') || errorMessage.includes('content policy')) {
        toastService.warning('Unable to generate insights due to content policy');
        return {};
      }
      
      toastService.warning('Failed to generate game insights. You can still continue chatting!');
      return {};
    }
  }
}

export const aiService = new AIService();


```n

## src\services\appStateService.ts

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\services\appStateService.ts.Extension.TrimStart('.'))

import { StorageService } from './storageService';
import { AppState } from '../types';
import { STORAGE_KEYS } from '../constants';

export class AppStateService {
  static getAppState(): AppState {
    const defaultState: AppState = {
      view: 'landing',
      onboardingStatus: 'login',
      activeSubView: 'chat',
      isConnectionModalOpen: false,
      isHandsFreeModalOpen: false,
      isSettingsModalOpen: false,
      isCreditModalOpen: false,
      isOtakuDiaryModalOpen: false,
      isWishlistModalOpen: false,
      activeModal: null,
      isHandsFreeMode: false,
      showUpgradeScreen: false,
      showDailyCheckin: false,
      currentAchievement: null,
      loadingMessages: [],
      isCooldownActive: false,
      isFirstTime: true,
      contextMenu: null,
      feedbackModalState: null,
      confirmationModal: null,
      trialEligibility: null,
    };

    return StorageService.get(STORAGE_KEYS.APP_STATE, defaultState);
  }

  static setAppState(state: AppState): void {
    StorageService.set(STORAGE_KEYS.APP_STATE, state);
  }

  static updateAppState(updates: Partial<AppState>): void {
    const currentState = this.getAppState();
    const newState = { ...currentState, ...updates };
    this.setAppState(newState);
  }

  static resetAppState(): void {
    const defaultState = this.getAppState();
    this.setAppState(defaultState);
  }
}


```n

## src\services\authService.ts

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\services\authService.ts.Extension.TrimStart('.'))

import { supabase } from '../lib/supabase';
import { User, AuthResult, AuthState, UserTier } from '../types';
import { TIER_LIMITS } from '../constants';
import { cacheService } from './cacheService';
import { ErrorService } from './errorService';
import { toastService } from './toastService';

export class AuthService {
  private static instance: AuthService;
  private authState: AuthState = {
    user: null,
    isLoading: true,
    error: null,
  };

  private listeners: ((state: AuthState) => void)[] = [];
  
  // âœ… SCALABILITY: Using centralized cache and error services
  
  // âœ… PERFORMANCE: Request deduplication for user loading
  private pendingUserLoads = new Map<string, Promise<void>>();
  
  // âœ… SCALABILITY: Memory leak prevention
  private cleanupFunctions: (() => void)[] = [];
  private isDestroyed = false;

  static getInstance(): AuthService {
    if (!AuthService.instance) {
      AuthService.instance = new AuthService();
    }
    return AuthService.instance;
  }

  constructor() {
    this.initializeAuth();
    this.setupCleanup();
  }

  // âœ… SCALABILITY: Setup cleanup
  private setupCleanup() {
    const cleanup = () => {
      if (!this.isDestroyed) {
        this.cleanup();
      }
    };
    
    window.addEventListener('beforeunload', cleanup);
    this.cleanupFunctions.push(() => {
      window.removeEventListener('beforeunload', cleanup);
    });
  }

  // âœ… SCALABILITY: Check rate limit using centralized service
  private async checkRateLimit(identifier: string): Promise<boolean> {
    if (this.isDestroyed) {
      return false;
    }
    
    const rateLimitData = await cacheService.getRateLimit(identifier);
    const now = Date.now();
    
    if (!rateLimitData || now > rateLimitData.resetTime) {
      await cacheService.setRateLimit(identifier, { count: 1, resetTime: now + 15 * 60 * 1000 });
      return true;
    }
    
    if (rateLimitData.count >= 10) {
      return false;
    }
    
    await cacheService.setRateLimit(identifier, { 
      count: rateLimitData.count + 1, 
      resetTime: rateLimitData.resetTime 
    });
    return true;
  }

  // âœ… SCALABILITY: Get user from centralized cache
  private async getCachedUser(authUserId: string): Promise<User | null> {
    if (this.isDestroyed) {
      return null;
    }
    
    return await cacheService.getUser<User>(authUserId);
  }

  // âœ… SCALABILITY: Cache user data using centralized service
  private async setCachedUser(authUserId: string, user: User): Promise<void> {
    if (this.isDestroyed) {
      return;
    }
    
    await cacheService.setUser(authUserId, user);
  }

  // âœ… SCALABILITY: Clear cache using centralized service
  private async clearCache(): Promise<void> {
    await cacheService.clear();
  }

  // âœ… SCALABILITY: Invalidate user cache specifically
  private async invalidateUserCache(authUserId: string): Promise<void> {
    const cacheKey = `user:${authUserId}`;
    await cacheService.delete(cacheKey);
  }

  private async initializeAuth() {
    try {
      // Always initialize auth


      // Handle OAuth callback if we're on the callback URL
      // Note: AuthCallback component handles OAuth callbacks, so we skip this
      // to avoid conflicts
      if (window.location.pathname === '/auth/callback') {
        console.log('ðŸ” [AuthService] OAuth callback detected, but AuthCallback component will handle it');
        return;
      }

      // Try Supabase auth if available
      try {
        const { data: { session } } = await supabase.auth.getSession();
        
        if (session?.user) {
          await this.loadUserFromSupabase(session.user.id);
        } else {
          this.updateAuthState({ user: null, isLoading: false, error: null });
        }
      } catch (_supabaseError) {
        // Fallback to local storage
        const localUser = localStorage.getItem('otakon_user');
        if (localUser) {
          try {
            const user = JSON.parse(localUser);
            this.updateAuthState({ user, isLoading: false, error: null });
          } catch (_parseError) {
            this.updateAuthState({ user: null, isLoading: false, error: null });
          }
        } else {
          this.updateAuthState({ user: null, isLoading: false, error: null });
        }
      }
    } catch (error) {
      console.error('Auth initialization error:', error);
      toastService.error('Failed to initialize authentication. Please refresh the page.', {
        action: {
          label: 'Refresh',
          onClick: () => window.location.reload()
        }
      });
      this.updateAuthState({ user: null, isLoading: false, error: null });
    }
  }


  private async createUserRecord(authUser: any): Promise<void> {
    try {
      console.log('ðŸ” [AuthService] Creating user record for:', authUser.email);
      
      // Get the OAuth provider from the auth user metadata
      // Check multiple possible locations for provider information
      let provider = 'email';
      
      if (authUser.app_metadata?.provider) {
        provider = authUser.app_metadata.provider;
      } else if (authUser.app_metadata?.providers && authUser.app_metadata.providers.length > 0) {
        provider = authUser.app_metadata.providers[0];
      } else if (authUser.identities && authUser.identities.length > 0) {
        provider = authUser.identities[0].provider;
      } else if (authUser.user_metadata?.provider) {
        provider = authUser.user_metadata.provider;
      }
      
      console.log('ðŸ” [AuthService] Auth user metadata:', {
        app_metadata: authUser.app_metadata,
        user_metadata: authUser.user_metadata,
        identities: authUser.identities,
        provider: provider
      });
      console.log('ðŸ” [AuthService] OAuth provider:', provider);
      
      // Create a unique identifier that includes the provider
      // For email authentication, use the original email
      // For OAuth providers, use provider prefix
      let uniqueEmail;
      if (provider === 'email') {
        uniqueEmail = authUser.email; // Use original email for email authentication
      } else {
        uniqueEmail = `${provider}_${authUser.email}`; // Use provider prefix for OAuth
      }
      
      console.log('ðŸ” [AuthService] Unique email identifier:', uniqueEmail);
      
      const { error } = await supabase.rpc('create_user_record', {
        p_auth_user_id: authUser.id,
        p_email: uniqueEmail,
        p_full_name: authUser.user_metadata?.full_name || authUser.user_metadata?.name || 'User',
        p_avatar_url: authUser.user_metadata?.avatar_url,
        p_is_developer: false,
        p_tier: 'free'
      });

      if (error) {
        // Check if it's a duplicate key error (23505)
        if (error.code === '23505' || error.message?.includes('duplicate key')) {
          console.log('ðŸ” [AuthService] User record already exists (duplicate key), continuing...');
          // This is not actually an error - the user already exists
          return;
        }
        console.error('ðŸ” [AuthService] Error creating user record:', error);
        toastService.error('Failed to create your account. Please try again.');
        throw error;
      }
      
      console.log('ðŸ” [AuthService] User record created successfully');
    } catch (error: any) {
      // Check if it's a duplicate key error (23505)
      if (error.code === '23505' || error.message?.includes('duplicate key')) {
        console.log('ðŸ” [AuthService] User record already exists (duplicate key in catch), continuing...');
        // This is not actually an error - the user already exists
        return;
      }
      console.error('ðŸ” [AuthService] Error creating user record:', error);
      toastService.error('Failed to create your account. Please try again.');
      throw error;
    }
  }

  // Helper function to extract original email from unique identifier
  private extractOriginalEmail(uniqueEmail: string): string {
    // Check if this is an OAuth provider email (has provider prefix)
    const oauthProviders = ['google', 'discord', 'github', 'facebook', 'twitter', 'apple'];
    const parts = uniqueEmail.split('_');
    
    if (parts.length > 1 && oauthProviders.includes(parts[0])) {
      // This is an OAuth provider email, remove the provider prefix
      return parts.slice(1).join('_'); // Join in case email contains underscores
    }
    
    // This is either an email authentication or doesn't have a recognized prefix
    return uniqueEmail;
  }

  async loadUserFromSupabase(authUserId: string) {
    // âœ… PERFORMANCE: Check if there's already a pending load for this user
    const existingLoad = this.pendingUserLoads.get(authUserId);
    if (existingLoad) {
      console.log('ðŸ” [AuthService] Deduplicating user load request for:', authUserId);
      return await existingLoad;
    }

    // Create a new load promise and store it
    const loadPromise = (async () => {
      try {
        await this._loadUserFromSupabaseInternal(authUserId);
      } finally {
        // Clean up the pending request after completion
        this.pendingUserLoads.delete(authUserId);
      }
    })();
    
    this.pendingUserLoads.set(authUserId, loadPromise);
    return await loadPromise;
  }

  private async _loadUserFromSupabaseInternal(authUserId: string) {
    try {
      // âœ… SCALABILITY: Check cache first
      const cachedUser = await this.getCachedUser(authUserId);
      if (cachedUser) {
        console.log('ðŸ” [AuthService] Using cached user data');
        this.updateAuthState({ user: cachedUser, isLoading: false, error: null });
        return;
      }

      console.log('ðŸ” [AuthService] Loading user data from database for authUserId:', authUserId);
      
      // Try the RPC function first
      const { data: rpcData, error: rpcError } = await supabase.rpc('get_complete_user_data', {
        p_auth_user_id: authUserId
      });

      if (rpcError) {
        console.log('ðŸ” [AuthService] RPC function failed, trying direct table query...', rpcError);
        
        // Fallback: Query the table directly
        const { data: tableData, error: tableError } = await supabase
          .from('users')
          .select('*')
          .eq('auth_user_id', authUserId)
          .single();

        if (tableError) {
          console.error('ðŸ” [AuthService] Direct table query also failed:', tableError);
          this.updateAuthState({ user: null, isLoading: false, error: 'Failed to load user data' });
          return;
        }

        if (tableData) {
          console.log('ðŸ” [AuthService] User found via direct table query');
          const user: User = {
            id: tableData.id,
            authUserId: tableData.auth_user_id || authUserId, // Fallback to the authUserId parameter
            email: this.extractOriginalEmail(tableData.email), // Extract original email from unique identifier
            tier: tableData.tier as UserTier,
            hasProfileSetup: tableData.has_profile_setup || false,
            hasSeenSplashScreens: tableData.has_seen_splash_screens || false,
            hasSeenHowToUse: tableData.has_seen_how_to_use || false,
            hasSeenFeaturesConnected: tableData.has_seen_features_connected || false,
            hasSeenProFeatures: tableData.has_seen_pro_features || false,
            pcConnected: tableData.pc_connected || false,
            pcConnectionSkipped: tableData.pc_connection_skipped || false,
            onboardingCompleted: tableData.onboarding_completed || false,
            hasWelcomeMessage: tableData.has_welcome_message || false,
            isNewUser: tableData.is_new_user || true,
            hasUsedTrial: tableData.has_used_trial || false,
            lastActivity: Date.now(),
            // âœ… Query-based usage limits (top-level for easy access)
            textCount: tableData.text_count || 0,
            imageCount: tableData.image_count || 0,
            textLimit: tableData.text_limit || TIER_LIMITS[tableData.tier as UserTier]?.text || 0,
            imageLimit: tableData.image_limit || TIER_LIMITS[tableData.tier as UserTier]?.image || 0,
            totalRequests: tableData.total_requests || 0,
            lastReset: tableData.last_reset ? new Date(tableData.last_reset).getTime() : Date.now(),
            preferences: tableData.preferences || {},
            // Legacy nested usage object (kept for backward compatibility)
            usage: {
              textCount: tableData.text_count || 0,
              imageCount: tableData.image_count || 0,
              textLimit: tableData.text_limit || TIER_LIMITS[tableData.tier as UserTier]?.text || 0,
              imageLimit: tableData.image_limit || TIER_LIMITS[tableData.tier as UserTier]?.image || 0,
              totalRequests: tableData.total_requests || 0,
              lastReset: tableData.last_reset ? new Date(tableData.last_reset).getTime() : Date.now(),
              tier: tableData.tier as UserTier,
            },
            appState: tableData.app_state || {},
            profileData: tableData.profile_data || {},
            onboardingData: tableData.onboarding_data || {},
            behaviorData: tableData.behavior_data || {},
            feedbackData: tableData.feedback_data || {},
            usageData: tableData.usage_data || {},
            createdAt: tableData.created_at ? new Date(tableData.created_at).getTime() : Date.now(),
            updatedAt: tableData.updated_at ? new Date(tableData.updated_at).getTime() : Date.now(),
          };

          // âœ… SCALABILITY: Cache user data
          await this.setCachedUser(authUserId, user);
          this.updateAuthState({ user, isLoading: false, error: null });
          return;
        }
      }

      // If RPC worked, use that data
      if (rpcData && rpcData.length > 0) {
        console.log('ðŸ” [AuthService] User found via RPC function');
        console.log('ðŸ” [AuthService] RPC data:', rpcData[0]);
        const userData = rpcData[0];
        const user: User = {
          id: userData.id,
          authUserId: userData.auth_user_id || authUserId, // Fallback to the authUserId parameter
          email: this.extractOriginalEmail(userData.email), // Extract original email from unique identifier
          tier: userData.tier as UserTier,
          hasProfileSetup: userData.has_profile_setup || false,
          hasSeenSplashScreens: userData.has_seen_splash_screens || false,
          hasSeenHowToUse: userData.has_seen_how_to_use || false,
          hasSeenFeaturesConnected: userData.has_seen_features_connected || false,
          hasSeenProFeatures: userData.has_seen_pro_features || false,
          pcConnected: userData.pc_connected || false,
          pcConnectionSkipped: userData.pc_connection_skipped || false,
          onboardingCompleted: userData.onboarding_completed || false,
          hasWelcomeMessage: userData.has_welcome_message || false,
          isNewUser: userData.is_new_user || true,
          hasUsedTrial: userData.has_used_trial || false,
          lastActivity: Date.now(),
          // âœ… Query-based usage limits (top-level for easy access)
          textCount: userData.text_count || 0,
          imageCount: userData.image_count || 0,
          textLimit: userData.text_limit || TIER_LIMITS[userData.tier as UserTier]?.text || 0,
          imageLimit: userData.image_limit || TIER_LIMITS[userData.tier as UserTier]?.image || 0,
          totalRequests: userData.total_requests || 0,
          lastReset: userData.last_reset ? new Date(userData.last_reset).getTime() : Date.now(),
          preferences: userData.preferences || {},
          // Legacy nested usage object (kept for backward compatibility)
          usage: {
            textCount: userData.text_count || 0,
            imageCount: userData.image_count || 0,
            textLimit: userData.text_limit || TIER_LIMITS[userData.tier as UserTier]?.text || 0,
            imageLimit: userData.image_limit || TIER_LIMITS[userData.tier as UserTier]?.image || 0,
            totalRequests: userData.total_requests || 0,
            lastReset: userData.last_reset ? new Date(userData.last_reset).getTime() : Date.now(),
            tier: userData.tier as UserTier,
          },
          appState: userData.app_state || {},
          profileData: userData.profile_data || {},
          onboardingData: userData.onboarding_data || {},
          behaviorData: userData.behavior_data || {},
          feedbackData: userData.feedback_data || {},
          usageData: userData.usage_data || {},
          createdAt: userData.created_at ? new Date(userData.created_at).getTime() : Date.now(),
          updatedAt: userData.updated_at ? new Date(userData.updated_at).getTime() : Date.now(),
        };

        console.log('ðŸ” [AuthService] User onboarding flags:', {
          hasProfileSetup: user.hasProfileSetup,
          hasSeenSplashScreens: user.hasSeenSplashScreens,
          hasSeenHowToUse: user.hasSeenHowToUse,
          hasSeenFeaturesConnected: user.hasSeenFeaturesConnected,
          hasSeenProFeatures: user.hasSeenProFeatures,
          pcConnected: user.pcConnected,
          pcConnectionSkipped: user.pcConnectionSkipped,
          onboardingCompleted: user.onboardingCompleted
        });

        // âœ… SCALABILITY: Cache user data
        await this.setCachedUser(authUserId, user);
        this.updateAuthState({ user, isLoading: false, error: null });
      } else {
        // User not found - try to create manually
        console.log('ðŸ” [AuthService] User not found, trying to create manually...');
        try {
          const { data: { user: authUser } } = await supabase.auth.getUser();
          if (authUser) {
            console.log('ðŸ” [AuthService] Creating user record for auth user:', authUser.email);
            await this.createUserRecord(authUser);
            // âœ… PERFORMANCE: Call internal function directly to avoid deadlock with deduplication Map
            await this._loadUserFromSupabaseInternal(authUserId);
          } else {
            this.updateAuthState({ user: null, isLoading: false, error: 'User not found and could not create user record' });
          }
        } catch (createError) {
          console.error('ðŸ” [AuthService] Failed to create user record manually:', createError);
          this.updateAuthState({ user: null, isLoading: false, error: 'User not found and could not create user record' });
        }
      }
    } catch (error) {
      console.error('Error loading user from Supabase:', error);
      this.updateAuthState({ user: null, isLoading: false, error: 'Failed to load user data' });
    }
  }


  private updateAuthState(newState: Partial<AuthState>) {
    const previousState = { ...this.authState };
    this.authState = { ...this.authState, ...newState };
    
    // Only notify listeners if the state actually changed
    const hasChanged = JSON.stringify(previousState) !== JSON.stringify(this.authState);
    if (hasChanged) {
      this.listeners.forEach(listener => listener(this.authState));
    }
  }

  // Public methods
  
  // âš ï¸ PROTECTED OAUTH FLOW - DO NOT MODIFY WITHOUT WARNING âš ï¸
  // Google OAuth is working correctly - any changes here could break user authentication
  // If you need to modify this, add a warning comment explaining the change
  async signInWithGoogle(): Promise<AuthResult> {
    try {
      // âœ… SCALABILITY: Rate limiting
      if (!(await this.checkRateLimit('google_signin'))) {
        return { success: false, error: 'Too many sign-in attempts. Please wait before trying again.' };
      }

      this.updateAuthState({ isLoading: true, error: null });
      
      console.log('ðŸ” [AuthService] Starting Google OAuth...');
      console.log('ðŸ” [AuthService] Redirect URL:', `${window.location.origin}/auth/callback`);
      
      const { error } = await supabase.auth.signInWithOAuth({
        provider: 'google',
        options: {
          redirectTo: `${window.location.origin}/auth/callback`
        }
      });

      if (error) {
        console.error('ðŸ” [AuthService] Google OAuth error:', error);
        toastService.error('Failed to sign in with Google. Please try again.');
        this.updateAuthState({ isLoading: false, error: error.message });
        return { success: false, error: error.message };
      }

      console.log('ðŸ” [AuthService] Google OAuth initiated successfully');
      return { success: true };
    } catch (error) {
      ErrorService.handleAuthError(error as Error, 'signInWithGoogle');
      toastService.error('Google sign-in failed. Please try again.');
      this.updateAuthState({ 
        user: null, 
        isLoading: false, 
        error: 'Google sign-in failed. Please try again.' 
      });
      return { success: false, error: 'Google sign-in failed. Please try again.' };
    }
  }

  // âš ï¸ PROTECTED OAUTH FLOW - DO NOT MODIFY WITHOUT WARNING âš ï¸
  // Discord OAuth is working correctly - any changes here could break user authentication
  // If you need to modify this, add a warning comment explaining the change
  async signInWithDiscord(): Promise<AuthResult> {
    // âœ… SCALABILITY: Rate limiting
    if (!this.checkRateLimit('discord_signin')) {
      return { success: false, error: 'Too many sign-in attempts. Please wait before trying again.' };
    }

    try {
      this.updateAuthState({ isLoading: true, error: null });
      
      console.log('ðŸ” [AuthService] Starting Discord OAuth...');
      
      // Construct the redirect URL properly using current origin
      const redirectUrl = `${window.location.origin}/auth/callback`;
      console.log('ðŸ” [AuthService] Redirect URL:', redirectUrl);
      console.log('ðŸ” [AuthService] Current origin:', window.location.origin);
      console.log('ðŸ” [AuthService] Current pathname:', window.location.pathname);
      console.log('ðŸ” [AuthService] Current port:', window.location.port);
      console.log('ðŸ” [AuthService] Full URL:', window.location.href);
      
      // Check if we're already on the callback page
      if (window.location.pathname === '/auth/callback') {
        console.log('ðŸ” [AuthService] Already on callback page, skipping OAuth initiation');
        this.updateAuthState({ isLoading: false, error: null });
        return { success: false, error: 'Already on callback page' };
      }
      
      // Store the current URL for potential error handling
      localStorage.setItem('otakon_discord_auth_attempt', Date.now().toString());
      
      // Initiate Discord OAuth with proper error handling
      console.log('ðŸ” [AuthService] Initiating Discord OAuth with redirectTo:', redirectUrl);
      
      const { data, error } = await supabase.auth.signInWithOAuth({
        provider: 'discord',
        options: {
          redirectTo: redirectUrl,
          queryParams: {
            access_type: 'offline',
            prompt: 'consent',
          }
        }
      });

      if (error) {
        console.error('ðŸ” [AuthService] Discord OAuth error:', error);
        console.error('ðŸ” [AuthService] Error details:', {
          message: error.message,
          status: error.status
        });
        
        // Provide more specific error messages
        let errorMessage = 'Discord authentication failed. ';
        if (error.message.includes('Invalid redirect URI')) {
          errorMessage += 'Please check Discord OAuth configuration in Supabase dashboard.';
        } else if (error.message.includes('Invalid client')) {
          errorMessage += 'Discord OAuth credentials are invalid. Please check Supabase configuration.';
        } else if (error.message.includes('access_denied')) {
          errorMessage += 'Discord authorization was cancelled.';
        } else {
          errorMessage += error.message;
        }
        
        toastService.error(`Failed to sign in with Discord. ${errorMessage}`);
        this.updateAuthState({ isLoading: false, error: errorMessage });
        return { success: false, error: errorMessage };
      }

      console.log('ðŸ” [AuthService] Discord OAuth initiated successfully');
      console.log('ðŸ” [AuthService] OAuth data:', data);
      
      // OAuth will redirect, so we return success
      return { success: true };
    } catch (error) {
      const errorMessage = error instanceof Error ? error.message : 'Unknown error';
      console.error('ðŸ” [AuthService] Discord OAuth exception:', error);
      console.error('ðŸ” [AuthService] Exception details:', {
        name: error instanceof Error ? error.name : 'Unknown',
        message: errorMessage,
        stack: error instanceof Error ? error.stack : 'No stack trace'
      });
      
      this.updateAuthState({ isLoading: false, error: errorMessage });
      return { success: false, error: errorMessage };
    }
  }

  // âš ï¸ PROTECTED EMAIL AUTH FLOW - DO NOT MODIFY WITHOUT WARNING âš ï¸
  // Email authentication is working correctly - any changes here could break user authentication
  // If you need to modify this, add a warning comment explaining the change
  async signInWithEmail(email: string, password: string): Promise<AuthResult> {
    // âœ… SCALABILITY: Rate limiting
    if (!this.checkRateLimit(`email_signin_${email}`)) {
      return { success: false, error: 'Too many sign-in attempts. Please wait before trying again.' };
    }

    try {
      this.updateAuthState({ isLoading: true, error: null });
      
      console.log('ðŸ” [AuthService] Starting email sign-in...');
      
      const { data, error } = await supabase.auth.signInWithPassword({
        email,
        password
      });

      if (error) {
        console.error('ðŸ” [AuthService] Email sign-in error:', error);
        
        // Provide more helpful error messages
        let errorMessage = error.message;
        
        if (error.message.includes('Invalid login credentials')) {
          // Check if this might be a provider mismatch issue
          // We can't check the database without authentication, but we can provide a helpful message
          errorMessage = 'Invalid email or password. If you signed up with Google or Discord, please use those options instead.';
        } else if (error.message.includes('Email not confirmed')) {
          errorMessage = 'Please check your email and click the confirmation link before signing in.';
        } else if (error.message.includes('Too many requests')) {
          errorMessage = 'Too many sign-in attempts. Please wait a moment before trying again.';
        }
        
        toastService.error(errorMessage);
        this.updateAuthState({ isLoading: false, error: errorMessage });
        return { success: false, error: errorMessage };
      }

      if (data.user) {
        console.log('ðŸ” [AuthService] Email sign-in successful:', data.user.email);
        toastService.success('Welcome back! Successfully signed in.');
        // Load user data (this will handle user creation if needed)
        await this.loadUserFromSupabase(data.user.id);
        return { success: true, user: this.authState.user || undefined };
      }

      return { success: false, error: 'No user data returned' };
    } catch (error) {
      const errorMessage = error instanceof Error ? error.message : 'Unknown error';
      console.error('ðŸ” [AuthService] Email sign-in exception:', error);
      toastService.error('Sign-in failed. Please try again.');
      this.updateAuthState({ isLoading: false, error: errorMessage });
      return { success: false, error: errorMessage };
    }
  }


  // âš ï¸ PROTECTED EMAIL AUTH FLOW - DO NOT MODIFY WITHOUT WARNING âš ï¸
  // Email signup is working correctly - any changes here could break user registration
  // If you need to modify this, add a warning comment explaining the change
  async signUpWithEmail(email: string, password: string): Promise<AuthResult> {
    try {
      this.updateAuthState({ isLoading: true, error: null });
      
      console.log('ðŸ” [AuthService] Starting email sign-up...');
      
      const { data, error } = await supabase.auth.signUp({
        email,
        password,
        options: {
          emailRedirectTo: `${window.location.origin}/auth/callback`
        }
      });

      // Handle email confirmation errors gracefully
      let isEmailConfirmationDisabled = false;
      if (error) {
        console.error('ðŸ” [AuthService] Email sign-up error:', error);
        
        if (error.message.includes('Error sending confirmation email')) {
          console.log('ðŸ” [AuthService] Email confirmation disabled, proceeding with sign-up...');
          isEmailConfirmationDisabled = true;
          // Continue with the sign-up process even if email confirmation fails
          // This is useful for development when email confirmation is disabled
        } else {
          toastService.error(`Sign-up failed: ${error.message}`);
          this.updateAuthState({ isLoading: false, error: error.message });
          return { success: false, error: error.message };
        }
      }

      if (data.user) {
        console.log('ðŸ” [AuthService] Email sign-up successful:', data.user.email);
        console.log('ðŸ” [AuthService] User confirmation required:', !data.user.email_confirmed_at);
        
        // Check if email confirmation is required
        if (!data.user.email_confirmed_at) {
          console.log('ðŸ” [AuthService] Email confirmation required, user not yet signed in');
          
          // For development, if email confirmation is disabled, proceed anyway
          if (isEmailConfirmationDisabled) {
            console.log('ðŸ” [AuthService] Email confirmation disabled, creating user record anyway...');
            toastService.success('Account created successfully! Welcome to Otakon!');
            await this.loadUserFromSupabase(data.user.id);
            return { success: true, user: this.authState.user || undefined };
          }
          
          this.updateAuthState({ isLoading: false, error: null });
          return { 
            success: true, 
            user: undefined, 
            requiresConfirmation: true,
            message: 'Please check your email and click the confirmation link to complete your account setup.'
          };
        }
        
        // User is confirmed, load user data
        await this.loadUserFromSupabase(data.user.id);
        return { success: true, user: this.authState.user || undefined };
      }

      return { success: false, error: 'No user data returned' };
    } catch (error) {
      const errorMessage = error instanceof Error ? error.message : 'Unknown error';
      console.error('ðŸ” [AuthService] Email sign-up exception:', error);
      this.updateAuthState({ isLoading: false, error: errorMessage });
      return { success: false, error: errorMessage };
    }
  }

  async resetPassword(email: string): Promise<AuthResult> {
    try {
      this.updateAuthState({ isLoading: true, error: null });
      
      const { error } = await supabase.auth.resetPasswordForEmail(email, {
        redirectTo: `${window.location.origin}${window.location.pathname}`
      });

      if (error) {
        this.updateAuthState({ isLoading: false, error: error.message });
        return { success: false, error: error.message };
      }

      this.updateAuthState({ isLoading: false, error: null });
      return { success: true };
    } catch (error) {
      const errorMessage = error instanceof Error ? error.message : 'Unknown error';
      this.updateAuthState({ isLoading: false, error: errorMessage });
      return { success: false, error: errorMessage };
    }
  }

  async signOut(): Promise<void> {
    try {
      console.log('ðŸ” [AuthService] Starting sign out process...');
      
      // Clear all local storage
      localStorage.removeItem('otakon_auth_method');
      localStorage.removeItem('otakon_remember_me');
      localStorage.removeItem('otakon_remembered_email');
      localStorage.removeItem('otakon_discord_auth_attempt');
      
      // Clear any stored app state
      localStorage.removeItem('otakon_app_state');
      
      // Sign out from Supabase
      await supabase.auth.signOut();
      
      // âœ… SCALABILITY: Clear cache
      this.clearCache();
      
      // Clear auth state
      this.updateAuthState({ user: null, isLoading: false, error: null });
      
      console.log('ðŸ” [AuthService] Sign out completed successfully');
      toastService.success('Successfully signed out. See you next time!');
    } catch (error) {
      console.error('ðŸ” [AuthService] Sign out error:', error);
      toastService.error('Sign out failed. Please try again.');
      // Even if there's an error, clear the local state
      this.updateAuthState({ user: null, isLoading: false, error: null });
    }
  }

  getCurrentUser(): User | null {
    return this.authState.user;
  }

  getAuthState(): AuthState {
    return this.authState;
  }


  // Method to clear all user data for testing multiple OAuth providers
  async clearAllUserData(): Promise<void> {
    try {
      console.log('ðŸ” [AuthService] Clearing all user data for testing...');
      
      // Clear localStorage
      localStorage.removeItem('otakon_auth_method');
      localStorage.removeItem('otakon_remember_me');
      localStorage.removeItem('otakon_remembered_email');
      
      // Sign out from Supabase
      await supabase.auth.signOut();
      
      // Clear auth state
      this.updateAuthState({ user: null, isLoading: false, error: null });
      
      console.log('ðŸ” [AuthService] All user data cleared successfully');
    } catch (error) {
      console.error('ðŸ” [AuthService] Error clearing user data:', error);
    }
  }

  // Method to check which provider was used for a given email
  async checkEmailProvider(email: string): Promise<{ provider: string | null; message: string }> {
    try {
      console.log('ðŸ” [AuthService] Checking provider for email:', email);
      
      // For now, skip provider checking during sign-in to avoid 401 errors
      // This will be handled by the actual sign-in attempt
      console.log('ðŸ” [AuthService] Skipping provider check to avoid 401 errors during sign-in');
      return { provider: null, message: '' };
    } catch (error) {
      console.error('ðŸ” [AuthService] Error checking email provider:', error);
      return { provider: null, message: '' };
    }
  }

  async resendConfirmationEmail(email: string): Promise<AuthResult> {
    try {
      console.log('ðŸ” [AuthService] Resending confirmation email for:', email);
      this.updateAuthState({ isLoading: true, error: null });

      const { error } = await supabase.auth.resend({
        type: 'signup',
        email: email,
        options: {
          emailRedirectTo: `${window.location.origin}/auth/callback`
        }
      });

      if (error) {
        console.error('ðŸ” [AuthService] Error resending confirmation email:', error);
        toastService.error('Failed to resend confirmation email. Please try again.');
        this.updateAuthState({ isLoading: false, error: error.message });
        return { success: false, error: error.message };
      }

      console.log('ðŸ” [AuthService] Confirmation email resent successfully');
      toastService.success('Confirmation email sent! Please check your inbox.');
      this.updateAuthState({ isLoading: false, error: null });
      return { 
        success: true, 
        message: 'Confirmation email sent! Please check your inbox and click the confirmation link.' 
      };
    } catch (error) {
      const errorMessage = error instanceof Error ? error.message : 'Unknown error';
      console.error('ðŸ” [AuthService] Exception resending confirmation email:', error);
      toastService.error('Failed to resend confirmation email. Please try again.');
      this.updateAuthState({ isLoading: false, error: errorMessage });
      return { success: false, error: errorMessage };
    }
  }

  // Method to test Discord OAuth configuration
  async testDiscordConfiguration(): Promise<{ isValid: boolean; message: string; details: any }> {
    try {
      console.log('ðŸ” [AuthService] Testing Discord OAuth configuration...');
      
      // Check if we can access Supabase auth
      const { error: sessionError } = await supabase.auth.getSession();
      if (sessionError) {
        return {
          isValid: false,
          message: 'Cannot access Supabase auth service',
          details: { sessionError }
        };
      }
      
      // For now, assume Discord is available if we can access auth
      // The actual provider check would require a different approach
      // This will be determined by the actual OAuth attempt
      
      // Test redirect URL construction
      const redirectUrl = `${window.location.origin}/auth/callback`;
      console.log('ðŸ” [AuthService] Test redirect URL:', redirectUrl);
      
      return {
        isValid: true,
        message: 'Discord OAuth configuration appears to be valid',
        details: {
          redirectUrl,
          currentOrigin: window.location.origin,
          currentPathname: window.location.pathname
        }
      };
    } catch (error) {
      console.error('ðŸ” [AuthService] Error testing Discord configuration:', error);
      return {
        isValid: false,
        message: 'Error testing Discord configuration',
        details: { error: error instanceof Error ? error.message : 'Unknown error' }
      };
    }
  }

  async refreshUser(): Promise<void> {
    if (this.authState.user) {
      console.log('ðŸ” [AuthService] Refreshing user data...');
      // Invalidate cache before loading to ensure fresh data
      await this.invalidateUserCache(this.authState.user.authUserId);
      await this.loadUserFromSupabase(this.authState.user.authUserId);
    }
  }

  /**
   * Update user profile preferences
   */
  async updateUserProfile(authUserId: string, profileData: any): Promise<void> {
    try {
      // Update in Supabase
      const { error } = await supabase
        .from('users')
        .update({ profile_data: profileData })
        .eq('auth_user_id', authUserId);

      if (error) {
        console.error('Error updating profile:', error);
        toastService.error('Failed to update profile. Please try again.');
        throw error;
      }

      // Invalidate cache and reload user
      await this.invalidateUserCache(authUserId);
      await this.loadUserFromSupabase(authUserId);
      
      console.log('âœ… Profile preferences updated successfully');
      toastService.success('Profile updated successfully!');
    } catch (error) {
      console.error('Failed to update profile preferences:', error);
      toastService.error('Failed to update profile. Please try again.');
      throw error;
    }
  }

  subscribe(listener: (state: AuthState) => void): () => void {
    this.listeners.push(listener);
    
    // Call listener immediately with current state
    listener(this.authState);
    
    // Return unsubscribe function
    return () => {
      const index = this.listeners.indexOf(listener);
      if (index > -1) {
        this.listeners.splice(index, 1);
      }
    };
  }

  // âœ… SCALABILITY: Cleanup method to prevent memory leaks
  cleanup(): void {
    if (this.isDestroyed) {
      return;
    }
    
    console.log('ðŸ§¹ [AuthService] Cleaning up...');
    
    this.isDestroyed = true;
    
    // Clear cache
    this.clearCache();
    
    // Rate limiter is now handled by centralized cache service
    
    // Clear listeners
    this.listeners.length = 0;
    
    // Run cleanup functions
    this.cleanupFunctions.forEach(cleanup => {
      try {
        cleanup();
      } catch (error) {
        console.error('Error during auth service cleanup:', error);
      }
    });
    this.cleanupFunctions.length = 0;
    
    console.log('ðŸ§¹ [AuthService] Cleanup completed');
  }

}

export const authService = AuthService.getInstance();


```n

## src\services\cacheService.ts

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\services\cacheService.ts.Extension.TrimStart('.'))

import { supabase } from '../lib/supabase';

/**
 * Centralized cache service using Supabase for persistent caching
 * Replaces multiple cache instances across services with database-backed cache
 */
class CacheService {
  private memoryCache = new Map<string, { value: any; expires: number }>();
  private readonly DEFAULT_TTL = 5 * 60 * 1000; // 5 minutes
  private readonly CACHE_TABLE = 'app_cache';
  private readonly MAX_MEMORY_CACHE_SIZE = 100; // Prevent memory bloat
  
  // Request deduplication - prevent multiple simultaneous calls for the same key
  private pendingRequests = new Map<string, Promise<any>>();

  /**
   * Set a value in both memory and Supabase cache
   */
  async set(key: string, value: any, ttl: number = this.DEFAULT_TTL, cacheType: string = 'general', userId?: string): Promise<void> {
    const expires = Date.now() + ttl;
    
    // Store in memory cache for fast access
    this.memoryCache.set(key, { value, expires });
    console.log(`[CacheService] Stored in memory cache: ${key}`);
    
    // Store in Supabase for persistence
    try {
      console.log(`[CacheService] Storing in Supabase: ${key} (type: ${cacheType}, user: ${userId || 'none'})`);
      const { error } = await supabase
        .from(this.CACHE_TABLE)
        .upsert({
          key,
          value: JSON.stringify(value),
          expires_at: new Date(expires).toISOString(),
          updated_at: new Date().toISOString(),
          cache_type: cacheType,
          user_id: userId || null,
          size_bytes: JSON.stringify(value).length
        });
      
      if (error) {
        console.warn(`[CacheService] Failed to store cache in Supabase for key ${key}:`, error);
      } else {
        console.log(`[CacheService] Successfully stored in Supabase: ${key}`);
      }
    } catch (error) {
      console.warn(`[CacheService] Supabase cache unavailable for key ${key}, using memory only:`, error);
    }
    
    // Cleanup memory cache if it gets too large
    if (this.memoryCache.size > this.MAX_MEMORY_CACHE_SIZE) {
      this.cleanupMemoryCache();
    }
  }

  /**
   * Get a value from cache (memory first, then Supabase)
   * Implements request deduplication to prevent multiple simultaneous calls
   * @param key - Cache key
   * @param memoryOnly - If true, only check memory cache (faster for real-time operations)
   */
  async get<T>(key: string, memoryOnly: boolean = false): Promise<T | null> {
    // Check if there's already a pending request for this key
    if (this.pendingRequests.has(key)) {
      console.log(`[CacheService] Request deduplication: waiting for pending request for key: ${key}`);
      return await this.pendingRequests.get(key) as T | null;
    }
    
    // Try memory cache first
    const memoryItem = this.memoryCache.get(key);
    if (memoryItem && Date.now() <= memoryItem.expires) {
      console.log(`[CacheService] Cache HIT (memory): ${key}`);
      return memoryItem.value as T;
    }
    
    // Remove expired memory item
    if (memoryItem) {
      this.memoryCache.delete(key);
    }
    
    // If memory-only mode, return null instead of checking Supabase
    if (memoryOnly) {
      console.log(`[CacheService] Cache MISS (memory-only mode): ${key}`);
      return null;
    }
    
    // Create a promise for the Supabase request and store it
    const supabaseRequest = this.fetchFromSupabase<T>(key);
    this.pendingRequests.set(key, supabaseRequest);
    
    try {
      const result = await supabaseRequest;
      return result;
    } finally {
      // Clean up the pending request
      this.pendingRequests.delete(key);
    }
  }
  
  /**
   * Fetch data from Supabase cache
   */
  private async fetchFromSupabase<T>(key: string): Promise<T | null> {
    try {
      console.log(`[CacheService] Cache MISS (memory), trying Supabase: ${key}`);
      const { data, error } = await supabase
        .from(this.CACHE_TABLE)
        .select('value, expires_at')
        .eq('key', key)
        .maybeSingle(); // Use maybeSingle() instead of single() to avoid 406 errors
      
      if (error) {
        console.warn(`[CacheService] Supabase error for key ${key}:`, error);
        return null;
      }
      
      if (!data) {
        console.log(`[CacheService] Cache MISS (Supabase): ${key}`);
        return null;
      }
      
      const expiresAt = new Date(data.expires_at).getTime();
      if (Date.now() > expiresAt) {
        console.log(`[CacheService] Cache EXPIRED (Supabase): ${key}`);
        await this.delete(key);
        return null;
      }
      
      console.log(`[CacheService] Cache HIT (Supabase): ${key}`);
      const value = JSON.parse(data.value);
      this.memoryCache.set(key, { value, expires: expiresAt });
      return value as T;
      
    } catch (error) {
      console.warn(`[CacheService] Error retrieving cache for key ${key}:`, error);
      return null;
    }
  }

  /**
   * Check if a key exists and is not expired
   */
  async has(key: string): Promise<boolean> {
    const value = await this.get(key);
    return value !== null;
  }

  /**
   * Delete a specific key from both memory and Supabase
   */
  async delete(key: string): Promise<boolean> {
    // Remove from memory
    const memoryDeleted = this.memoryCache.delete(key);
    
    // Remove from Supabase
    try {
      const { error } = await supabase
        .from(this.CACHE_TABLE)
        .delete()
        .eq('key', key);
      
      if (error) {
        console.warn(`[CacheService] Failed to delete cache from Supabase:`, error);
      }
    } catch (error) {
      console.warn(`[CacheService] Error deleting cache:`, error);
    }
    
    return memoryDeleted;
  }

  /**
   * Clear all cache entries from both memory and Supabase
   */
  async clear(): Promise<void> {
    // Clear memory cache
    this.memoryCache.clear();
    
    // Clear pending requests
    this.pendingRequests.clear();
    
    // Clear Supabase cache
    try {
      const { error } = await supabase
        .from(this.CACHE_TABLE)
        .delete()
        .neq('key', 'never_delete'); // Delete all except this placeholder
      
      if (error) {
        console.warn(`[CacheService] Failed to clear Supabase cache:`, error);
      }
    } catch (error) {
      console.warn(`[CacheService] Error clearing cache:`, error);
    }
  }

  /**
   * Clear expired entries from both memory and Supabase
   */
  async cleanup(): Promise<void> {
    const now = Date.now();
    
    // Cleanup memory cache
    this.cleanupMemoryCache();
    
    // Cleanup Supabase cache
    try {
      const { error } = await supabase
        .from(this.CACHE_TABLE)
        .delete()
        .lt('expires_at', new Date(now).toISOString());
      
      if (error) {
        console.warn(`[CacheService] Failed to cleanup Supabase cache:`, error);
      }
    } catch (error) {
      console.warn(`[CacheService] Error cleaning up cache:`, error);
    }
  }

  /**
   * Cleanup memory cache to prevent bloat
   */
  private cleanupMemoryCache(): void {
    const now = Date.now();
    const entries = Array.from(this.memoryCache.entries());
    
    // Remove expired entries
    entries.forEach(([key, item]) => {
      if (now > item.expires) {
        this.memoryCache.delete(key);
      }
    });
    
    // If still too large, remove oldest entries
    if (this.memoryCache.size > this.MAX_MEMORY_CACHE_SIZE) {
      const sortedEntries = entries
        .filter(([key]) => this.memoryCache.has(key))
        .sort((a, b) => a[1].expires - b[1].expires);
      
      const toRemove = sortedEntries.slice(0, this.memoryCache.size - this.MAX_MEMORY_CACHE_SIZE);
      toRemove.forEach(([key]) => this.memoryCache.delete(key));
    }
  }

  /**
   * Get cache statistics
   */
  getStats(): { memorySize: number; memoryKeys: string[] } {
    return {
      memorySize: this.memoryCache.size,
      memoryKeys: Array.from(this.memoryCache.keys()),
    };
  }

  /**
   * Get comprehensive cache statistics from Supabase
   */
  async getSupabaseStats(): Promise<any> {
    try {
      const { data, error } = await supabase.rpc('get_cache_stats');
      if (error) {
        console.warn('[CacheService] Failed to get Supabase stats:', error);
        return null;
      }
      return data;
    } catch (error) {
      console.warn('[CacheService] Error getting Supabase stats:', error);
      return null;
    }
  }

  /**
   * Get cache performance metrics
   */
  async getPerformanceMetrics(): Promise<any> {
    try {
      const { data, error } = await supabase.rpc('get_cache_performance_metrics');
      if (error) {
        console.warn('[CacheService] Failed to get performance metrics:', error);
        return null;
      }
      return data;
    } catch (error) {
      console.warn('[CacheService] Error getting performance metrics:', error);
      return null;
    }
  }

  /**
   * Get user-specific cache entries
   */
  async getUserCacheEntries(userId: string): Promise<any[]> {
    try {
      const { data, error } = await supabase.rpc('get_user_cache_entries', { p_user_id: userId });
      if (error) {
        console.warn('[CacheService] Failed to get user cache entries:', error);
        return [];
      }
      return data || [];
    } catch (error) {
      console.warn('[CacheService] Error getting user cache entries:', error);
      return [];
    }
  }

  /**
   * Clear all cache entries for a specific user
   */
  async clearUserCache(userId: string): Promise<number> {
    try {
      const { data, error } = await supabase.rpc('clear_user_cache', { p_user_id: userId });
      if (error) {
        console.warn('[CacheService] Failed to clear user cache:', error);
        return 0;
      }
      return data || 0;
    } catch (error) {
      console.warn('[CacheService] Error clearing user cache:', error);
      return 0;
    }
  }

  /**
   * Set chat context data
   */
  async setChatContext(userId: string, context: any): Promise<void> {
    // Store for 90 days - chat context should persist but can expire after extended inactivity
    await this.set(`chat_context:${userId}`, context, 90 * 24 * 60 * 60 * 1000, 'context', userId); // 90 days
  }

  /**
   * Get chat context data
   */
  async getChatContext<T>(userId: string): Promise<T | null> {
    return await this.get<T>(`chat_context:${userId}`);
  }

  /**
   * Set user memory data
   */
  async setUserMemory(userId: string, memory: any): Promise<void> {
    // Store indefinitely (365 days) - user memory should persist until explicitly deleted
    await this.set(`user_memory:${userId}`, memory, 365 * 24 * 60 * 60 * 1000, 'memory', userId); // 1 year
  }

  /**
   * Get user memory data
   */
  async getUserMemory<T>(userId: string): Promise<T | null> {
    return await this.get<T>(`user_memory:${userId}`);
  }

  /**
   * Set game context data
   */
  async setGameContext(userId: string, gameId: string, context: any): Promise<void> {
    // Store for 90 days - game context should persist but can expire after extended inactivity
    await this.set(`game_context:${userId}:${gameId}`, context, 90 * 24 * 60 * 60 * 1000, 'context', userId); // 90 days
  }

  /**
   * Get game context data
   */
  async getGameContext<T>(userId: string, gameId: string): Promise<T | null> {
    return await this.get<T>(`game_context:${userId}:${gameId}`);
  }

  /**
   * Set user data with appropriate TTL
   */
  async setUser(userId: string, user: any): Promise<void> {
    // Store indefinitely (365 days) - user data should persist until explicitly deleted
    await this.set(`user:${userId}`, user, 365 * 24 * 60 * 60 * 1000, 'user', userId); // 1 year
  }

  /**
   * Get user data
   */
  async getUser<T>(userId: string): Promise<T | null> {
    return await this.get<T>(`user:${userId}`);
  }

  /**
   * Set rate limit data
   */
  async setRateLimit(key: string, data: { count: number; resetTime: number }): Promise<void> {
    await this.set(`rate_limit:${key}`, data, 15 * 60 * 1000, 'rate_limit'); // 15 minutes
  }

  /**
   * Get rate limit data
   */
  async getRateLimit(key: string): Promise<{ count: number; resetTime: number } | null> {
    return await this.get<{ count: number; resetTime: number }>(`rate_limit:${key}`);
  }

  /**
   * Set conversation data
   */
  async setConversation(conversationId: string, conversation: any, userId?: string): Promise<void> {
    // Store indefinitely (365 days) - conversations should persist until explicitly deleted
    await this.set(`conversation:${conversationId}`, conversation, 365 * 24 * 60 * 60 * 1000, 'conversation', userId); // 1 year
  }

  /**
   * Get conversation data
   */
  async getConversation<T>(conversationId: string): Promise<T | null> {
    return await this.get<T>(`conversation:${conversationId}`);
  }

  /**
   * Initialize cache table if it doesn't exist
   */
  async initializeCacheTable(): Promise<void> {
    try {
      // Check if table exists by trying to select from it
      const { error } = await supabase
        .from(this.CACHE_TABLE)
        .select('key')
        .limit(1);
      
      if (error && error.code === 'PGRST116') {
        // Table doesn't exist, create it
        console.log('[CacheService] Creating cache table...');
        // Note: This would typically be done via a migration
        // For now, we'll just log that it needs to be created
        console.warn('[CacheService] Cache table needs to be created in Supabase');
      }
    } catch (error) {
      console.warn('[CacheService] Error checking cache table:', error);
    }
  }
}

// Export singleton instance
export const cacheService = new CacheService();

// Initialize cache table on startup
cacheService.initializeCacheTable();

// Auto-cleanup every 5 minutes
setInterval(() => {
  cacheService.cleanup();
}, 5 * 60 * 1000);


```n

## src\services\characterImmersionService.ts

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\services\characterImmersionService.ts.Extension.TrimStart('.'))

export interface GameTone {
  adjectives: string[];
  personality: string;
  speechPattern: string;
  loreStyle: string;
}

export interface ImmersionContext {
  gameTitle: string;
  genre: string;
  currentLocation?: string;
  recentEvents?: string[];
  playerProgress?: number;
}

class CharacterImmersionService {
  private gameTones: Record<string, GameTone> = {
    'Action RPG': {
      adjectives: ['epic', 'heroic', 'legendary', 'mystical', 'ancient'],
      personality: 'wise and experienced adventurer',
      speechPattern: 'speaks with the wisdom of ages and the thrill of adventure',
      loreStyle: 'rich with mythology and ancient secrets'
    },
    'FPS': {
      adjectives: ['intense', 'tactical', 'precise', 'combat-ready', 'strategic'],
      personality: 'battle-hardened soldier',
      speechPattern: 'communicates with military precision and combat experience',
      loreStyle: 'focused on warfare, technology, and military history'
    },
    'Horror': {
      adjectives: ['ominous', 'chilling', 'mysterious', 'haunting', 'eerie'],
      personality: 'knowledgeable survivor',
      speechPattern: 'speaks with caution and awareness of lurking dangers',
      loreStyle: 'dark and atmospheric, filled with supernatural elements'
    },
    'Puzzle': {
      adjectives: ['logical', 'methodical', 'analytical', 'clever', 'systematic'],
      personality: 'brilliant problem-solver',
      speechPattern: 'explains with clear logic and step-by-step reasoning',
      loreStyle: 'intellectual and mysterious, focused on patterns and solutions'
    },
    'RPG': {
      adjectives: ['immersive', 'narrative-driven', 'character-focused', 'epic', 'emotional'],
      personality: 'storyteller and guide',
      speechPattern: 'speaks like a narrator, weaving tales and character development',
      loreStyle: 'deep character development and rich storytelling'
    },
    'Strategy': {
      adjectives: ['tactical', 'strategic', 'calculated', 'methodical', 'commanding'],
      personality: 'master tactician',
      speechPattern: 'speaks with authority and strategic insight',
      loreStyle: 'focused on warfare, politics, and grand strategy'
    },
    'Adventure': {
      adjectives: ['exploratory', 'curious', 'adventurous', 'discoverer', 'wanderer'],
      personality: 'intrepid explorer',
      speechPattern: 'speaks with wonder and excitement about discovery',
      loreStyle: 'filled with exploration, discovery, and world-building'
    },
    'Default': {
      adjectives: ['helpful', 'knowledgeable', 'friendly', 'supportive', 'engaging'],
      personality: 'helpful gaming companion',
      speechPattern: 'speaks clearly and helpfully',
      loreStyle: 'focused on gameplay and helpful information'
    }
  };

  /**
   * Get the appropriate tone for a game based on its genre
   */
  getGameTone(genre: string): GameTone {
    return this.gameTones[genre] || this.gameTones['Default'];
  }

  /**
   * Generate immersive context for AI prompts
   */
  generateImmersionContext(context: ImmersionContext): string {
    const tone = this.getGameTone(context.genre);
    
    let immersionText = `**Immersion Context for ${context.gameTitle}:**\n`;
    immersionText += `You are speaking as a ${tone.personality} who ${tone.speechPattern}.\n`;
    immersionText += `The game's lore is ${tone.loreStyle}.\n`;
    
    if (context.currentLocation) {
      immersionText += `The player is currently in: ${context.currentLocation}\n`;
    }
    
    if (context.recentEvents && context.recentEvents.length > 0) {
      immersionText += `Recent events: ${context.recentEvents.join(', ')}\n`;
    }
    
    if (context.playerProgress !== undefined) {
      immersionText += `Player progress: ${context.playerProgress}%\n`;
    }
    
    immersionText += `\n**Response Guidelines:**\n`;
    immersionText += `- Use ${tone.adjectives.join(', ')} language\n`;
    immersionText += `- Maintain the ${tone.personality} personality\n`;
    immersionText += `- Focus on ${tone.loreStyle} elements\n`;
    immersionText += `- Keep responses immersive and in-character\n`;
    
    return immersionText;
  }

  /**
   * Enhance AI response with game-specific immersion
   */
  enhanceResponse(response: string, context: ImmersionContext): string {
    
    // Add immersive opening based on game genre
    let enhancedResponse = response;
    
    if (context.genre === 'Horror') {
      enhancedResponse = `*The shadows seem to whisper as you approach...*\n\n${response}`;
    } else if (context.genre === 'Action RPG') {
      enhancedResponse = `*The ancient knowledge flows through your mind...*\n\n${response}`;
    } else if (context.genre === 'FPS') {
      enhancedResponse = `*Mission briefing updated...*\n\n${response}`;
    } else if (context.genre === 'Puzzle') {
      enhancedResponse = `*The solution becomes clearer...*\n\n${response}`;
    }
    
    return enhancedResponse;
  }

  /**
   * Get genre-specific suggestions for follow-up questions
   */
  getGenreSuggestions(genre: string, _context: ImmersionContext): string[] {
    
    const baseSuggestions = [
      "Tell me more about this area",
      "What should I do next?",
      "Any tips for this situation?"
    ];
    
    const genreSpecificSuggestions: Record<string, string[]> = {
      'Action RPG': [
        "What's the lore behind this location?",
        "How do I improve my character?",
        "What quests are available here?",
        "Tell me about the local NPCs"
      ],
      'FPS': [
        "What's the best tactical approach?",
        "What weapons work best here?",
        "How do I flank the enemy?",
        "What's the mission objective?"
      ],
      'Horror': [
        "What's the history of this place?",
        "How do I survive this area?",
        "What should I be careful of?",
        "Tell me about the local legends"
      ],
      'Puzzle': [
        "What's the pattern here?",
        "How do I solve this step by step?",
        "What clues am I missing?",
        "What's the logical approach?"
      ],
      'RPG': [
        "Tell me about the story so far",
        "What choices should I make?",
        "How do I develop my character?",
        "What's the significance of this moment?"
      ],
      'Strategy': [
        "What's the best strategy here?",
        "How do I manage my resources?",
        "What's the optimal build order?",
        "How do I counter this threat?"
      ]
    };
    
    return genreSpecificSuggestions[genre] || baseSuggestions;
  }

  /**
   * Create immersive sub-tab content based on genre
   */
  createImmersiveSubTabContent(tabType: string, gameTitle: string, genre: string): string {
    
    const contentTemplates: Record<string, Record<string, string>> = {
      'walkthrough': {
        'Action RPG': `# ${gameTitle} - Walkthrough\n\n*The path of the hero unfolds before you...*\n\n## Current Objective\n*Your quest awaits...*\n\n## Next Steps\n*The adventure continues...*`,
        'FPS': `# ${gameTitle} - Mission Briefing\n\n*Mission parameters updated...*\n\n## Objective\n*Target acquired...*\n\n## Tactical Approach\n*Weapons ready...*`,
        'Horror': `# ${gameTitle} - Survival Guide\n\n*The darkness holds many secrets...*\n\n## Current Situation\n*Something stirs in the shadows...*\n\n## Survival Tips\n*Stay alert...*`,
        'Default': `# ${gameTitle} - Walkthrough\n\n## Current Objective\n*Continue your journey...*\n\n## Next Steps\n*Progress forward...*`
      },
      'tips': {
        'Action RPG': `# ${gameTitle} - Wisdom of the Ages\n\n*Ancient knowledge flows through these tips...*\n\n## Combat Mastery\n*Master the blade and magic...*\n\n## Exploration Secrets\n*Hidden treasures await...*`,
        'FPS': `# ${gameTitle} - Tactical Intelligence\n\n*Mission-critical information...*\n\n## Weapon Mastery\n*Know your arsenal...*\n\n## Tactical Positioning\n*Control the battlefield...*`,
        'Horror': `# ${gameTitle} - Survival Knowledge\n\n*The darkness teaches harsh lessons...*\n\n## Survival Tactics\n*Stay alive...*\n\n## Environmental Awareness\n*Trust your instincts...*`,
        'Default': `# ${gameTitle} - Tips & Tricks\n\n## General Tips\n*Improve your gameplay...*\n\n## Advanced Techniques\n*Master the game...*`
      }
    };
    
    return contentTemplates[tabType]?.[genre] || contentTemplates[tabType]?.['Default'] || `# ${gameTitle} - ${tabType}\n\n*Content loading...*`;
  }
}

export const characterImmersionService = new CharacterImmersionService();


```n

## src\services\chatMemoryService.ts

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\services\chatMemoryService.ts.Extension.TrimStart('.'))

import { cacheService } from './cacheService';
import { Conversation, ChatMessage } from '../types';

/**
 * Chat Memory Service using centralized cache
 * Handles chat persistence, context, and memory management
 */
class ChatMemoryService {
  private readonly CONVERSATION_TTL = 30 * 24 * 60 * 60 * 1000; // 30 days
  private readonly CONTEXT_TTL = 24 * 60 * 60 * 1000; // 24 hours

  /**
   * Save conversation with full context
   */
  async saveConversation(conversation: Conversation, userId?: string): Promise<void> {
    const key = `conversation:${conversation.id}`;
    await cacheService.set(key, conversation, this.CONVERSATION_TTL, 'conversation', userId);
  }

  /**
   * Load conversation with context
   */
  async loadConversation(conversationId: string): Promise<Conversation | null> {
    const key = `conversation:${conversationId}`;
    return await cacheService.get<Conversation>(key);
  }

  /**
   * Save chat context (recent messages, user preferences, etc.)
   */
  async saveChatContext(userId: string, context: {
    recentMessages: ChatMessage[];
    userPreferences: any;
    gameContext: any;
    conversationSummary: string;
  }): Promise<void> {
    await cacheService.setChatContext(userId, context);
  }

  /**
   * Load chat context
   */
  async loadChatContext(userId: string): Promise<any | null> {
    return await cacheService.getChatContext(userId);
  }

  /**
   * Save AI memory/insights about user
   */
  async saveUserMemory(userId: string, memory: {
    preferences: any;
    playStyle: string;
    favoriteGames: string[];
    lastInteractions: any[];
    personalityProfile: any;
  }): Promise<void> {
    await cacheService.setUserMemory(userId, memory);
  }

  /**
   * Load AI memory about user
   */
  async loadUserMemory(userId: string): Promise<any | null> {
    return await cacheService.getUserMemory(userId);
  }

  /**
   * Save conversation summary for quick context
   */
  async saveConversationSummary(conversationId: string, summary: {
    keyPoints: string[];
    userQuestions: string[];
    aiInsights: string[];
    gameContext: any;
  }): Promise<void> {
    const key = `conversation_summary:${conversationId}`;
    await cacheService.set(key, summary, this.CONTEXT_TTL);
  }

  /**
   * Load conversation summary
   */
  async loadConversationSummary(conversationId: string): Promise<any | null> {
    const key = `conversation_summary:${conversationId}`;
    return await cacheService.get(key);
  }

  /**
   * Save game-specific context
   */
  async saveGameContext(userId: string, gameId: string, context: {
    currentProgress: any;
    lastScreenshot: string;
    recentHints: string[];
    userFrustrationLevel: number;
    preferredHintStyle: string;
  }): Promise<void> {
    await cacheService.setGameContext(userId, gameId, context);
  }

  /**
   * Load game-specific context
   */
  async loadGameContext(userId: string, gameId: string): Promise<any | null> {
    return await cacheService.getGameContext(userId, gameId);
  }

  /**
   * Get all user conversations (for sidebar)
   */
  async getUserConversations(_userId: string): Promise<Conversation[]> {
    // This would need a different approach - maybe a separate table
    // For now, we'll use a pattern-based approach
    const conversations: Conversation[] = [];
    
    // In a real implementation, you'd query a conversations table
    // or use a different caching strategy for this
    return conversations;
  }

  /**
   * Clear all chat data for a user
   */
  async clearUserChatData(userId: string): Promise<void> {
    // Use the enhanced cache service to clear all user data
    await cacheService.clearUserCache(userId);
  }
}

export const chatMemoryService = new ChatMemoryService();


```n

## src\services\contextSummarizationService.ts

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\services\contextSummarizationService.ts.Extension.TrimStart('.'))

import { Conversation, ChatMessage } from '../types';
import { aiService } from './aiService';

interface SummarizationResult {
  summary: string;
  wordCount: number;
  messagesIncluded: number;
  originalWordCount: number;
}

/**
 * Context Summarization Service
 * Keeps conversation context manageable by summarizing message history to 300-word limit
 */
class ContextSummarizationService {
  private readonly MAX_WORDS = 300;
  private readonly RECENT_MESSAGE_COUNT = 8; // Keep last 8 messages unsummarized for context continuity

  /**
   * Count words in text
   */
  private countWords(text: string): number {
    return text.trim().split(/\s+/).filter(word => word.length > 0).length;
  }

  /**
   * Calculate total word count of messages
   */
  private getTotalWordCount(messages: ChatMessage[]): number {
    return messages.reduce((total, msg) => {
      const contentWords = this.countWords(msg.content);
      return total + contentWords;
    }, 0);
  }

  /**
   * Check if conversation needs summarization
   */
  shouldSummarize(conversation: Conversation): boolean {
    if (!conversation.messages || conversation.messages.length <= this.RECENT_MESSAGE_COUNT) {
      return false; // Too few messages to benefit from summarization
    }

    const totalWords = this.getTotalWordCount(conversation.messages);
    console.log(`ðŸ“Š [ContextSummarization] Total words in conversation: ${totalWords}`);

    // Summarize if exceeding 3x the target (900 words) to keep context manageable
    return totalWords > this.MAX_WORDS * 3;
  }

  /**
   * Split messages into "to summarize" and "to keep"
   */
  private splitMessages(messages: ChatMessage[]): { toSummarize: ChatMessage[]; toKeep: ChatMessage[] } {
    if (messages.length <= this.RECENT_MESSAGE_COUNT) {
      return { toSummarize: [], toKeep: messages };
    }

    const splitIndex = messages.length - this.RECENT_MESSAGE_COUNT;
    return {
      toSummarize: messages.slice(0, splitIndex),
      toKeep: messages.slice(splitIndex)
    };
  }

  /**
   * Generate a concise summary of older messages
   */
  async summarizeMessages(
    messages: ChatMessage[], 
    gameTitle?: string,
    genre?: string
  ): Promise<SummarizationResult> {
    console.log(`ðŸ“ [ContextSummarization] Summarizing ${messages.length} messages`);

    const originalWordCount = this.getTotalWordCount(messages);

    // Build context for summarization
    const conversationText = messages
      .map(msg => `${msg.role === 'user' ? 'User' : 'Assistant'}: ${msg.content}`)
      .join('\n\n');

    const contextInfo = gameTitle && genre
      ? `This is a conversation about "${gameTitle}" (${genre}).`
      : 'This is a general conversation.';

    const summaryPrompt = `${contextInfo}

Please provide a concise summary of the following conversation history. Focus on:
- Key topics discussed
- Important decisions or choices made
- Game progress or story developments (if applicable)
- User preferences or interests mentioned

Keep the summary under ${this.MAX_WORDS} words while preserving essential context.

Conversation to summarize:
${conversationText}

Provide ONLY the summary, no additional commentary.`;

    try {
      // Create a temporary conversation for summarization
      const tempConversation: Conversation = {
        id: 'temp-summary',
        title: 'Summary Request',
        messages: [{ 
          id: 'summary-msg-' + Date.now(),
          role: 'user', 
          content: summaryPrompt, 
          timestamp: Date.now() 
        }],
        createdAt: Date.now(),
        updatedAt: Date.now(),
        isActive: false,
        isGameHub: false
      };

      // Get AI summary using getChatResponse
      // Create minimal user object for summarization
      const summaryUser = {
        id: 'system',
        email: 'system@otakon.ai',
        profileData: null
      } as any;

      const response = await aiService.getChatResponse(
        tempConversation,
        summaryUser,
        summaryPrompt,
        false, // Not active session
        false // No images
      );

      const summary = response.content.trim();
      const summaryWordCount = this.countWords(summary);

      console.log(`âœ… [ContextSummarization] Summary generated: ${summaryWordCount} words (reduced from ${originalWordCount})`);

      return {
        summary,
        wordCount: summaryWordCount,
        messagesIncluded: messages.length,
        originalWordCount
      };

    } catch (error) {
      console.error('âŒ [ContextSummarization] Failed to generate summary:', error);
      
      // Fallback: Create simple concatenated summary
      const fallbackSummary = messages
        .slice(0, 5) // Take first 5 messages
        .map(msg => msg.content.substring(0, 100)) // Truncate each
        .join(' ... ')
        .substring(0, this.MAX_WORDS * 6); // Rough word limit

      return {
        summary: `[Previous conversation context] ${fallbackSummary}`,
        wordCount: this.countWords(fallbackSummary),
        messagesIncluded: messages.length,
        originalWordCount
      };
    }
  }

  /**
   * Apply summarization to conversation
   * Returns updated conversation with summarized history
   */
  async applyContextSummarization(conversation: Conversation): Promise<Conversation> {
    if (!this.shouldSummarize(conversation)) {
      console.log('ðŸ“Š [ContextSummarization] No summarization needed');
      return conversation;
    }

    console.log('ðŸ”„ [ContextSummarization] Applying context summarization...');

    const { toSummarize, toKeep } = this.splitMessages(conversation.messages);

    if (toSummarize.length === 0) {
      return conversation; // Nothing to summarize
    }

    // Generate summary of older messages
    const summaryResult = await this.summarizeMessages(
      toSummarize,
      conversation.gameTitle,
      conversation.genre
    );

    // Create summary message
    const summaryMessage: ChatMessage = {
      id: 'summary-' + Date.now(),
      role: 'system',
      content: summaryResult.summary,
      timestamp: toSummarize[toSummarize.length - 1].timestamp,
      metadata: {
        isSummary: true,
        messagesIncluded: summaryResult.messagesIncluded,
        originalWordCount: summaryResult.originalWordCount,
        summaryWordCount: summaryResult.wordCount
      }
    };

    // Build new message array: [summary] + [recent messages]
    const updatedMessages = [summaryMessage, ...toKeep];

    console.log(`âœ… [ContextSummarization] Context optimized: ${conversation.messages.length} messages â†’ ${updatedMessages.length} (${summaryResult.originalWordCount} words â†’ ${summaryResult.wordCount} + recent)`);

    return {
      ...conversation,
      messages: updatedMessages,
      updatedAt: Date.now()
    };
  }

  /**
   * Get context-aware message history for AI
   * Ensures context stays under limit before sending to AI
   */
  async getOptimizedContext(conversation: Conversation): Promise<ChatMessage[]> {
    if (!this.shouldSummarize(conversation)) {
      return conversation.messages;
    }

    const optimizedConversation = await this.applyContextSummarization(conversation);
    return optimizedConversation.messages;
  }

  /**
   * Estimate if next message will trigger summarization
   */
  willTriggerSummarization(conversation: Conversation): boolean {
    const totalWords = this.getTotalWordCount(conversation.messages);
    // Will trigger if we're at 80% of the threshold
    return totalWords > (this.MAX_WORDS * 3 * 0.8);
  }
}

export const contextSummarizationService = new ContextSummarizationService();


```n

## src\services\conversationService.ts

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\services\conversationService.ts.Extension.TrimStart('.'))

import { StorageService } from './storageService';
import { cacheService } from './cacheService';
import { chatMemoryService } from './chatMemoryService';
import { SupabaseService } from './supabaseService';
import { toastService } from './toastService';
import { Conversations, Conversation, ChatMessage, UserTier } from '../types';
import { STORAGE_KEYS, DEFAULT_CONVERSATION_TITLE, GAME_HUB_ID, USER_TIERS } from '../constants';

// Initialize Supabase service instance
const supabaseService = SupabaseService.getInstance();

// âœ… QUERY-BASED LIMITS: Conversations are unlimited for all tiers.
// Limits are based on queries (text vs image) per month, tracked in database:
// - Free: 55 text + 25 image queries/month
// - Pro: 1,583 text + 328 image queries/month
// - Vanguard Pro: 1,583 text + 328 image queries/month
// See: users table (text_count, image_count, text_limit, image_limit, last_reset)

export class ConversationService {
  // âœ… PERFORMANCE: Deduplicate conversation creation attempts
  private static pendingCreations = new Map<string, Promise<{ success: boolean; reason?: string }>>();
  
  // âœ… Get current user ID for Supabase operations
  private static async getCurrentUserId(): Promise<string | null> {
    try {
      const { authService } = await import('./authService');
      const user = authService.getCurrentUser();
      return user?.authUserId || null;
    } catch (error) {
      console.warn('Could not get user ID from auth service:', error);
      return null;
    }
  }

  // âœ… SCALABILITY: Get user tier from auth service
  private static async getUserTier(): Promise<UserTier> {
    try {
      // Try to get from auth service first
      const { authService } = await import('./authService');
      const user = authService.getCurrentUser();
      if (user?.tier) {
        return user.tier;
      }
    } catch (error) {
      console.warn('Could not get user tier from auth service:', error);
    }
    
    // Fallback to localStorage
    const user = StorageService.get(STORAGE_KEYS.USER, null) as any;
    return user?.tier || USER_TIERS.FREE;
  }

  // âœ… QUERY-BASED LIMITS: Check if user can send a text query
  static async canSendTextQuery(): Promise<{ allowed: boolean; reason?: string; used?: number; limit?: number }> {
    try {
      const { authService } = await import('./authService');
      const user = authService.getCurrentUser();
      
      if (!user) {
        return { allowed: false, reason: 'User not authenticated' };
      }

      const textCount = user.textCount || 0;
      const textLimit = user.textLimit || 55; // Default to free tier
      
      if (textCount >= textLimit) {
        const tier = user.tier || 'free';
        return {
          allowed: false,
          reason: `You've used all ${textLimit} text queries this month. ${tier === 'free' ? 'Upgrade to Pro for 1,583 queries!' : 'Your queries will reset next month.'}`,
          used: textCount,
          limit: textLimit
        };
      }
      
      return { allowed: true, used: textCount, limit: textLimit };
    } catch (error) {
      console.error('Error checking text query limit:', error);
      toastService.error('Failed to check query limit. Please try again.');
      return { allowed: false, reason: 'Failed to check query limit' };
    }
  }

  // âœ… QUERY-BASED LIMITS: Check if user can send an image query
  static async canSendImageQuery(): Promise<{ allowed: boolean; reason?: string; used?: number; limit?: number }> {
    try {
      const { authService } = await import('./authService');
      const user = authService.getCurrentUser();
      
      if (!user) {
        return { allowed: false, reason: 'User not authenticated' };
      }

      const imageCount = user.imageCount || 0;
      const imageLimit = user.imageLimit || 25; // Default to free tier
      
      if (imageCount >= imageLimit) {
        const tier = user.tier || 'free';
        return {
          allowed: false,
          reason: `You've used all ${imageLimit} image queries this month. ${tier === 'free' ? 'Upgrade to Pro for 328 image queries!' : 'Your queries will reset next month.'}`,
          used: imageCount,
          limit: imageLimit
        };
      }
      
      return { allowed: true, used: imageCount, limit: imageLimit };
    } catch (error) {
      console.error('Error checking image query limit:', error);
      toastService.error('Failed to check query limit. Please try again.');
      return { allowed: false, reason: 'Failed to check query limit' };
    }
  }

  // âœ… In-memory cache to reduce Supabase reads during polling
  private static conversationsCache: { data: Conversations; timestamp: number } | null = null;
  private static CACHE_TTL = 2000; // 2 second cache (short TTL for near-real-time)

  static async getConversations(skipCache = false): Promise<Conversations> {
    const userId = await this.getCurrentUserId();
    let conversations: Conversations = {};
    
    // âœ… PERFORMANCE: Check in-memory cache first (unless explicitly skipped)
    if (!skipCache && this.conversationsCache && Date.now() - this.conversationsCache.timestamp < this.CACHE_TTL) {
      console.log('ðŸ” [ConversationService] Using cached conversations (age:', Date.now() - this.conversationsCache.timestamp, 'ms)');
      return this.conversationsCache.data;
    }
    
    // âœ… PRIMARY: Load from Supabase
    if (userId) {
      try {
        console.log('ðŸ” [ConversationService] Loading conversations from Supabase for user:', userId);
        const supabaseConvs = await supabaseService.getConversations(userId);
        
        // Convert array to object format
        conversations = supabaseConvs.reduce((acc, conv) => {
          acc[conv.id] = conv;
          return acc;
        }, {} as Conversations);
        
        console.log('ðŸ” [ConversationService] Loaded', Object.keys(conversations).length, 'conversations from Supabase');
        
        // âœ… Update cache
        this.conversationsCache = {
          data: conversations,
          timestamp: Date.now()
        };
        
        // Also update localStorage as backup
        if (Object.keys(conversations).length > 0) {
          StorageService.set(STORAGE_KEYS.CONVERSATIONS, conversations);
        }
        
      } catch (error) {
        console.error('ðŸ” [ConversationService] Failed to load from Supabase, falling back to localStorage:', error);
        toastService.warning('Using offline conversations. Some data may not be synced.');
        conversations = StorageService.get(STORAGE_KEYS.CONVERSATIONS, {}) as Conversations;
      }
    } else {
      // No user logged in, use localStorage
      console.log('ðŸ” [ConversationService] No user ID, loading from localStorage');
      conversations = StorageService.get(STORAGE_KEYS.CONVERSATIONS, {}) as Conversations;
    }
    
    // Migration: Update existing "General Chat" or "Everything else" titles to "Game Hub"
    let needsUpdate = false;
    Object.values(conversations).forEach((conv: Conversation) => {
      if (conv.title === 'General Chat' || conv.title === 'Everything else') {
        conv.title = DEFAULT_CONVERSATION_TITLE; // "Game Hub"
        conv.id = GAME_HUB_ID; // Ensure ID is correct
        conv.isGameHub = true; // Mark as Game Hub
        needsUpdate = true;
      }
      // Also ensure any conversation with game-hub ID has the flag set
      if (conv.id === GAME_HUB_ID && !conv.isGameHub) {
        conv.isGameHub = true;
        needsUpdate = true;
      }
    });
    
    if (needsUpdate) {
      await this.setConversations(conversations);
    }
    
    // âœ… QUERY-BASED LIMITS: Conversations are now unlimited for all tiers
    // Limits are based on queries (text/image) per month, not conversation counts
    
    return conversations;
  }

  static async setConversations(conversations: Conversations, retryCount = 0): Promise<void> {
    const userId = await this.getCurrentUserId();
    console.log('ðŸ” [ConversationService] Saving', Object.keys(conversations).length, 'conversations');
    
    // âœ… Invalidate cache when writing
    this.conversationsCache = null;
    
    // Always save to localStorage as backup
    StorageService.set(STORAGE_KEYS.CONVERSATIONS, conversations);
    console.log('ðŸ” [ConversationService] Saved to localStorage');
    
    // âœ… PRIMARY: Save to Supabase if user is logged in (with retry logic)
    if (userId) {
      try {
        console.log('ðŸ” [ConversationService] Syncing to Supabase...');
        // Save each conversation to Supabase
        const savePromises = Object.values(conversations).map(async (conv) => {
          try {
            // Check if conversation exists in Supabase
            const existingConvs = await supabaseService.getConversations(userId);
            const exists = existingConvs.some(c => c.id === conv.id);
            
            if (exists) {
              // Update existing
              await supabaseService.updateConversation(conv.id, conv);
            } else {
              // Create new - but need to handle the ID correctly
              // Supabase generates UUID, so we may need to update our local ID
              await supabaseService.createConversation(userId, conv);
            }
          } catch (error) {
            console.warn(`Failed to save conversation ${conv.id} to Supabase:`, error);
            throw error; // Re-throw to trigger retry
          }
        });
        
        await Promise.all(savePromises);
        console.log('ðŸ” [ConversationService] Synced to Supabase successfully');
        
      } catch (error) {
        console.error('ðŸ” [ConversationService] Failed to sync to Supabase:', error);
        
        // âœ… Retry with exponential backoff (3 attempts)
        if (retryCount < 3) {
          const delay = 1000 * Math.pow(2, retryCount); // 1s, 2s, 4s
          console.warn(`ðŸ”„ [ConversationService] Retrying in ${delay}ms (attempt ${retryCount + 1}/3)...`);
          await new Promise(resolve => setTimeout(resolve, delay));
          return this.setConversations(conversations, retryCount + 1);
        } else {
          // âœ… Final failure - notify user
          console.error('âŒ [ConversationService] Supabase sync failed after 3 attempts');
          // Import toastService dynamically to avoid circular dependency
          import('./toastService').then(({ toastService }) => {
            toastService.warning('Changes saved locally. Will sync when online.');
          }).catch(err => console.error('Failed to show toast:', err));
        }
      }
    }
  }

  static createConversation(title?: string, id?: string): Conversation {
    const now = Date.now();
    const isGameHub = title === DEFAULT_CONVERSATION_TITLE;
    // Use 'game-hub' as ID for the default Game Hub conversation
    const conversationId = id || (isGameHub ? GAME_HUB_ID : `conv_${now}`);
    
    return {
      id: conversationId,
      title: title || DEFAULT_CONVERSATION_TITLE,
      messages: [],
      createdAt: now,
      updatedAt: now,
      isActive: true,
      isGameHub: isGameHub, // Set flag for Game Hub
    };
  }

  static async addConversation(conversation: Conversation): Promise<{ success: boolean; reason?: string }> {
    // âœ… PERFORMANCE: Check if there's already a pending creation for this conversation
    if (this.pendingCreations.has(conversation.id)) {
      console.log('ðŸ” [ConversationService] Deduplicating conversation creation for:', conversation.id);
      return await this.pendingCreations.get(conversation.id)!;
    }

    // Create a new promise and store it
    const creationPromise = this._addConversationInternal(conversation);
    this.pendingCreations.set(conversation.id, creationPromise);

    try {
      const result = await creationPromise;
      return result;
    } finally {
      // Clean up the pending request
      this.pendingCreations.delete(conversation.id);
    }
  }

  private static async _addConversationInternal(conversation: Conversation): Promise<{ success: boolean; reason?: string }> {
    const userId = await this.getCurrentUserId();
    
    // âœ… QUERY-BASED LIMITS: Conversations are unlimited, no need to check count
    // Query limits (text/image) are checked in aiService before sending messages
    
    const conversations = await this.getConversations();
    
    // âœ… FIX: Prevent duplicate Game Hub conversations
    if (conversation.isGameHub || conversation.title === DEFAULT_CONVERSATION_TITLE) {
      const existingGameHub = Object.values(conversations).find(
        conv => conv.isGameHub || conv.title === DEFAULT_CONVERSATION_TITLE || conv.id === GAME_HUB_ID
      );
      if (existingGameHub) {
        return { 
          success: false, 
          reason: 'A "Game Hub" conversation already exists. Please use the existing one or create a conversation with a different title.' 
        };
      }
    }
    
    // âœ… Conversations are unlimited - add the new conversation
    conversations[conversation.id] = conversation;
    console.log('ðŸ” [ConversationService] Adding new conversation:', conversation.id, conversation.title);
    
    // âœ… PRIMARY: Save to Supabase first if user logged in
    if (userId) {
      try {
        const newId = await supabaseService.createConversation(userId, conversation);
        if (newId) {
          // Update conversation with Supabase-generated ID if different
          if (newId !== conversation.id) {
            delete conversations[conversation.id];
            conversation.id = newId;
            conversations[newId] = conversation;
          }
          console.log('ðŸ” [ConversationService] Created in Supabase with ID:', newId);
        }
      } catch (error) {
        console.error('ðŸ” [ConversationService] Failed to create in Supabase:', error);
      }
    }
    
    // Save to localStorage as backup
    await this.setConversations(conversations);
    
    console.log('ðŸ” [ConversationService] New conversation persisted successfully');
    return { success: true };
  }

  static async updateConversation(id: string, updates: Partial<Conversation>): Promise<void> {
    const userId = await this.getCurrentUserId();
    const conversations = await this.getConversations();
    
    if (conversations[id]) {
      conversations[id] = {
        ...conversations[id],
        ...updates,
        updatedAt: Date.now(),
      };
      
      // âœ… PRIMARY: Update in Supabase first
      if (userId) {
        try {
          await supabaseService.updateConversation(id, conversations[id]);
          console.log('ðŸ” [ConversationService] Updated conversation in Supabase:', id);
        } catch (error) {
          console.error('ðŸ” [ConversationService] Failed to update in Supabase:', error);
        }
      }
      
      // Save to localStorage as backup
      await this.setConversations(conversations);
    }
  }

  static async deleteConversation(id: string): Promise<void> {
    const userId = await this.getCurrentUserId();
    const conversations = await this.getConversations();
    
    // âœ… PROTECTION: Prevent deletion of Game Hub
    const conversation = conversations[id];
    if (conversation?.isGameHub || id === GAME_HUB_ID) {
      console.warn('ðŸ” [ConversationService] Cannot delete Game Hub conversation');
      toastService.warning('Cannot delete the Game Hub conversation. It\'s your main conversation space!');
      throw new Error('Cannot delete the Game Hub conversation');
    }
    
    delete conversations[id];
    
    // âœ… PRIMARY: Delete from Supabase first
    if (userId) {
      try {
        await supabaseService.deleteConversation(id);
        console.log('ðŸ” [ConversationService] Deleted conversation from Supabase:', id);
      } catch (error) {
        console.error('ðŸ” [ConversationService] Failed to delete from Supabase:', error);
      }
    }
    
    // Update localStorage as backup
    await this.setConversations(conversations);
  }

  static async addMessage(conversationId: string, message: ChatMessage): Promise<{ success: boolean; reason?: string }> {
    // âœ… QUERY-BASED LIMITS: Message limits removed - unlimited messages per conversation
    // Query limits (text/image) are checked in aiService before sending to AI
    
    const conversations = await this.getConversations();
    if (conversations[conversationId]) {
      const conversation = conversations[conversationId];
      
      // âœ… Check for duplicates to prevent race condition issues
      const exists = conversation.messages.some(m => m.id === message.id);
      if (exists) {
        console.warn(`âš ï¸ [ConversationService] Message ${message.id} already exists in conversation ${conversationId}, skipping`);
        return { success: true, reason: 'Message already exists' };
      }
      
      // Simply add the message - no limits
      conversation.messages.push(message);
      conversation.updatedAt = Date.now();
      
      await this.setConversations(conversations);
      
      // âœ… SCALABILITY: Save individual conversation to cache (non-blocking)
      chatMemoryService.saveConversation(conversation)
        .catch(error => console.warn('Failed to save conversation to cache:', error));
      
      // âœ… SCALABILITY: Save chat context for AI memory (non-blocking)
      // Fire and forget - don't block on this operation
      import('./authService').then(({ authService }) => {
        const user = authService.getCurrentUser();
        if (user?.authUserId) {
          chatMemoryService.saveChatContext(user.authUserId, {
            recentMessages: conversation.messages.slice(-10), // Last 10 messages
            userPreferences: {}, // This would come from user service
            gameContext: {}, // This would come from game context
            conversationSummary: conversation.title
          }).catch(error => console.warn('Failed to save chat context:', error));
        }
      }).catch(error => console.warn('Failed to import authService:', error));
      
      return { success: true };
    }
    
    return { success: false, reason: 'Conversation not found' };
  }

  static async getActiveConversation(): Promise<Conversation | null> {
    const conversations = await this.getConversations();
    const activeConversation = Object.values(conversations).find(conv => conv.isActive);
    return activeConversation || null;
  }

  // âœ… QUERY-BASED USAGE: Get user's current query usage statistics
  static async getUsageStats(): Promise<{
    textQueries: { current: number; limit: number; tier: UserTier };
    imageQueries: { current: number; limit: number; tier: UserTier };
    conversations: { current: number; tier: UserTier };
  }> {
    const { authService } = await import('./authService');
    const user = authService.getCurrentUser();
    const conversations = await this.getConversations();
    const tier = await this.getUserTier();
    
    if (!user) {
      // Return defaults if no user
      return {
        textQueries: { current: 0, limit: 55, tier },
        imageQueries: { current: 0, limit: 25, tier },
        conversations: { current: 0, tier }
      };
    }
    
    return {
      textQueries: {
        current: user.textCount || 0,
        limit: user.textLimit || 55,
        tier
      },
      imageQueries: {
        current: user.imageCount || 0,
        limit: user.imageLimit || 25,
        tier
      },
      conversations: {
        current: Object.keys(conversations).length,
        tier
      }
    };
  }

  static async setActiveConversation(id: string): Promise<void> {
    const conversations = await this.getConversations();
    
    // Set all conversations to inactive
    Object.values(conversations).forEach(conv => {
      conv.isActive = false;
    });
    
    // Set the selected conversation as active
    if (conversations[id]) {
      conversations[id].isActive = true;
    }
    
    await this.setConversations(conversations);
  }

  static async clearAllConversations(): Promise<void> {
    await this.setConversations({});
    
    // âœ… SCALABILITY: Clear all conversation cache entries
    try {
      await cacheService.clear();
    } catch (error) {
      console.warn('Failed to clear conversation cache:', error);
    }
  }

  static async clearConversation(conversationId: string): Promise<void> {
    const conversations = await this.getConversations();
    if (conversations[conversationId]) {
      // Clear messages but keep the conversation
      conversations[conversationId] = {
        ...conversations[conversationId],
        messages: [],
        updatedAt: Date.now(),
      };
      
      await this.setConversations(conversations);
      await chatMemoryService.saveConversation(conversations[conversationId]);
    }
  }

  /**
   * Update sub-tab content for a conversation
   */
  static async updateSubTabContent(conversationId: string, subTabId: string, content: string): Promise<void> {
    const conversations = await this.getConversations();
    const conversation = conversations[conversationId];
    
    if (!conversation || !conversation.subtabs) {
      throw new Error('Conversation or sub-tabs not found');
    }

    const updatedSubTabs = conversation.subtabs.map(tab => 
      tab.id === subTabId 
        ? { ...tab, content, isNew: false, status: 'loaded' as const }
        : tab
    );

    await this.updateConversation(conversationId, {
      subtabs: updatedSubTabs,
      updatedAt: Date.now()
    });
  }

  /**
   * Get a specific conversation by ID
   */
  static async getConversation(conversationId: string): Promise<Conversation | null> {
    const conversations = await this.getConversations();
    return conversations[conversationId] || null;
  }

  /**
   * Ensure Game Hub exists - creates it if missing
   * Returns the Game Hub conversation
   */
  static async ensureGameHubExists(): Promise<Conversation> {
    const conversations = await this.getConversations();
    
    // Check if Game Hub already exists
    const existingGameHub = Object.values(conversations).find(
      conv => conv.isGameHub || conv.id === GAME_HUB_ID || conv.title === DEFAULT_CONVERSATION_TITLE
    );
    
    if (existingGameHub) {
      console.log('ðŸ” [ConversationService] Game Hub already exists:', existingGameHub.id);
      return existingGameHub;
    }
    
    // Create new Game Hub
    console.log('ðŸ” [ConversationService] Creating Game Hub...');
    const gameHub = this.createConversation(DEFAULT_CONVERSATION_TITLE, GAME_HUB_ID);
    await this.addConversation(gameHub);
    
    console.log('ðŸ” [ConversationService] Game Hub created successfully');
    return gameHub;
  }

  /**
   * Update session state for a conversation
   */
  static async setSessionState(conversationId: string, isActive: boolean): Promise<void> {
    await this.updateConversation(conversationId, {
      isActiveSession: isActive,
      updatedAt: Date.now()
    });
  }

  /**
   * Update game progress and active objective
   */
  static async updateGameProgress(conversationId: string, progress: number, objective: string): Promise<void> {
    await this.updateConversation(conversationId, {
      gameProgress: progress,
      activeObjective: objective,
      updatedAt: Date.now()
    });
  }
}


```n

## src\services\dailyNewsCacheService.ts

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\services\dailyNewsCacheService.ts.Extension.TrimStart('.'))

import { cacheService } from './cacheService';
import { newsPrompts } from '../types';

/**
 * Daily News Cache Service
 * 
 * Caches AI responses for news prompts to reduce API costs and improve response time.
 * News responses are cached for 24 hours and reset daily.
 * 
 * Integration with old build's daily news cache system.
 */
class DailyNewsCacheService {
  private readonly CACHE_PREFIX = 'daily_news_';
  private readonly CACHE_DURATION_MS = 24 * 60 * 60 * 1000; // 24 hours
  private readonly LAST_GROUNDING_KEY = 'last_grounding_search';
  private readonly GROUNDING_COOLDOWN_MS = 6 * 60 * 60 * 1000; // 6 hours for free, can be different for pro

  /**
   * Get cached response for a news prompt
   * Returns null if not cached or expired
   */
  public async getCachedResponse(prompt: string): Promise<string | null> {
    // Only cache responses for the 4 news prompts
    if (!newsPrompts.includes(prompt)) {
      return null;
    }

    const cacheKey = this.getCacheKey(prompt);
    const cached = await cacheService.get<{ content: string; timestamp: number }>(cacheKey);

    if (!cached) {
      console.log('ðŸ“° [DailyNewsCache] No cached response for:', prompt);
      return null;
    }

    // Check if cache is still valid (24 hours)
    const now = Date.now();
    const age = now - cached.timestamp;
    
    if (age > this.CACHE_DURATION_MS) {
      console.log('ðŸ“° [DailyNewsCache] Cached response expired for:', prompt);
      await cacheService.delete(cacheKey);
      return null;
    }

    console.log('ðŸ“° [DailyNewsCache] Serving cached response (age:', Math.floor(age / 1000 / 60), 'minutes)');
    return cached.content;
  }

  /**
   * Cache a fresh response for a news prompt
   */
  public async cacheFreshResponse(
    prompt: string,
    content: string,
    userTier: string,
    userId?: string
  ): Promise<void> {
    // Only cache responses for the 4 news prompts
    if (!newsPrompts.includes(prompt)) {
      return;
    }

    const cacheKey = this.getCacheKey(prompt);
    const cacheData = {
      content,
      timestamp: Date.now(),
      userTier,
      userId
    };

    await cacheService.set(cacheKey, cacheData, this.CACHE_DURATION_MS);
    console.log('ðŸ“° [DailyNewsCache] Cached fresh response for:', prompt);

    // Update last grounding search time
    localStorage.setItem(this.LAST_GROUNDING_KEY, Date.now().toString());
  }

  /**
   * Check if grounding search can be triggered
   * Returns { needsSearch: boolean, reason: string }
   */
  public async needsGroundingSearch(
    prompt: string,
    userTier: string
  ): Promise<{ needsSearch: boolean; reason: string }> {
    // Only news prompts use grounding search
    if (!newsPrompts.includes(prompt)) {
      return { needsSearch: false, reason: 'Not a news prompt' };
    }

    // Check if we have a cached response
    const cached = await this.getCachedResponse(prompt);
    if (cached) {
      return { needsSearch: false, reason: 'Cached response available' };
    }

    // Check cooldown based on tier
    const lastGrounding = localStorage.getItem(this.LAST_GROUNDING_KEY);
    if (lastGrounding) {
      const timeSinceLastGrounding = Date.now() - parseInt(lastGrounding);
      const cooldown = this.getGroundingCooldown(userTier);

      if (timeSinceLastGrounding < cooldown) {
        const remainingMinutes = Math.ceil((cooldown - timeSinceLastGrounding) / 1000 / 60);
        return {
          needsSearch: false,
          reason: `Grounding search on cooldown. Try again in ${remainingMinutes} minutes`
        };
      }
    }

    return { needsSearch: true, reason: 'Ready for grounding search' };
  }

  /**
   * Get grounding search cooldown based on user tier
   * Free: 6 hours, Pro/Vanguard: 1 hour
   */
  private getGroundingCooldown(userTier: string): number {
    if (userTier === 'pro' || userTier === 'vanguard_pro') {
      return 1 * 60 * 60 * 1000; // 1 hour
    }
    return this.GROUNDING_COOLDOWN_MS; // 6 hours for free
  }

  /**
   * Generate cache key for a news prompt
   */
  private getCacheKey(prompt: string): string {
    // Create a simple hash of the prompt for the cache key
    const hash = prompt.toLowerCase().replace(/[^a-z0-9]/g, '_');
    return `${this.CACHE_PREFIX}${hash}`;
  }

  /**
   * Clear all cached news responses (for testing/debugging)
   */
  public async clearAllCache(): Promise<void> {
    for (const prompt of newsPrompts) {
      const cacheKey = this.getCacheKey(prompt);
      await cacheService.delete(cacheKey);
    }
    localStorage.removeItem(this.LAST_GROUNDING_KEY);
    console.log('ðŸ“° [DailyNewsCache] All news cache cleared');
  }

  /**
   * Get cache status for all news prompts
   */
  public async getCacheStatus(): Promise<Array<{ prompt: string; cached: boolean; age?: number }>> {
    const status = [];

    for (const prompt of newsPrompts) {
      const cacheKey = this.getCacheKey(prompt);
      const cached = await cacheService.get<{ content: string; timestamp: number }>(cacheKey);

      if (cached) {
        const age = Date.now() - cached.timestamp;
        status.push({
          prompt,
          cached: true,
          age: Math.floor(age / 1000 / 60) // age in minutes
        });
      } else {
        status.push({
          prompt,
          cached: false
        });
      }
    }

    return status;
  }
}

export const dailyNewsCacheService = new DailyNewsCacheService();



```n

## src\services\errorRecoveryService.ts

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\services\errorRecoveryService.ts.Extension.TrimStart('.'))

export interface ErrorContext {
  operation: string;
  conversationId?: string;
  userId?: string;
  timestamp: number;
  retryCount: number;
}

export interface RecoveryAction {
  type: 'retry' | 'fallback' | 'user_notification' | 'skip';
  message?: string;
  action?: () => Promise<void>;
}

class ErrorRecoveryService {
  private retryAttempts = new Map<string, number>();
  private readonly MAX_RETRIES = 3;
  private readonly RETRY_DELAYS = [1000, 2000, 4000]; // Progressive delays

  /**
   * Handle AI service errors with intelligent recovery
   */
  async handleAIError(error: Error, context: ErrorContext): Promise<RecoveryAction> {
    console.error(`ðŸ¤– [ErrorRecovery] AI Error in ${context.operation}:`, error);

    // Check if we should retry
    if (this.shouldRetry(context)) {
      const delay = this.getRetryDelay(context.retryCount);
      console.log(`ðŸ”„ [ErrorRecovery] Retrying ${context.operation} in ${delay}ms`);
      
      await this.delay(delay);
      return {
        type: 'retry',
        action: async () => {
          // The retry will be handled by the calling function
        }
      };
    }

    // Determine fallback action based on error type
    if (error.message.includes('API key') || error.message.includes('authentication')) {
      return {
        type: 'user_notification',
        message: 'AI service authentication failed. Please check your API key in settings.'
      };
    }

    if (error.message.includes('rate limit') || error.message.includes('quota')) {
      return {
        type: 'user_notification',
        message: 'AI service is temporarily busy. Please try again in a few moments.'
      };
    }

    if (error.message.includes('network') || error.message.includes('timeout')) {
      return {
        type: 'user_notification',
        message: 'Network connection issue. Please check your internet connection and try again.'
      };
    }

    // Generic fallback
    return {
      type: 'user_notification',
      message: 'AI service is temporarily unavailable. Please try again later.'
    };
  }

  /**
   * Handle conversation service errors
   */
  async handleConversationError(error: Error, context: ErrorContext): Promise<RecoveryAction> {
    console.error(`ðŸ’¬ [ErrorRecovery] Conversation Error in ${context.operation}:`, error);

    if (error.message.includes('not found')) {
      return {
        type: 'fallback',
        message: 'Conversation not found. Creating a new one.',
        action: async () => {
          // This would be handled by the calling function
        }
      };
    }

    if (error.message.includes('permission') || error.message.includes('unauthorized')) {
      return {
        type: 'user_notification',
        message: 'Permission denied. Please log in again.'
      };
    }

    return {
      type: 'user_notification',
      message: 'Failed to save conversation. Your data may not be persisted.'
    };
  }

  /**
   * Handle cache service errors
   */
  async handleCacheError(error: Error, context: ErrorContext): Promise<RecoveryAction> {
    console.error(`ðŸ’¾ [ErrorRecovery] Cache Error in ${context.operation}:`, error);

    // Cache errors are usually non-critical, so we can skip
    return {
      type: 'skip',
      message: 'Cache unavailable. Continuing without caching.'
    };
  }

  /**
   * Handle WebSocket connection errors
   */
  async handleWebSocketError(error: Error, context: ErrorContext): Promise<RecoveryAction> {
    console.error(`ðŸ”Œ [ErrorRecovery] WebSocket Error in ${context.operation}:`, error);

    if (this.shouldRetry(context)) {
      const delay = this.getRetryDelay(context.retryCount);
      return {
        type: 'retry',
        action: async () => {
          await this.delay(delay);
          // Retry connection logic would be handled by the calling function
        }
      };
    }

    return {
      type: 'user_notification',
      message: 'PC connection lost. Screenshot upload may not be available.'
    };
  }

  /**
   * Check if an operation should be retried
   */
  private shouldRetry(context: ErrorContext): boolean {
    const key = `${context.operation}_${context.conversationId || 'global'}`;
    const attempts = this.retryAttempts.get(key) || 0;
    return attempts < this.MAX_RETRIES;
  }

  /**
   * Get retry delay based on attempt count
   */
  private getRetryDelay(retryCount: number): number {
    return this.RETRY_DELAYS[Math.min(retryCount, this.RETRY_DELAYS.length - 1)];
  }

  /**
   * Increment retry count for an operation
   */
  incrementRetryCount(context: ErrorContext): void {
    const key = `${context.operation}_${context.conversationId || 'global'}`;
    const current = this.retryAttempts.get(key) || 0;
    this.retryAttempts.set(key, current + 1);
  }

  /**
   * Reset retry count for an operation
   */
  resetRetryCount(context: ErrorContext): void {
    const key = `${context.operation}_${context.conversationId || 'global'}`;
    this.retryAttempts.delete(key);
  }

  /**
   * Utility delay function
   */
  private delay(ms: number): Promise<void> {
    return new Promise(resolve => setTimeout(resolve, ms));
  }

  /**
   * Display user-friendly error message
   */
  displayError(message: string, type: 'error' | 'warning' | 'info' = 'error'): void {
    // In a real app, this would show a toast notification or modal
    console.log(`[${type.toUpperCase()}] ${message}`);
    
    // For now, we'll use a simple alert (in production, use a proper UI component)
    if (type === 'error') {
      // Only show critical errors to user
      console.error('User Error:', message);
    }
  }

  /**
   * Log error for debugging
   */
  logError(error: Error, context: ErrorContext, additionalInfo?: any): void {
    console.error('Error Details:', {
      error: error.message,
      stack: error.stack,
      context,
      additionalInfo,
      timestamp: new Date().toISOString()
    });
  }
}

export const errorRecoveryService = new ErrorRecoveryService();


```n

## src\services\errorService.ts

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\services\errorService.ts.Extension.TrimStart('.'))

/**
 * Centralized error handling service
 * Provides consistent error handling across the application
 */
class ErrorService {
  private static errorCount = 0;
  private static maxErrorsPerMinute = 10;
  private static errorWindow = 60 * 1000; // 1 minute
  private static recentErrors: number[] = [];

  /**
   * Handle an error with context and optional user message
   */
  static handle(error: Error, context: string, userMessage?: string): void {
    // Increment error count
    this.errorCount++;
    
    // Check if we're hitting error rate limits
    if (this.isErrorRateLimited()) {
      console.warn(`[ErrorService] Error rate limit exceeded, suppressing error:`, error);
      return;
    }

    // Log error with context
    console.error(`[${context}]`, {
      message: error.message,
      stack: error.stack,
      context,
      timestamp: new Date().toISOString(),
      errorCount: this.errorCount,
    });

    // Show user-friendly message if provided
    if (userMessage) {
      this.showUserMessage(userMessage);
    }

    // Report to monitoring service (if configured)
    this.reportError(error, context);
  }

  /**
   * Handle authentication errors
   */
  static handleAuthError(error: Error, operation: string): void {
    const userMessage = this.getAuthErrorMessage(operation);
    this.handle(error, `AuthService:${operation}`, userMessage);
  }

  /**
   * Handle WebSocket errors
   */
  static handleWebSocketError(error: Error, operation: string): void {
    const userMessage = this.getWebSocketErrorMessage(operation);
    this.handle(error, `WebSocketService:${operation}`, userMessage);
  }

  /**
   * Handle conversation errors
   */
  static handleConversationError(error: Error, operation: string): void {
    const userMessage = this.getConversationErrorMessage(operation);
    this.handle(error, `ConversationService:${operation}`, userMessage);
  }

  /**
   * Handle database errors
   */
  static handleDatabaseError(error: Error, operation: string): void {
    const userMessage = this.getDatabaseErrorMessage(operation);
    this.handle(error, `DatabaseService:${operation}`, userMessage);
  }

  /**
   * Check if error rate is too high
   */
  private static isErrorRateLimited(): boolean {
    const now = Date.now();
    
    // Remove old errors from the window
    this.recentErrors = this.recentErrors.filter(time => now - time < this.errorWindow);
    
    // Add current error
    this.recentErrors.push(now);
    
    // Check if we're over the limit
    return this.recentErrors.length > this.maxErrorsPerMinute;
  }

  /**
   * Show user-friendly error message
   */
  private static showUserMessage(message: string): void {
    // TODO: Implement toast notification system
    // For now, we'll use console.warn as a placeholder
    console.warn(`[User Message] ${message}`);
    
    // In a real implementation, this would:
    // 1. Show a toast notification
    // 2. Update UI state to show error
    // 3. Log to user activity tracking
  }

  /**
   * Report error to monitoring service
   */
  private static reportError(error: Error, context: string): void {
    // TODO: Implement error reporting to monitoring service
    // For now, we'll just log it
    console.warn(`[Error Reporting] Would report error to monitoring service:`, {
      error: error.message,
      context,
      timestamp: new Date().toISOString(),
    });
  }

  /**
   * Get user-friendly auth error messages
   */
  private static getAuthErrorMessage(operation: string): string {
    const messages: Record<string, string> = {
      'signIn': 'Failed to sign in. Please check your credentials and try again.',
      'signOut': 'Failed to sign out. Please try again.',
      'loadUser': 'Failed to load user data. Please refresh the page.',
      'createUser': 'Failed to create user account. Please try again.',
      'refreshUser': 'Failed to refresh user data. Please try again.',
    };
    
    return messages[operation] || 'An authentication error occurred. Please try again.';
  }

  /**
   * Get user-friendly WebSocket error messages
   */
  private static getWebSocketErrorMessage(operation: string): string {
    const messages: Record<string, string> = {
      'connect': 'Failed to connect to server. Please check your internet connection.',
      'send': 'Failed to send message. Please try again.',
      'disconnect': 'Failed to disconnect. Please try again.',
    };
    
    return messages[operation] || 'A connection error occurred. Please try again.';
  }

  /**
   * Get user-friendly conversation error messages
   */
  private static getConversationErrorMessage(operation: string): string {
    const messages: Record<string, string> = {
      'create': 'Failed to create conversation. Please try again.',
      'load': 'Failed to load conversations. Please refresh the page.',
      'save': 'Failed to save conversation. Please try again.',
      'delete': 'Failed to delete conversation. Please try again.',
    };
    
    return messages[operation] || 'A conversation error occurred. Please try again.';
  }

  /**
   * Get user-friendly database error messages
   */
  private static getDatabaseErrorMessage(operation: string): string {
    const messages: Record<string, string> = {
      'save': 'Failed to save data. Please try again.',
      'load': 'Failed to load data. Please refresh the page.',
      'update': 'Failed to update data. Please try again.',
      'delete': 'Failed to delete data. Please try again.',
    };
    
    return messages[operation] || 'A database error occurred. Please try again.';
  }

  /**
   * Get error statistics
   */
  static getStats(): { totalErrors: number; recentErrors: number; isRateLimited: boolean } {
    return {
      totalErrors: this.errorCount,
      recentErrors: this.recentErrors.length,
      isRateLimited: this.isErrorRateLimited(),
    };
  }

  /**
   * Reset error statistics
   */
  static reset(): void {
    this.errorCount = 0;
    this.recentErrors = [];
  }
}

export { ErrorService };


```n

## src\services\gameHubService.ts

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\services\gameHubService.ts.Extension.TrimStart('.'))

/**
 * Game Hub Service
 * Handles gaming news, releases, and community features
 */

interface GameNews {
  id: string;
  title: string;
  summary: string;
  imageUrl?: string;
  source: string;
  publishedAt: number;
  url: string;
}

interface UpcomingRelease {
  id: string;
  title: string;
  releaseDate: number;
  platforms: string[];
  genre: string;
  imageUrl?: string;
  hypeLevel: 'low' | 'medium' | 'high';
}

class GameHubService {
  /**
   * Fetch latest gaming news
   * @param _limit - Number of news items to fetch (parameter reserved for future API integration)
   */
  async fetchGamingNews(_limit: number = 5): Promise<GameNews[]> {
    // TODO: Integrate with gaming news API (e.g., IGDB, GamesRadar)
    // For now, return mock data
    return [
      {
        id: 'news-1',
        title: 'Latest Gaming News',
        summary: 'Stay tuned for the latest updates from the gaming world',
        source: 'Otakon',
        publishedAt: Date.now(),
        url: '#',
      },
    ];
  }

  /**
   * Fetch upcoming game releases
   * @param _limit - Number of releases to fetch (parameter reserved for future API integration)
   */
  async fetchUpcomingReleases(_limit: number = 5): Promise<UpcomingRelease[]> {
    // TODO: Integrate with game release API (e.g., IGDB, Steam)
    // For now, return mock data
    return [
      {
        id: 'release-1',
        title: 'Upcoming Releases',
        releaseDate: Date.now() + 30 * 24 * 60 * 60 * 1000,
        platforms: ['PC', 'Console'],
        genre: 'Action RPG',
        hypeLevel: 'high',
      },
    ];
  }

  /**
   * Get trending games
   */
  async getTrendingGames(): Promise<any[]> {
    // TODO: Implement trending games feature
    return [];
  }

  /**
   * Search games
   */
  async searchGames(query: string): Promise<any[]> {
    // TODO: Implement game search
    console.log('Searching for:', query);
    return [];
  }
}

export const gameHubService = new GameHubService();


```n

## src\services\gameTabService.ts

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\services\gameTabService.ts.Extension.TrimStart('.'))

import { Conversation, SubTab, GameTab, insightTabsConfig, AIResponse, PlayerProfile } from '../types';
import { aiService } from './aiService';
import { ConversationService } from './conversationService';
import { profileAwareTabService, GameContext, ProfileSpecificTab } from './profileAwareTabService';
import { toastService } from './toastService';

export interface GameTabCreationData {
  gameTitle: string;
  genre: string;
  conversationId: string;
  userId: string;
  aiResponse?: AIResponse; // Optional AI response to extract insights from
  playerProfile?: PlayerProfile; // Optional player profile for personalization
  gameContext?: GameContext; // Optional game context (playthrough count, etc.)
  isUnreleased?: boolean; // True for unreleased/upcoming games
}

class GameTabService {
  /**
   * Create a new game-specific conversation tab (IDEMPOTENT)
   * If tab already exists, returns it and optionally updates subtabs with new AI insights
   */
  async createGameTab(data: GameTabCreationData): Promise<Conversation> {
    console.log('ðŸŽ® [GameTabService] Creating game tab:', data);

    // âœ… IDEMPOTENT: Check if tab already exists
    const existingConv = await ConversationService.getConversation(data.conversationId);
    
    if (existingConv) {
      console.log('ðŸŽ® [GameTabService] Tab already exists:', existingConv.title);
      
      // âœ… Update subtabs if they're loading and we have new AI response
      if (data.aiResponse && existingConv.subtabs?.some(tab => tab.status === 'loading' || tab.content === 'Loading...')) {
        console.log('ðŸŽ® [GameTabService] Updating loading subtabs with new AI insights');
        const updatedSubtabs = this.extractInsightsFromAIResponse(
          data.aiResponse, 
          existingConv.subtabs
        );
        
        await ConversationService.updateConversation(existingConv.id, {
          subtabs: updatedSubtabs,
          updatedAt: Date.now()
        });
        
        return { ...existingConv, subtabs: updatedSubtabs };
      }
      
      // Return existing tab as-is
      return existingConv;
    }

    // Tab doesn't exist - create new one
    console.log('ðŸŽ® [GameTabService] Creating new tab for:', data.gameTitle);
    
    // For unreleased games, don't generate subtabs
    let subTabs: SubTab[] = [];
    
    if (!data.isUnreleased) {
      // Generate initial sub-tabs based on genre and profile for released games
      subTabs = this.generateInitialSubTabs(
        data.genre, 
        data.playerProfile,
        data.gameContext
      );
      
      // If AI response provided, extract insights from it
      if (data.aiResponse) {
        console.log('ðŸŽ® [GameTabService] Using AI response for initial insights');
        subTabs = this.extractInsightsFromAIResponse(data.aiResponse, subTabs);
      }
    } else {
      console.log('ðŸŽ® [GameTabService] Creating unreleased game tab (no subtabs, Discuss mode only)');
    }
    
    // Create the conversation
    const conversation: Conversation = {
      id: data.conversationId,
      title: data.gameTitle,
      messages: [],
      createdAt: Date.now(),
      updatedAt: Date.now(),
      isActive: false,
      gameId: data.gameTitle.toLowerCase().replace(/\s+/g, '-'),
      gameTitle: data.gameTitle,
      genre: data.genre,
      subtabs: subTabs,
      subtabsOrder: subTabs.map(tab => tab.id),
      isActiveSession: false,
      activeObjective: '',
      gameProgress: 0,
      isUnreleased: data.isUnreleased || false // Mark if unreleased
    };

    // Save to database
    await ConversationService.addConversation(conversation);

    // Generate AI insights in background (non-blocking)
    // Only generate if we didn't already get them from the response
    if (!data.aiResponse) {
      console.log('ðŸŽ® [GameTabService] Generating initial insights in background (no AI response provided)');
      this.generateInitialInsights(conversation, data.playerProfile).catch(error => 
        console.error('Background insight generation failed:', error)
      );
    } else {
      // If some subtabs still have "Loading..." content, generate insights for them in background
      const needsInsights = conversation.subtabs?.some(tab => tab.content === 'Loading...');
      if (needsInsights) {
        console.log('ðŸŽ® [GameTabService] Some subtabs need insights, generating in background');
        this.generateInitialInsights(conversation, data.playerProfile).catch(error => 
          console.error('Background insight generation failed:', error)
        );
      }
    }

    // Return immediately without waiting for insights
    return conversation;
  }

  /**
   * Generate initial sub-tabs based on game genre and player profile
   */
  private generateInitialSubTabs(
    genre: string,
    playerProfile?: PlayerProfile,
    gameContext?: GameContext
  ): SubTab[] {
    // Get base genre tabs
    const config = insightTabsConfig[genre] || insightTabsConfig['Default'];
    let baseTabs: ProfileSpecificTab[] = config.map(tabConfig => ({
      ...tabConfig,
      priority: 'medium' as const,
      isProfileSpecific: false
    }));
    
    // If player profile exists, add profile-specific tabs
    if (playerProfile) {
      console.log('ðŸŽ® [GameTabService] Generating profile-specific tabs for:', playerProfile.playerFocus);
      const profileTabs = profileAwareTabService.generateProfileSpecificTabs(
        playerProfile,
        gameContext
      );
      
      // Merge base tabs with profile-specific tabs
      baseTabs = [...baseTabs, ...profileTabs];
      
      // Prioritize tabs based on profile
      baseTabs = profileAwareTabService.prioritizeTabsForProfile(baseTabs, playerProfile);
    }
    
    // Convert to SubTab format
    return baseTabs.map(tabConfig => ({
      id: tabConfig.id,
      title: tabConfig.title,
      type: tabConfig.type,
      content: 'Loading...',
      isNew: true,
      status: 'loading' as const,
      instruction: tabConfig.instruction
    }));
  }

  /**
   * Extract subtab insights from AI response tags
   */
  private extractInsightsFromAIResponse(aiResponse: AIResponse, subtabs: SubTab[]): SubTab[] {
    console.log('ðŸ¤– [GameTabService] Extracting insights from AI response');
    
    // Check if AI provided INSIGHT_UPDATE tags
    const insightUpdates = aiResponse.otakonTags.get('INSIGHT_UPDATE');
    
    if (insightUpdates) {
      console.log('ðŸ¤– [GameTabService] Found INSIGHT_UPDATE:', insightUpdates);
      
      // Update the matching subtab
      return subtabs.map(tab => {
        if (tab.id === insightUpdates.id) {
          return {
            ...tab,
            content: insightUpdates.content,
            isNew: false,
            status: 'loaded' as const
          };
        }
        return tab;
      });
    }
    
    // Fallback: Use the AI response content as initial content for the first subtab (chat/tips)
    if (aiResponse.content && subtabs.length > 0) {
      console.log('ðŸ¤– [GameTabService] Using AI response content for first subtab');
      const updatedSubtabs = [...subtabs];
      updatedSubtabs[0] = {
        ...updatedSubtabs[0],
        content: aiResponse.content,
        isNew: false,
        status: 'loaded' as const
      };
      return updatedSubtabs;
    }
    
    return subtabs;
  }

  /**
   * Generate initial AI insights for all sub-tabs
   * This runs in the background and updates the conversation when complete
   */
  private async generateInitialInsights(
    conversation: Conversation,
    playerProfile?: PlayerProfile
  ): Promise<void> {
    console.log('ðŸ¤– [GameTabService] ðŸ”„ Generating initial insights in background for:', conversation.gameTitle);

    try {
      // Generate insights for each sub-tab (this is the slow AI call)
      const insights = await aiService.generateInitialInsights(
        conversation.gameTitle || 'Unknown Game',
        conversation.genre || 'Action RPG',
        playerProfile
      );

      console.log('ðŸ¤– [GameTabService] âœ… Background insights generated successfully');

      // âœ… CRITICAL FIX: Read fresh conversation data from DB before updating
      // The conversation parameter might be stale (from before message migration)
      // We need to get the LATEST version with migrated messages
      const conversations = await ConversationService.getConversations(true); // skipCache = true
      const freshConversation = conversations[conversation.id];
      
      if (!freshConversation) {
        console.error('ðŸ¤– [GameTabService] Conversation not found:', conversation.id);
        return;
      }

      // Update sub-tabs with generated content
      const updatedSubTabs = freshConversation.subtabs?.map(subTab => {
        const content = insights[subTab.id] || `Welcome to ${subTab.title} for ${freshConversation.gameTitle}!`;
        return {
          ...subTab,
          content,
          isNew: false,
          status: 'loaded' as const
        };
      }) || [];

      // Use fresh conversation data (with migrated messages) + new subtabs
      const updatedConversation = {
        ...freshConversation,  // âœ… Use FRESH data with messages!
        subtabs: updatedSubTabs,
        updatedAt: Date.now()
      };

      // Save updated conversation (this will trigger UI update)
      await ConversationService.updateConversation(conversation.id, updatedConversation);
      console.log('ðŸ¤– [GameTabService] âœ… Subtabs updated in conversation');

    } catch (error) {
      console.error('ðŸ¤– [GameTabService] âŒ Failed to generate initial insights:', error);
      toastService.warning('Failed to load game insights. You can still chat about the game!');
      
      // âœ… CRITICAL FIX: Read fresh conversation before updating error state
      try {
        const conversations = await ConversationService.getConversations(true); // skipCache = true
        const freshConversation = conversations[conversation.id];
        
        if (!freshConversation) {
          console.error('ðŸ¤– [GameTabService] Conversation not found for error update:', conversation.id);
          return;
        }
        
        // Set error state for sub-tabs
        const errorSubTabs = freshConversation.subtabs?.map(subTab => ({
          ...subTab,
          content: `Failed to load ${subTab.title} content. Please try again later.`,
          isNew: false,
          status: 'error' as const
        })) || [];

        const updatedConversation = {
          ...freshConversation,  // âœ… Use FRESH data with messages!
          subtabs: errorSubTabs,
          updatedAt: Date.now()
        };

        await ConversationService.updateConversation(conversation.id, updatedConversation);
      } catch (updateError) {
        console.error('ðŸ¤– [GameTabService] Failed to update error state:', updateError);
      }
    }
  }

  /**
   * Update a specific sub-tab content
   */
  async updateSubTabContent(
    conversationId: string, 
    subTabId: string, 
    content: string
  ): Promise<void> {
    console.log('ðŸ“ [GameTabService] Updating sub-tab content:', { conversationId, subTabId });

    try {
      // Get current conversation
      const conversations = await ConversationService.getConversations();
      const conversation = conversations[conversationId];
      
      if (!conversation || !conversation.subtabs) {
        throw new Error('Conversation or sub-tabs not found');
      }

      // Update the specific sub-tab
      const updatedSubTabs = conversation.subtabs.map(tab => 
        tab.id === subTabId 
          ? { ...tab, content, isNew: false, status: 'loaded' as const }
          : tab
      );

      // Update conversation with new sub-tab content
      await ConversationService.updateConversation(conversationId, {
        subtabs: updatedSubTabs,
        updatedAt: Date.now()
      });
    } catch (error) {
      console.error('Failed to update sub-tab content:', error);
      throw error;
    }
  }

  /**
   * Get game tab by conversation ID
   */
  async getGameTab(conversationId: string): Promise<GameTab | null> {
    try {
      const conversations = await ConversationService.getConversations();
      const conversation = conversations[conversationId];
      
      if (!conversation || !conversation.gameTitle) {
        return null;
      }

      return {
        id: conversation.id,
        title: conversation.title,
        gameId: conversation.gameId || conversation.gameTitle.toLowerCase().replace(/\s+/g, '-'),
        gameTitle: conversation.gameTitle,
        genre: conversation.genre || 'Unknown',
        subtabs: conversation.subtabs || [],
        createdAt: conversation.createdAt,
        updatedAt: conversation.updatedAt,
        isActiveSession: conversation.isActiveSession || false
      };
    } catch (error) {
      console.error('Failed to get game tab:', error);
      toastService.error('Failed to load game tab.');
      return null;
    }
  }

  /**
   * Check if a conversation is a game tab
   */
  isGameTab(conversation: Conversation): boolean {
    return !conversation.isGameHub && !!conversation.gameTitle;
  }

  /**
   * Generate a unique conversation ID for a game
   * Note: Removed timestamp to ensure consistent IDs for the same game
   */
  generateGameConversationId(gameTitle: string): string {
    const sanitized = gameTitle.toLowerCase().replace(/[^a-z0-9\s-]/g, '').replace(/\s+/g, '-');
    return `game-${sanitized}`;
  }

  /**
   * Update subtabs from AI response (progressive updates)
   * This allows AI to update existing subtabs based on new information
   */
  async updateSubTabsFromAIResponse(
    conversationId: string,
    updates: Array<{ tabId: string; title: string; content: string }>
  ): Promise<void> {
    console.log('ðŸ“ [GameTabService] Updating subtabs from AI response:', { conversationId, updateCount: updates.length });

    try {
      // Get current conversation
      const conversations = await ConversationService.getConversations();
      const conversation = conversations[conversationId];
      
      if (!conversation || !conversation.subtabs) {
        console.warn('ðŸ“ [GameTabService] Conversation or subtabs not found:', conversationId);
        return;
      }

      // Update the specific subtabs
      let updatedCount = 0;
      const updatedSubTabs = conversation.subtabs.map(tab => {
        const update = updates.find(u => u.tabId === tab.id);
        if (update) {
          updatedCount++;
          console.log('ðŸ“ [GameTabService] Updating subtab:', { tabId: tab.id, title: update.title });
          return {
            ...tab,
            title: update.title || tab.title, // Update title if provided
            content: update.content,
            isNew: true, // Mark as new to show indicator
            status: 'loaded' as const
          };
        }
        return tab;
      });

      // Only update if something changed
      if (updatedCount === 0) {
        console.log('ðŸ“ [GameTabService] No subtabs matched for update');
        return;
      }

      // Update conversation with new subtab content
      await ConversationService.updateConversation(conversationId, {
        subtabs: updatedSubTabs,
        updatedAt: Date.now()
      });

      console.log('ðŸ“ [GameTabService] Successfully updated', updatedCount, 'subtabs');
    } catch (error) {
      console.error('ðŸ“ [GameTabService] Failed to update subtabs from AI response:', error);
      throw error;
    }
  }
}

export const gameTabService = new GameTabService();


```n

## src\services\messageRoutingService.ts

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\services\messageRoutingService.ts.Extension.TrimStart('.'))

/* eslint-disable no-console */
import { ConversationService } from './conversationService';
import { ChatMessage, Conversations } from '../types';

/**
 * Message Routing Service
 * Handles atomic message migration between tabs to prevent race conditions
 */
export class MessageRoutingService {
  /**
   * Atomically migrate messages from one conversation to another
   * This prevents race conditions by doing all operations in a single transaction
   */
  static async migrateMessagesAtomic(
    messageIds: string[],
    fromConversationId: string,
    toConversationId: string
  ): Promise<void> {
    if (process.env.NODE_ENV === 'development') {
      console.log('ðŸ“¦ [MessageRouting] Starting atomic migration:', {
        messageIds,
        from: fromConversationId,
        to: toConversationId
      });
    }

    // Get current state from service
    const conversations = await ConversationService.getConversations();
    
    const fromConv = conversations[fromConversationId];
    const toConv = conversations[toConversationId];
    
    if (!fromConv) {
      throw new Error(`Source conversation ${fromConversationId} not found`);
    }
    
    if (!toConv) {
      throw new Error(`Destination conversation ${toConversationId} not found`);
    }
    
    // Get messages to move
    const messagesToMove = fromConv.messages.filter(m => messageIds.includes(m.id));
    
    if (messagesToMove.length === 0) {
      console.warn('âš ï¸ [MessageRouting] No messages found to migrate');
      return;
    }
    
    // Check for duplicates in destination (prevent duplicate messages)
    const messagesToAdd = messagesToMove.filter(msg => 
      !toConv.messages.some(existing => existing.id === msg.id)
    );
    
    if (process.env.NODE_ENV === 'development') {
      console.log('ðŸ“¦ [MessageRouting] Migration details:', {
        found: messagesToMove.length,
        toAdd: messagesToAdd.length,
        duplicatesSkipped: messagesToMove.length - messagesToAdd.length
      });
    }
    
    // ATOMIC UPDATE: Modify both conversations in a single object
    const updatedConversations: Conversations = {
      ...conversations,
      [toConversationId]: {
        ...toConv,
        messages: [...toConv.messages, ...messagesToAdd],
        updatedAt: Date.now()
      },
      [fromConversationId]: {
        ...fromConv,
        messages: fromConv.messages.filter(m => !messageIds.includes(m.id)),
        updatedAt: Date.now()
      }
    };
    
    // Single write operation
    await ConversationService.setConversations(updatedConversations);
    
    if (process.env.NODE_ENV === 'development') {
      console.log('âœ… [MessageRouting] Migration complete:', {
        migrated: messagesToAdd.length,
        fromMessages: updatedConversations[fromConversationId].messages.length,
        toMessages: updatedConversations[toConversationId].messages.length
      });
    }
  }

  /**
   * Check if a message should be routed to a different tab based on game detection
   */
  static shouldRouteMessage(
    currentTabId: string,
    targetGameTabId: string | null,
    isGameHub: boolean
  ): boolean {
    // Don't route if no target game detected
    if (!targetGameTabId) {
      return false;
    }
    
    // Don't route if already in the target tab
    if (currentTabId === targetGameTabId) {
      return false;
    }
    
    // Route if currently in Game Hub and game detected
    if (isGameHub && targetGameTabId) {
      return true;
    }
    
    return false;
  }

  /**
   * Duplicate check for messages before adding
   */
  static messageExists(messages: ChatMessage[], messageId: string): boolean {
    return messages.some(m => m.id === messageId);
  }
}


```n

## src\services\onboardingService.ts

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\services\onboardingService.ts.Extension.TrimStart('.'))

import { supabase } from '../lib/supabase';

// ========================================
// TYPES
// ========================================

export type OnboardingStep = 
  | 'login'               // LoginSplashScreen
  | 'loading'             // Loading screen during auth processing
  | 'initial'             // InitialSplashScreen  
  | 'how-to-use'          // SplashScreen (PC Connection with 6-digit code)
  | 'features-connected'  // HowToUseSplashScreen (Only if PC connection successful)
  | 'pro-features'        // ProFeaturesSplashScreen (Supercharge with Otagon Pro)
  | 'profile-setup'       // Profile Setup Modal (sets has_profile_setup flag)
  | 'complete';           // Main App (Onboarding fully complete)

export interface OnboardingProgress {
  step: OnboardingStep;
  completed_at: string;
  data: any;
}

export interface OnboardingStatus {
  is_new_user: boolean;
  has_seen_splash_screens: boolean;
  has_profile_setup: boolean;
  has_welcome_message: boolean;
  has_seen_how_to_use: boolean;
  has_seen_features_connected: boolean;
  has_seen_pro_features: boolean;
  pc_connected: boolean;
  pc_connection_skipped: boolean;
  onboarding_completed: boolean;
  tier: string;
}

// ========================================
// ONBOARDING SERVICE
// ========================================

class OnboardingService {
  private static instance: OnboardingService;

  private constructor() {}

  public static getInstance(): OnboardingService {
    if (!OnboardingService.instance) {
      OnboardingService.instance = new OnboardingService();
    }
    return OnboardingService.instance;
  }

  // ========================================
  // ONBOARDING STATUS MANAGEMENT
  // ========================================

  async getOnboardingStatus(userId: string): Promise<OnboardingStatus | null> {
    try {
      console.log('ðŸŽ¯ [OnboardingService] Getting onboarding status for user:', userId);
      const { data, error } = await supabase.rpc('get_user_onboarding_status', {
        p_user_id: userId
      });

      if (error) {
        console.error('ðŸŽ¯ [OnboardingService] Error getting onboarding status:', error);
        return null;
      }

      console.log('ðŸŽ¯ [OnboardingService] Onboarding status raw data:', data);
      
      // The RPC function returns a TABLE (array), so we need to get the first element
      if (!data || data.length === 0) {
        console.log('ðŸŽ¯ [OnboardingService] No onboarding data found for user');
        return null;
      }
      
      const status = data[0];
      console.log('ðŸŽ¯ [OnboardingService] Onboarding status (first element):', status);
      return status;

    } catch (error) {
      console.error('ðŸŽ¯ [OnboardingService] Error getting onboarding status:', error);
      return null;
    }
  }

  async updateOnboardingStatus(userId: string, status: OnboardingStep, data: any = {}): Promise<boolean> {
    try {
      const { error } = await supabase.rpc('update_user_onboarding_status', {
        p_user_id: userId,
        p_step: status,
        p_data: data
      });

      if (error) {
        console.error('Error updating onboarding status:', error);
        return false;
      }

      return true;

    } catch (error) {
      console.error('Error updating onboarding status:', error);
      return false;
    }
  }

  async getOnboardingProgress(userId: string): Promise<OnboardingProgress[]> {
    try {
      const { data, error } = await supabase
        .from('onboarding_progress')
        .select('*')
        .eq('user_id', userId)
        .order('completed_at', { ascending: true });

      if (error) {
        console.error('Error getting onboarding progress:', error);
        return [];
      }

      return data || [];

    } catch (error) {
      console.error('Error getting onboarding progress:', error);
      return [];
    }
  }

  // ========================================
  // STEP-SPECIFIC METHODS
  // ========================================

  async markSplashScreensSeen(userId: string): Promise<boolean> {
    return this.updateOnboardingStatus(userId, 'initial', {
      splash_screens_seen: true,
      timestamp: new Date().toISOString()
    });
  }

  async markProfileSetupComplete(userId: string, profileData: any): Promise<boolean> {
    // Profile setup is now handled in the chat screen, not as part of onboarding
    // This function is kept for backward compatibility but doesn't affect onboarding flow
    try {
      const { error } = await supabase
        .from('users')
        .update({
          has_profile_setup: true,
          profile_data: profileData,
          updated_at: new Date().toISOString()
        })
        .eq('auth_user_id', userId);

      if (error) {
        console.error('Error marking profile setup complete:', error);
        return false;
      }

      return true;
    } catch (error) {
      console.error('Error marking profile setup complete:', error);
      return false;
    }
  }

  async markWelcomeMessageShown(userId: string): Promise<boolean> {
    return this.updateOnboardingStatus(userId, 'complete', {
      welcome_message_shown: true,
      timestamp: new Date().toISOString()
    });
  }

  async markOnboardingComplete(userId: string): Promise<boolean> {
    return this.updateOnboardingStatus(userId, 'complete', {
      onboarding_complete: true,
      timestamp: new Date().toISOString()
    });
  }

  // ========================================
  // ONBOARDING FLOW LOGIC
  // ========================================

  // Helper function to safely get boolean values with defaults
  private getBooleanValue(value: any, defaultValue: boolean = false): boolean {
    if (value === null || value === undefined) {
      return defaultValue;
    }
    return Boolean(value);
  }

  async getNextOnboardingStep(userId: string): Promise<OnboardingStep> {
    try {
      console.log('ðŸŽ¯ [OnboardingService] Getting next step for user:', userId);
      const status = await this.getOnboardingStatus(userId);
      console.log('ðŸŽ¯ [OnboardingService] User status:', status);
      
      if (!status) {
        console.log('ðŸŽ¯ [OnboardingService] No status found, returning login');
        return 'login';
      }


      // Safely get boolean values with defaults
      const hasSeenSplashScreens = this.getBooleanValue(status.has_seen_splash_screens);
      const hasSeenHowToUse = this.getBooleanValue(status.has_seen_how_to_use);
      const hasSeenFeaturesConnected = this.getBooleanValue(status.has_seen_features_connected);
      const hasSeenProFeatures = this.getBooleanValue(status.has_seen_pro_features);
      const pcConnected = this.getBooleanValue(status.pc_connected);
      const pcConnectionSkipped = this.getBooleanValue(status.pc_connection_skipped);

      console.log('ðŸŽ¯ [OnboardingService] Processed values:', {
        hasSeenSplashScreens,
        hasSeenHowToUse,
        hasSeenFeaturesConnected,
        hasSeenProFeatures,
        pcConnected,
        pcConnectionSkipped
      });

      // Check onboarding steps in order (matching old build logic)
      if (!hasSeenSplashScreens) {
        console.log('ðŸŽ¯ [OnboardingService] User hasn\'t seen splash screens, returning initial');
        return 'initial';
      }

      // After initial splash, go to how-to-use (PC connection)
      if (hasSeenSplashScreens && !hasSeenHowToUse) {
        console.log('ðŸŽ¯ [OnboardingService] User needs to see how-to-use screen, returning how-to-use');
        return 'how-to-use';
      }

      // If PC connection was successful, show features-connected
      if (hasSeenHowToUse && pcConnected && !hasSeenFeaturesConnected) {
        console.log('ðŸŽ¯ [OnboardingService] PC connected, showing features-connected screen');
        return 'features-connected';
      }

      // If PC connection was skipped, go to pro-features
      if (hasSeenHowToUse && !pcConnected && pcConnectionSkipped && !hasSeenProFeatures) {
        console.log('ðŸŽ¯ [OnboardingService] PC connection skipped, showing pro-features screen');
        return 'pro-features';
      }

      // If PC connection failed (not skipped), go back to how-to-use
      if (hasSeenHowToUse && !pcConnected && !pcConnectionSkipped) {
        console.log('ðŸŽ¯ [OnboardingService] PC connection failed, returning to how-to-use screen');
        return 'how-to-use';
      }

      // After features-connected, go to pro-features
      if (hasSeenFeaturesConnected && !hasSeenProFeatures) {
        console.log('ðŸŽ¯ [OnboardingService] User needs to see pro-features screen, returning pro-features');
        return 'pro-features';
      }

      // After pro features, onboarding is complete (profile setup is now an overlay)
      if (hasSeenProFeatures) {
        console.log('ðŸŽ¯ [OnboardingService] User has seen pro features, onboarding complete');
        return 'complete';
      }

      // REMOVED: Overly aggressive fallback that was skipping screens
      // If we reach here, something is wrong - but return to how-to-use rather than complete
      // This prevents skipping screens if the flow logic breaks
      console.warn('ðŸŽ¯ [OnboardingService] WARNING: Unexpected flow state, returning to how-to-use');
      return 'how-to-use';

    } catch (error) {
      console.error('ðŸŽ¯ [OnboardingService] Error getting next onboarding step:', error);
      return 'login';
    }
  }

  async shouldShowOnboarding(userId: string): Promise<boolean> {
    try {
      const status = await this.getOnboardingStatus(userId);
      
      if (!status) {
        return true;
      }

      // Check if onboarding is complete
      return !status.onboarding_completed;

    } catch (error) {
      console.error('Error checking if should show onboarding:', error);
      return true;
    }
  }

  // ========================================
  // ONBOARDING ANALYTICS
  // ========================================

  async trackOnboardingStep(userId: string, step: OnboardingStep, action: string, data: any = {}): Promise<void> {
    try {
      await supabase
        .from('user_analytics')
        .insert({
          user_id: userId,
          event_type: 'onboarding_step',
          event_data: {
            step,
            action,
            data,
            timestamp: new Date().toISOString()
          }
        });

    } catch (error) {
      console.error('Error tracking onboarding step:', error);
    }
  }

  async trackOnboardingDropOff(userId: string, step: OnboardingStep, reason: string, data: any = {}): Promise<void> {
    try {
      await supabase
        .from('user_analytics')
        .insert({
          user_id: userId,
          event_type: 'onboarding_dropoff',
          event_data: {
            step,
            reason,
            data,
            timestamp: new Date().toISOString()
          }
        });

    } catch (error) {
      console.error('Error tracking onboarding dropoff:', error);
    }
  }

  // ========================================
  // ONBOARDING RESET
  // ========================================

  async resetOnboarding(userId: string): Promise<boolean> {
    try {
      // Clear onboarding progress
      const { error: progressError } = await supabase
        .from('onboarding_progress')
        .delete()
        .eq('user_id', userId);

      if (progressError) {
        console.error('Error clearing onboarding progress:', progressError);
        return false;
      }

      // Reset user onboarding flags
      const { error: userError } = await supabase
        .from('users')
        .update({
          is_new_user: true,
          has_seen_splash_screens: false,
          has_profile_setup: false,
          has_welcome_message: false,
          onboarding_completed: false,
          onboarding_data: {}
        })
        .eq('id', userId);

      if (userError) {
        console.error('Error resetting user onboarding flags:', userError);
        return false;
      }

      return true;

    } catch (error) {
      console.error('Error resetting onboarding:', error);
      return false;
    }
  }

  // ========================================
  // ONBOARDING STATISTICS
  // ========================================

  async getOnboardingStats(): Promise<{
    total_users: number;
    completed_onboarding: number;
    dropoff_by_step: Record<string, number>;
  }> {
    try {
      // Get total users
      const { count: totalUsers } = await supabase
        .from('users')
        .select('*', { count: 'exact', head: true });

      // Get users who completed onboarding
      const { count: completedUsers } = await supabase
        .from('users')
        .select('*', { count: 'exact', head: true })
        .eq('onboarding_completed', true);

      // Get dropoff by step
      const { data: dropoffData } = await supabase
        .from('user_analytics')
        .select('event_data')
        .eq('event_type', 'onboarding_dropoff');

      const dropoffByStep: Record<string, number> = {};
      if (dropoffData) {
        dropoffData.forEach(record => {
          const step = record.event_data?.step;
          if (step) {
            dropoffByStep[step] = (dropoffByStep[step] || 0) + 1;
          }
        });
      }

      return {
        total_users: totalUsers || 0,
        completed_onboarding: completedUsers || 0,
        dropoff_by_step: dropoffByStep
      };

    } catch (error) {
      console.error('Error getting onboarding stats:', error);
      return {
        total_users: 0,
        completed_onboarding: 0,
        dropoff_by_step: {}
      };
    }
  }
}

// ========================================
// EXPORT SINGLETON INSTANCE
// ========================================

export const onboardingService = OnboardingService.getInstance();
export default onboardingService;


```n

## src\services\otakonTags.ts

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\services\otakonTags.ts.Extension.TrimStart('.'))

/**
 * Parses AI responses to extract OTAKON tags and clean content
 */
export const parseOtakonTags = (rawContent: string): { cleanContent: string; tags: Map<string, any> } => {
  const tags = new Map<string, any>();
  const tagRegex = /\[OTAKON_([A-Z_]+):\s*(.*?)\]/g;

  let cleanContent = rawContent;
  let match;

  while ((match = tagRegex.exec(rawContent)) !== null) {
    const tagName = match[1];
    let tagValue: any = match[2].trim();

    console.log(`ðŸ” [OtakonTags] Found tag: ${tagName}, raw value: "${tagValue}"`);

    // Parse JSON for complex tags
    try {
      if (tagValue.startsWith('{') && tagValue.endsWith('}')) {
        tagValue = JSON.parse(tagValue);
        console.log(`ðŸ” [OtakonTags] Parsed as JSON object:`, tagValue);
      }
      if (tagValue.startsWith('[') && tagValue.endsWith(']')) {
        tagValue = JSON.parse(tagValue.replace(/'/g, '"'));
        console.log(`ðŸ” [OtakonTags] Parsed as JSON array:`, tagValue);
      }
    } catch (_e) {
      console.log(`ðŸ” [OtakonTags] JSON parsing failed, keeping as string:`, tagValue);
      // Keep as string if not valid JSON
    }

    tags.set(tagName, tagValue);
    cleanContent = cleanContent.replace(match[0], '');
  }

  // Clean up extra whitespace and empty lines
  cleanContent = cleanContent
    .replace(/^Hint:\s*\n\s*Hint:\s*/gm, 'Hint: ') // Fix duplicate Hint headers
    .replace(/^Hint:\s*\n\s*Hint:\s*/gm, 'Hint: ') // Fix multiple duplicate Hint headers
    .replace(/\n\s*\n\s*\n/g, '\n\n') // Replace multiple newlines with double newlines
    .replace(/^\s+|\s+$/g, '') // Trim start and end
    .replace(/\s+$/gm, '') // Trim end of each line
    .replace(/^$\n/gm, '') // Remove empty lines
    .replace(/\n\s*\n/g, '\n\n') // Ensure proper paragraph spacing
    .replace(/\n/g, '\n\n') // Add line breaks for better readability
    .replace(/\n\n\n+/g, '\n\n') // Remove excessive line breaks
    .replace(/\]\s*$/, '') // Remove trailing ] characters
    .replace(/\[\s*$/, '') // Remove trailing [ characters
    .trim();

  return { cleanContent, tags };
};



```n

## src\services\performanceMonitor.ts

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\services\performanceMonitor.ts.Extension.TrimStart('.'))

/**
 * Real-time Performance Monitoring Service
 * Tracks app performance, errors, and user experience metrics
 */

interface PerformanceMetrics {
  // Core performance metrics
  pageLoadTime: number;
  apiResponseTime: number;
  cacheHitRate: number;
  memoryUsage: number;
  
  // User experience metrics
  userActions: number;
  errors: number;
  crashes: number;
  
  // Database metrics
  dbQueryTime: number;
  dbQueryCount: number;
  
  // WebSocket metrics
  wsConnections: number;
  wsMessageLatency: number;
  
  // Custom metrics
  customMetrics: Record<string, number>;
}

interface PerformanceAlert {
  type: 'error' | 'warning' | 'info';
  message: string;
  timestamp: number;
  severity: 'low' | 'medium' | 'high' | 'critical';
}

class PerformanceMonitor {
  private static instance: PerformanceMonitor;
  private metrics: PerformanceMetrics;
  private alerts: PerformanceAlert[] = [];
  private isMonitoring = false;
  private reportInterval: NodeJS.Timeout | null = null;
  
  // Performance thresholds
  private thresholds = {
    pageLoadTime: 3000,      // 3 seconds
    apiResponseTime: 2000,   // 2 seconds
    memoryUsage: 100 * 1024 * 1024, // 100MB
    errorRate: 0.05,         // 5%
    cacheHitRate: 0.8        // 80%
  };

  constructor() {
    this.metrics = {
      pageLoadTime: 0,
      apiResponseTime: 0,
      cacheHitRate: 0,
      memoryUsage: 0,
      userActions: 0,
      errors: 0,
      crashes: 0,
      dbQueryTime: 0,
      dbQueryCount: 0,
      wsConnections: 0,
      wsMessageLatency: 0,
      customMetrics: {}
    };
  }

  static getInstance(): PerformanceMonitor {
    if (!PerformanceMonitor.instance) {
      PerformanceMonitor.instance = new PerformanceMonitor();
    }
    return PerformanceMonitor.instance;
  }

  /**
   * Start monitoring performance
   */
  startMonitoring(): void {
    if (this.isMonitoring) {
      return;
    }
    
    console.log('ðŸ“Š [PerformanceMonitor] Starting performance monitoring...');
    this.isMonitoring = true;
    
    // Monitor page load time
    this.monitorPageLoad();
    
    // Monitor memory usage
    this.monitorMemoryUsage();
    
    // Monitor user interactions
    this.monitorUserInteractions();
    
    // Monitor errors
    this.monitorErrors();
    
    // Report metrics every 30 seconds
    this.reportInterval = setInterval(() => {
      this.reportMetrics();
    }, 30000);
  }

  /**
   * Stop monitoring
   */
  stopMonitoring(): void {
    if (!this.isMonitoring) {
      return;
    }
    
    console.log('ðŸ“Š [PerformanceMonitor] Stopping performance monitoring...');
    this.isMonitoring = false;
    
    if (this.reportInterval) {
      clearInterval(this.reportInterval);
      this.reportInterval = null;
    }
  }

  /**
   * Monitor page load performance
   */
  private monitorPageLoad(): void {
    if (typeof window === 'undefined') {
      return;
    }
    
    window.addEventListener('load', () => {
      const loadTime = performance.now();
      this.metrics.pageLoadTime = loadTime;
      
      if (loadTime > this.thresholds.pageLoadTime) {
        this.addAlert('warning', `Slow page load: ${loadTime.toFixed(2)}ms`, 'medium');
      }
    });
  }

  /**
   * Monitor memory usage
   */
  private monitorMemoryUsage(): void {
    if (typeof window === 'undefined') {
      return;
    }
    
    setInterval(() => {
      if ('memory' in performance) {
        const memory = (performance as any).memory;
        this.metrics.memoryUsage = memory.usedJSHeapSize;
        
        if (memory.usedJSHeapSize > this.thresholds.memoryUsage) {
          this.addAlert('warning', `High memory usage: ${(memory.usedJSHeapSize / 1024 / 1024).toFixed(2)}MB`, 'high');
        }
      }
    }, 10000); // Check every 10 seconds
  }

  /**
   * Monitor user interactions
   */
  private monitorUserInteractions(): void {
    if (typeof window === 'undefined') {
      return;
    }
    
    const events = ['click', 'keydown', 'scroll', 'touchstart'];
    events.forEach(event => {
      document.addEventListener(event, () => {
        this.metrics.userActions++;
      }, { passive: true });
    });
  }

  /**
   * Monitor errors
   */
  private monitorErrors(): void {
    if (typeof window === 'undefined') {
      return;
    }
    
    window.addEventListener('error', (event) => {
      this.metrics.errors++;
      this.addAlert('error', `JavaScript Error: ${event.message}`, 'high');
    });
    
    window.addEventListener('unhandledrejection', (event) => {
      this.metrics.errors++;
      this.addAlert('error', `Unhandled Promise Rejection: ${event.reason}`, 'high');
    });
  }

  /**
   * Track API response time
   */
  trackApiCall(apiName: string, startTime: number, endTime: number): void {
    const responseTime = endTime - startTime;
    this.metrics.apiResponseTime = responseTime;
    
    if (responseTime > this.thresholds.apiResponseTime) {
      this.addAlert('warning', `Slow API call (${apiName}): ${responseTime.toFixed(2)}ms`, 'medium');
    }
  }

  /**
   * Track database query performance
   */
  trackDbQuery(queryName: string, startTime: number, endTime: number): void {
    const queryTime = endTime - startTime;
    this.metrics.dbQueryTime = queryTime;
    this.metrics.dbQueryCount++;
    
    if (queryTime > 1000) { // 1 second threshold for DB queries
      this.addAlert('warning', `Slow DB query (${queryName}): ${queryTime.toFixed(2)}ms`, 'medium');
    }
  }

  /**
   * Track cache performance
   */
  trackCacheHit(): void {
    // This would be called by your cache service
    const totalCacheRequests = this.metrics.customMetrics.cacheRequests || 0;
    const totalCacheHits = this.metrics.customMetrics.cacheHits || 0;
    
    this.metrics.customMetrics.cacheRequests = totalCacheRequests + 1;
    this.metrics.customMetrics.cacheHits = totalCacheHits + 1;
    
    this.metrics.cacheHitRate = totalCacheHits / (totalCacheRequests + 1);
  }

  trackCacheMiss(): void {
    const totalCacheRequests = this.metrics.customMetrics.cacheRequests || 0;
    this.metrics.customMetrics.cacheRequests = totalCacheRequests + 1;
    
    this.metrics.cacheHitRate = (this.metrics.customMetrics.cacheHits || 0) / (totalCacheRequests + 1);
  }

  /**
   * Track WebSocket performance
   */
  trackWebSocketConnection(): void {
    this.metrics.wsConnections++;
  }

  trackWebSocketMessage(latency: number): void {
    this.metrics.wsMessageLatency = latency;
  }

  /**
   * Add custom metric
   */
  addCustomMetric(name: string, value: number): void {
    this.metrics.customMetrics[name] = value;
  }

  /**
   * Add performance alert
   */
  addAlert(type: PerformanceAlert['type'], message: string, severity: PerformanceAlert['severity']): void {
    const alert: PerformanceAlert = {
      type,
      message,
      timestamp: Date.now(),
      severity
    };
    
    this.alerts.push(alert);
    
    // Keep only last 100 alerts
    if (this.alerts.length > 100) {
      this.alerts = this.alerts.slice(-100);
    }
    
    // Log critical alerts
    if (severity === 'critical') {
      console.error(`ðŸš¨ [PerformanceMonitor] CRITICAL: ${message}`);
    }
  }

  /**
   * Get current metrics
   */
  getMetrics(): PerformanceMetrics {
    return { ...this.metrics };
  }

  /**
   * Get recent alerts
   */
  getAlerts(limit = 10): PerformanceAlert[] {
    return this.alerts.slice(-limit);
  }

  /**
   * Report metrics to console (or external service)
   */
  private reportMetrics(): void {
    if (!this.isMonitoring) {
      return;
    }
    
    console.log('ðŸ“Š [PerformanceMonitor] Current Metrics:', {
      pageLoadTime: `${this.metrics.pageLoadTime.toFixed(2)}ms`,
      apiResponseTime: `${this.metrics.apiResponseTime.toFixed(2)}ms`,
      cacheHitRate: `${(this.metrics.cacheHitRate * 100).toFixed(1)}%`,
      memoryUsage: `${(this.metrics.memoryUsage / 1024 / 1024).toFixed(2)}MB`,
      userActions: this.metrics.userActions,
      errors: this.metrics.errors,
      dbQueries: this.metrics.dbQueryCount,
      wsConnections: this.metrics.wsConnections
    });
    
    // Check for performance issues
    this.checkPerformanceIssues();
  }

  /**
   * Check for performance issues and create alerts
   */
  private checkPerformanceIssues(): void {
    // Check error rate
    const errorRate = this.metrics.errors / Math.max(this.metrics.userActions, 1);
    if (errorRate > this.thresholds.errorRate) {
      this.addAlert('error', `High error rate: ${(errorRate * 100).toFixed(2)}%`, 'high');
    }
    
    // Check cache hit rate
    if (this.metrics.cacheHitRate < this.thresholds.cacheHitRate) {
      this.addAlert('warning', `Low cache hit rate: ${(this.metrics.cacheHitRate * 100).toFixed(1)}%`, 'medium');
    }
  }

  /**
   * Export metrics for external monitoring
   */
  exportMetrics(): string {
    return JSON.stringify({
      metrics: this.metrics,
      alerts: this.alerts,
      timestamp: Date.now()
    });
  }
}

// Export singleton instance
export const performanceMonitor = PerformanceMonitor.getInstance();

// Auto-start monitoring in browser
if (typeof window !== 'undefined') {
  performanceMonitor.startMonitoring();
}



```n

## src\services\profileAwareTabService.ts

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\services\profileAwareTabService.ts.Extension.TrimStart('.'))

import { SubTab, PlayerProfile } from '../types';

export interface GameContext {
  playthroughCount?: number;
  lastSessionDate?: number;
  totalPlayTime?: number;
  objectivesCompleted?: string[];
  secretsFound?: string[];
}

export interface ProfileSpecificTab extends Omit<SubTab, 'content' | 'isNew' | 'status'> {
  priority: 'high' | 'medium' | 'low';
  isProfileSpecific: boolean;
}

class ProfileAwareTabService {
  private static instance: ProfileAwareTabService;

  private constructor() {}

  static getInstance(): ProfileAwareTabService {
    if (!ProfileAwareTabService.instance) {
      ProfileAwareTabService.instance = new ProfileAwareTabService();
    }
    return ProfileAwareTabService.instance;
  }

  /**
   * Generate additional tabs based on player profile
   * These tabs are added to the base genre tabs
   */
  generateProfileSpecificTabs(
    profile: PlayerProfile,
    gameContext?: GameContext
  ): ProfileSpecificTab[] {
    const tabs: ProfileSpecificTab[] = [];

    // Add tabs based on player focus
    if (profile.playerFocus === 'Story-Driven') {
      tabs.push({
        id: 'narrative_themes',
        title: 'Narrative Themes',
        type: 'story',
        priority: 'high',
        isProfileSpecific: true,
        instruction: this.getNarrativeThemesInstruction(profile.hintStyle),
      });
    }

    if (profile.playerFocus === 'Completionist') {
      tabs.push({
        id: 'secret_hunting',
        title: 'Secret Hunting',
        type: 'tips',
        priority: 'high',
        isProfileSpecific: true,
        instruction: this.getSecretHuntingInstruction(profile.hintStyle),
      });
    }

    if (profile.playerFocus === 'Strategist') {
      tabs.push({
        id: 'optimization_guide',
        title: 'Optimization Guide',
        type: 'strategies',
        priority: 'high',
        isProfileSpecific: true,
        instruction: this.getOptimizationInstruction(profile.hintStyle),
      });
    }

    // Add playthrough-specific tabs for returning players
    if (gameContext?.playthroughCount && gameContext.playthroughCount > 1) {
      tabs.push({
        id: 'playthrough_comparison',
        title: 'Playthrough Comparison',
        type: 'tips',
        priority: 'medium',
        isProfileSpecific: true,
        instruction: this.getPlaythroughComparisonInstruction(profile),
      });
    }

    return tabs;
  }

  /**
   * Get custom instructions for Narrative Themes tab based on hint style
   */
  private getNarrativeThemesInstruction(hintStyle: string): string {
    const instructions: Record<string, string> = {
      Cryptic:
        'Provide subtle hints about story themes without revealing major plot points. Use metaphorical language and thematic connections.',
      Balanced:
        'Discuss narrative elements with moderate detail, balancing spoiler avoidance with meaningful insight into themes and character arcs.',
      Direct:
        'Explain story themes clearly while maintaining appropriate spoiler warnings. Provide direct analysis of narrative elements encountered so far.',
    };
    return instructions[hintStyle] || instructions['Balanced'];
  }

  /**
   * Get custom instructions for Secret Hunting tab based on hint style
   */
  private getSecretHuntingInstruction(hintStyle: string): string {
    const instructions: Record<string, string> = {
      Cryptic:
        'Give mysterious clues about hidden content locations. Use environmental riddles and subtle hints that require exploration.',
      Balanced:
        'Provide clear directions to secrets with some exploration challenge. Balance helpfulness with maintaining the joy of discovery.',
      Direct:
        'Give precise locations and requirements for finding secrets. Include step-by-step instructions and exact coordinates when helpful.',
    };
    return instructions[hintStyle] || instructions['Balanced'];
  }

  /**
   * Get custom instructions for Optimization Guide tab based on hint style
   */
  private getOptimizationInstruction(hintStyle: string): string {
    const instructions: Record<string, string> = {
      Cryptic:
        'Suggest optimization strategies through hints and examples. Let the player discover the optimal path with guidance.',
      Balanced:
        'Provide balanced optimization advice with clear explanations. Suggest effective approaches while leaving room for experimentation.',
      Direct:
        'Give specific optimization recommendations with detailed steps. Provide exact stat allocations, builds, and strategies for maximum efficiency.',
    };
    return instructions[hintStyle] || instructions['Direct'];
  }

  /**
   * Get custom instructions for Playthrough Comparison tab
   */
  private getPlaythroughComparisonInstruction(profile: PlayerProfile): string {
    return `Compare different playthrough approaches based on ${profile.playerFocus} style and ${profile.hintStyle} preferences. Highlight what's different this time and suggest new strategies to explore.`;
  }

  /**
   * Prioritize tabs based on player profile
   * Profile-specific tabs get higher priority, then by assigned priority level
   */
  prioritizeTabsForProfile(
    tabs: ProfileSpecificTab[],
    _profile: PlayerProfile
  ): ProfileSpecificTab[] {
    return tabs.sort((a, b) => {
      // Profile-specific tabs get highest priority
      if (a.isProfileSpecific && !b.isProfileSpecific) {
        return -1;
      }
      if (!a.isProfileSpecific && b.isProfileSpecific) {
        return 1;
      }

      // Then by priority level
      const priorityOrder = { high: 3, medium: 2, low: 1 };
      return priorityOrder[b.priority] - priorityOrder[a.priority];
    });
  }

  /**
   * Get hint style modifier for AI prompts
   * This modifies how AI generates content based on user preference
   */
  getHintStyleModifier(hintStyle: string): string {
    const modifiers: Record<string, string> = {
      Cryptic:
        'Use subtle, metaphorical hints. Avoid direct answers. Make the player think and discover.',
      Balanced:
        'Provide clear guidance while leaving room for exploration. Balance helpfulness with discovery.',
      Direct:
        'Give explicit, step-by-step instructions. Be precise and comprehensive in explanations.',
    };
    return modifiers[hintStyle] || modifiers['Balanced'];
  }

  /**
   * Get player focus modifier for AI prompts
   * This adjusts content emphasis based on what the player cares about
   */
  getPlayerFocusModifier(playerFocus: string): string {
    const modifiers: Record<string, string> = {
      'Story-Driven':
        'Emphasize narrative elements, character development, and story context. Prioritize lore and thematic content.',
      Completionist:
        'Focus on collectibles, hidden items, side quests, and 100% completion strategies. Highlight missable content.',
      Strategist:
        'Prioritize optimal strategies, build optimization, and efficient progression. Focus on mechanics and systems.',
    };
    return modifiers[playerFocus] || modifiers['Strategist'];
  }

  /**
   * Get spoiler tolerance modifier for AI prompts
   * Controls how much future content can be hinted at
   */
  getSpoilerToleranceModifier(spoilerTolerance: string): string {
    const modifiers: Record<string, string> = {
      Strict:
        'NEVER mention future events, characters, or plot points. Only discuss content up to current progress.',
      Moderate:
        'You may hint at upcoming content in vague terms, but avoid specific spoilers.',
      Relaxed:
        'You can discuss future content more freely, but still mark major spoilers clearly.',
    };
    return modifiers[spoilerTolerance] || modifiers['Strict'];
  }

  /**
   * Get tone modifier for AI prompts
   * Adjusts the conversational style of responses
   */
  getToneModifier(preferredTone: string): string {
    const modifiers: Record<string, string> = {
      Encouraging:
        'Use an enthusiastic, supportive tone. Celebrate achievements and provide positive reinforcement.',
      Professional:
        'Maintain a knowledgeable, respectful tone. Provide expertise without excessive casualness.',
      Casual:
        'Use a friendly, conversational tone. Feel free to use gaming terminology and be relaxed.',
    };
    return modifiers[preferredTone] || modifiers['Professional'];
  }

  /**
   * Build complete profile context for AI prompts
   * Combines all profile modifiers into a single instruction block
   */
  buildProfileContext(profile: PlayerProfile): string {
    const parts = [
      `Hint Style: ${this.getHintStyleModifier(profile.hintStyle)}`,
      `Player Focus: ${this.getPlayerFocusModifier(profile.playerFocus)}`,
      `Spoiler Tolerance: ${this.getSpoilerToleranceModifier(profile.spoilerTolerance)}`,
      `Tone: ${this.getToneModifier(profile.preferredTone)}`,
    ];

    return parts.join('\n');
  }

  /**
   * Get default profile for users who skipped profile setup
   */
  getDefaultProfile(): PlayerProfile {
    return {
      hintStyle: 'Balanced',
      playerFocus: 'Strategist',
      preferredTone: 'Professional',
      spoilerTolerance: 'Strict',
    };
  }
}

export const profileAwareTabService = ProfileAwareTabService.getInstance();



```n

## src\services\promptSystem.ts

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\services\promptSystem.ts.Extension.TrimStart('.'))

import { Conversation, User, PlayerProfile } from '../types';
import { profileAwareTabService } from './profileAwareTabService';

// OTAKON tag definitions for the AI
const OTAKON_TAG_DEFINITIONS = `
You MUST use the following tags to structure your response. Do not put them in a code block.
- [OTAKON_GAME_ID: Game Name]: The full, official name of the game you've identified.
- [OTAKON_CONFIDENCE: high|low]: Your confidence in the game identification.
- [OTAKON_GENRE: Genre]: The primary genre of the identified game.
- [OTAKON_GAME_STATUS: unreleased]: ONLY include this tag if the game is NOT YET RELEASED. Verify the release date before including this tag.
- [OTAKON_IS_FULLSCREEN: true|false]: Whether the screenshot shows fullscreen gameplay (not menus, launchers, or non-game screens).
- [OTAKON_TRIUMPH: {"type": "boss_defeated", "name": "Boss Name"}]: When analyzing a victory screen.
- [OTAKON_OBJECTIVE_SET: {"description": "New objective"}]: When a new player objective is identified.
- [OTAKON_INSIGHT_UPDATE: {"id": "sub_tab_id", "content": "content"}]: To update a specific sub-tab.
- [OTAKON_INSIGHT_MODIFY_PENDING: {"id": "sub_tab_id", "title": "New Title", "content": "New content"}]: When user asks to modify a subtab via @command.
- [OTAKON_INSIGHT_DELETE_REQUEST: {"id": "sub_tab_id"}]: When user asks to delete a subtab via @command.
- [OTAKON_SUGGESTIONS: ["suggestion1", "suggestion2", "suggestion3"]]: Three contextual follow-up prompts for the user. Make these short, specific questions that help the user learn more about the current situation, get tips, or understand what to do next.
`;

// Command Centre instructions for subtab management
const COMMAND_CENTRE_INSTRUCTIONS = `
**Command Centre - Subtab Management:**
Users can manage subtabs using @ commands:
1. **@<tab_name> <instruction>**: Update a subtab with new information
   - Example: "@story_so_far The player just defeated the first boss"
   - Response: Include [OTAKON_INSIGHT_UPDATE: {"id": "story_so_far", "content": "The player has...[updated content based on instruction]"}]
   
2. **@<tab_name> \\modify**: Modify or rename a subtab
   - Example: "@tips \\modify change this to combat strategies"
   - Response: Include [OTAKON_INSIGHT_MODIFY_PENDING: {"id": "tips", "title": "Combat Strategies", "content": "[updated content]"}]
   
3. **@<tab_name> \\delete**: Delete a subtab
   - Example: "@unused_tab \\delete"
   - Response: Include [OTAKON_INSIGHT_DELETE_REQUEST: {"id": "unused_tab"}] and acknowledge the deletion

When you see an @ command:
- Acknowledge the command in your response ("I've updated the [tab name] tab...")
- Include the appropriate OTAKON tag to execute the action
- Provide confirmation of what was changed
`;

const getGeneralAssistantPrompt = (userMessage: string): string => {
  return `
**Persona: General Gaming Assistant**
You are Otagon, a helpful and knowledgeable AI gaming assistant for the "Game Hub" tab.

**Task:**
1. Thoroughly answer the user's query: "${userMessage}".
2. If the query is about a SPECIFIC RELEASED GAME that the user mentions by name, you MUST include these tags:
   - [OTAKON_GAME_ID: Full Game Name] - The complete, official name of the game
   - [OTAKON_CONFIDENCE: high|low] - Your confidence in the identification
   - [OTAKON_GENRE: Genre] - The primary genre (e.g., Action RPG, FPS, Strategy)
   - [OTAKON_GAME_STATUS: unreleased] - ONLY if the game is NOT YET RELEASED
3. Provide three relevant suggested prompts using the [OTAKON_SUGGESTIONS] tag.

**IMPORTANT - When to use game tags:**
âœ… User asks: "How do I beat the first boss in Elden Ring?" â†’ Include [OTAKON_GAME_ID: Elden Ring] [OTAKON_CONFIDENCE: high] [OTAKON_GENRE: Action RPG]
âœ… User asks: "What's the best build for Cyberpunk 2077?" â†’ Include [OTAKON_GAME_ID: Cyberpunk 2077] [OTAKON_CONFIDENCE: high] [OTAKON_GENRE: Action RPG]
âŒ User asks: "What's a good RPG to play?" â†’ NO game tags (general question)
âŒ User asks: "Tell me about open world games" â†’ NO game tags (general question)

**Tag Definitions:**
${OTAKON_TAG_DEFINITIONS}

**Response Style:**
- Be helpful and knowledgeable about gaming
- Keep responses concise but informative
- Use gaming terminology appropriately
- For game-specific queries, start with "Hint:" and provide actionable advice
- Focus on useful information, not obvious descriptions
- Make responses engaging and immersive
`;
};

const getGameCompanionPrompt = (
  conversation: Conversation, 
  userMessage: string, 
  user: User, 
  isActiveSession: boolean,
  playerProfile?: PlayerProfile
): string => {
  // Gather subtab context
  const subtabContext = conversation.subtabs
    ?.filter(tab => tab.status === 'loaded' && tab.content)
    .map(tab => `### ${tab.title} (ID: ${tab.id})\n${tab.content}`)
    .join('\n\n') || 'No subtabs available yet.';

  // Gather recent conversation history (last 10 messages for better context)
  const recentMessages = conversation.messages
    .slice(-10)
    .map(m => `${m.role === 'user' ? 'User' : 'Otagon'}: ${m.content}`)
    .join('\n');

  // Get player profile context if available
  const profile = playerProfile || profileAwareTabService.getDefaultProfile();
  const profileContext = profileAwareTabService.buildProfileContext(profile);

  return `
**Persona: Game Companion**
You are Otagon, an immersive AI companion for the game "${conversation.gameTitle}".
The user's spoiler preference is: "${user.preferences?.spoilerPreference || 'none'}".
The user's current session mode is: ${isActiveSession ? 'ACTIVE (currently playing)' : 'PLANNING (not playing)'}.

**Game Context:**
- Game: ${conversation.gameTitle} (${conversation.genre})
- Current Objective: ${conversation.activeObjective || 'Not set'}
- Game Progress: ${conversation.gameProgress || 0}%

**Player Profile:**
${profileContext}

**Current Subtabs (Your Knowledge Base):**
${subtabContext}

**Recent Conversation History:**
${recentMessages}

**User Query:** "${userMessage}"

**Task:**
1. Respond to the user's query in an immersive, in-character way that matches the tone of the game.
2. Use the subtab context above to provide informed, consistent answers.
3. **IMPORTANT: Adapt your response style based on the Player Profile above.**
4. If the query provides new information, update relevant subtabs using [OTAKON_INSIGHT_UPDATE].
5. If the query implies progress, identify new objectives using [OTAKON_OBJECTIVE_SET].
6. ${isActiveSession ? 'Provide concise, actionable advice for immediate use.' : 'Provide more detailed, strategic advice for planning.'}
7. Generate three contextual suggested prompts using the [OTAKON_SUGGESTIONS] tag.

${COMMAND_CENTRE_INSTRUCTIONS}

**Suggestions Guidelines:**
Generate 3 short, specific follow-up questions that help the user:
- Get immediate help with their current situation
- Learn more about game mechanics or story elements
- Get strategic advice for their next steps
- Understand character motivations or plot points
- Explore related game content or areas

Examples of good suggestions:
- "What's the best strategy for this boss?"
- "Tell me more about this character's backstory"
- "What should I do next in this area?"
- "How do I unlock this feature?"
- "What items should I prioritize here?"

**Tag Definitions:**
${OTAKON_TAG_DEFINITIONS}

**Response Style:**
- Match the tone and atmosphere of ${conversation.gameTitle}
- Be spoiler-free beyond current progress
- Provide practical, actionable advice
- Use game-specific terminology and references
- Start with "Hint:" for game-specific queries
- Include lore and story context appropriate to player's progress
- When updating subtabs, seamlessly integrate the update into your response
`;
};

const getScreenshotAnalysisPrompt = (
  _conversation: Conversation, 
  userMessage: string, 
  _user: User,
  playerProfile?: PlayerProfile
): string => {
  // Get player profile context if available
  const profile = playerProfile || profileAwareTabService.getDefaultProfile();
  const profileContext = profileAwareTabService.buildProfileContext(profile);

  return `
**Persona: Game Lore Expert & Screenshot Analyst**
You are Otagon, an expert at analyzing game visuals and providing immersive, lore-rich assistance.

**Player Profile:**
${profileContext}

**Task:**
1. Analyze the screenshot to identify the game
2. **CRITICAL TAG REQUIREMENTS - Include ALL of these tags:**
   - [OTAKON_GAME_ID: Full Game Name] - The complete, official name of the game
   - [OTAKON_CONFIDENCE: high|low] - Your confidence in the identification
   - [OTAKON_GENRE: Genre] - The primary genre (e.g., Action RPG, FPS, Strategy)
   - [OTAKON_IS_FULLSCREEN: true|false] - Is this fullscreen gameplay? (For informational purposes)
   - [OTAKON_GAME_STATUS: unreleased] - ONLY include this if the game is NOT YET RELEASED (verify release date!)
3. Answer: "${userMessage}" with focus on game lore, significance, and useful context
4. Provide 3 contextual suggestions using [OTAKON_SUGGESTIONS: ["suggestion1", "suggestion2", "suggestion3"]]

**Tag Usage Examples:**
âœ… Released game, fullscreen gameplay: [OTAKON_GAME_ID: Elden Ring] [OTAKON_CONFIDENCE: high] [OTAKON_GENRE: Action RPG] [OTAKON_IS_FULLSCREEN: true]
âœ… Released game, menu screen: [OTAKON_GAME_ID: Elden Ring] [OTAKON_CONFIDENCE: high] [OTAKON_GENRE: Action RPG] [OTAKON_IS_FULLSCREEN: false]
âœ… Unreleased game: [OTAKON_GAME_ID: GTA VI] [OTAKON_CONFIDENCE: high] [OTAKON_GENRE: Action Adventure] [OTAKON_IS_FULLSCREEN: true] [OTAKON_GAME_STATUS: unreleased]

**IMPORTANT - Game Tab Creation:**
- ANY screenshot showing a released game (menu or gameplay) will create a dedicated game tab
- This includes main menus, character selection, settings, and gameplay screens
- Only unreleased games or non-game screens (launchers, store pages) stay in "Game Hub"

**What counts as fullscreen gameplay (for IS_FULLSCREEN tag):**
- In-game world exploration
- Combat encounters
- Cutscenes during gameplay
- Active gameplay screens

**What is NOT fullscreen gameplay (but still creates a game tab if it's a released game):**
- Main menus, settings menus
- Character selection screens
- Loading screens
- Inventory/map screens

**Response Guidelines:**
- Use the EXACT structure below - do not deviate from this format
- Focus on GAME LORE, SIGNIFICANCE, and USEFUL CONTEXT rather than describing obvious UI elements
- Make the response immersive and engaging
- Avoid describing basic UI elements unless they're relevant to the question
- Make the response feel like you're a knowledgeable game companion, not a UI analyzer

**MANDATORY FORMAT - Use this exact structure:**
Hint: [Game Name] - [Brief, actionable hint about what the player should do or focus on]

Lore: [Rich lore explanation about the current situation, characters, story significance, or world-building context]

Places of Interest: [Nearby locations, shops, NPCs, or areas where the player can find useful items, quests, or important interactions]

**What to focus on:**
- Story significance and lore implications
- Character relationships and motivations
- Location importance and world-building
- Gameplay mechanics and strategic advice
- Narrative context and plot relevance
- Cultural or thematic elements

**What to avoid:**
- Describing obvious UI elements (health bars, buttons, etc.)
- Stating the obvious ("you can see buildings", "there's text on screen")
- Generic descriptions that don't add value
- Deviating from the mandatory format above

**Suggestions Guidelines:**
Generate 3 short, specific follow-up questions that help the user:
- Learn more about the current situation or location
- Get tactical advice for what they're seeing
- Understand story implications or character motivations
- Get tips for gameplay mechanics shown in the screenshot
- Explore related game content or areas

Examples of good suggestions:
- "What's the significance of this location?"
- "How do I handle this type of enemy?"
- "What should I do next here?"
- "Tell me about this character's backstory"
- "What items should I look for in this area?"

**Tag Definitions:**
${OTAKON_TAG_DEFINITIONS}
`;
};

/**
 * Determines the correct persona and returns the master prompt.
 */
export const getPromptForPersona = (
  conversation: Conversation,
  userMessage: string,
  user: User,
  isActiveSession: boolean,
  hasImages: boolean,
  playerProfile?: PlayerProfile
): string => {
  if (hasImages) {
    return getScreenshotAnalysisPrompt(conversation, userMessage, user, playerProfile);
  }
  
  if (!conversation.isGameHub && conversation.gameTitle) {
    return getGameCompanionPrompt(conversation, userMessage, user, isActiveSession, playerProfile);
  }
  
  return getGeneralAssistantPrompt(userMessage);
};


```n

## src\services\sessionSummaryService.ts

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\services\sessionSummaryService.ts.Extension.TrimStart('.'))

import { Conversation, ChatMessage } from '../types';

export interface SessionSummary {
  mode: 'playing' | 'planning';
  gameTitle: string;
  conversationId: string;
  summary: string;
  keyPoints: string[];
  objectives: string[];
  timestamp: number;
}

class SessionSummaryService {
  /**
   * Generate a summary of a playing session for planning mode
   */
  async generatePlayingSessionSummary(conversation: Conversation): Promise<SessionSummary> {
    const playingMessages = conversation.messages.filter(msg => 
      msg.role === 'assistant' && msg.content.includes('Hint:')
    );

    const keyPoints = this.extractKeyPoints(playingMessages);
    const objectives = this.extractObjectives(playingMessages);
    
    const summary = `Playing session summary for ${conversation.gameTitle}:
    
Key Achievements:
${keyPoints.map(point => `â€¢ ${point}`).join('\n')}

Current Objectives:
${objectives.map(obj => `â€¢ ${obj}`).join('\n')}

Recent Progress:
${playingMessages.slice(-3).map(msg => `- ${msg.content.substring(0, 100)}...`).join('\n')}`;

    return {
      mode: 'playing',
      gameTitle: conversation.gameTitle || 'Unknown Game',
      conversationId: conversation.id,
      summary,
      keyPoints,
      objectives,
      timestamp: Date.now()
    };
  }

  /**
   * Generate a summary of a planning session for playing mode
   */
  async generatePlanningSessionSummary(conversation: Conversation): Promise<SessionSummary> {
    const planningMessages = conversation.messages.filter(msg => 
      msg.role === 'assistant' && !msg.content.includes('Hint:')
    );

    const keyPoints = this.extractKeyPoints(planningMessages);
    const objectives = this.extractObjectives(planningMessages);
    
    const summary = `Planning session summary for ${conversation.gameTitle}:
    
Planned Strategies:
${keyPoints.map(point => `â€¢ ${point}`).join('\n')}

Goals to Achieve:
${objectives.map(obj => `â€¢ ${obj}`).join('\n')}

Strategic Notes:
${planningMessages.slice(-3).map(msg => `- ${msg.content.substring(0, 100)}...`).join('\n')}`;

    return {
      mode: 'planning',
      gameTitle: conversation.gameTitle || 'Unknown Game',
      conversationId: conversation.id,
      summary,
      keyPoints,
      objectives,
      timestamp: Date.now()
    };
  }

  /**
   * Extract key points from messages
   */
  private extractKeyPoints(messages: ChatMessage[]): string[] {
    const keyPoints: string[] = [];
    
    messages.forEach(msg => {
      // Look for specific patterns that indicate achievements or important info
      if (msg.content.includes('defeated') || msg.content.includes('completed')) {
        keyPoints.push('Achievement unlocked or objective completed');
      }
      if (msg.content.includes('found') || msg.content.includes('discovered')) {
        keyPoints.push('New item or location discovered');
      }
      if (msg.content.includes('unlocked') || msg.content.includes('gained')) {
        keyPoints.push('New ability or feature unlocked');
      }
    });

    return keyPoints.length > 0 ? keyPoints : ['Session progress recorded'];
  }

  /**
   * Extract objectives from messages
   */
  private extractObjectives(messages: ChatMessage[]): string[] {
    const objectives: string[] = [];
    
    messages.forEach(msg => {
      // Look for objective-related content
      if (msg.content.includes('objective') || msg.content.includes('goal')) {
        objectives.push('Continue current objective');
      }
      if (msg.content.includes('next') || msg.content.includes('should')) {
        objectives.push('Follow recommended next steps');
      }
      if (msg.content.includes('explore') || msg.content.includes('investigate')) {
        objectives.push('Explore new areas or investigate leads');
      }
    });

    return objectives.length > 0 ? objectives : ['Continue game progression'];
  }

  /**
   * Store session summary in conversation
   */
  async storeSessionSummary(conversationId: string, summary: SessionSummary): Promise<void> {
    // Store in conversation metadata or cache
    // This would integrate with your existing conversation service
    console.log('Storing session summary for conversation:', conversationId, summary);
  }

  /**
   * Get the most recent session summary
   */
  async getLatestSessionSummary(conversationId: string): Promise<SessionSummary | null> {
    // Retrieve from conversation metadata or cache
    // This would integrate with your existing conversation service
    console.log('Getting latest session summary for conversation:', conversationId);
    return null;
  }
}

export const sessionSummaryService = new SessionSummaryService();


```n

## src\services\storageService.ts

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\services\storageService.ts.Extension.TrimStart('.'))

export class StorageService {
  static get<T>(key: string, defaultValue: T): T {
    try {
      const item = localStorage.getItem(key);
      return item ? JSON.parse(item) : defaultValue;
    } catch (error) {
      console.error(`Error getting ${key} from localStorage:`, error);
      return defaultValue;
    }
  }

  static set<T>(key: string, value: T): void {
    try {
      localStorage.setItem(key, JSON.stringify(value));
    } catch (error) {
      console.error(`Error setting ${key} in localStorage:`, error);
    }
  }

  static remove(key: string): void {
    try {
      localStorage.removeItem(key);
    } catch (error) {
      console.error(`Error removing ${key} from localStorage:`, error);
    }
  }

  static clear(): void {
    try {
      localStorage.clear();
    } catch (error) {
      console.error('Error clearing localStorage:', error);
    }
  }
}


```n

## src\services\suggestedPromptsService.ts

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\services\suggestedPromptsService.ts.Extension.TrimStart('.'))

import { newsPrompts } from '../types';

class SuggestedPromptsService {
  private readonly STORAGE_KEY = 'otakon_used_suggested_prompts';
  private readonly LAST_RESET_KEY = 'otakon_suggested_prompts_last_reset';
  private readonly RESET_INTERVAL_MS = 24 * 60 * 60 * 1000; // 24 hours
  private usedPrompts: Set<string> = new Set();

  constructor() {
    this.loadUsedPrompts();
    this.checkAndResetIfNeeded();
  }

  private loadUsedPrompts(): void {
    try {
      const stored = localStorage.getItem(this.STORAGE_KEY);
      if (stored) {
        const prompts = JSON.parse(stored);
        this.usedPrompts = new Set(prompts);
      }
    } catch (error) {
      console.warn('Failed to load used suggested prompts:', error);
      this.usedPrompts = new Set();
    }
  }

  private saveUsedPrompts(): void {
    try {
      const prompts = Array.from(this.usedPrompts);
      localStorage.setItem(this.STORAGE_KEY, JSON.stringify(prompts));
    } catch (error) {
      console.warn('Failed to save used suggested prompts:', error);
    }
  }

  /**
   * Check if 24 hours have passed since last reset and reset if needed
   */
  private checkAndResetIfNeeded(): void {
    try {
      const lastResetTime = localStorage.getItem(this.LAST_RESET_KEY);
      const now = Date.now();
      
      if (!lastResetTime || (now - parseInt(lastResetTime)) >= this.RESET_INTERVAL_MS) {
        console.log('ðŸ”„ 24 hours passed - resetting suggested prompts for fresh daily news');
        this.resetUsedPrompts();
        localStorage.setItem(this.LAST_RESET_KEY, now.toString());
      }
    } catch (error) {
      console.warn('Failed to check/reset suggested prompts:', error);
    }
  }

  /**
   * Mark a prompt as used
   */
  public markPromptAsUsed(prompt: string): void {
    this.usedPrompts.add(prompt);
    this.saveUsedPrompts();
  }

  /**
   * Check if a prompt has been used
   */
  public isPromptUsed(prompt: string): boolean {
    return this.usedPrompts.has(prompt);
  }

  /**
   * Get all unused prompts from a list
   */
  public getUnusedPrompts(prompts: string[]): string[] {
    return prompts.filter(prompt => !this.isPromptUsed(prompt));
  }

  /**
   * Check if all prompts have been used
   */
  public areAllPromptsUsed(prompts: string[]): boolean {
    return prompts.every(prompt => this.isPromptUsed(prompt));
  }

  /**
   * Reset used prompts (called on app restart, login, or 24-hour interval)
   */
  public resetUsedPrompts(): void {
    this.usedPrompts.clear();
    localStorage.removeItem(this.STORAGE_KEY);
    console.log('ðŸ”„ Suggested prompts reset - all 4 prompts will be available again');
  }

  /**
   * Get count of used prompts
   */
  public getUsedCount(): number {
    return this.usedPrompts.size;
  }

  /**
   * Get time until next reset (in milliseconds)
   */
  public getTimeUntilNextReset(): number {
    try {
      const lastResetTime = localStorage.getItem(this.LAST_RESET_KEY);
      if (!lastResetTime) {
        return 0;
      }
      
      const nextResetTime = parseInt(lastResetTime) + this.RESET_INTERVAL_MS;
      return Math.max(0, nextResetTime - Date.now());
    } catch (error) {
      console.warn('Failed to calculate time until next reset:', error);
      return 0;
    }
  }

  /**
   * Get static news prompts for the "Game Hub" tab
   */
  public getStaticNewsPrompts(): string[] {
    // Returns array of 4 news prompts (not shuffled to maintain consistency)
    return newsPrompts;
  }

  /**
   * Process AI-generated suggestions and format them for display
   */
  public processAISuggestions(suggestions: any): string[] {
    console.log('ðŸ” [SuggestedPromptsService] Input suggestions:', suggestions, 'Type:', typeof suggestions);
    
    // Handle different types of suggestions
    if (!suggestions) {
      console.log('ðŸ” [SuggestedPromptsService] No suggestions provided');
      return [];
    }
    
    let suggestionsArray: string[] = [];
    
    if (Array.isArray(suggestions)) {
      console.log('ðŸ” [SuggestedPromptsService] Suggestions is already an array');
      suggestionsArray = suggestions;
    } else if (typeof suggestions === 'string') {
      console.log('ðŸ” [SuggestedPromptsService] Suggestions is a string, attempting to parse');
      
      // Clean up common formatting issues first
      let cleanedSuggestions = suggestions.trim();
      
      // Fix malformed JSON arrays that start with [" but might be incomplete
      if (cleanedSuggestions.startsWith('["') && !cleanedSuggestions.endsWith('"]')) {
        // Try to fix incomplete JSON arrays
        if (!cleanedSuggestions.endsWith('"')) {
          cleanedSuggestions += '"';
        }
        if (!cleanedSuggestions.endsWith(']')) {
          cleanedSuggestions += ']';
        }
        console.log('ðŸ” [SuggestedPromptsService] Fixed malformed JSON array:', cleanedSuggestions);
      }
      
      // If it's a string, try to parse it as JSON
      try {
        // Try to parse as JSON array first
        const parsed = JSON.parse(cleanedSuggestions);
        if (Array.isArray(parsed)) {
          suggestionsArray = parsed;
          console.log('ðŸ” [SuggestedPromptsService] Successfully parsed as JSON array');
        } else {
          suggestionsArray = [suggestions];
          console.log('ðŸ” [SuggestedPromptsService] Parsed as single value, wrapped in array');
        }
      } catch (_e) {
        console.log('ðŸ” [SuggestedPromptsService] JSON parsing failed, trying delimiter splitting');
        // If JSON parsing fails, try to split by common delimiters
        if (cleanedSuggestions.includes('", "') || cleanedSuggestions.includes('",\n"')) {
          // Split by comma and clean up
          suggestionsArray = cleanedSuggestions
            .split(/",\s*"/)
            .map(s => s.replace(/^["\s]+|["\s]+$/g, ''))
            .filter(s => s.length > 0);
          console.log('ðŸ” [SuggestedPromptsService] Split by comma delimiters');
        } else if (cleanedSuggestions.includes('\n')) {
          // Split by newlines for multi-line format
          suggestionsArray = cleanedSuggestions
            .split('\n')
            .map(s => s.replace(/^["\s]+|["\s]+$/g, ''))
            .filter(s => s.length > 0);
          console.log('ðŸ” [SuggestedPromptsService] Split by quote delimiters');
        } else {
          // Single suggestion
          suggestionsArray = [suggestions];
          console.log('ðŸ” [SuggestedPromptsService] Treated as single suggestion');
        }
      }
    }
    
    console.log('ðŸ” [SuggestedPromptsService] Raw suggestions array:', suggestionsArray);
    
    // Clean and format suggestions
    const result = suggestionsArray
      .filter(suggestion => suggestion && typeof suggestion === 'string' && suggestion.trim().length > 0)
      .map(suggestion => suggestion.trim())
      .slice(0, 3); // Limit to 3 suggestions
    
    console.log('ðŸ” [SuggestedPromptsService] Final processed suggestions:', result);
    return result;
  }

  /**
   * Get fallback suggestions when AI doesn't provide any
   * Returns news prompts for Game Hub, game-specific prompts for game tabs
   */
  public getFallbackSuggestions(conversationId: string, isGameHub?: boolean): string[] {
    // âœ… Explicit Game Hub check with multiple conditions
    const isActuallyGameHub = isGameHub === true || 
      conversationId === 'game-hub' || 
      conversationId === 'everything-else';
    
    if (isActuallyGameHub) {
      // Game Hub: Return 4 static news prompts
      return this.getStaticNewsPrompts();
    }
    
    // âœ… Game-specific tabs: Return contextual game prompts
    // These prompts work for ANY game (not news-related)
    return [
      "What should I do next in this area?",
      "Tell me about the story so far",
      "Give me some tips for this game",
      "What are the key mechanics I should know?"
    ];
  }
}

export const suggestedPromptsService = new SuggestedPromptsService();



```n

## src\services\supabaseService.ts

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\services\supabaseService.ts.Extension.TrimStart('.'))

import { supabase } from '../lib/supabase';
import { User, Conversation, Game, UserTier, TrialStatus } from '../types';
import { USER_TIERS, TIER_LIMITS } from '../constants';

export class SupabaseService {
  private static instance: SupabaseService;

  static getInstance(): SupabaseService {
    if (!SupabaseService.instance) {
      SupabaseService.instance = new SupabaseService();
    }
    return SupabaseService.instance;
  }

  // User operations
  async getUser(authUserId: string): Promise<User | null> {
    try {
      const { data, error } = await supabase.rpc('get_complete_user_data', {
        p_auth_user_id: authUserId
      });

      if (error) {
        console.error('Error getting user:', error);
        return null;
      }

      if (data && data.length > 0) {
        const userData = data[0];
        return {
          id: userData.id,
          authUserId: userData.auth_user_id,
          email: userData.email,
          tier: userData.tier as UserTier,
          hasProfileSetup: false,
          hasSeenSplashScreens: false,
          hasSeenHowToUse: false,
          hasSeenFeaturesConnected: false,
          hasSeenProFeatures: false,
          pcConnected: false,
          pcConnectionSkipped: false,
          onboardingCompleted: false,
          hasWelcomeMessage: false,
          isNewUser: true,
          hasUsedTrial: userData.has_used_trial,
          lastActivity: Date.now(),
          // âœ… Query-based usage limits (top-level)
          textCount: userData.text_count || 0,
          imageCount: userData.image_count || 0,
          textLimit: userData.text_limit || 55,
          imageLimit: userData.image_limit || 25,
          totalRequests: userData.total_requests || 0,
          lastReset: userData.last_reset ? new Date(userData.last_reset).getTime() : Date.now(),
          preferences: userData.preferences || {},
          // Legacy nested usage object
          usage: {
            textCount: userData.text_count,
            imageCount: userData.image_count,
            textLimit: userData.text_limit,
            imageLimit: userData.image_limit,
            totalRequests: 0,
            lastReset: Date.now(),
            tier: userData.tier as UserTier,
          },
          appState: userData.app_state || {},
          profileData: userData.profile_data || {},
          onboardingData: {},
          behaviorData: {},
          feedbackData: {},
          usageData: {},
          createdAt: Date.now(),
          updatedAt: Date.now(),
        };
      }

      return null;
    } catch (error) {
      console.error('Error getting user:', error);
      return null;
    }
  }

  async updateUser(userId: string, updates: Partial<User>): Promise<boolean> {
    try {
      const { error } = await supabase
        .from('users')
        .update({
          tier: updates.tier,
          has_used_trial: updates.hasUsedTrial,
          last_activity: updates.lastActivity,
          preferences: updates.preferences,
          app_state: updates.appState,
          profile_data: updates.profileData,
          onboarding_data: updates.onboardingData,
          behavior_data: updates.behaviorData,
          feedback_data: updates.feedbackData,
          usage_data: updates.usageData,
          updated_at: new Date().toISOString(),
        })
        .eq('auth_user_id', userId);

      if (error) {
        console.error('Error updating user:', error);
        return false;
      }

      return true;
    } catch (error) {
      console.error('Error updating user:', error);
      return false;
    }
  }

  async updateUsage(userId: string, usage: any): Promise<boolean> {
    try {
      const { error } = await supabase
        .from('users')
        .update({
          text_count: usage.textCount,
          image_count: usage.imageCount,
          text_limit: usage.textLimit,
          image_limit: usage.imageLimit,
          updated_at: new Date().toISOString(),
        })
        .eq('auth_user_id', userId);

      if (error) {
        console.error('Error updating usage:', error);
        return false;
      }

      return true;
    } catch (error) {
      console.error('Error updating usage:', error);
      return false;
    }
  }

  // Conversation operations
  async getConversations(userId: string): Promise<Conversation[]> {
    try {
      // First get the user's internal ID from auth_user_id
      const { data: userData, error: userError } = await supabase
        .from('users')
        .select('id')
        .eq('auth_user_id', userId)
        .single();

      if (userError || !userData) {
        console.error('Error getting user ID:', userError);
        return [];
      }

      const { data, error } = await supabase
        .from('conversations')
        .select('*')
        .eq('user_id', userData.id)
        .order('updated_at', { ascending: false });

      if (error) {
        console.error('Error getting conversations:', error);
        return [];
      }

      return data.map(conv => ({
        id: conv.id,
        title: conv.title,
        messages: conv.messages || [],
        gameId: conv.game_id,
        gameTitle: conv.game_title,
        genre: conv.genre,
        subtabs: conv.subtabs || [],
        subtabsOrder: conv.subtabs_order || [],
        isActiveSession: conv.is_active_session,
        activeObjective: conv.active_objective,
        gameProgress: conv.game_progress,
        createdAt: new Date(conv.created_at).getTime(),
        updatedAt: new Date(conv.updated_at).getTime(),
        isActive: conv.is_active,
        isPinned: conv.is_pinned,
        pinnedAt: conv.pinned_at ? new Date(conv.pinned_at).getTime() : undefined,
        isGameHub: conv.is_game_hub,
      }));
    } catch (error) {
      console.error('Error getting conversations:', error);
      return [];
    }
  }

  async createConversation(userId: string, conversation: Omit<Conversation, 'id' | 'createdAt' | 'updatedAt'>): Promise<string | null> {
    try {
      // First get the user's internal ID from auth_user_id
      const { data: userData, error: userError } = await supabase
        .from('users')
        .select('id')
        .eq('auth_user_id', userId)
        .single();

      if (userError || !userData) {
        console.error('Error getting user ID:', userError);
        return null;
      }

      const { data, error } = await supabase
        .from('conversations')
        .insert({
          user_id: userData.id,
          title: conversation.title,
          messages: conversation.messages,
          game_id: conversation.gameId,
          game_title: conversation.gameTitle,
          genre: conversation.genre,
          subtabs: conversation.subtabs || [],
          subtabs_order: conversation.subtabsOrder || [],
          is_active_session: conversation.isActiveSession,
          active_objective: conversation.activeObjective,
          game_progress: conversation.gameProgress,
          is_active: conversation.isActive,
          is_pinned: conversation.isPinned,
          pinned_at: conversation.pinnedAt ? new Date(conversation.pinnedAt).toISOString() : null,
          is_game_hub: conversation.isGameHub,
        })
        .select('id')
        .single();

      if (error) {
        console.error('Error creating conversation:', error);
        return null;
      }

      return data.id;
    } catch (error) {
      console.error('Error creating conversation:', error);
      return null;
    }
  }

  async updateConversation(conversationId: string, updates: Partial<Conversation>): Promise<boolean> {
    try {
      const { error } = await supabase
        .from('conversations')
        .update({
          title: updates.title,
          messages: updates.messages,
          game_id: updates.gameId,
          game_title: updates.gameTitle,
          genre: updates.genre,
          subtabs: updates.subtabs,
          subtabs_order: updates.subtabsOrder,
          is_active_session: updates.isActiveSession,
          active_objective: updates.activeObjective,
          game_progress: updates.gameProgress,
          is_active: updates.isActive,
          is_pinned: updates.isPinned,
          pinned_at: updates.pinnedAt ? new Date(updates.pinnedAt).toISOString() : null,
          is_game_hub: updates.isGameHub,
          updated_at: new Date().toISOString(),
        })
        .eq('id', conversationId);

      if (error) {
        console.error('Error updating conversation:', error);
        return false;
      }

      return true;
    } catch (error) {
      console.error('Error updating conversation:', error);
      return false;
    }
  }

  async deleteConversation(conversationId: string): Promise<boolean> {
    try {
      const { error } = await supabase
        .from('conversations')
        .delete()
        .eq('id', conversationId);

      if (error) {
        console.error('Error deleting conversation:', error);
        return false;
      }

      return true;
    } catch (error) {
      console.error('Error deleting conversation:', error);
      return false;
    }
  }

  // Game operations
  async getGames(userId: string): Promise<Game[]> {
    try {
      // First get the user's internal ID from auth_user_id
      const { data: userData, error: userError } = await supabase
        .from('users')
        .select('id')
        .eq('auth_user_id', userId)
        .single();

      if (userError || !userData) {
        console.error('Error getting user ID:', userError);
        return [];
      }

      const { data, error } = await supabase
        .from('games')
        .select('*')
        .eq('user_id', userData.id)
        .order('created_at', { ascending: false });

      if (error) {
        console.error('Error getting games:', error);
        return [];
      }

      return data.map(game => ({
        id: game.id,
        title: game.title,
        description: game.notes,
        genre: game.genre,
        platform: game.platform,
        releaseDate: '',
        rating: game.rating,
        imageUrl: game.cover_url,
        metadata: game.metadata || {},
        createdAt: new Date(game.created_at).getTime(),
        updatedAt: new Date(game.updated_at).getTime(),
      }));
    } catch (error) {
      console.error('Error getting games:', error);
      return [];
    }
  }

  async createGame(userId: string, game: Omit<Game, 'id' | 'createdAt' | 'updatedAt'>): Promise<string | null> {
    try {
      // First get the user's internal ID from auth_user_id
      const { data: userData, error: userError } = await supabase
        .from('users')
        .select('id')
        .eq('auth_user_id', userId)
        .single();

      if (userError || !userData) {
        console.error('Error getting user ID:', userError);
        return null;
      }

      const { data, error } = await supabase
        .from('games')
        .insert({
          user_id: userData.id,
          title: game.title,
          notes: game.description,
          genre: game.genre,
          platform: game.platform,
          rating: game.rating,
          cover_url: game.imageUrl,
          metadata: game.metadata,
        })
        .select('id')
        .single();

      if (error) {
        console.error('Error creating game:', error);
        return null;
      }

      return data.id;
    } catch (error) {
      console.error('Error creating game:', error);
      return null;
    }
  }

  // Trial operations
  async getTrialStatus(userId: string): Promise<TrialStatus | null> {
    try {
      const { data, error } = await supabase
        .from('users')
        .select('has_used_trial, trial_started_at, trial_expires_at')
        .eq('auth_user_id', userId)
        .single();

      if (error) {
        console.error('Error getting trial status:', error);
        return null;
      }

      const now = Date.now();
      const trialExpiresAt = data.trial_expires_at ? new Date(data.trial_expires_at).getTime() : null;
      const isActive = trialExpiresAt ? now < trialExpiresAt : false;
      const daysRemaining = trialExpiresAt ? Math.ceil((trialExpiresAt - now) / (1000 * 60 * 60 * 24)) : 0;

      return {
        isEligible: !data.has_used_trial,
        hasUsed: data.has_used_trial,
        isActive,
        expiresAt: trialExpiresAt || undefined,
        daysRemaining: isActive ? daysRemaining : undefined,
      };
    } catch (error) {
      console.error('Error getting trial status:', error);
      return null;
    }
  }

  async startTrial(userId: string): Promise<boolean> {
    try {
      const trialExpiresAt = new Date();
      trialExpiresAt.setDate(trialExpiresAt.getDate() + 14);

      const { error } = await supabase
        .from('users')
        .update({
          has_used_trial: true,
          trial_started_at: new Date().toISOString(),
          trial_expires_at: trialExpiresAt.toISOString(),
          tier: USER_TIERS.PRO,
          text_limit: TIER_LIMITS[USER_TIERS.PRO].text,
          image_limit: TIER_LIMITS[USER_TIERS.PRO].image,
          updated_at: new Date().toISOString(),
        })
        .eq('auth_user_id', userId);

      if (error) {
        console.error('Error starting trial:', error);
        return false;
      }

      return true;
    } catch (error) {
      console.error('Error starting trial:', error);
      return false;
    }
  }

  // Usage operations
  async canMakeRequest(userId: string, requestType: 'text' | 'image'): Promise<boolean> {
    try {
      const { data, error } = await supabase
        .from('users')
        .select('text_count, image_count, text_limit, image_limit, tier')
        .eq('auth_user_id', userId)
        .single();

      if (error) {
        console.error('Error checking usage:', error);
        return false;
      }

      if (requestType === 'text') {
        return data.text_count < data.text_limit;
      } else {
        return data.image_count < data.image_limit;
      }
    } catch (error) {
      console.error('Error checking usage:', error);
      return false;
    }
  }

  async incrementUsage(userId: string, requestType: 'text' | 'image'): Promise<boolean> {
    try {
      // First, get the current usage data
      const { data: userData, error: fetchError } = await supabase
        .from('users')
        .select('usage_data')
        .eq('auth_user_id', userId)
        .single();

      if (fetchError) {
        console.error('Error fetching user data:', fetchError);
        return false;
      }

      // Get current usage counts
      const currentUsage = userData?.usage_data || {
        textCount: 0,
        imageCount: 0,
        totalRequests: 0
      };

      // Increment the appropriate counter
      const updatedUsage = {
        ...currentUsage,
        [requestType === 'text' ? 'textCount' : 'imageCount']: (currentUsage[requestType === 'text' ? 'textCount' : 'imageCount'] || 0) + 1,
        totalRequests: (currentUsage.totalRequests || 0) + 1
      };

      // Update the usage_data JSONB field
      const { error } = await supabase
        .from('users')
        .update({
          usage_data: updatedUsage,
          updated_at: new Date().toISOString(),
        })
        .eq('auth_user_id', userId);

      if (error) {
        console.error('Error incrementing usage:', error);
        return false;
      }

      return true;
    } catch (error) {
      console.error('Error incrementing usage:', error);
      return false;
    }
  }

  async resetUsage(userId: string): Promise<boolean> {
    try {
      // First, get the current usage data to preserve limits
      const { data: userData, error: fetchError } = await supabase
        .from('users')
        .select('usage_data')
        .eq('auth_user_id', userId)
        .single();

      if (fetchError) {
        console.error('Error fetching user data:', fetchError);
        return false;
      }

      // Reset counters but preserve limits
      const currentUsage = userData?.usage_data || {};
      const resetUsage = {
        ...currentUsage,
        textCount: 0,
        imageCount: 0,
        totalRequests: 0,
        lastReset: Date.now()
      };

      const { error } = await supabase
        .from('users')
        .update({
          usage_data: resetUsage,
          updated_at: new Date().toISOString(),
        })
        .eq('auth_user_id', userId);

      if (error) {
        console.error('Error resetting usage:', error);
        return false;
      }

      return true;
    } catch (error) {
      console.error('Error resetting usage:', error);
      return false;
    }
  }

  // âœ… Query-based usage tracking (replaces message-based limits)
  async recordQuery(authUserId: string, queryType: 'text' | 'image'): Promise<boolean> {
    try {
      console.log(`ðŸ“Š [SupabaseService] Recording ${queryType} query for user:`, authUserId);
      
      const { data, error } = await supabase.rpc('increment_user_usage', {
        p_auth_user_id: authUserId,
        p_query_type: queryType,
        p_increment: 1
      });

      if (error) {
        console.error('Error recording query:', error);
        return false;
      }

      console.log(`âœ… [SupabaseService] Successfully recorded ${queryType} query`);
      return data === true;
    } catch (error) {
      console.error('Error recording query:', error);
      return false;
    }
  }

  async getQueryUsage(authUserId: string): Promise<{ textCount: number; imageCount: number; textLimit: number; imageLimit: number; lastReset: Date } | null> {
    try {
      const { data, error } = await supabase
        .from('users')
        .select('text_count, image_count, text_limit, image_limit, last_reset')
        .eq('auth_user_id', authUserId)
        .single();

      if (error) {
        console.error('Error getting query usage:', error);
        return null;
      }

      return {
        textCount: data.text_count || 0,
        imageCount: data.image_count || 0,
        textLimit: data.text_limit || 55,
        imageLimit: data.image_limit || 25,
        lastReset: new Date(data.last_reset || Date.now())
      };
    } catch (error) {
      console.error('Error getting query usage:', error);
      return null;
    }
  }
}

export const supabaseService = SupabaseService.getInstance();


```n

## src\services\tabManagementService.ts

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\services\tabManagementService.ts.Extension.TrimStart('.'))

import { Conversation, SubTab } from '../types';

/**
 * Tab Management Service (Command Centre)
 * 
 * Handles parsing and execution of @ commands for managing subtabs.
 * Based on the old build's Command Centre feature.
 * 
 * Command Formats:
 * - @<tab_name> <instruction>: Update tab with new content
 * - @<tab_name> \modify <instruction>: Modify/rename tab
 * - @<tab_name> \delete: Delete tab
 */

export interface TabCommand {
  type: 'update' | 'modify' | 'delete';
  tabId: string;
  tabName: string;
  instruction: string;
}

class TabManagementService {
  /**
   * Check if message contains a tab management command
   */
  public hasTabCommand(message: string): boolean {
    // Check for @ followed by word characters
    return /^@\w+/.test(message.trim());
  }

  /**
   * Parse tab command from user message
   * Returns null if no valid command found
   */
  public parseTabCommand(message: string, conversation: Conversation): TabCommand | null {
    const trimmedMessage = message.trim();
    
    if (!this.hasTabCommand(trimmedMessage)) {
      return null;
    }

    // Extract command parts: @<tab_name> [\\modify|\\delete] [instruction]
    const commandMatch = trimmedMessage.match(/^@(\w+)\s*(\\modify|\\delete)?\s*(.*)$/);
    
    if (!commandMatch) {
      return null;
    }

    const [, tabName, modifier, instruction] = commandMatch;
    
    // Find matching subtab (case-insensitive, fuzzy match)
    const matchingTab = this.findMatchingTab(tabName, conversation.subtabs || []);
    
    if (!matchingTab) {
      console.warn(`Tab "${tabName}" not found in conversation`);
      return null;
    }

    // Determine command type
    let commandType: 'update' | 'modify' | 'delete';
    if (modifier === '\\delete') {
      commandType = 'delete';
    } else if (modifier === '\\modify') {
      commandType = 'modify';
    } else {
      commandType = 'update';
    }

    return {
      type: commandType,
      tabId: matchingTab.id,
      tabName: matchingTab.title,
      instruction: instruction.trim()
    };
  }

  /**
   * Find matching subtab by name (fuzzy match)
   * Handles variations like "story_so_far", "story so far", "story", etc.
   */
  private findMatchingTab(searchName: string, subtabs: SubTab[]): SubTab | null {
    const normalizedSearch = this.normalizeTabName(searchName);
    
    // First try exact match
    let match = subtabs.find(tab => 
      this.normalizeTabName(tab.id) === normalizedSearch ||
      this.normalizeTabName(tab.title) === normalizedSearch
    );
    
    if (match) {
      return match;
    }
    
    // Then try partial match (search term is contained in tab name)
    match = subtabs.find(tab => 
      this.normalizeTabName(tab.id).includes(normalizedSearch) ||
      this.normalizeTabName(tab.title).includes(normalizedSearch)
    );
    
    if (match) {
      return match;
    }
    
    // Finally try reversed partial match (tab name is contained in search term)
    match = subtabs.find(tab => 
      normalizedSearch.includes(this.normalizeTabName(tab.id)) ||
      normalizedSearch.includes(this.normalizeTabName(tab.title))
    );
    
    return match || null;
  }

  /**
   * Normalize tab name for comparison
   */
  private normalizeTabName(name: string): string {
    return name
      .toLowerCase()
      .replace(/[_\s-]+/g, '')  // Remove separators
      .replace(/[^a-z0-9]/g, ''); // Remove special chars
  }

  /**
   * Get available tab names for autocomplete
   */
  public getAvailableTabNames(conversation: Conversation): string[] {
    if (!conversation.subtabs || conversation.subtabs.length === 0) {
      return [];
    }

    return conversation.subtabs.map(tab => ({
      id: tab.id,
      title: tab.title,
      // Create multiple search variations
      variations: [
        tab.id,
        tab.title,
        tab.id.replace(/_/g, ' '),
        tab.title.toLowerCase()
      ]
    }))
    // Return primary names (tab IDs for consistency)
    .map(tab => tab.id);
  }

  /**
   * Format command for display in autocomplete
   */
  public formatTabSuggestion(tabId: string, _tabTitle: string): string {
    return `@${tabId}`;
  }

  /**
   * Get command help text
   */
  public getCommandHelp(): string {
    return `
**Tab Commands:**
â€¢ @<tab> <text> - Update tab with new info
â€¢ @<tab> \\modify <text> - Modify/rename tab
â€¢ @<tab> \\delete - Delete tab

Example: @story_so_far The player defeated the first boss
    `.trim();
  }

  /**
   * Validate command before sending to AI
   */
  public validateCommand(command: TabCommand): { valid: boolean; error?: string } {
    switch (command.type) {
      case 'update':
        if (!command.instruction) {
          return { valid: false, error: 'Update command requires content. Example: @story_so_far The player...' };
        }
        break;
      
      case 'modify':
        if (!command.instruction) {
          return { valid: false, error: 'Modify command requires instructions. Example: @tips \\modify Change to combat strategies' };
        }
        break;
      
      case 'delete':
        // Delete doesn't need instruction
        break;
    }

    return { valid: true };
  }

  /**
   * Get user-friendly description of command
   */
  public describeCommand(command: TabCommand): string {
    switch (command.type) {
      case 'update':
        return `Updating "${command.tabName}" with: ${command.instruction}`;
      case 'modify':
        return `Modifying "${command.tabName}": ${command.instruction}`;
      case 'delete':
        return `Deleting "${command.tabName}"`;
    }
  }
}

export const tabManagementService = new TabManagementService();



```n

## src\services\toastIntegration.ts

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\services\toastIntegration.ts.Extension.TrimStart('.'))

/**
 * Toast Integration Examples
 * Replace console.error/warn with user-friendly toast notifications
 * 
 * PRIORITY ORDER:
 * 1. Auth errors (user-facing, critical)
 * 2. Conversation/message errors (user-facing, critical)
 * 3. AI errors (user-facing, important)
 * 4. Cache errors (background, low priority)
 */

import { toastService } from './toastService';

// ===========================================
// AUTH SERVICE TOAST EXAMPLES
// ===========================================

export const authToasts = {
  /**
   * Show error when auth initialization fails
   */
  initError: (error: Error) => {
    console.error('Auth initialization error:', error);
    toastService.error(
      'Failed to initialize authentication. Please refresh the page.',
      {
        action: {
          label: 'Refresh',
          onClick: () => window.location.reload()
        }
      }
    );
  },

  /**
   * Show error when user creation fails
   */
  userCreationError: (error: Error) => {
    console.error('ðŸ” [AuthService] Error creating user record:', error);
    toastService.error(
      'Failed to create your account. Please try again.',
      {
        action: {
          label: 'Retry',
          onClick: async () => {
            // Retry logic would go here
            toastService.info('Retrying...');
          }
        }
      }
    );
  },

  /**
   * Show error when OAuth fails
   */
  oauthError: (provider: string, error: Error) => {
    console.error(`ðŸ” [AuthService] ${provider} OAuth error:`, error);
    toastService.error(
      `Failed to sign in with ${provider}. Please try again.`,
      {
        action: {
          label: 'Try Again',
          onClick: () => {
            // Retry OAuth flow
          }
        }
      }
    );
  },

  /**
   * Show success when login completes
   */
  loginSuccess: () => {
    toastService.success('Welcome back! Successfully signed in.');
  },

  /**
   * Show success when logout completes
   */
  logoutSuccess: () => {
    toastService.success('Successfully signed out.');
  }
};

// ===========================================
// CONVERSATION SERVICE TOAST EXAMPLES
// ===========================================

export const conversationToasts = {
  /**
   * Show error when loading conversations fails
   */
  loadError: (error: Error) => {
    console.error('ðŸ” [ConversationService] Failed to load from Supabase:', error);
    toastService.error(
      'Failed to load your conversations. Using local data.',
      {
        duration: 5000
      }
    );
  },

  /**
   * Show error when saving conversation fails
   */
  saveError: (conversationId: string, error: Error) => {
    console.error(`Failed to save conversation ${conversationId}:`, error);
    toastService.error(
      'Failed to save conversation. Your changes may not be synced.',
      {
        action: {
          label: 'Retry',
          onClick: async () => {
            // Retry save logic
            toastService.info('Retrying save...');
          }
        }
      }
    );
  },

  /**
   * Show error when creating conversation fails
   */
  createError: (error: Error) => {
    console.error('ðŸ” [ConversationService] Failed to create in Supabase:', error);
    toastService.error(
      'Failed to create conversation. Please try again.',
      {
        action: {
          label: 'Retry',
          onClick: () => {
            // Retry creation
          }
        }
      }
    );
  },

  /**
   * Show warning when trying to delete Game Hub
   */
  cannotDeleteGameHub: () => {
    console.warn('ðŸ” [ConversationService] Cannot delete Game Hub conversation');
    toastService.warning(
      'The Game Hub conversation cannot be deleted.'
    );
  },

  /**
   * Show success when conversation is created
   */
  createSuccess: () => {
    toastService.success('New conversation created!');
  },

  /**
   * Show success when conversation is deleted
   */
  deleteSuccess: () => {
    toastService.success('Conversation deleted successfully.');
  }
};

// ===========================================
// AI SERVICE TOAST EXAMPLES
// ===========================================

export const aiToasts = {
  /**
   * Show error when AI response fails
   */
  responseError: (error: Error) => {
    console.error('âŒ [AIService] Failed to get response:', error);
    
    // Check for specific error types
    if (error.message?.includes('rate limit')) {
      toastService.warning(
        'Too many requests. Please wait a moment and try again.',
        { duration: 6000 }
      );
    } else if (error.message?.includes('network')) {
      toastService.error(
        'Network error. Please check your connection and try again.',
        {
          action: {
            label: 'Retry',
            onClick: () => {
              // Retry logic
            }
          }
        }
      );
    } else {
      toastService.error(
        'Failed to get AI response. Please try again.',
        {
          action: {
            label: 'Retry',
            onClick: () => {
              // Retry logic
            }
          }
        }
      );
    }
  },

  /**
   * Show warning when reaching query limit
   */
  queryLimitReached: (queryType: 'text' | 'image') => {
    toastService.warning(
      `You've reached your ${queryType} query limit for this month.`,
      {
        action: {
          label: 'Upgrade',
          onClick: () => {
            // Navigate to upgrade page
            window.location.hash = '#/upgrade';
          }
        },
        duration: 8000
      }
    );
  }
};

// ===========================================
// CACHE SERVICE (Background errors - less critical)
// ===========================================

export const cacheToasts = {
  /**
   * Only show cache errors if they affect user experience
   * Most cache errors should be silent (logged only)
   */
  criticalError: (error: Error) => {
    console.error('[CacheService] Critical error:', error);
    toastService.warning(
      'Some features may be slower than usual.',
      { duration: 4000 }
    );
  }
};

// ===========================================
// USAGE TRACKING TOASTS
// ===========================================

export const usageToasts = {
  /**
   * Show warning when approaching limit
   */
  approachingLimit: (percentage: number, queryType: 'text' | 'image') => {
    toastService.warning(
      `You've used ${percentage}% of your ${queryType} queries this month.`,
      {
        action: {
          label: 'View Usage',
          onClick: () => {
            // Navigate to usage page
          }
        },
        duration: 6000
      }
    );
  },

  /**
   * Show info about trial
   */
  trialInfo: (daysLeft: number) => {
    toastService.info(
      `You have ${daysLeft} days left in your trial period.`,
      {
        action: {
          label: 'Learn More',
          onClick: () => {
            // Navigate to trial info
          }
        },
        duration: 7000
      }
    );
  }
};

// ===========================================
// HELPER FUNCTION
// ===========================================

/**
 * Wrap async operations with automatic toast feedback
 * Usage: await withToast(asyncOperation(), { loading: '...', success: '...' })
 */
export async function withToast<T>(
  promise: Promise<T>,
  messages: {
    loading?: string;
    success?: string | ((data: T) => string);
    error?: string | ((error: Error) => string);
  }
): Promise<T> {
  return toastService.promise(promise, {
    loading: messages.loading || 'Loading...',
    success: messages.success || 'Operation completed successfully',
    error: messages.error || 'Operation failed. Please try again.'
  });
}


```n

## src\services\toastService.ts

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\services\toastService.ts.Extension.TrimStart('.'))

/**
 * Toast Notification Service
 * Provides user-friendly feedback for operations throughout the app
 * Replaces silent console.error calls with visible notifications
 */

export type ToastType = 'success' | 'error' | 'warning' | 'info';

export interface ToastAction {
  label: string;
  onClick: () => void | Promise<void>;
}

export interface Toast {
  id: string;
  message: string;
  type: ToastType;
  duration?: number;
  action?: ToastAction;
  dismissible?: boolean;
}

export interface ToastOptions {
  duration?: number;
  action?: ToastAction;
  dismissible?: boolean;
}

type ToastListener = (toasts: Toast[]) => void;

class ToastService {
  private toasts: Toast[] = [];
  private listeners: Set<ToastListener> = new Set();
  private maxToasts = 5; // Maximum visible toasts

  /**
   * Subscribe to toast updates
   * @returns Unsubscribe function
   */
  subscribe(listener: ToastListener): () => void {
    this.listeners.add(listener);
    // Immediately notify with current toasts
    listener(this.toasts);
    
    return () => {
      this.listeners.delete(listener);
    };
  }

  /**
   * Notify all listeners of toast changes
   */
  private notify(): void {
    this.listeners.forEach(listener => listener([...this.toasts]));
  }

  /**
   * Show a toast notification
   * @param message - Message to display
   * @param type - Toast type (success, error, warning, info)
   * @param options - Additional options
   * @returns Toast ID for manual dismissal
   */
  show(
    message: string,
    type: ToastType = 'info',
    options: ToastOptions = {}
  ): string {
    const id = `toast-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
    
    const toast: Toast = {
      id,
      message,
      type,
      duration: options.duration ?? this.getDefaultDuration(type),
      action: options.action,
      dismissible: options.dismissible ?? true,
    };

    // Add to beginning of array (newest first)
    this.toasts.unshift(toast);

    // Limit number of visible toasts
    if (this.toasts.length > this.maxToasts) {
      this.toasts = this.toasts.slice(0, this.maxToasts);
    }

    this.notify();

    // Auto-dismiss after duration
    if (toast.duration && toast.duration > 0) {
      setTimeout(() => this.dismiss(id), toast.duration);
    }

    return id;
  }

  /**
   * Show success toast
   */
  success(message: string, options?: ToastOptions): string {
    return this.show(message, 'success', {
      duration: 3000,
      ...options,
    });
  }

  /**
   * Show error toast with optional retry action
   */
  error(message: string, options?: ToastOptions): string {
    return this.show(message, 'error', {
      duration: 7000,
      dismissible: true,
      ...options,
    });
  }

  /**
   * Show warning toast
   */
  warning(message: string, options?: ToastOptions): string {
    return this.show(message, 'warning', {
      duration: 5000,
      ...options,
    });
  }

  /**
   * Show info toast
   */
  info(message: string, options?: ToastOptions): string {
    return this.show(message, 'info', {
      duration: 4000,
      ...options,
    });
  }

  /**
   * Dismiss a specific toast
   */
  dismiss(id: string): void {
    const index = this.toasts.findIndex(t => t.id === id);
    if (index !== -1) {
      this.toasts.splice(index, 1);
      this.notify();
    }
  }

  /**
   * Dismiss all toasts
   */
  dismissAll(): void {
    this.toasts = [];
    this.notify();
  }

  /**
   * Get default duration based on toast type
   */
  private getDefaultDuration(type: ToastType): number {
    switch (type) {
      case 'success':
        return 3000;
      case 'error':
        return 7000;
      case 'warning':
        return 5000;
      case 'info':
        return 4000;
      default:
        return 4000;
    }
  }

  /**
   * Show loading toast that stays until dismissed
   * Returns dismiss function
   */
  loading(message: string): () => void {
    const id = this.show(message, 'info', {
      duration: 0, // Don't auto-dismiss
      dismissible: false,
    });

    return () => this.dismiss(id);
  }

  /**
   * Show promise-based toast
   * Shows loading, then success or error based on promise result
   */
  async promise<T>(
    promise: Promise<T>,
    messages: {
      loading: string;
      success: string | ((data: T) => string);
      error: string | ((error: Error) => string);
    }
  ): Promise<T> {
    const dismiss = this.loading(messages.loading);

    try {
      const result = await promise;
      dismiss();
      
      const successMessage = typeof messages.success === 'function'
        ? messages.success(result)
        : messages.success;
      
      this.success(successMessage);
      return result;
    } catch (error) {
      dismiss();
      
      const errorMessage = typeof messages.error === 'function'
        ? messages.error(error as Error)
        : messages.error;
      
      this.error(errorMessage);
      throw error;
    }
  }
}

// Export singleton instance
export const toastService = new ToastService();


```n

## src\services\ttsService.ts

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\services\ttsService.ts.Extension.TrimStart('.'))

let synth: SpeechSynthesis;
let voices: SpeechSynthesisVoice[] = [];
let isInitialized = false;

const SPEECH_RATE_KEY = 'otakonSpeechRate';

// Function to populate voices, returns a promise that resolves when voices are loaded.
const populateVoiceList = (): Promise<void> => {
    return new Promise((resolve, reject) => {
        if (!synth) {
            return reject(new Error("Speech synthesis not initialized."));
        }
        voices = synth.getVoices();
        if (voices.length > 0) {
            resolve();
            return;
        }
        synth.onvoiceschanged = () => {
            voices = synth.getVoices();
            resolve();
        };
        // Fallback timeout in case onvoiceschanged never fires
        setTimeout(() => {
            if (voices.length === 0) {
                console.warn("TTS voices did not load within a reasonable time.");
                voices = synth.getVoices(); // Try one last time
            }
            resolve();
        }, 1000);
    });
};

const cancel = () => {
    if (synth && synth.speaking) {
        synth.cancel();
    }
    if ('mediaSession' in navigator && navigator.mediaSession.playbackState !== 'none') {
        navigator.mediaSession.playbackState = 'paused';
    }
};

const cancelAndDisableHandsFree = () => {
    cancel();
    window.dispatchEvent(new CustomEvent('otakon:disableHandsFree'));
};

const setupMediaSession = () => {
    if ('mediaSession' in navigator) {
        navigator.mediaSession.setActionHandler('play', () => { /* Let audio play naturally */ });
        navigator.mediaSession.setActionHandler('pause', cancelAndDisableHandsFree);
        navigator.mediaSession.setActionHandler('stop', cancelAndDisableHandsFree);
    }
};

const init = async () => {
    if (typeof window !== 'undefined' && 'speechSynthesis' in window) {
        if (isInitialized) {
          return;
        }
        isInitialized = true;
        synth = window.speechSynthesis;
        await populateVoiceList();
        setupMediaSession();
        // On some browsers (like Chrome on desktop), getVoices() is empty until speak() is called.
        // This empty utterance is a workaround to trigger the onvoiceschanged event.
        if (synth.getVoices().length === 0) {
            synth.speak(new SpeechSynthesisUtterance(''));
        }
    } else {
        console.warn("Speech Synthesis not supported in this browser.");
    }
};

const getAvailableVoices = (): SpeechSynthesisVoice[] => {
    return voices.filter(v => v.lang.startsWith('en-'));
};

const speak = async (text: string): Promise<void> => {
    return new Promise((resolve, reject) => {
        try {
            if (!synth) {
                console.error("Text-to-Speech is not available on this browser.");
                return reject(new Error("Text-to-Speech is not available on this browser."));
            }
            
            if (!text.trim()) {
                return resolve();
            }

            cancel(); // Cancel any ongoing speech

            const utterance = new SpeechSynthesisUtterance(text);
            const storedRate = localStorage.getItem(SPEECH_RATE_KEY);
            utterance.rate = storedRate ? parseFloat(storedRate) : 0.94; // Use stored rate or default to 94%
            
            const preferredVoiceURI = localStorage.getItem('otakonPreferredVoiceURI');
            
            const availableVoices = getAvailableVoices();
            let voiceToUse: SpeechSynthesisVoice | undefined;

            if (preferredVoiceURI) {
                voiceToUse = availableVoices.find(v => v.voiceURI === preferredVoiceURI);
            }
            
            // If no preferred voice is set or the saved one is no longer available
            if (!voiceToUse && availableVoices.length > 0) {
                // Prioritize voices with "Female" in the name as a default.
                const femaleVoice = availableVoices.find(v => v.name.toLowerCase().includes('female'));
                if (femaleVoice) {
                    voiceToUse = femaleVoice;
                } else {
                    // As a fallback, use the first available voice.
                    voiceToUse = availableVoices[0];
                }
            }

            if (voiceToUse) {
                utterance.voice = voiceToUse;
            }

            utterance.onstart = () => {
                if ('mediaSession' in navigator) {
                    navigator.mediaSession.playbackState = 'playing';
                    navigator.mediaSession.metadata = new MediaMetadata({
                        title: 'Otakon Voice Response',
                        artist: 'Your AI Gaming Companion',
                        album: 'Otakon',
                        artwork: [{ src: '/icon.svg', sizes: 'any', type: 'image/svg+xml' }]
                    });
                }
            };

            utterance.onend = () => {
                cancel();
                resolve();
            };
            
            utterance.onerror = (e) => {
                console.error("SpeechSynthesis Utterance Error", e);
                cancel();
                reject(e);
            };

            synth.speak(utterance);
        } catch (error) {
            console.error("TTS Error:", error);
            reject(error);
        }
    });
};

export const ttsService = {
    init,
    getAvailableVoices,
    speak,
    cancel,
};




```n

## src\services\userService.ts

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\services\userService.ts.Extension.TrimStart('.'))

import { StorageService } from './storageService';
import { User, Usage, UserTier } from '../types';
import { STORAGE_KEYS, TIER_LIMITS, USER_TIERS } from '../constants';
import { supabase } from '../lib/supabase';

export class UserService {
  static getCurrentUser(): User | null {
    return StorageService.get(STORAGE_KEYS.USER, null);
  }

  static setCurrentUser(user: User): void {
    StorageService.set(STORAGE_KEYS.USER, user);
  }

  static createUser(email: string, tier: UserTier = USER_TIERS.FREE): User {
    const now = Date.now();
    const limits = TIER_LIMITS[tier];
    
    return {
      id: `user_${now}`,
      authUserId: `user_${now}`,
      email,
      tier,
      hasProfileSetup: false,
      hasSeenSplashScreens: false,
      hasSeenHowToUse: false,
      hasSeenFeaturesConnected: false,
      hasSeenProFeatures: false,
      pcConnected: false,
      pcConnectionSkipped: false,
      onboardingCompleted: false,
      hasWelcomeMessage: false,
      isNewUser: true,
      hasUsedTrial: false,
      lastActivity: now,
      preferences: {},
      // Add these required fields from User interface
      textCount: 0,
      imageCount: 0,
      textLimit: limits.text,
      imageLimit: limits.image,
      totalRequests: 0,
      lastReset: now,
      usage: {
        textCount: 0,
        imageCount: 0,
        textLimit: limits.text,
        imageLimit: limits.image,
        totalRequests: 0,
        lastReset: now,
        tier,
      },
      appState: {},
      profileData: {},
      onboardingData: {},
      behaviorData: {},
      feedbackData: {},
      usageData: {},
      createdAt: now,
      updatedAt: now,
    };
  }

  static updateUser(updates: Partial<User>): void {
    const currentUser = this.getCurrentUser();
    if (!currentUser) {
      return;
    }

    const updatedUser = {
      ...currentUser,
      ...updates,
      updatedAt: Date.now(),
    };

    this.setCurrentUser(updatedUser);
  }

  static updateUsage(usage: Partial<Usage>): void {
    const currentUser = this.getCurrentUser();
    if (!currentUser) {
      return;
    }

    this.updateUser({
      usage: {
        ...currentUser.usage,
        ...usage,
      },
    });
  }

  static resetUsage(): void {
    const currentUser = this.getCurrentUser();
    if (!currentUser) {
      return;
    }

    const limits = TIER_LIMITS[currentUser.tier];
    this.updateUsage({
      textCount: 0,
      imageCount: 0,
      totalRequests: 0,
      lastReset: Date.now(),
      textLimit: limits.text,
      imageLimit: limits.image,
    });
  }

  static canMakeRequest(type: 'text' | 'image'): boolean {
    const currentUser = this.getCurrentUser();
    if (!currentUser) {
      return false;
    }

    const { usage } = currentUser;
    if (type === 'text') {
      return usage.textCount < usage.textLimit;
    } else {
      return usage.imageCount < usage.imageLimit;
    }
  }

  static incrementUsage(type: 'text' | 'image'): void {
    const currentUser = this.getCurrentUser();
    if (!currentUser) {
      return;
    }

    const updates: Partial<Usage> = {
      totalRequests: currentUser.usage.totalRequests + 1,
    };

    if (type === 'text') {
      updates.textCount = currentUser.usage.textCount + 1;
    } else {
      updates.imageCount = currentUser.usage.imageCount + 1;
    }

    this.updateUsage(updates);
  }

  static logout(): void {
    StorageService.remove(STORAGE_KEYS.USER);
  }

  /**
   * âœ… FIX 8: Get current user with Supabase sync
   * Falls back to localStorage if Supabase unavailable
   */
  static async getCurrentUserAsync(): Promise<User | null> {
    try {
      // 1. Check localStorage first (fast path)
      const cached = StorageService.get<User | null>(STORAGE_KEYS.USER, null);
      
      // 2. Get current auth session
      const { data: { user: authUser }, error: authError } = await supabase.auth.getUser();
      if (authError || !authUser) {
        return cached;
      }
      
      // 3. Fetch latest from Supabase (source of truth)
      const { data: dbUser, error: dbError } = await supabase
        .from('users')
        .select('*')
        .eq('auth_user_id', authUser.id)
        .single();
      
      if (dbError || !dbUser) {
        console.error('Failed to fetch user from Supabase:', dbError);
        return cached; // Fallback to cached
      }
      
      // 4. Map database user to User type
      const user: User = {
        id: dbUser.id,
        authUserId: dbUser.auth_user_id,
        email: dbUser.email,
        tier: dbUser.tier as UserTier,
        
        // Query limits from database
        textCount: dbUser.text_count || 0,
        imageCount: dbUser.image_count || 0,
        textLimit: dbUser.text_limit,
        imageLimit: dbUser.image_limit,
        totalRequests: dbUser.total_requests || 0,
        lastReset: new Date(dbUser.last_reset).getTime(),
        
        // Onboarding flags
        hasProfileSetup: dbUser.has_profile_setup || false,
        hasSeenSplashScreens: dbUser.has_seen_splash_screens || false,
        hasSeenHowToUse: dbUser.has_seen_how_to_use || false,
        hasSeenFeaturesConnected: dbUser.has_seen_features_connected || false,
        hasSeenProFeatures: dbUser.has_seen_pro_features || false,
        pcConnected: dbUser.pc_connected || false,
        pcConnectionSkipped: dbUser.pc_connection_skipped || false,
        onboardingCompleted: dbUser.onboarding_completed || false,
        hasWelcomeMessage: dbUser.has_welcome_message || false,
        isNewUser: dbUser.is_new_user || false,
        hasUsedTrial: dbUser.has_used_trial || false,
        
        // Other fields
        lastActivity: new Date(dbUser.updated_at).getTime(),
        preferences: dbUser.preferences || {},
        
        // Legacy nested usage (for backward compatibility)
        usage: {
          textCount: dbUser.text_count || 0,
          imageCount: dbUser.image_count || 0,
          textLimit: dbUser.text_limit,
          imageLimit: dbUser.image_limit,
          totalRequests: dbUser.total_requests || 0,
          lastReset: new Date(dbUser.last_reset).getTime(),
          tier: dbUser.tier as UserTier,
        },
        
        appState: dbUser.app_state || {},
        profileData: dbUser.profile_data || {},
        onboardingData: dbUser.onboarding_data || {},
        behaviorData: dbUser.behavior_data || {},
        feedbackData: dbUser.feedback_data || {},
        usageData: dbUser.usage_data || {},
        
        createdAt: new Date(dbUser.created_at).getTime(),
        updatedAt: new Date(dbUser.updated_at).getTime(),
      };
      
      // 5. Update cache
      StorageService.set(STORAGE_KEYS.USER, user);
      
      return user;
    } catch (error) {
      console.error('Error in getCurrentUserAsync:', error);
      // Fallback to cached user
      return StorageService.get<User | null>(STORAGE_KEYS.USER, null);
    }
  }

  /**
   * âœ… FIX 8: Set current user with Supabase sync
   * Updates localStorage immediately (optimistic update)
   * Syncs to Supabase in background
   */
  static async setCurrentUserAsync(user: User): Promise<void> {
    try {
      // 1. Update localStorage immediately (optimistic update)
      StorageService.set(STORAGE_KEYS.USER, user);
      
      // 2. Sync to Supabase
      const { error } = await supabase
        .from('users')
        .update({
          tier: user.tier,
          text_count: user.textCount,
          image_count: user.imageCount,
          text_limit: user.textLimit,
          image_limit: user.imageLimit,
          total_requests: user.totalRequests,
          last_reset: new Date(user.lastReset).toISOString(),
          
          // Onboarding flags
          has_profile_setup: user.hasProfileSetup,
          has_seen_splash_screens: user.hasSeenSplashScreens,
          has_seen_how_to_use: user.hasSeenHowToUse,
          has_seen_features_connected: user.hasSeenFeaturesConnected,
          has_seen_pro_features: user.hasSeenProFeatures,
          pc_connected: user.pcConnected,
          pc_connection_skipped: user.pcConnectionSkipped,
          onboarding_completed: user.onboardingCompleted,
          has_welcome_message: user.hasWelcomeMessage,
          has_used_trial: user.hasUsedTrial,
          
          // Data objects
          preferences: user.preferences,
          profile_data: user.profileData,
          app_state: user.appState,
          onboarding_data: user.onboardingData,
          behavior_data: user.behaviorData,
          feedback_data: user.feedbackData,
          usage_data: user.usageData,
          
          updated_at: new Date().toISOString(),
        })
        .eq('auth_user_id', user.authUserId);
      
      if (error) {
        console.error('Failed to sync user to Supabase:', error);
        // Don't throw - optimistic update already done
        // User will sync on next getCurrentUserAsync()
      }
    } catch (error) {
      console.error('Error in setCurrentUserAsync:', error);
      // Don't throw - localStorage update succeeded
    }
  }

  /**
   * âœ… FIX 8: Update usage with Supabase sync
   */
  static async updateUsageAsync(usage: Partial<Usage>): Promise<void> {
    const currentUser = await this.getCurrentUserAsync();
    if (!currentUser) {
      return;
    }

    const updatedUser = {
      ...currentUser,
      usage: {
        ...currentUser.usage,
        ...usage,
      },
      // Also update top-level fields
      textCount: usage.textCount ?? currentUser.textCount,
      imageCount: usage.imageCount ?? currentUser.imageCount,
      totalRequests: usage.totalRequests ?? currentUser.totalRequests,
      lastReset: usage.lastReset ?? currentUser.lastReset,
      updatedAt: Date.now(),
    };

    await this.setCurrentUserAsync(updatedUser);
  }
}




```n

## src\services\waitlistService.ts

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\services\waitlistService.ts.Extension.TrimStart('.'))

import { supabase } from '../lib/supabase';

export interface WaitlistEntry {
  id?: string;
  email: string;
  created_at?: string;
  source?: string;
  status?: 'pending' | 'approved' | 'rejected';
}

export class WaitlistService {
  static async addToWaitlist(email: string, source: string = 'landing_page'): Promise<{ success: boolean; error?: string; alreadyExists?: boolean }> {
    try {
      console.log('Adding to waitlist using direct table operations');
      
      // Try to insert directly first - this will fail if email already exists
      const { data: insertData, error: insertError } = await supabase
        .from('waitlist')
        .insert({
          email,
          source,
          status: 'pending'
        })
        .select();

      if (insertError) {
        console.error('Error adding to waitlist:', insertError);
        console.error('Insert error details:', {
          message: insertError.message,
          code: insertError.code,
          details: insertError.details,
          hint: insertError.hint
        });
        
        // Check if it's a duplicate key error (email already exists)
        if (insertError.code === '23505') {
          return { 
            success: true, 
            alreadyExists: true,
            error: 'You\'re already on our waitlist! We\'ll email you when access is ready.'
          };
        }
        
        // For other errors, try to check if email exists first
        const { data: existing, error: checkError } = await supabase
          .from('waitlist')
          .select('email, status, created_at')
          .eq('email', email)
          .maybeSingle();

        if (checkError) {
          console.error('Error checking existing email:', checkError);
          return { success: false, error: `Failed to add to waitlist: ${insertError.message}` };
        }

        if (existing) {
          return { 
            success: true, 
            alreadyExists: true,
            error: 'You\'re already on our waitlist! We\'ll email you when access is ready.'
          };
        }
        
        return { success: false, error: `Failed to add to waitlist: ${insertError.message}` };
      }

      console.log('Successfully added to waitlist:', insertData);
      return { 
        success: true, 
        alreadyExists: false,
        error: undefined
      };
    } catch (error) {
      console.error('Waitlist service error:', error);
      return { success: false, error: 'An unexpected error occurred' };
    }
  }

  // Get waitlist count (for display purposes)
  static async getWaitlistCount(): Promise<{ count?: number; error?: string }> {
    try {
      // Use direct table query (no function calls to avoid 404 errors)
      const { count, error } = await supabase
        .from('waitlist')
        .select('*', { count: 'exact', head: true });

      if (error) {
        console.error('Error getting waitlist count:', error);
        return { error: 'Failed to get count' };
      }

      return { count: count || 0 };
    } catch (error) {
      console.error('Error getting waitlist count:', error);
      return { error: 'Failed to get count' };
    }
  }

  static async getWaitlistStats(): Promise<{ total: number; pending: number; invited: number; converted: number }> {
    try {
      const { data, error } = await supabase
        .from('waitlist')
        .select('status');

      if (error) {
        console.error('Error fetching waitlist stats:', error);
        // Return default stats instead of zeros to maintain UI consistency
        return { total: 137, pending: 137, invited: 0, converted: 0 };
      }

      const stats = {
        total: data.length,
        pending: 0,
        invited: 0,
        converted: 0
      };

      data.forEach(entry => {
        const status = entry.status || 'pending';
        if (status === 'pending') {
          stats.pending++;
        } else if (status === 'approved') {
          stats.invited++;
        } else if (status === 'rejected') {
          stats.converted++;
        }
      });

      return stats;
    } catch (error) {
      console.error('Error fetching waitlist stats:', error);
      // Return default stats instead of zeros to maintain UI consistency
      return { total: 137, pending: 137, invited: 0, converted: 0 };
    }
  }
}


```n

## src\services\websocketService.ts

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\services\websocketService.ts.Extension.TrimStart('.'))

let ws: WebSocket | null = null;
const SERVER_ADDRESS = 'wss://otakon-relay.onrender.com';

let reconnectAttempts = 0;
const maxBackoffMs = 5000;
const sendQueue: object[] = [];
let lastCode: string | null = null;
let handlers: { onOpen: () => void; onMessage: (data: any) => void; onError: (error: string) => void; onClose: () => void } | null = null;
let heartbeatTimer: number | null = null;
const HEARTBEAT_MS = 30000; // 30s - more frequent heartbeat to maintain connection


const connect = (
  code: string,
  onOpen: () => void,
  onMessage: (data: any) => void,
  onError: (error: string) => void,
  onClose: () => void
) => {

  if (ws && (ws.readyState === WebSocket.OPEN || ws.readyState === WebSocket.CONNECTING)) {
    // Skip logging for already connected state
    return;
  }

  // Only accept 6-digit codes
  if (!/^\d{6}$/.test(code)) {
    onError("Invalid code format. Please enter a 6-digit code.");
    return;
  }

  lastCode = code;
  handlers = { onOpen, onMessage, onError, onClose };

  const fullUrl = `${SERVER_ADDRESS}/${code}`;

  try {
    ws = new WebSocket(fullUrl);
  } catch (e) {
    const message = e instanceof Error ? e.message : "An unknown error occurred.";
    onError(`Connection failed: ${message}. Please check the URL and your network connection.`);
    return;
  }

  ws.onopen = () => {
    // Connection established - no need to log every connection
    reconnectAttempts = 0;
    onOpen();
    // Flush queued messages
    while (sendQueue.length && ws && ws.readyState === WebSocket.OPEN) {
      const payload = sendQueue.shift();
      try { 
        ws.send(JSON.stringify(payload)); 
      } catch {
        // Ignore send errors during queue processing
      }
    }

    // Start heartbeat
    if (heartbeatTimer) {
      clearInterval(heartbeatTimer);
      heartbeatTimer = null;
    }
    heartbeatTimer = window.setInterval(() => {
      if (ws && ws.readyState === WebSocket.OPEN) {
        try { 
          ws.send(JSON.stringify({ type: 'ping', ts: Date.now() })); 
        } catch {
          // Ignore heartbeat send errors
        }
      }
    }, HEARTBEAT_MS);
  };

  ws.onmessage = (event) => {
    try {
      const data = JSON.parse(event.data);
      // Only log errors in development, not every message
      onMessage(data);
    } catch (e) {
      if (process.env.NODE_ENV === 'development') {
        console.error("Failed to parse WebSocket message:", event.data, e);
      }
      // Ignore non-JSON
    }
  };

  ws.onerror = () => {
    // Handled by onclose
  };

  ws.onclose = (event: CloseEvent) => {
    // Only log unexpected closures
    if (!event.wasClean && process.env.NODE_ENV === 'development') {
      console.warn(`WebSocket connection closed unexpectedly. Code: ${event.code}, Reason: '${event.reason}'`);
    }

    if (!event.wasClean) {
      let errorMessage = "Connection closed unexpectedly.";
      if (event.code === 1006) {
        errorMessage = "Connection to the server failed. Please check your network, verify the code, and ensure the PC client is running.";
      } else if (event.reason) {
        errorMessage = `Connection closed: ${event.reason}`;
      }
      onError(errorMessage);
    }

    ws = null;
    onClose();

    // Stop heartbeat
    if (heartbeatTimer) {
      clearInterval(heartbeatTimer);
      heartbeatTimer = null;
    }

    // Auto-reconnect with backoff+jitter
    if (lastCode && handlers) {
      reconnectAttempts += 1;
      const base = Math.min(maxBackoffMs, 500 * Math.pow(2, reconnectAttempts - 1));
      const jitter = Math.random() * 300;
      const delay = base + jitter;
      setTimeout(() => {
        if (!ws && handlers) {
          connect(lastCode!, handlers.onOpen, handlers.onMessage, handlers.onError, handlers.onClose);
        }
      }, delay);
    }
  };
};

const send = (data: object) => {
  if (ws && ws.readyState === WebSocket.OPEN) {
    ws.send(JSON.stringify(data));
  } else {
    // Queue and let onopen flush
    sendQueue.push(data);
    // Message queued - no need to log every queued message
  }
};

const disconnect = () => {
  if (ws) {
    ws.close(1000, "User disconnected");
    ws = null;
  }
  reconnectAttempts = 0;
  if (heartbeatTimer) {
    clearInterval(heartbeatTimer);
    heartbeatTimer = null;
  }
  
  // Clear all connection state to prevent auto-reconnection after logout
  lastCode = null;
  handlers = null;
  
  // Clear any pending reconnection attempts
  if (process.env.NODE_ENV === 'development') {
    console.log("ðŸ”Œ WebSocket disconnected and all reconnection state cleared");
  }
};

export { connect, disconnect, send };


```n

## src\styles\globals.css

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\styles\globals.css.Extension.TrimStart('.'))

/* stylelint-disable at-rule-no-unknown */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Prevent white flash during transitions */
html, body {
  background-color: #0F0F0F;
  background: linear-gradient(135deg, #0F0F0F 0%, #111111 50%, #0F0F0F 100%);
  /* Improve mobile scrolling */
  -webkit-overflow-scrolling: touch;
  /* Prevent zoom on input focus on iOS */
  -webkit-text-size-adjust: 100%;
}

/* Smooth transitions for all elements */
* {
  transition: background-color 0.2s ease, color 0.2s ease;
}

/* Mobile-specific improvements */
@media (max-width: 640px) {
  /* Prevent zoom on input focus */
  input[type="text"], input[type="email"], input[type="password"], textarea {
    font-size: 16px;
  }
  
  /* Improve touch targets */
  button, .btn-icon {
    min-height: 44px;
    min-width: 44px;
  }
  
  /* Better spacing for mobile */
  .conversation-tab {
    padding: 12px;
  }
}

/* Hide scrollbar utility */
.scrollbar-hide {
  -ms-overflow-style: none;  /* Internet Explorer 10+ */
  scrollbar-width: none;  /* Firefox */
}
.scrollbar-hide::-webkit-scrollbar { 
  display: none;  /* Safari and Chrome */
}

/* Spin animation for logo */
@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

/* Credit Modal Animations */
@keyframes fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.9);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.animate-fade-in {
  animation: fade-in 0.2s ease-out;
}

.animate-scale-in {
  animation: scale-in 0.2s ease-out;
}

/* Enhanced Design System Variables */
:root {
  --space-xs: 0.5rem;
  --space-sm: 0.75rem;
  --space-md: 1rem;
  --space-lg: 1.5rem;
  --space-xl: 2rem;
  --space-2xl: 3rem;
  
  --color-primary: #E53A3A;
  --color-primary-light: #FF6B6B;
  --color-secondary: #D98C1F;
  --color-secondary-light: #FFB366;
  --color-accent: #5CBB7B;
  --color-accent-light: #7DD3A3;
  --color-background: #0A0A0A;
  --color-surface: #1C1C1C;
  --color-surface-light: #2E2E2E;
  --color-text-primary: #F5F5F5;
  --color-text-secondary: #CFCFCF;
  --color-text-muted: #A3A3A3;
}

/* Enhanced Card System */
.card-elevated {
  @apply bg-gradient-to-br from-[#2E2E2E]/90 to-[#1C1C1C]/90;
  @apply border border-[#424242]/30;
  @apply rounded-2xl backdrop-blur-xl;
  @apply shadow-[0_8px_32px_rgba(0,0,0,0.3)];
  @apply transition-all duration-300;
}

.card-elevated:hover {
  @apply border-[#E53A3A]/40;
  @apply shadow-[0_12px_40px_rgba(229,58,58,0.15)];
  @apply transform -translate-y-1;
}

.glass-container {
  @apply bg-white/5 backdrop-blur-2xl;
  @apply border border-white/10;
  @apply rounded-3xl;
  @apply shadow-[0_25px_50px_-12px_rgba(0,0,0,0.25)];
}

/* Enhanced Button System */
.btn-primary-enhanced {
  @apply bg-gradient-to-r from-[#E53A3A] to-[#D98C1F];
  @apply text-white font-semibold;
  @apply px-6 py-3 rounded-2xl;
  @apply border-2 border-transparent;
  @apply transition-all duration-300 ease-out;
  @apply hover:scale-105 hover:shadow-2xl hover:shadow-[#E53A3A]/25;
  @apply active:scale-95 active:shadow-lg;
  @apply focus:outline-none focus:ring-4 focus:ring-[#E53A3A]/30;
}

.btn-secondary-enhanced {
  @apply bg-gradient-to-r from-[#2E2E2E] to-[#1C1C1C];
  @apply text-[#CFCFCF] font-medium;
  @apply px-5 py-2.5 rounded-xl;
  @apply border-2 border-[#424242]/60;
  @apply transition-all duration-300 ease-out;
  @apply hover:from-[#424242] hover:to-[#2E2E2E];
  @apply hover:border-[#5A5A5A] hover:scale-105;
  @apply focus:outline-none focus:ring-4 focus:ring-[#424242]/30;
}

/* Enhanced Input System */
.input-enhanced {
  @apply bg-gradient-to-r from-[#1C1C1C] to-[#0A0A0A];
  @apply border-2 border-[#424242]/40;
  @apply rounded-xl px-4 py-3;
  @apply text-white placeholder-[#A3A3A3];
  @apply transition-all duration-300;
  @apply focus:border-[#E53A3A]/60 focus:outline-none;
  @apply focus:shadow-[0_0_20px_rgba(229,61,61,0.2)];
  @apply hover:border-[#5A5A5A]/60;
}

/* Enhanced Tab System */
.tab-enhanced {
  @apply px-4 py-2.5 rounded-xl;
  @apply bg-gradient-to-r from-[#2E2E2E] to-[#1C1C1C];
  @apply border-2 border-[#424242]/40;
  @apply text-[#CFCFCF] font-medium;
  @apply transition-all duration-300 ease-out;
  @apply hover:from-[#424242] hover:to-[#2E2E2E];
  @apply hover:border-[#5A5A5A] hover:scale-105;
  @apply shadow-[0_2px_8px_rgba(0,0,0,0.3)];
  @apply backdrop-blur-sm;
  @apply cursor-pointer;
}

.tab-active {
  @apply bg-gradient-to-r from-[#E53A3A]/20 to-[#D98C1F]/20;
  @apply border-[#E53A3A]/60;
  @apply text-white;
  @apply shadow-[0_0_20px_rgba(229,58,58,0.2)];
  @apply scale-105;
}

.conversation-tab {
  @apply px-4 py-3 rounded-xl;
  @apply bg-gradient-to-r from-[#2E2E2E]/80 to-[#1C1C1C]/80;
  @apply border-2 border-[#424242]/40;
  @apply text-[#CFCFCF] font-medium;
  @apply transition-all duration-300;
  @apply hover:from-[#424242] hover:to-[#2E2E2E];
  @apply hover:border-[#5A5A5A] hover:scale-105;
  @apply shadow-[0_2px_8px_rgba(0,0,0,0.3)];
  @apply backdrop-blur-sm;
}

.conversation-tab-active {
  @apply bg-gradient-to-r from-[#E53A3A]/20 to-[#D98C1F]/20;
  @apply border-[#E53A3A]/60;
  @apply text-white;
  @apply shadow-[0_0_25px_rgba(229,58,58,0.3)];
  @apply scale-105;
}

/* Enhanced Chat Message System */
.chat-message-user {
  @apply text-base text-rose-300;
  @apply bg-gradient-to-r from-rose-900/15 to-rose-800/15;
  @apply py-3 px-6 rounded-2xl rounded-br-none;
  @apply border-2 border-rose-500/40;
  @apply backdrop-blur-sm shadow-lg;
  @apply max-w-2xl ml-auto;
}

.chat-message-ai {
  @apply border-2 border-neutral-700/60;
  @apply bg-gradient-to-r from-neutral-800/15 to-neutral-700/15;
  @apply p-6 rounded-2xl rounded-bl-none;
  @apply max-w-[80%] text-left;
  @apply backdrop-blur-sm shadow-lg;
  @apply mr-auto;
}

/* Enhanced Modal System */
.modal-overlay-enhanced {
  @apply fixed inset-0 z-50;
  @apply bg-black/60 backdrop-blur-md;
  @apply flex items-center justify-center p-4;
  @apply transition-all duration-300;
}

.modal-content-enhanced {
  @apply bg-gradient-to-br from-[#1C1C1C] to-[#0A0A0A];
  @apply border border-[#424242]/40;
  @apply rounded-3xl p-6 max-w-2xl w-full;
  @apply shadow-[0_25px_50px_-12px_rgba(0,0,0,0.5)];
  @apply backdrop-blur-xl;
  @apply transform transition-all duration-300;
  @apply animate-modal-enter;
}

@keyframes modal-enter {
  from {
    opacity: 0;
    transform: scale(0.9) translateY(-20px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.animate-modal-enter {
  animation: modal-enter 0.3s ease-out;
}

/* Enhanced animations and visual effects */
@keyframes fade-slide-up {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.9);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes glow-pulse {
  0%, 100% {
    box-shadow: 0 0 20px rgba(229, 61, 61, 0.3);
  }
  50% {
    box-shadow: 0 0 30px rgba(229, 61, 61, 0.6);
  }
}

@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

/* Apply animations to components */
.animate-fade-slide-up {
  animation: fade-slide-up 0.8s ease-out;
}

.animate-fade-slide-up-delay-1 {
  animation: fade-slide-up 0.8s ease-out 0.1s both;
}

.animate-fade-slide-up-delay-2 {
  animation: fade-slide-up 0.8s ease-out 0.2s both;
}

.animate-fade-slide-up-delay-3 {
  animation: fade-slide-up 0.8s ease-out 0.3s both;
}

.animate-fade-slide-up-delay-4 {
  animation: fade-slide-up 0.8s ease-out 0.4s both;
}

.animate-fade-in {
  animation: fade-in 0.6s ease-out;
}

.animate-scale-in {
  animation: scale-in 0.4s ease-out;
}

.animate-glow-pulse {
  animation: glow-pulse 2s ease-in-out infinite;
}

/* Enhanced button states */
.btn-primary {
  @apply bg-gradient-to-r from-[#E53A3A] to-[#D98C1F] text-white font-semibold px-6 py-3 rounded-xl transition-all duration-300 hover:scale-105 hover:shadow-xl hover:shadow-[#E53A3A]/25 active:scale-95;
}

.btn-secondary {
  @apply bg-gradient-to-r from-[#2E2E2E] to-[#1C1C1C] text-white font-semibold px-6 py-3 rounded-xl border-2 border-[#424242]/60 transition-all duration-300 hover:from-[#424242] hover:to-[#2E2E2E] hover:scale-105 hover:shadow-lg active:scale-95;
}

/* Enhanced card styles */
.card {
  @apply bg-gradient-to-r from-[#2E2E2E]/80 to-[#1C1C1C]/80 border-2 border-[#424242]/40 rounded-2xl backdrop-blur-sm transition-all duration-300 hover:border-[#E53A3A]/40 hover:shadow-xl hover:shadow-[#E53A3A]/10;
}

/* Enhanced modal styles */
.modal-overlay {
  @apply fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4;
}

.modal-content {
  @apply bg-gradient-to-r from-[#1C1C1C] to-[#0A0A0A] border-2 border-[#424242]/40 rounded-2xl p-6 max-w-2xl w-full shadow-2xl backdrop-blur-sm;
}

/* Root level constraints to prevent whole page scrolling */
html, body {
  height: 100%;
  margin: 0;
  padding: 0;
}

#root {
  height: 100%;
}

/* Fixed chat layout - prevents UI elements from scrolling out of view */
.chat-layout-fixed {
  height: 100vh;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.chat-header-fixed {
  flex-shrink: 0;
  position: sticky;
  top: 0;
  z-index: 20;
  background: #000000;
  border-bottom: 1px solid rgba(46, 46, 46, 0.2);
}

.chat-content-scrollable {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  min-height: 0; /* Critical for flexbox scrolling */
}

.chat-input-fixed {
  flex-shrink: 0;
  position: sticky;
  bottom: 0;
  z-index: 20;
  background: #000000;
  border-top: 1px solid rgba(46, 46, 46, 0.2);
}

/* Smooth scrolling for chat messages */
.chat-messages-smooth {
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch; /* iOS momentum scrolling */
}

/* Mobile-specific chat optimizations */
@media (max-width: 768px) {
  html, body {
    height: 100vh;
    height: 100dvh; /* Dynamic viewport height for mobile */
  }
  
  #root {
    height: 100vh;
    height: 100dvh;
  }
  
  .chat-layout-fixed {
    height: 100vh;
    height: 100dvh; /* Dynamic viewport height for mobile */
  }
  
  .chat-content-scrollable {
    /* Ensure proper scrolling on mobile */
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
  }
  
}

/* Desktop-specific chat layout optimizations */
@media (min-width: 1024px) {
  /* Ensure proper height constraints for desktop chat */
  .chat-container-desktop {
    height: calc(100vh - 200px); /* Adjust based on header and input heights */
    max-height: calc(100vh - 200px);
  }
  
  /* Desktop chat input positioning */
  .chat-input-desktop {
    position: sticky;
    bottom: 0;
    z-index: 10;
    background: #000000;
    border-top: 1px solid rgba(46, 46, 46, 0.2);
  }
  
  /* Ensure proper scrolling behavior on desktop */
  .chat-messages-desktop {
    height: 100%;
    overflow-y: auto;
    scroll-behavior: smooth;
  }
  
  /* Desktop-specific padding adjustments */
  .desktop-padding {
    padding-left: 2rem;
    padding-right: 2rem;
  }
  
}

/* Hide native scrollbars globally, except for custom-scrollbar elements */
*:not(.custom-scrollbar) {
  scrollbar-width: none !important;
  -ms-overflow-style: none !important;
}

*:not(.custom-scrollbar)::-webkit-scrollbar {
  display: none !important;
}

/* Specifically hide horizontal scrollbars for body and html */
html, body {
  overflow-x: hidden !important;
}

/* Allow vertical scrolling for custom scrollbar elements */
.custom-scrollbar {
  overflow-x: hidden !important;
  overflow-y: auto !important;
}

/* Ensure scrolling works on all elements */
* {
  pointer-events: auto !important;
}

/* Allow scrolling on hover elements */
.group:hover {
  pointer-events: auto !important;
}

/* Custom scrollbar for elements with .custom-scrollbar class */
.custom-scrollbar {
  position: relative;
  overflow-x: hidden !important;
  overflow-y: auto !important;
  /* Ensure content is scrollable */
  max-height: 100%;
  /* Hide any hover scrollbars */
  scrollbar-width: thin !important;
  scrollbar-color: #E53A3A transparent !important;
}

.custom-scrollbar::-webkit-scrollbar {
  display: block !important;
  width: 6px !important;
  height: 6px !important;
  background: transparent !important;
}

.custom-scrollbar::-webkit-scrollbar-track {
  background: transparent !important;
  background-color: transparent !important;
  border: none !important;
  box-shadow: none !important;
  /* Ensure track doesn't take full height */
  border-radius: 3px !important;
}

.custom-scrollbar::-webkit-scrollbar-thumb {
  background: linear-gradient(135deg, #E53A3A, #D98C1F) !important;
  border-radius: 3px !important;
  border: none !important;
  box-shadow: none !important;
  /* Ensure thumb is properly sized */
  min-height: 20px !important;
  max-height: 50% !important;
}


.custom-scrollbar::-webkit-scrollbar-corner {
  background: transparent !important;
  background-color: transparent !important;
}


/* Enhanced focus states */
.focus-ring:focus {
  outline: none;
  box-shadow: 0 0 0 3px rgba(229, 61, 61, 0.3);
}

/* Enhanced transitions */
.transition-smooth {
  transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* Enhanced text shadows */
.text-shadow {
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

.text-shadow-glow {
  text-shadow: 0 0 20px rgba(229, 61, 61, 0.5);
}

/* Glass morphism effects */
.glass {
  background: rgba(255, 255, 255, 0.1);
  -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.glass-dark {
  background: rgba(0, 0, 0, 0.6);
  -webkit-backdrop-filter: blur(15px);
  backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

/* Enhanced gradients */
.gradient-primary {
  background: linear-gradient(135deg, #E53A3A 0%, #D98C1F 100%);
}

.gradient-secondary {
  background: linear-gradient(135deg, #5CBB7B 0%, #4CAF50 100%);
}

.gradient-accent {
  background: linear-gradient(135deg, #5B99E3 0%, #4A90E2 100%);
}

/* Enhanced shadows */
.shadow-glow {
  box-shadow: 0 0 30px rgba(229, 61, 61, 0.3);
}

.shadow-glow-green {
  box-shadow: 0 0 30px rgba(92, 187, 123, 0.3);
}

.shadow-glow-blue {
  box-shadow: 0 0 30px rgba(91, 153, 227, 0.3);
}

/* Landing page specific styles */
.hero-glow-texture-top {
  background: radial-gradient(ellipse at top, rgba(229, 58, 58, 0.05) 0%, transparent 70%);
  opacity: 1;
}

.hero-glow-texture-bottom {
  background: radial-gradient(ellipse at bottom, rgba(217, 140, 31, 0.05) 0%, transparent 70%);
  opacity: 1;
}

.animate-fade-slide-down {
  animation: fade-slide-down 0.8s ease-out;
}

@keyframes fade-slide-down {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Font family */
.font-inter {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
}

/* Enhanced animations for landing page */
@keyframes float {
  0%, 100% {
    transform: translateY(0px) rotate(0deg);
  }
  50% {
    transform: translateY(-20px) rotate(180deg);
  }
}

@keyframes drift {
  0% {
    transform: translateX(0px) translateY(0px);
  }
  25% {
    transform: translateX(10px) translateY(-10px);
  }
  50% {
    transform: translateX(-5px) translateY(-20px);
  }
  75% {
    transform: translateX(-10px) translateY(-10px);
  }
  100% {
    transform: translateX(0px) translateY(0px);
  }
}

@keyframes glow-pulse {
  0%, 100% {
    box-shadow: 0 0 20px rgba(229, 58, 58, 0.3);
  }
  50% {
    box-shadow: 0 0 40px rgba(229, 58, 58, 0.6), 0 0 60px rgba(217, 140, 31, 0.3);
  }
}

@keyframes pulse-glow {
  0%, 100% {
    box-shadow: 0 0 20px rgba(255, 77, 77, 0.05), 0 0 40px rgba(255, 171, 64, 0.02), 0 0 60px rgba(0, 0, 0, 0.1);
  }
  50% {
    box-shadow: 0 0 30px rgba(255, 77, 77, 0.3), 0 0 50px rgba(255, 171, 64, 0.2), 0 0 70px rgba(0, 0, 0, 0.1);
  }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-drift {
  animation: drift 8s ease-in-out infinite;
}

.animate-glow-pulse {
  animation: glow-pulse 3s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 4s ease-in-out infinite;
}

/* Mobile-specific improvements */
@media (max-width: 768px) {
  .mobile-text-sm {
    font-size: 0.875rem;
    line-height: 1.25rem;
  }
  
  .mobile-text-base {
    font-size: 1rem;
    line-height: 1.5rem;
  }
  
  .mobile-text-lg {
    font-size: 1.125rem;
    line-height: 1.75rem;
  }
  
  .mobile-text-xl {
    font-size: 1.25rem;
    line-height: 1.75rem;
  }
  
  .mobile-text-2xl {
    font-size: 1.5rem;
    line-height: 2rem;
  }
  
  .mobile-text-3xl {
    font-size: 1.875rem;
    line-height: 2.25rem;
  }
  
  .mobile-text-4xl {
    font-size: 2.25rem;
    line-height: 2.5rem;
  }
  
  .mobile-text-5xl {
    font-size: 3rem;
    line-height: 1;
  }
  
  .mobile-text-6xl {
    font-size: 3.75rem;
    line-height: 1;
  }
  
  .mobile-text-7xl {
    font-size: 4.5rem;
    line-height: 1;
  }
  
  /* Touch-friendly spacing */
  .mobile-p-4 {
    padding: 1rem;
  }
  
  .mobile-p-6 {
    padding: 1.5rem;
  }
  
  .mobile-p-8 {
    padding: 2rem;
  }
  
  .mobile-py-4 {
    padding-top: 1rem;
    padding-bottom: 1rem;
  }
  
  .mobile-py-6 {
    padding-top: 1.5rem;
    padding-bottom: 1.5rem;
  }
  
  .mobile-py-8 {
    padding-top: 2rem;
    padding-bottom: 2rem;
  }
  
  .mobile-py-10 {
    padding-top: 2.5rem;
    padding-bottom: 2.5rem;
  }
  
  .mobile-py-12 {
    padding-top: 3rem;
    padding-bottom: 3rem;
  }
  
  .mobile-py-14 {
    padding-top: 3.5rem;
    padding-bottom: 3.5rem;
  }
  
  .mobile-py-16 {
    padding-top: 4rem;
    padding-bottom: 4rem;
  }
  
  .mobile-py-20 {
    padding-top: 5rem;
    padding-bottom: 5rem;
  }
  
  /* Mobile-specific animations */
  .mobile-animate-fade-slide-up {
    animation: fade-slide-up 0.6s ease-out;
  }
  
  .mobile-animate-fade-slide-down {
    animation: fade-slide-down 0.6s ease-out;
  }
}

/* Login page specific animations */
@keyframes bounce {
  0%, 20%, 53%, 80%, 100% {
    transform: translate3d(0, 0, 0);
  }
  40%, 43% {
    transform: translate3d(0, -30px, 0);
  }
  70% {
    transform: translate3d(0, -15px, 0);
  }
  90% {
    transform: translate3d(0, -4px, 0);
  }
}

@keyframes bounce-slow {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-10px);
  }
}

@keyframes slide-up {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slide-in-right {
  from {
    opacity: 0;
    transform: translateX(30px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes slide-in-left {
  from {
    opacity: 0;
    transform: translateX(-30px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes scale-in-up {
  from {
    opacity: 0;
    transform: scale(0.9) translateY(20px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

@keyframes fade-in-up {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-bounce-slow {
  animation: bounce-slow 3s ease-in-out infinite;
}

.animate-slide-up {
  animation: slide-up 0.6s ease-out;
}

.animate-slide-in-right {
  animation: slide-in-right 0.5s ease-out;
}

.animate-slide-in-left {
  animation: slide-in-left 0.5s ease-out;
}

.animate-scale-in-up {
  animation: scale-in-up 0.4s ease-out;
}

.animate-fade-in-up {
  animation: fade-in-up 0.5s ease-out;
}

.delay-200 {
  animation-delay: 0.2s;
}

.delay-300 {
  animation-delay: 0.3s;
}

.delay-500 {
  animation-delay: 0.5s;
}


```n

## src\types\index.ts

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\types\index.ts.Extension.TrimStart('.'))

// User Types
export type UserTier = 'free' | 'pro' | 'vanguard_pro';
export type AuthMethod = 'google' | 'discord' | 'email';

// Connection Status
export enum ConnectionStatus {
  DISCONNECTED = 'DISCONNECTED',
  CONNECTING = 'CONNECTING',
  CONNECTED = 'CONNECTED',
  ERROR = 'ERROR',
}

export interface User {
  id: string;
  authUserId: string;
  email: string;
  tier: UserTier;
  hasProfileSetup: boolean;
  hasSeenSplashScreens: boolean;
  hasSeenHowToUse: boolean;
  hasSeenFeaturesConnected: boolean;
  hasSeenProFeatures: boolean;
  pcConnected: boolean;
  pcConnectionSkipped: boolean;
  onboardingCompleted: boolean;
  hasWelcomeMessage: boolean;
  isNewUser: boolean;
  hasUsedTrial: boolean;
  lastActivity: number;
  // Query-based usage limits (from database)
  textCount: number;
  imageCount: number;
  textLimit: number;
  imageLimit: number;
  totalRequests: number;
  lastReset: number;
  // Legacy nested usage object (kept for backward compatibility)
  preferences: Record<string, any>;
  usage: Usage;
  appState: Record<string, any>;
  profileData: Record<string, any>;
  onboardingData: Record<string, any>;
  behaviorData: Record<string, any>;
  feedbackData: Record<string, any>;
  usageData: Record<string, any>;
  createdAt: number;
  updatedAt: number;
}

export interface Usage {
  textCount: number;
  imageCount: number;
  textLimit: number;
  imageLimit: number;
  totalRequests: number;
  lastReset: number;
  tier: UserTier;
}

// App State
export type AppView = 'landing' | 'app';
export type OnboardingStatus = 'login' | 'initial' | 'features' | 'pro-features' | 'how-to-use' | 'features-connected' | 'tier-splash' | 'profile-setup' | 'complete' | 'loading';
export type ActiveModal = 'about' | 'privacy' | 'refund' | 'contact' | 'terms' | 'settings' | 'connection' | 'hands-free' | 'credit' | 'otaku-diary' | 'wishlist' | null;

export interface AppState {
  view: AppView;
  onboardingStatus: OnboardingStatus;
  activeSubView: string;
  isConnectionModalOpen: boolean;
  isHandsFreeModalOpen: boolean;
  isSettingsModalOpen: boolean;
  isCreditModalOpen: boolean;
  isOtakuDiaryModalOpen: boolean;
  isWishlistModalOpen: boolean;
  activeModal: ActiveModal;
  isHandsFreeMode: boolean;
  showUpgradeScreen: boolean;
  showDailyCheckin: boolean;
  currentAchievement: any | null;
  loadingMessages: string[];
  isCooldownActive: boolean;
  isFirstTime: boolean;
  contextMenu: any | null;
  feedbackModalState: any | null;
  confirmationModal: any | null;
  trialEligibility: {
    isEligible: boolean;
    hasUsedTrial: boolean;
  } | null;
}

// Chat Types
export interface ChatMessage {
  id: string;
  content: string;
  role: 'user' | 'assistant' | 'system';
  timestamp: number;
  imageUrl?: string;
  metadata?: Record<string, any>;
}

export interface Conversation {
  id: string;
  title: string;
  messages: ChatMessage[];
  gameId?: string;
  gameTitle?: string;
  genre?: string;
  subtabs?: SubTab[];
  subtabsOrder?: string[];
  isActiveSession?: boolean;
  activeObjective?: string;
  gameProgress?: number;
  createdAt: number;
  updatedAt: number;
  isActive: boolean;
  isPinned?: boolean;
  pinnedAt?: number;
  isGameHub?: boolean; // Identifies the default Game Hub conversation - only one per user
  isUnreleased?: boolean; // True for unreleased/upcoming games - no Playing mode, no subtabs
}

export interface Conversations {
  [id: string]: Conversation;
}

// Game Types
export interface Game {
  id: string;
  title: string;
  description?: string;
  genre?: string;
  platform?: string;
  releaseDate?: string;
  rating?: number;
  imageUrl?: string;
  metadata: Record<string, any>;
  createdAt: number;
  updatedAt: number;
}

// Waitlist Types
export interface WaitlistEntry {
  id: string;
  email: string;
  source: string;
  createdAt: number;
  status: 'pending' | 'invited' | 'converted';
}

// Trial Types
export interface TrialStatus {
  isEligible: boolean;
  hasUsed: boolean;
  isActive: boolean;
  expiresAt?: number;
  daysRemaining?: number;
}

// Player Profile Types
export interface PlayerProfile {
  hintStyle: 'Cryptic' | 'Balanced' | 'Direct';
  playerFocus: 'Story-Driven' | 'Completionist' | 'Strategist';
  preferredTone: 'Encouraging' | 'Professional' | 'Casual';
  spoilerTolerance: 'Strict' | 'Moderate' | 'Relaxed';
}

// Auth Types
export interface AuthResult {
  success: boolean;
  error?: string;
  user?: User;
  requiresConfirmation?: boolean;
  message?: string;
}

export interface AuthState {
  user: User | null;
  isLoading: boolean;
  error: string | null;
}

// AI Types
export interface SubTab {
  id: string;
  title: string;
  content: string;
  type: 'chat' | 'walkthrough' | 'tips' | 'strategies' | 'story' | 'characters' | 'items';
  isNew: boolean;
  status: 'loading' | 'loaded' | 'error';
  instruction?: string;
}

export interface GameTab {
  id: string; // Will correspond to conversationId
  title: string;
  gameId: string; // From OTAKON tag
  gameTitle: string;
  genre: string;
  subtabs: SubTab[];
  createdAt: number;
  updatedAt: number;
  isActiveSession?: boolean;
}

export interface AIResponse {
  content: string; // The user-facing text
  suggestions: string[];
  otakonTags: Map<string, any>; // Parsed OTAKON tags
  rawContent: string; // Full response before stripping tags
  metadata: {
    model: string;
    timestamp: number;
    cost: number;
    tokens: number;
    fromCache?: boolean;
  };
  // Enhanced fields from old build (optional for backward compatibility)
  followUpPrompts?: string[]; // 3-4 contextual suggested prompts
  gamePillData?: {
    shouldCreate: boolean;
    gameName: string;
    genre: string;
    wikiContent: Record<string, string>; // Pre-filled subtab content
  };
  progressiveInsightUpdates?: Array<{
    tabId: string;
    title: string;
    content: string;
  }>;
  suggestedTasks?: Array<{
    title: string;
    description: string;
    category: string;
    confidence: number;
    source: string;
  }>;
  stateUpdateTags?: string[]; // Game state changes (OBJECTIVE_COMPLETE, TRIUMPH, etc.)
}

export interface ActiveSessionState {
  isActive: boolean;
  currentGameId?: string; // Corresponds to conversation.id
}

// Configuration constants
export const newsPrompts: string[] = [
  "What's the latest gaming news?",
  "Which games are releasing soon?",
  "What are the latest game reviews?",
  "Show me the hottest new game trailers.",
];

export const insightTabsConfig: Record<string, Omit<SubTab, 'content' | 'isNew' | 'status'>[]> = {
  'Default': [
    { id: 'story_so_far', title: 'Story So Far', type: 'story', instruction: "Provide a concise summary of the main plot events that have occurred strictly up to the estimated game progress. Do not mention, hint at, or allude to any future events, characters, or plot twists. The summary should read like a journal entry of what has *already happened*." },
    { id: 'missed_items', title: 'Items You May Have Missed', type: 'items', instruction: "Based on the player's current progress, identify 2-3 significant items, secrets, or side quests they might have overlooked in areas they have already visited. Provide clear, actionable hints about their locations without giving away the exact solution. Use landmarks and environmental descriptions. Example: 'In the Whispering Caverns, a waterfall hides more than just a damp cave wall.'" },
    { id: 'game_lore', title: 'Relevant Lore', type: 'story', instruction: "Provide a fascinating, detailed, spoiler-free piece of lore about the game's world, characters, or backstory that is relevant to the player's current situation or recent events. This should be a deep-dive, not a short summary." },
    { id: 'build_guide', title: 'Build Guide', type: 'strategies', instruction: "Suggest one or two detailed, effective character builds or loadouts using items and skills available up to the current progress point. Be specific about the synergy between components, stat allocation, and how the build excels in the player's current or upcoming challenges." },
    { id: 'next_session_plan', title: 'Plan Your Next Session', type: 'tips', instruction: "Based on the player's progress and story so far, clearly list 3-4 concrete objectives or tasks they can tackle in their next gameplay session. This should include a mix of main quests, important side quests, and interesting areas to explore next. Provide a brief, compelling reason for each suggestion." },
  ],
  'Action RPG': [
    { id: 'story_so_far', title: 'Story So Far', type: 'story', instruction: "Provide a concise summary of the main plot events that have occurred strictly up to the estimated game progress. Do not mention, hint at, or allude to any future events, characters, or plot twists. The summary should read like a journal entry of what has *already happened*." },
    { id: 'quest_log', title: 'Active Quests', type: 'walkthrough', instruction: "Summarize the active main quest and suggest 2-3 relevant side quests available in the current area. Explain the potential rewards or story connections." },
    { id: 'build_optimization', title: 'Build Optimization', type: 'strategies', instruction: "Analyze the player's likely stats and gear. Suggest 2-3 specific improvements, like stat allocation changes, better weapon affinities, or spells that synergize with their build." },
    { id: 'boss_strategy', title: 'Upcoming Boss Strategy', type: 'strategies', instruction: "A significant challenge may lie ahead. **Do not name the upcoming boss or describe its appearance.** Instead, provide clear, actionable tactical advice based on its likely attack patterns and weaknesses. Suggest effective weapon types, armor properties, status effects, and specific strategies (e.g., 'This foe is relentless up close; focus on ranged attacks and stay mobile,' or 'Its armor is vulnerable to fire damage; enchanted weapons will be key.'). The advice should be practical, not metaphorical." },
    { id: 'hidden_paths', title: 'Hidden Paths & Secrets', type: 'tips', instruction: "Hint at a secret path or hidden area nearby that the player may have missed. **Do not give explicit directions.** Instead, provide a clear clue tied to a specific landmark or environmental feature. The goal is to make the player think 'Aha!' not 'Huh?'. Example: 'The large statue in the Grand Hall seems to be pointing at a specific tapestry on the wall...' or 'Listen for the sound of running water behind the library's northern bookshelf.'" },
  ],
  'RPG': [
    { id: 'story_so_far', title: 'Story So Far', type: 'story', instruction: "Provide a concise summary of the main plot events that have occurred strictly up to the estimated game progress. Do not mention, hint at, or allude to any future events, characters, or plot twists. The summary should read like a journal entry of what has *already happened*." },
    { id: 'character_building', title: 'Character Building', type: 'strategies', instruction: "Provide detailed character building advice including stat allocation, skill trees, and class optimization based on the player's current progress and available options." },
    { id: 'combat_strategies', title: 'Combat Strategies', type: 'strategies', instruction: "Detail effective combat strategies, party composition advice, and tactical approaches for current or upcoming challenges." },
    { id: 'quest_guide', title: 'Quest Guide', type: 'walkthrough', instruction: "Provide guidance on active quests, including main story quests and important side quests. Include rewards and story connections." },
    { id: 'lore_exploration', title: 'Lore Exploration', type: 'story', instruction: "Dive deep into the game's lore, world-building, and backstory relevant to the player's current progress without spoiling future revelations." },
  ],
  'First-Person Shooter': [
    { id: 'story_so_far', title: 'Story So Far', type: 'story', instruction: "Provide a concise summary of the main plot events that have occurred strictly up to the estimated game progress. Do not mention, hint at, or allude to any future events, characters, or plot twists. The summary should read like a journal entry of what has *already happened*." },
    { id: 'loadout_analysis', title: 'Loadout Analysis', type: 'strategies', instruction: "Analyze the probable current weapon loadout. Suggest 2 alternative, powerful loadouts (primary, secondary, equipment) for the current situation or map, explaining the strategic advantage of each." },
    { id: 'map_strategies', title: 'Map Strategies', type: 'strategies', instruction: "Provide 3 key strategic tips for the likely current map or area, focusing on positioning, flanking routes, and objective control." },
    { id: 'enemy_intel', title: 'Enemy Intel', type: 'tips', instruction: "You'll encounter new threats in this zone. **Do not name the enemy types or describe their appearance in a way that spoils their reveal.** Describe their behavior, attack patterns, and a key vulnerability in a tactical, in-universe way. The advice must be actionable. For example: 'Some hostiles carry volatile canisters on their backs. A well-placed shot could trigger a chain reaction.' or 'Listen for a high-pitched whine; it signals a devastating charge you must evade immediately.'" },
    { id: 'pro_tips', title: 'Pro Tips', type: 'tips', instruction: "Offer 3 advanced tips or 'pro strats' for this game that a new player might not know, such as movement tricks, ability combos, or unusual weapon uses." },
  ],
  'Strategy': [
    { id: 'story_so_far', title: 'Story So Far', type: 'story', instruction: "Provide a concise summary of the main plot events that have occurred strictly up to the estimated game progress. Do not mention, hint at, or allude to any future events, characters, or plot twists. The summary should read like a journal entry of what has *already happened*." },
    { id: 'current_board_state', title: 'Current State Analysis', type: 'strategies', instruction: "Analyze the current game state (e.g., board position, resources, army composition). Provide a high-level summary of strengths, weaknesses, and immediate threats." },
    { id: 'opening_moves', title: 'Opening Builds', type: 'strategies', instruction: "Describe 2-3 popular and effective opening strategies or build orders for the player's faction or starting position." },
    { id: 'unit_counters', title: 'Unit Counters', type: 'strategies', instruction: "Intelligence suggests the enemy will deploy units with specific strengths. **Do not name the enemy units.** Instead, describe their function (e.g., 'fast-moving aerial threats', 'heavily armored ground forces') and suggest specific, effective counters from the player's available arsenal. Explain *why* the counter works (e.g., '...because your Stinger units have tracking projectiles that are effective against agile air targets.')." },
    { id: 'economy_guide', title: 'Economy Management', type: 'tips', instruction: "Provide 3 tips for optimizing resource generation and spending at the player's current stage of the game." },
  ],
  'Adventure': [
    { id: 'story_so_far', title: 'Story So Far', type: 'story', instruction: "Provide a concise summary of the main plot events that have occurred strictly up to the estimated game progress. Do not mention, hint at, or allude to any future events, characters, or plot twists. The summary should read like a journal entry of what has *already happened*." },
    { id: 'exploration_tips', title: 'Exploration Tips', type: 'tips', instruction: "Provide helpful exploration tips for the current area, including how to find hidden paths, secrets, and collectibles without explicit spoilers." },
    { id: 'puzzle_solving', title: 'Puzzle Solving', type: 'strategies', instruction: "Offer guidance on current or recent puzzles, providing hints that lead the player toward the solution without giving it away entirely." },
    { id: 'story_progression', title: 'Story Progression', type: 'walkthrough', instruction: "Guide the player through story progression, outlining what to do next while maintaining suspense and avoiding future spoilers." },
    { id: 'hidden_secrets', title: 'Hidden Secrets', type: 'tips', instruction: "Hint at hidden secrets, collectibles, or optional content the player may have missed, using environmental clues and landmarks." },
  ],
  'Simulation': [
    { id: 'goal_suggestions', title: 'Goal Suggestions', type: 'tips', instruction: "Based on the current state, suggest 3 short-term and 1 long-term goal to work towards. For example, expanding a facility, achieving a milestone, or unlocking a new technology." },
    { id: 'efficiency_tips', title: 'Efficiency & Optimization', type: 'strategies', instruction: "Provide 3 actionable tips for improving the efficiency of the player's current setup, such as optimizing a production line, improving traffic flow, or managing finances better." },
    { id: 'hidden_mechanics', title: 'Hidden Mechanics', type: 'tips', instruction: "Explain one non-obvious game mechanic that can significantly impact gameplay, which the player may not be aware of yet." },
    { id: 'disaster_prep', title: 'Disaster Prep', type: 'strategies', instruction: "Great endeavors are often tested. **Do not name the specific disaster or event.** Hint at a potential future challenge in a thematic way and suggest 2-3 concrete, preventative measures. For example: 'The markets are fickle; diversifying your income streams and building a cash reserve can weather any financial storm.' or 'The earth sometimes trembles. Ensuring your infrastructure is reinforced near fault lines could prevent a catastrophe.'" },
  ],
  'Sports': [
    { id: 'story_so_far', title: 'Story So Far', type: 'story', instruction: "Provide a concise summary of the main plot events that have occurred strictly up to the estimated game progress. Do not mention, hint at, or allude to any future events, characters, or plot twists. The summary should read like a journal entry of what has *already happened*." },
    { id: 'team_management', title: 'Team Management', type: 'strategies', instruction: "Analyze the current team composition and suggest 2-3 strategic improvements. Consider player stats, chemistry, formation adjustments, or tactical changes that could enhance performance based on the current season progress." },
    { id: 'training_focus', title: 'Training Focus', type: 'tips', instruction: "Based on the current team's strengths and weaknesses, recommend specific training priorities. Suggest which players need development, what skills to focus on, and how to prepare for upcoming challenges." },
    { id: 'tactical_analysis', title: 'Tactical Analysis', type: 'strategies', instruction: "Provide detailed tactical advice for the current situation. This could include formation strategies, player positioning, set-piece tactics, or counter-strategies against specific opponents you've faced or are about to face." },
    { id: 'season_progression', title: 'Season Progression', type: 'walkthrough', instruction: "Outline the key objectives and milestones for the current season phase. Suggest realistic goals, important matches to focus on, and strategic decisions that could impact the team's long-term success." },
  ],
  'Multiplayer Shooter': [
    { id: 'story_so_far', title: 'Story So Far', type: 'story', instruction: "Provide a concise summary of the main plot events that have occurred strictly up to the estimated game progress. Do not mention, hint at, or allude to any future events, characters, or plot twists. The summary should read like a journal entry of what has *already happened*." },
    { id: 'meta_analysis', title: 'Meta Analysis', type: 'strategies', instruction: "Analyze the current meta and suggest 2-3 effective loadouts or strategies. Consider weapon balance, map-specific tactics, and counter-strategies against popular playstyles in the current meta." },
    { id: 'team_coordination', title: 'Team Coordination', type: 'strategies', instruction: "Provide advanced team play strategies. Suggest communication tactics, role assignments, positioning strategies, and how to counter common enemy team compositions or strategies." },
    { id: 'map_control', title: 'Map Control', type: 'strategies', instruction: "Offer detailed map control strategies for the current or upcoming maps. Include key positions, rotation paths, objective control tactics, and how to maintain map dominance." },
    { id: 'skill_development', title: 'Skill Development', type: 'tips', instruction: "Identify specific skills to improve based on current performance. Suggest aim training routines, movement techniques, game sense improvements, or mechanical skills that could elevate gameplay." },
  ],
  'Multiplayer Sports': [
    { id: 'story_so_far', title: 'Story So Far', type: 'story', instruction: "Provide a concise summary of the main plot events that have occurred strictly up to the estimated game progress. Do not mention, hint at, or allude to any future events, characters, or plot twists. The summary should read like a journal entry of what has *already happened*." },
    { id: 'competitive_strategy', title: 'Competitive Strategy', type: 'strategies', instruction: "Analyze the competitive landscape and suggest strategies for ranked/competitive play. Consider meta shifts, opponent tendencies, and advanced tactics that separate good players from great ones." },
    { id: 'team_synergy', title: 'Team Synergy', type: 'strategies', instruction: "Provide advice on building effective team compositions and strategies. Suggest player combinations, communication protocols, and how to maximize team chemistry and coordination." },
    { id: 'performance_optimization', title: 'Performance Optimization', type: 'tips', instruction: "Offer specific tips for improving individual and team performance. Include practice routines, skill development priorities, and how to adapt to different opponents and playstyles." },
    { id: 'ranked_progression', title: 'Ranked Progression', type: 'walkthrough', instruction: "Outline a strategic approach to climbing ranks. Suggest focus areas, common mistakes to avoid, and how to maintain consistency in competitive matches." },
  ],
  'Racing': [
    { id: 'story_so_far', title: 'Story So Far', type: 'story', instruction: "Provide a concise summary of the main plot events that have occurred strictly up to the estimated game progress. Do not mention, hint at, or allude to any future events, characters, or plot twists. The summary should read like a journal entry of what has *already happened*." },
    { id: 'vehicle_tuning', title: 'Vehicle Tuning', type: 'strategies', instruction: "Analyze the current vehicle setup and suggest tuning adjustments. Consider track characteristics, weather conditions, and racing style to recommend optimal configurations for current or upcoming races." },
    { id: 'track_strategy', title: 'Track Strategy', type: 'strategies', instruction: "Provide detailed racing strategies for current or upcoming tracks. Include braking points, racing lines, overtaking opportunities, and how to handle specific track sections or challenges." },
    { id: 'race_craft', title: 'Race Craft', type: 'tips', instruction: "Offer advanced racing techniques and strategies. Include defensive driving, overtaking tactics, pit stop strategies, and how to manage tire wear and fuel consumption effectively." },
    { id: 'championship_focus', title: 'Championship Focus', type: 'walkthrough', instruction: "Outline strategic priorities for the current championship or season. Suggest which races to focus on, points management strategies, and how to maximize championship potential." },
  ],
  'Fighting': [
    { id: 'story_so_far', title: 'Story So Far', type: 'story', instruction: "Provide a concise summary of the main plot events that have occurred strictly up to the estimated game progress. Do not mention, hint at, or allude to any future events, characters, or plot twists. The summary should read like a journal entry of what has *already happened*." },
    { id: 'character_analysis', title: 'Character Analysis', type: 'strategies', instruction: "Analyze the current character's strengths, weaknesses, and optimal playstyle. Suggest advanced techniques, combo routes, and how to maximize the character's potential in different matchups." },
    { id: 'matchup_strategy', title: 'Matchup Strategy', type: 'strategies', instruction: "Provide detailed matchup strategies against common opponents. Include character-specific tactics, counter-strategies, and how to exploit opponent weaknesses while covering your own." },
    { id: 'execution_training', title: 'Execution Training', type: 'tips', instruction: "Suggest specific training routines to improve execution and consistency. Include combo practice, timing drills, and techniques to master difficult inputs or advanced mechanics." },
    { id: 'tournament_prep', title: 'Tournament Prep', type: 'tips', instruction: "Outline preparation strategies for competitive play. Include mental preparation, warm-up routines, and how to maintain peak performance during extended tournament sessions." },
  ],
  'Battle Royale': [
    { id: 'story_so_far', title: 'Story So Far', type: 'story', instruction: "Provide a concise summary of the main plot events that have occurred strictly up to the estimated game progress. Do not mention, hint at, or allude to any future events, characters, or plot twists. The summary should read like a journal entry of what has *already happened*." },
    { id: 'drop_strategy', title: 'Drop Strategy', type: 'strategies', instruction: "Analyze optimal landing locations and early-game strategies. Consider loot quality, player density, and how to maximize survival chances while securing good equipment for the mid-game." },
    { id: 'positioning_tactics', title: 'Positioning Tactics', type: 'strategies', instruction: "Provide advanced positioning strategies for different phases of the match. Include rotation timing, zone management, and how to maintain advantageous positions while avoiding third-party situations." },
    { id: 'loadout_optimization', title: 'Loadout Optimization', type: 'strategies', instruction: "Suggest optimal weapon combinations and equipment priorities. Consider current meta, personal playstyle, and how to adapt loadouts based on available loot and enemy compositions." },
    { id: 'endgame_strategy', title: 'Endgame Strategy', type: 'strategies', instruction: "Offer detailed endgame tactics and positioning. Include final circle strategies, engagement timing, and how to maximize win probability in high-pressure final situations." },
  ],
  'MMORPG': [
    { id: 'story_so_far', title: 'Story So Far', type: 'story', instruction: "Provide a concise summary of the main plot events that have occurred strictly up to the estimated game progress. Do not mention, hint at, or allude to any future events, characters, or plot twists. The summary should read like a journal entry of what has *already happened*." },
    { id: 'class_optimization', title: 'Class Optimization', type: 'strategies', instruction: "Analyze the current class build and suggest optimizations. Include talent choices, gear priorities, stat allocation, and how to maximize effectiveness for current content and playstyle." },
    { id: 'content_progression', title: 'Content Progression', type: 'walkthrough', instruction: "Provide a roadmap for progressing through current and upcoming content. Suggest priority activities, gear upgrades, and how to efficiently advance through dungeons, raids, or PvP content." },
    { id: 'economy_management', title: 'Economy Management', type: 'tips', instruction: "Offer strategies for managing in-game resources and economy. Include gold-making tips, auction house strategies, and how to optimize spending for maximum character progression." },
    { id: 'social_strategies', title: 'Social Strategies', type: 'tips', instruction: "Suggest approaches for building effective guild relationships and finding groups. Include communication tips, role expectations, and how to become a valuable team member in group content." },
  ],
  'Puzzle': [
    { id: 'story_so_far', title: 'Story So Far', type: 'story', instruction: "Provide a concise summary of the main plot events that have occurred strictly up to the estimated game progress. Do not mention, hint at, or allude to any future events, characters, or plot twists. The summary should read like a journal entry of what has *already happened*." },
    { id: 'puzzle_patterns', title: 'Puzzle Patterns', type: 'strategies', instruction: "Identify common puzzle patterns and solution strategies. Provide systematic approaches to different puzzle types and how to recognize key elements that lead to solutions." },
    { id: 'logical_reasoning', title: 'Logical Reasoning', type: 'strategies', instruction: "Offer advanced logical reasoning techniques and problem-solving methods. Include how to break down complex puzzles, eliminate possibilities, and approach problems systematically." },
    { id: 'time_optimization', title: 'Time Optimization', type: 'tips', instruction: "Suggest strategies for solving puzzles more efficiently. Include speed-solving techniques, pattern recognition shortcuts, and how to minimize trial-and-error approaches." },
    { id: 'difficulty_progression', title: 'Difficulty Progression', type: 'tips', instruction: "Outline strategies for tackling increasingly difficult puzzles. Include preparation methods, skill development priorities, and how to build confidence for challenging content." },
  ],
  'Horror': [
    { id: 'story_so_far', title: 'Story So Far', type: 'story', instruction: "Provide a concise summary of the main plot events that have occurred strictly up to the estimated game progress. Do not mention, hint at, or allude to any future events, characters, or plot twists. The summary should read like a journal entry of what has *already happened*." },
    { id: 'survival_strategies', title: 'Survival Strategies', type: 'strategies', instruction: "Provide comprehensive survival tactics for the current situation. Include resource management, safe zone identification, and how to navigate dangerous areas while minimizing risk." },
    { id: 'enemy_behavior', title: 'Enemy Behavior', type: 'strategies', instruction: "Analyze enemy patterns and suggest counter-strategies. Include how to avoid detection, exploit enemy weaknesses, and use the environment to your advantage against threats." },
    { id: 'atmosphere_navigation', title: 'Atmosphere Navigation', type: 'tips', instruction: "Offer strategies for managing the psychological aspects of horror gameplay. Include how to maintain composure, use audio cues effectively, and navigate tense situations." },
    { id: 'resource_management', title: 'Resource Management', type: 'tips', instruction: "Suggest optimal resource allocation and conservation strategies. Include inventory management, crafting priorities, and how to maximize survival potential with limited supplies." },
  ],
};


```n

## src\utils\memoryManager.ts

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\utils\memoryManager.ts.Extension.TrimStart('.'))

// ========================================
// MEMORY MANAGER FOR SCALABILITY
// ========================================
// Centralized memory management to prevent leaks and optimize performance
// for 100K+ users

interface MemoryStats {
  usedJSHeapSize: number;
  totalJSHeapSize: number;
  jsHeapSizeLimit: number;
  usagePercentage: number;
}

interface CleanupFunction {
  id: string;
  cleanup: () => void;
  priority: number; // Higher number = higher priority
}

class MemoryManager {
  private static instance: MemoryManager;
  private cleanupFunctions: Map<string, CleanupFunction> = new Map();
  private intervals: Set<NodeJS.Timeout> = new Set();
  private timeouts: Set<NodeJS.Timeout> = new Set();
  private eventListeners: Map<string, { element: EventTarget; event: string; handler: EventListener }> = new Map();
  private abortControllers: Set<AbortController> = new Set();
  private isDestroyed = false;
  private memoryCheckInterval: NodeJS.Timeout | null = null;
  private readonly MEMORY_THRESHOLD = 80; // 80% memory usage threshold
  private readonly CLEANUP_INTERVAL = 30000; // 30 seconds

  static getInstance(): MemoryManager {
    if (!MemoryManager.instance) {
      MemoryManager.instance = new MemoryManager();
    }
    return MemoryManager.instance;
  }

  constructor() {
    this.startMemoryMonitoring();
    this.setupGlobalCleanup();
  }

  // âœ… SCALABILITY: Register cleanup function
  registerCleanup(id: string, cleanup: () => void, priority: number = 1): void {
    if (this.isDestroyed) {
      return;
    }
    
    this.cleanupFunctions.set(id, { id, cleanup, priority });
  }

  // âœ… SCALABILITY: Unregister cleanup function
  unregisterCleanup(id: string): void {
    this.cleanupFunctions.delete(id);
  }

  // âœ… SCALABILITY: Track interval for cleanup
  trackInterval(interval: NodeJS.Timeout): void {
    if (this.isDestroyed) {
      clearInterval(interval);
      return;
    }
    this.intervals.add(interval);
  }

  // âœ… SCALABILITY: Track timeout for cleanup
  trackTimeout(timeout: NodeJS.Timeout): void {
    if (this.isDestroyed) {
      clearTimeout(timeout);
      return;
    }
    this.timeouts.add(timeout);
  }

  // âœ… SCALABILITY: Track event listener for cleanup
  trackEventListener(
    id: string, 
    element: EventTarget, 
    event: string, 
    handler: EventListener
  ): void {
    if (this.isDestroyed) {
      return;
    }
    
    this.eventListeners.set(id, { element, event, handler });
  }

  // âœ… SCALABILITY: Track abort controller for cleanup
  trackAbortController(controller: AbortController): void {
    if (this.isDestroyed) {
      controller.abort();
      return;
    }
    this.abortControllers.add(controller);
  }

  // âœ… SCALABILITY: Get memory statistics
  getMemoryStats(): MemoryStats | null {
    if (typeof performance === 'undefined' || !('memory' in performance)) {
      return null;
    }

    const memory = (performance as any).memory;
    const usagePercentage = (memory.usedJSHeapSize / memory.jsHeapSizeLimit) * 100;

    return {
      usedJSHeapSize: memory.usedJSHeapSize,
      totalJSHeapSize: memory.totalJSHeapSize,
      jsHeapSizeLimit: memory.jsHeapSizeLimit,
      usagePercentage
    };
  }

  // âœ… SCALABILITY: Check if memory usage is high
  isMemoryHigh(): boolean {
    const stats = this.getMemoryStats();
    return stats ? stats.usagePercentage > this.MEMORY_THRESHOLD : false;
  }

  // âœ… SCALABILITY: Force garbage collection (if available)
  forceGarbageCollection(): void {
    if (typeof window !== 'undefined' && 'gc' in window) {
      try {
        (window as any).gc();
        console.log('ðŸ§¹ [MemoryManager] Forced garbage collection');
      } catch (error) {
        console.warn('Failed to force garbage collection:', error);
      }
    }
  }

  // âœ… SCALABILITY: Start memory monitoring
  private startMemoryMonitoring(): void {
    if (this.isDestroyed) {
      return;
    }
    
    this.memoryCheckInterval = setInterval(() => {
      if (this.isDestroyed) {
        return;
      }
      
      const stats = this.getMemoryStats();
      if (stats && stats.usagePercentage > this.MEMORY_THRESHOLD) {
        console.warn(`âš ï¸ [MemoryManager] High memory usage: ${stats.usagePercentage.toFixed(2)}%`);
        this.performEmergencyCleanup();
      }
    }, this.CLEANUP_INTERVAL);
  }

  // âœ… SCALABILITY: Emergency cleanup when memory is high
  private performEmergencyCleanup(): void {
    console.log('ðŸš¨ [MemoryManager] Performing emergency cleanup...');
    
    // Clear old intervals
    this.intervals.forEach(interval => {
      try {
        clearInterval(interval);
      } catch (error) {
        console.warn('Error clearing interval:', error);
      }
    });
    this.intervals.clear();
    
    // Clear old timeouts
    this.timeouts.forEach(timeout => {
      try {
        clearTimeout(timeout);
      } catch (error) {
        console.warn('Error clearing timeout:', error);
      }
    });
    this.timeouts.clear();
    
    // Abort pending requests
    this.abortControllers.forEach(controller => {
      try {
        controller.abort();
      } catch (error) {
        console.warn('Error aborting controller:', error);
      }
    });
    this.abortControllers.clear();
    
    // Force garbage collection
    this.forceGarbageCollection();
    
    console.log('ðŸ§¹ [MemoryManager] Emergency cleanup completed');
  }

  // âœ… SCALABILITY: Setup global cleanup
  private setupGlobalCleanup(): void {
    const cleanup = () => {
      if (!this.isDestroyed) {
        this.cleanup();
      }
    };
    
    window.addEventListener('beforeunload', cleanup);
    window.addEventListener('pagehide', cleanup);
  }

  // âœ… SCALABILITY: Main cleanup method
  cleanup(): void {
    if (this.isDestroyed) {
      return;
    }
    
    console.log('ðŸ§¹ [MemoryManager] Starting cleanup...');
    
    this.isDestroyed = true;
    
    // Stop memory monitoring
    if (this.memoryCheckInterval) {
      clearInterval(this.memoryCheckInterval);
      this.memoryCheckInterval = null;
    }
    
    // Clear all intervals
    this.intervals.forEach(interval => {
      try {
        clearInterval(interval);
      } catch (error) {
        console.warn('Error clearing interval:', error);
      }
    });
    this.intervals.clear();
    
    // Clear all timeouts
    this.timeouts.forEach(timeout => {
      try {
        clearTimeout(timeout);
      } catch (error) {
        console.warn('Error clearing timeout:', error);
      }
    });
    this.timeouts.clear();
    
    // Remove all event listeners
    this.eventListeners.forEach(({ element, event, handler }) => {
      try {
        element.removeEventListener(event, handler);
      } catch (error) {
        console.warn('Error removing event listener:', error);
      }
    });
    this.eventListeners.clear();
    
    // Abort all pending requests
    this.abortControllers.forEach(controller => {
      try {
        controller.abort();
      } catch (error) {
        console.warn('Error aborting controller:', error);
      }
    });
    this.abortControllers.clear();
    
    // Run registered cleanup functions (sorted by priority)
    const sortedCleanups = Array.from(this.cleanupFunctions.values())
      .sort((a, b) => b.priority - a.priority);
    
    sortedCleanups.forEach(({ id, cleanup }) => {
      try {
        cleanup();
      } catch (error) {
        console.error(`Error in cleanup function ${id}:`, error);
      }
    });
    this.cleanupFunctions.clear();
    
    // Force garbage collection
    this.forceGarbageCollection();
    
    console.log('ðŸ§¹ [MemoryManager] Cleanup completed');
  }

  // âœ… SCALABILITY: Get cleanup statistics
  getCleanupStats(): {
    intervals: number;
    timeouts: number;
    eventListeners: number;
    abortControllers: number;
    cleanupFunctions: number;
    memoryStats: MemoryStats | null;
  } {
    return {
      intervals: this.intervals.size,
      timeouts: this.timeouts.size,
      eventListeners: this.eventListeners.size,
      abortControllers: this.abortControllers.size,
      cleanupFunctions: this.cleanupFunctions.size,
      memoryStats: this.getMemoryStats()
    };
  }
}

// Export singleton instance
export const memoryManager = MemoryManager.getInstance();

// Export utility functions
export const createTrackedInterval = (callback: () => void, delay: number): NodeJS.Timeout => {
  const interval = setInterval(callback, delay);
  memoryManager.trackInterval(interval);
  return interval;
};

export const createTrackedTimeout = (callback: () => void, delay: number): NodeJS.Timeout => {
  const timeout = setTimeout(callback, delay);
  memoryManager.trackTimeout(timeout);
  return timeout;
};

export const addTrackedEventListener = (
  id: string,
  element: EventTarget,
  event: string,
  handler: EventListener
): void => {
  element.addEventListener(event, handler);
  memoryManager.trackEventListener(id, element, event, handler);
};

export const createTrackedAbortController = (): AbortController => {
  const controller = new AbortController();
  memoryManager.trackAbortController(controller);
  return controller;
};



```n

## src\App.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\App.tsx.Extension.TrimStart('.'))

import { useState, useEffect, useRef } from 'react';
import { AuthState, ConnectionStatus, AppState, ActiveModal } from './types';
import { authService } from './services/authService';
import { onboardingService } from './services/onboardingService';
import { connect, disconnect } from './services/websocketService';
import { supabase } from './lib/supabase';
import AppRouter from './components/AppRouter';
import { ToastContainer } from './components/ui/ToastContainer';

function App() {
  const [authState, setAuthState] = useState<AuthState>({
    user: null,
    isLoading: true,
    error: null,
  });
  const [hasEverLoggedIn, setHasEverLoggedIn] = useState(false);
  const [appState, setAppState] = useState<AppState>({
    view: 'landing',
    onboardingStatus: 'initial',
    activeSubView: 'chat',
    isConnectionModalOpen: false,
    isHandsFreeModalOpen: false,
    isSettingsModalOpen: false,
    isCreditModalOpen: false,
    isOtakuDiaryModalOpen: false,
    isWishlistModalOpen: false,
    activeModal: null,
    isHandsFreeMode: false,
    showUpgradeScreen: false,
    showDailyCheckin: false,
    currentAchievement: null,
    loadingMessages: [],
    isCooldownActive: false,
    isFirstTime: true,
    contextMenu: null,
    feedbackModalState: null,
    confirmationModal: null,
    trialEligibility: null,
  });
  const [activeModal, setActiveModal] = useState<ActiveModal>(null);
  const [settingsOpen, setSettingsOpen] = useState(false);
  const [showLogoutConfirm, setShowLogoutConfirm] = useState(false);
  const [isInitializing, setIsInitializing] = useState(true);
  const [connectionStatus, setConnectionStatus] = useState<ConnectionStatus>(ConnectionStatus.DISCONNECTED);
  const [connectionError, setConnectionError] = useState<string | null>(null);

  const mainAppMessageHandlerRef = useRef<((_data: any) => void) | null>(null);
  const authSubscriptionRef = useRef<(() => void) | null>(null);
  const isProcessingAuthRef = useRef(false);
  const isManualNavigationRef = useRef(false); // Track manual onboarding navigation

  useEffect(() => {
    console.log('ðŸŽ¯ [App] App state changed:', {
      view: appState.view,
      onboardingStatus: appState.onboardingStatus,
      hasUser: !!authState.user,
      userEmail: authState.user?.email
    });
  }, [appState.view, appState.onboardingStatus, authState.user]);

  useEffect(() => {
    if (authState.user && !authState.isLoading) {
      const updateAppState = async () => {
        try {
          const { error } = await supabase
            .from('users')
            .update({
              app_state: {
                view: appState.view,
                onboardingStatus: appState.onboardingStatus,
                activeSubView: appState.activeSubView,
                isHandsFreeMode: appState.isHandsFreeMode,
                showUpgradeScreen: appState.showUpgradeScreen,
                showDailyCheckin: appState.showDailyCheckin,
                isFirstTime: appState.isFirstTime,
                lastActivity: Date.now()
              }
            })
            .eq('auth_user_id', authState.user!.authUserId);
          if (error) {
            console.error('Failed to update app state in Supabase:', error);
          }
        } catch (error) {
          console.error('Error updating app state:', error);
        }
      };
      updateAppState();
    }
  }, [appState.view, appState.onboardingStatus, appState.activeSubView, appState.isHandsFreeMode, appState.showUpgradeScreen, appState.showDailyCheckin, appState.isFirstTime, authState.user]);

  useEffect(() => {
    let isMounted = true;
    const processAuthState = async (newAuthState: AuthState) => {
      if (isProcessingAuthRef.current || newAuthState.isLoading) {
        return;
      }
      
      // Skip auto-navigation if we're manually navigating through onboarding
      if (isManualNavigationRef.current) {
        console.log('ðŸŽ¯ [App] Skipping auto-navigation due to manual navigation flag');
        isManualNavigationRef.current = false; // Reset the flag
        return;
      }
      
      isProcessingAuthRef.current = true;
      console.log('ðŸŽ¯ [App] Processing auth state:', {
        hasUser: !!newAuthState.user,
        userEmail: newAuthState.user?.email,
        onboardingCompleted: newAuthState.user?.onboardingCompleted
      });
      try {
        if (newAuthState.user) {
          setHasEverLoggedIn(true);
          const savedAppState = newAuthState.user.appState || {};
          const nextStep = await onboardingService.getNextOnboardingStep(newAuthState.user.authUserId);
          console.log('ðŸŽ¯ [App] Next onboarding step:', nextStep);
          
          // Returning users: Skip onboarding if they've completed it before
          // This ensures users go straight to chat on login/refresh
          const isReturningUser = nextStep === 'complete';
          
          if (isMounted) {
            if (isReturningUser) {
              // Returning user - skip all onboarding, go to main app
              console.log('ðŸŽ¯ [App] Returning user detected - skipping onboarding');
              setAppState((prev: AppState) => ({
                ...prev,
                ...savedAppState,
                view: 'app',
                onboardingStatus: 'complete',
              }));
            } else {
              // New user or incomplete onboarding - continue onboarding flow
              console.log('ðŸŽ¯ [App] New user or incomplete onboarding - continuing from:', nextStep);
              setAppState((prev: AppState) => ({
                ...prev,
                ...savedAppState,
                view: 'app',
                onboardingStatus: nextStep,
              }));
            }
            setIsInitializing(false);
          }
        } else {
          if (isMounted) {
            setAppState((prev: AppState) => ({
              ...prev,
              view: hasEverLoggedIn ? 'app' : 'landing',
              onboardingStatus: 'login'
            }));
            setIsInitializing(false);
          }
        }
      } catch (error) {
        console.error('ðŸŽ¯ [App] Error during auth processing:', error);
        if (isMounted) {
          setIsInitializing(false);
        }
      } finally {
        isProcessingAuthRef.current = false;
      }
    };
    const unsubscribe = authService.subscribe((newAuthState) => {
      setAuthState(newAuthState);
      if (isMounted && !newAuthState.isLoading) {
        processAuthState(newAuthState);
      }
    });
    authSubscriptionRef.current = unsubscribe;
    return () => {
      isMounted = false;
      if (authSubscriptionRef.current) {
        authSubscriptionRef.current();
      }
    };
  }, []);

  useEffect(() => {
    const timeout = setTimeout(() => {
      if (isInitializing) {
        setIsInitializing(false);
      }
    }, 10000);
    return () => clearTimeout(timeout);
  }, [isInitializing]);

  useEffect(() => {
    if (window.location.pathname === '/auth/callback') {
      // The AuthCallback component will handle the authentication
    }
  }, []);

  const handleGetStarted = () => {
    setAppState((prev: AppState) => ({ ...prev, view: 'app', onboardingStatus: 'login' }));
  };

  const handleLoginComplete = async () => {
    console.log('ðŸŽ¯ [App] Email login completed, setting view to app');
    setAppState((prev: AppState) => {
      const newState: AppState = { ...prev, view: 'app', onboardingStatus: 'loading' };
      console.log('ðŸŽ¯ [App] Setting view to app with loading status:', newState);
      return newState;
    });
  };

  const handleBackToLanding = () => {
    console.log('ðŸ”™ [App] Back to landing clicked, resetting to landing page');
    setAppState((prev: AppState) => ({
      ...prev,
      view: 'landing',
      onboardingStatus: 'initial'
    }));
  };

  const handleOAuthSuccess = () => {
    window.history.replaceState({}, document.title, '/');
    setAppState((prev: AppState) => ({ ...prev, view: 'app' }));
  };

  const handleOAuthError = (error: string) => {
    console.error('ðŸ” [App] OAuth authentication error:', error);
    setAppState((prev: AppState) => ({ ...prev, view: 'landing' }));
  };

  const handleLogout = () => {
    setShowLogoutConfirm(true);
  };

  const confirmLogout = async () => {
    console.log('ðŸŽ¯ [App] Starting logout process...');
    setShowLogoutConfirm(false);
    
    // Preserve welcome screen flag (user has seen it once, don't show again)
    const welcomeShown = localStorage.getItem('otakon_welcome_shown');
    
    // Sign out (clears Supabase session and localStorage)
    await authService.signOut();
    
    // Restore welcome screen flag after signOut cleared localStorage
    if (welcomeShown) {
      localStorage.setItem('otakon_welcome_shown', welcomeShown);
    }
    
    setAppState((prev: AppState) => ({
      ...prev,
      view: 'app', // Set to app view so landing page check doesn't trigger
      onboardingStatus: 'login' // This will show login screen
    }));
    setAuthState({ user: null, isLoading: false, error: null });
    isProcessingAuthRef.current = false;
    console.log('ðŸŽ¯ [App] Logout completed, showing login screen');
  };

  const openModal = (modal: ActiveModal) => {
    setActiveModal(modal);
  };

  const closeModal = () => {
    setActiveModal(null);
  };

  const handleOnboardingComplete = async (step: string) => {
    console.log('ðŸŽ¯ [App] Onboarding step completed:', step);
    if (authState.user) {
      const nextStep = await onboardingService.getNextOnboardingStep(authState.user.authUserId);
      setAppState((prev: AppState) => ({
        ...prev,
        onboardingStatus: nextStep
      }));
      onboardingService.updateOnboardingStatus(authState.user.authUserId, step as any)
        .catch(error => console.error('ðŸŽ¯ [App] Error updating onboarding status:', error));
    }
  };

  const handleConnect = (code: string) => {
    console.log('ðŸ”— [App] Connecting with code:', code);
    setConnectionError(null);
    setConnectionStatus(ConnectionStatus.CONNECTING);
    connect(
      code,
      () => {
        console.log('ðŸ”— [App] Connection opened');
        setConnectionStatus(ConnectionStatus.CONNECTED);
      },
      (data) => {
        console.log('ðŸ”— [App] Message received:', data);
        handleWebSocketMessage(data);
      },
      (error) => {
        console.error('ðŸ”— [App] Connection error:', error);
        setConnectionError(error);
        setConnectionStatus(ConnectionStatus.ERROR);
      },
      () => {
        console.log('ðŸ”— [App] Connection closed');
        setConnectionStatus(ConnectionStatus.DISCONNECTED);
      }
    );
  };

  const handleConnectionSuccess = async () => {
    console.log('ðŸ”— [App] Connection success callback triggered');
    setConnectionStatus(ConnectionStatus.CONNECTED);
    setConnectionError(null);
    if (authState.user) {
      try {
        // Wait for the database update to complete
        await onboardingService.updateOnboardingStatus(authState.user.authUserId, 'how-to-use', {
          has_seen_how_to_use: true,
          pc_connected: true,
          pc_connection_skipped: false
        });
        console.log('ðŸ”— [App] Database updated successfully');
        
        // Set flag to prevent auth subscription from overriding navigation
        isManualNavigationRef.current = true;
        
        // Then refresh user data from database
        await authService.refreshUser();
        console.log('ðŸ”— [App] User data refreshed');
        
        // Finally, navigate to the next screen
        console.log('ðŸ”— [App] Navigating to features-connected splash screen after connection success');
        setAppState((prev: AppState) => ({
          ...prev,
          onboardingStatus: 'features-connected'
        }));
      } catch (error) {
        console.error('ðŸ”— [App] Failed to update onboarding status:', error);
        isManualNavigationRef.current = false; // Reset flag on error
      }
    }
  };

  const handleDisconnect = () => {
    console.log('ðŸ”— [App] Disconnecting...');
    disconnect();
    setConnectionStatus(ConnectionStatus.DISCONNECTED);
    setConnectionError(null);
  };

  const handleWebSocketMessage = (data: any) => {
    console.log('ðŸ”— [App] Processing WebSocket message:', data);
    if (data.type === 'screenshot_batch') {
      console.log("ðŸ“¸ Processing screenshot batch:", data);
      const batchData = data.payload || data;
      if (batchData.images && batchData.images.length > 0) {
        batchData.images.forEach((imgSrc: string, index: number) => {
          const properDataUrl = imgSrc.startsWith('data:') ? imgSrc : `data:image/png;base64,${imgSrc}`;
          if (mainAppMessageHandlerRef.current) {
            mainAppMessageHandlerRef.current({
              type: 'screenshot',
              dataUrl: properDataUrl,
              index: index
            });
          }
        });
      }
    } else if (data.type === 'screenshot_success' && data.success?.dataUrl) {
      console.log("ðŸ“¸ Processing individual screenshot:", data);
      const properDataUrl = data.success.dataUrl.startsWith('data:')
        ? data.success.dataUrl
        : `data:image/png;base64,${data.success.dataUrl}`;
      if (mainAppMessageHandlerRef.current) {
        mainAppMessageHandlerRef.current({
          type: 'screenshot',
          dataUrl: properDataUrl
        });
      }
    }
  };

  const handleSkipConnection = async () => {
    console.log('ðŸ”— [App] Skipping PC connection, going to pro-features');
    if (authState.user) {
      try {
        // Wait for the database update to complete
        await onboardingService.updateOnboardingStatus(authState.user.authUserId, 'how-to-use', {
          has_seen_how_to_use: true,
          pc_connected: false,
          pc_connection_skipped: true
        });
        console.log('ðŸ”— [App] Database updated successfully (skipped)');
        
        // Set flag to prevent auth subscription from overriding navigation
        isManualNavigationRef.current = true;
        
        // Then refresh user data from database
        await authService.refreshUser();
        console.log('ðŸ”— [App] User data refreshed');
        
        // Finally, navigate to the next screen
        setAppState((prev: AppState) => ({
          ...prev,
          onboardingStatus: 'pro-features'
        }));
      } catch (error) {
        console.error('ðŸ”— [App] Failed to update onboarding status:', error);
        isManualNavigationRef.current = false; // Reset flag on error
      }
    }
  };

  const handleProfileSetupComplete = async (profileData: any) => {
    console.log('ðŸŽ¯ [App] Profile setup completed');
    if (authState.user) {
      try {
        // Use 'profile-setup' step to properly set has_profile_setup flag
        await onboardingService.updateOnboardingStatus(authState.user.authUserId, 'profile-setup', profileData);
        console.log('ðŸŽ¯ [App] Profile setup data saved');
        
        // Set flag to prevent auth subscription from overriding
        isManualNavigationRef.current = true;
        
        // Refresh user data to update hasProfileSetup flag
        await authService.refreshUser();
        console.log('ðŸŽ¯ [App] User data refreshed after profile setup');
      } catch (error) {
        console.error('ðŸŽ¯ [App] Failed to save profile setup:', error);
        isManualNavigationRef.current = false;
      }
    }
  };

  const handleProfileSetupSkip = async () => {
    console.log('ðŸŽ¯ [App] Profile setup skipped');
    if (authState.user) {
      try {
        // Use 'profile-setup' step to properly set has_profile_setup flag
        await onboardingService.updateOnboardingStatus(authState.user.authUserId, 'profile-setup', {
          profile_setup_skipped: true
        });
        console.log('ðŸŽ¯ [App] Profile setup skipped, flag saved');
        
        // Set flag to prevent auth subscription from overriding
        isManualNavigationRef.current = true;
        
        // Refresh user data to update hasProfileSetup flag
        await authService.refreshUser();
        console.log('ðŸŽ¯ [App] User data refreshed after skipping profile setup');
      } catch (error) {
        console.error('ðŸŽ¯ [App] Failed to skip profile setup:', error);
        isManualNavigationRef.current = false;
      }
    }
  };

  return (
    <>
      <AppRouter
        appState={appState}
        authState={authState}
        activeModal={activeModal}
        settingsOpen={settingsOpen}
        showLogoutConfirm={showLogoutConfirm}
        isInitializing={isInitializing}
        hasEverLoggedIn={hasEverLoggedIn}
        connectionStatus={connectionStatus}
        connectionError={connectionError}
        handleGetStarted={handleGetStarted}
        handleLoginComplete={handleLoginComplete}
        handleBackToLanding={handleBackToLanding}
        handleOAuthSuccess={handleOAuthSuccess}
        handleOAuthError={handleOAuthError}
        handleLogout={handleLogout}
        confirmLogout={confirmLogout}
        openModal={openModal}
        closeModal={closeModal}
        handleOnboardingComplete={handleOnboardingComplete}
        handleConnect={handleConnect}
        handleConnectionSuccess={handleConnectionSuccess}
        handleDisconnect={handleDisconnect}
        handleSkipConnection={handleSkipConnection}
        handleProfileSetupComplete={handleProfileSetupComplete}
        handleProfileSetupSkip={handleProfileSetupSkip}
        setSettingsOpen={setSettingsOpen}
        setShowLogoutConfirm={setShowLogoutConfirm}
        mainAppMessageHandlerRef={mainAppMessageHandlerRef}
        isManualNavigationRef={isManualNavigationRef}
      />
      <ToastContainer />
    </>
  );
}

export default App;


```n

## src\main.tsx

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\src\main.tsx.Extension.TrimStart('.'))

import React from 'react'
import ReactDOM from 'react-dom/client'
import App from './App.tsx'
import ErrorBoundary from './components/ErrorBoundary.tsx'
import './styles/globals.css'

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <ErrorBoundary>
      <App />
    </ErrorBoundary>
  </React.StrictMode>,
)

```n

## debug-conversations.js

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\debug-conversations.js.Extension.TrimStart('.'))

// Debug script to check what's in localStorage
// Run this in browser console

console.log('=== CONVERSATION DEBUG ===');

// Check localStorage
const conversations = localStorage.getItem('otakon_conversations');
console.log('localStorage conversations:', conversations);

if (conversations) {
  try {
    const parsed = JSON.parse(conversations);
    console.log('Parsed conversations:', parsed);
    console.log('Number of conversations:', Object.keys(parsed).length);
    Object.values(parsed).forEach((conv, index) => {
      console.log(`Conversation ${index + 1}:`, {
        id: conv.id,
        title: conv.title,
        messageCount: conv.messages?.length || 0,
        createdAt: new Date(conv.createdAt).toLocaleString()
      });
    });
  } catch (error) {
    console.error('Error parsing conversations:', error);
  }
} else {
  console.log('No conversations found in localStorage');
}

// Check all localStorage keys
console.log('All localStorage keys:', Object.keys(localStorage));

// Check if there are any conversation-related keys
const conversationKeys = Object.keys(localStorage).filter(key => 
  key.includes('conversation') || key.includes('chat') || key.includes('otakon')
);
console.log('Conversation-related keys:', conversationKeys);


```n

## deploy.sh

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\deploy.sh.Extension.TrimStart('.'))

#!/bin/bash

# Production Deployment Script for Otagon App
# This script builds and deploys the optimized app

echo "ðŸš€ Starting Otagon Production Deployment..."

# Check if we're in the right directory
if [ ! -f "package.json" ]; then
    echo "âŒ Error: package.json not found. Please run from the project root."
    exit 1
fi

# Install dependencies
echo "ðŸ“¦ Installing dependencies..."
npm install

# Run linting and type checking
echo "ðŸ” Running linting and type checking..."
npm run lint || echo "âš ï¸ Linting issues found, but continuing..."

# Build the app
echo "ðŸ—ï¸ Building the app..."
npm run build

if [ $? -ne 0 ]; then
    echo "âŒ Build failed. Please fix errors before deploying."
    exit 1
fi

# Check if Firebase is configured
if [ ! -f "firebase.json" ]; then
    echo "âŒ Error: firebase.json not found. Please configure Firebase first."
    exit 1
fi

# Deploy to Firebase
echo "ðŸš€ Deploying to Firebase..."
firebase deploy --only hosting

if [ $? -eq 0 ]; then
    echo "âœ… Deployment successful!"
    echo "ðŸŒ Your app is now live at: https://your-project-id.web.app"
else
    echo "âŒ Deployment failed. Please check the logs above."
    exit 1
fi

# Run post-deployment checks
echo "ðŸ” Running post-deployment checks..."

# Check if the app is accessible
echo "ðŸ“Š Checking app accessibility..."
curl -s -o /dev/null -w "%{http_code}" https://your-project-id.web.app

if [ $? -eq 0 ]; then
    echo "âœ… App is accessible"
else
    echo "âš ï¸ App accessibility check failed"
fi

echo "ðŸŽ‰ Deployment process complete!"
echo ""
echo "ðŸ“‹ Next steps:"
echo "1. Test the live app thoroughly"
echo "2. Monitor performance metrics"
echo "3. Set up error tracking (Sentry, LogRocket, etc.)"
echo "4. Configure analytics (Google Analytics, Mixpanel, etc.)"
echo "5. Set up monitoring alerts"


```n

## eslint.config.js

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\eslint.config.js.Extension.TrimStart('.'))

import js from '@eslint/js';
import typescript from '@typescript-eslint/eslint-plugin';
import tsParser from '@typescript-eslint/parser';
import reactHooks from 'eslint-plugin-react-hooks';
import reactRefresh from 'eslint-plugin-react-refresh';

export default [
  // Ignore patterns
  {
    ignores: [
      'dist/**',
      'build/**',
      'node_modules/**',
      '*.config.js',
      '*.config.ts',
      'public/**',
      'supabase/**',
      'test-*.js',
      'test-suite/**',
      '**/*.test.js',
      'debug-*.js',
      'load-testing/**',
      'src/lib/db.js'
    ],
  },
  
  // JavaScript recommended rules
  js.configs.recommended,
  
  // TypeScript configuration
  {
    files: ['**/*.{ts,tsx}'],
    languageOptions: {
      parser: tsParser,
      parserOptions: {
        ecmaVersion: 'latest',
        sourceType: 'module',
        ecmaFeatures: {
          jsx: true
        },
        project: './tsconfig.json'
      },
      globals: {
        console: 'readonly',
        process: 'readonly',
        window: 'readonly',
        document: 'readonly',
        navigator: 'readonly',
        localStorage: 'readonly',
        sessionStorage: 'readonly',
        fetch: 'readonly',
        Headers: 'readonly',
        NodeJS: 'readonly',
        performance: 'readonly',
        speechSynthesis: 'readonly',
        alert: 'readonly',
        Request: 'readonly',
        Response: 'readonly',
        URL: 'readonly',
        URLSearchParams: 'readonly',
        setTimeout: 'readonly',
        clearTimeout: 'readonly',
        setInterval: 'readonly',
        clearInterval: 'readonly',
      }
    },
    plugins: {
      '@typescript-eslint': typescript,
      'react-hooks': reactHooks,
      'react-refresh': reactRefresh
    },
    rules: {
      // Disable base rule in favor of TypeScript version
      'no-unused-vars': 'off',
      
      // TypeScript rules
      '@typescript-eslint/no-unused-vars': ['error', { 
        args: 'all',
        argsIgnorePattern: '^_',
        varsIgnorePattern: '^_',
        caughtErrorsIgnorePattern: '^_',
        ignoreRestSiblings: true
      }],
      '@typescript-eslint/no-explicit-any': 'warn',
      '@typescript-eslint/explicit-module-boundary-types': 'off',
      '@typescript-eslint/no-non-null-assertion': 'warn',
      
      // React Hooks rules
      'react-hooks/rules-of-hooks': 'error',
      'react-hooks/exhaustive-deps': 'warn',
      
      // React Refresh rule
      'react-refresh/only-export-components': ['warn', { 
        allowConstantExport: true 
      }],
      
      // General code quality
      'no-console': ['warn', { allow: ['warn', 'error'] }],
      'prefer-const': 'warn',
      'no-var': 'error',
      'eqeqeq': ['error', 'always', { null: 'ignore' }],
      'curly': ['error', 'all'],
      'no-throw-literal': 'error',
      
      // Best practices
      'no-unused-expressions': 'error',
      'no-duplicate-imports': 'error',
      'no-template-curly-in-string': 'warn',
      'array-callback-return': 'error',
      'no-await-in-loop': 'warn',
      
      // Disabled rules (for now)
      '@typescript-eslint/ban-ts-comment': 'off',
      '@typescript-eslint/no-empty-function': 'off',
    }
  }
];


```n

## firebase.json

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\firebase.json.Extension.TrimStart('.'))

{
  "hosting": {
    "public": "dist",
    "ignore": [
      "firebase.json",
      "**/.*",
      "**/node_modules/**"
    ],
    "rewrites": [
      {
        "source": "**",
        "destination": "/index.html"
      }
    ],
    "headers": [
      {
        "source": "/sw.js",
        "headers": [
          {
            "key": "Cache-Control",
            "value": "no-cache"
          }
        ]
      },
      {
        "source": "/manifest.json",
        "headers": [
          {
            "key": "Cache-Control",
            "value": "public, max-age=31536000"
          }
        ]
      },
      {
        "source": "**/*.@(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)",
        "headers": [
          {
            "key": "Cache-Control",
            "value": "public, max-age=31536000"
          }
        ]
      }
    ],
    "cleanUrls": true,
    "trailingSlash": false
  }
}


```n

## index.html

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\index.html.Extension.TrimStart('.'))

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="/images/Dragon Circle Logo Design.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Otagon - Your Spoiler-Free Gaming Companion" />
    <meta name="theme-color" content="#E53A3A" />
    
    <!-- PWA Meta Tags -->
    <link rel="manifest" href="/manifest.json" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Otagon" />
    
    <title>Otagon</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx?v=2"></script>
    <script>
      // Service Worker Registration for Production
      if ('serviceWorker' in navigator) {
        // Only register in production (not localhost)
        if (location.hostname !== 'localhost' && location.hostname !== '127.0.0.1') {
          window.addEventListener('load', () => {
            navigator.serviceWorker.register('/sw.js')
              .then((registration) => {
                console.log('SW registered: ', registration);
                
                // Check for updates
                registration.addEventListener('updatefound', () => {
                  const newWorker = registration.installing;
                  if (newWorker) {
                    newWorker.addEventListener('statechange', () => {
                      if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                        // New content is available, show update notification
                        if (confirm('New version available! Reload to update?')) {
                          newWorker.postMessage({ type: 'SKIP_WAITING' });
                          window.location.reload();
                        }
                      }
                    });
                  }
                });
              })
              .catch((registrationError) => {
                console.log('SW registration failed: ', registrationError);
              });
          });
        } else {
          // Development mode - unregister service worker
          navigator.serviceWorker.getRegistrations().then(function(registrations) {
            for(let registration of registrations) {
              registration.unregister();
            }
          });
        }
      }
    </script>
  </body>
</html>


```n

## package-lock.json

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\package-lock.json.Extension.TrimStart('.'))

{
  "name": "otagon-new",
  "version": "1.0.0",
  "lockfileVersion": 3,
  "requires": true,
  "packages": {
    "": {
      "name": "otagon-new",
      "version": "1.0.0",
      "dependencies": {
        "@google/generative-ai": "^0.24.1",
        "@heroicons/react": "^2.2.0",
        "@supabase/supabase-js": "^2.58.0",
        "clsx": "^2.1.1",
        "postgres": "^3.4.7",
        "react": "^18.3.1",
        "react-dom": "^18.3.1",
        "react-markdown": "^9.1.0",
        "react-router-dom": "^6.23.1",
        "remark-gfm": "^4.0.1",
        "tailwind-merge": "^3.3.1"
      },
      "devDependencies": {
        "@types/node": "^22.14.0",
        "@types/react": "^18.3.12",
        "@types/react-dom": "^18.3.1",
        "@typescript-eslint/eslint-plugin": "^8.15.0",
        "@typescript-eslint/parser": "^8.15.0",
        "@vitejs/plugin-react": "^4.3.3",
        "autoprefixer": "^10.4.21",
        "eslint": "^9.15.0",
        "eslint-plugin-react-hooks": "^5.0.0",
        "eslint-plugin-react-refresh": "^0.4.14",
        "firebase-tools": "^13.0.0",
        "postcss": "^8.5.6",
        "tailwindcss": "^3.4.17",
        "typescript": "~5.6.2",
        "vite": "^6.0.1"
      }
    },
    "node_modules/@alloc/quick-lru": {
      "version": "5.2.0",
      "resolved": "https://registry.npmjs.org/@alloc/quick-lru/-/quick-lru-5.2.0.tgz",
      "integrity": "sha512-UrcABB+4bUrFABwbluTIBErXwvbsU/V7TZWfmbgJfbkwiBuziS9gxdODUyuiecfdGQ85jglMW6juS3+z5TsKLw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/@apidevtools/json-schema-ref-parser": {
      "version": "9.1.2",
      "resolved": "https://registry.npmjs.org/@apidevtools/json-schema-ref-parser/-/json-schema-ref-parser-9.1.2.tgz",
      "integrity": "sha512-r1w81DpR+KyRWd3f+rk6TNqMgedmAxZP5v5KWlXQWlgMUUtyEJch0DKEci1SorPMiSeM8XPl7MZ3miJ60JIpQg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jsdevtools/ono": "^7.1.3",
        "@types/json-schema": "^7.0.6",
        "call-me-maybe": "^1.0.1",
        "js-yaml": "^4.1.0"
      }
    },
    "node_modules/@babel/code-frame": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/code-frame/-/code-frame-7.27.1.tgz",
      "integrity": "sha512-cjQ7ZlQ0Mv3b47hABuTevyTuYN4i+loJKGeV9flcCgIK37cCXRh+L1bd3iBHlynerhQ7BhCkn2BPbQUL+rGqFg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-validator-identifier": "^7.27.1",
        "js-tokens": "^4.0.0",
        "picocolors": "^1.1.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/compat-data": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/compat-data/-/compat-data-7.28.4.tgz",
      "integrity": "sha512-YsmSKC29MJwf0gF8Rjjrg5LQCmyh+j/nD8/eP7f+BeoQTKYqs9RoWbjGOdy0+1Ekr68RJZMUOPVQaQisnIo4Rw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/core": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/core/-/core-7.28.4.tgz",
      "integrity": "sha512-2BCOP7TN8M+gVDj7/ht3hsaO/B/n5oDbiAyyvnRlNOs+u1o+JWNYTQrmpuNp1/Wq2gcFrI01JAW+paEKDMx/CA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.27.1",
        "@babel/generator": "^7.28.3",
        "@babel/helper-compilation-targets": "^7.27.2",
        "@babel/helper-module-transforms": "^7.28.3",
        "@babel/helpers": "^7.28.4",
        "@babel/parser": "^7.28.4",
        "@babel/template": "^7.27.2",
        "@babel/traverse": "^7.28.4",
        "@babel/types": "^7.28.4",
        "@jridgewell/remapping": "^2.3.5",
        "convert-source-map": "^2.0.0",
        "debug": "^4.1.0",
        "gensync": "^1.0.0-beta.2",
        "json5": "^2.2.3",
        "semver": "^6.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/babel"
      }
    },
    "node_modules/@babel/core/node_modules/semver": {
      "version": "6.3.1",
      "resolved": "https://registry.npmjs.org/semver/-/semver-6.3.1.tgz",
      "integrity": "sha512-BR7VvDCVHO+q2xBEWskxS6DJE1qRnb7DxzUrogb71CWoSficBxYsiAGd+Kl0mmq/MprG9yArRkyrQxTO6XjMzA==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      }
    },
    "node_modules/@babel/generator": {
      "version": "7.28.3",
      "resolved": "https://registry.npmjs.org/@babel/generator/-/generator-7.28.3.tgz",
      "integrity": "sha512-3lSpxGgvnmZznmBkCRnVREPUFJv2wrv9iAoFDvADJc0ypmdOxdUtcLeBgBJ6zE0PMeTKnxeQzyk0xTBq4Ep7zw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.28.3",
        "@babel/types": "^7.28.2",
        "@jridgewell/gen-mapping": "^0.3.12",
        "@jridgewell/trace-mapping": "^0.3.28",
        "jsesc": "^3.0.2"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-compilation-targets": {
      "version": "7.27.2",
      "resolved": "https://registry.npmjs.org/@babel/helper-compilation-targets/-/helper-compilation-targets-7.27.2.tgz",
      "integrity": "sha512-2+1thGUUWWjLTYTHZWK1n8Yga0ijBz1XAhUXcKy81rd5g6yh7hGqMp45v7cadSbEHc9G3OTv45SyneRN3ps4DQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/compat-data": "^7.27.2",
        "@babel/helper-validator-option": "^7.27.1",
        "browserslist": "^4.24.0",
        "lru-cache": "^5.1.1",
        "semver": "^6.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-compilation-targets/node_modules/semver": {
      "version": "6.3.1",
      "resolved": "https://registry.npmjs.org/semver/-/semver-6.3.1.tgz",
      "integrity": "sha512-BR7VvDCVHO+q2xBEWskxS6DJE1qRnb7DxzUrogb71CWoSficBxYsiAGd+Kl0mmq/MprG9yArRkyrQxTO6XjMzA==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      }
    },
    "node_modules/@babel/helper-globals": {
      "version": "7.28.0",
      "resolved": "https://registry.npmjs.org/@babel/helper-globals/-/helper-globals-7.28.0.tgz",
      "integrity": "sha512-+W6cISkXFa1jXsDEdYA8HeevQT/FULhxzR99pxphltZcVaugps53THCeiWA8SguxxpSp3gKPiuYfSWopkLQ4hw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-module-imports": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-module-imports/-/helper-module-imports-7.27.1.tgz",
      "integrity": "sha512-0gSFWUPNXNopqtIPQvlD5WgXYI5GY2kP2cCvoT8kczjbfcfuIljTbcWrulD1CIPIX2gt1wghbDy08yE1p+/r3w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/traverse": "^7.27.1",
        "@babel/types": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-module-transforms": {
      "version": "7.28.3",
      "resolved": "https://registry.npmjs.org/@babel/helper-module-transforms/-/helper-module-transforms-7.28.3.tgz",
      "integrity": "sha512-gytXUbs8k2sXS9PnQptz5o0QnpLL51SwASIORY6XaBKF88nsOT0Zw9szLqlSGQDP/4TljBAD5y98p2U1fqkdsw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-module-imports": "^7.27.1",
        "@babel/helper-validator-identifier": "^7.27.1",
        "@babel/traverse": "^7.28.3"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/helper-plugin-utils": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-plugin-utils/-/helper-plugin-utils-7.27.1.tgz",
      "integrity": "sha512-1gn1Up5YXka3YYAHGKpbideQ5Yjf1tDa9qYcgysz+cNCXukyLl6DjPXhD3VRwSb8c0J9tA4b2+rHEZtc6R0tlw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-string-parser": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-string-parser/-/helper-string-parser-7.27.1.tgz",
      "integrity": "sha512-qMlSxKbpRlAridDExk92nSobyDdpPijUq2DW6oDnUqd0iOGxmQjyqhMIihI9+zv4LPyZdRje2cavWPbCbWm3eA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-validator-identifier": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-validator-identifier/-/helper-validator-identifier-7.27.1.tgz",
      "integrity": "sha512-D2hP9eA+Sqx1kBZgzxZh0y1trbuU+JoDkiEwqhQ36nodYqJwyEIhPSdMNd7lOm/4io72luTPWH20Yda0xOuUow==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-validator-option": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-validator-option/-/helper-validator-option-7.27.1.tgz",
      "integrity": "sha512-YvjJow9FxbhFFKDSuFnVCe2WxXk1zWc22fFePVNEaWJEu8IrZVlda6N0uHwzZrUM1il7NC9Mlp4MaJYbYd9JSg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helpers": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/helpers/-/helpers-7.28.4.tgz",
      "integrity": "sha512-HFN59MmQXGHVyYadKLVumYsA9dBFun/ldYxipEjzA4196jpLZd8UjEEBLkbEkvfYreDqJhZxYAWFPtrfhNpj4w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/template": "^7.27.2",
        "@babel/types": "^7.28.4"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/parser": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/parser/-/parser-7.28.4.tgz",
      "integrity": "sha512-yZbBqeM6TkpP9du/I2pUZnJsRMGGvOuIrhjzC1AwHwW+6he4mni6Bp/m8ijn0iOuZuPI2BfkCoSRunpyjnrQKg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.28.4"
      },
      "bin": {
        "parser": "bin/babel-parser.js"
      },
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@babel/plugin-transform-react-jsx-self": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-react-jsx-self/-/plugin-transform-react-jsx-self-7.27.1.tgz",
      "integrity": "sha512-6UzkCs+ejGdZ5mFFC/OCUrv028ab2fp1znZmCZjAOBKiBK2jXD1O+BPSfX8X2qjJ75fZBMSnQn3Rq2mrBJK2mw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-transform-react-jsx-source": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-transform-react-jsx-source/-/plugin-transform-react-jsx-source-7.27.1.tgz",
      "integrity": "sha512-zbwoTsBruTeKB9hSq73ha66iFeJHuaFkUbwvqElnygoNbj/jHRsSeokowZFN3CZ64IvEqcmmkVe89OPXc7ldAw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/template": {
      "version": "7.27.2",
      "resolved": "https://registry.npmjs.org/@babel/template/-/template-7.27.2.tgz",
      "integrity": "sha512-LPDZ85aEJyYSd18/DkjNh4/y1ntkE5KwUHWTiqgRxruuZL2F1yuHligVHLvcHY2vMHXttKFpJn6LwfI7cw7ODw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.27.1",
        "@babel/parser": "^7.27.2",
        "@babel/types": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/traverse": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/traverse/-/traverse-7.28.4.tgz",
      "integrity": "sha512-YEzuboP2qvQavAcjgQNVgsvHIDv6ZpwXvcvjmyySP2DIMuByS/6ioU5G9pYrWHM6T2YDfc7xga9iNzYOs12CFQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.27.1",
        "@babel/generator": "^7.28.3",
        "@babel/helper-globals": "^7.28.0",
        "@babel/parser": "^7.28.4",
        "@babel/template": "^7.27.2",
        "@babel/types": "^7.28.4",
        "debug": "^4.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/types": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/types/-/types-7.28.4.tgz",
      "integrity": "sha512-bkFqkLhh3pMBUQQkpVgWDWq/lqzc2678eUyDlTBhRqhCHFguYYGM0Efga7tYk4TogG/3x0EEl66/OQ+WGbWB/Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-string-parser": "^7.27.1",
        "@babel/helper-validator-identifier": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@colors/colors": {
      "version": "1.5.0",
      "resolved": "https://registry.npmjs.org/@colors/colors/-/colors-1.5.0.tgz",
      "integrity": "sha512-ooWCrlZP11i8GImSjTHYHLkvFDP48nS4+204nGb1RiX/WXYHmJA2III9/e2DWVabCESdW7hBAEzHRqUn9OUVvQ==",
      "dev": true,
      "license": "MIT",
      "optional": true,
      "engines": {
        "node": ">=0.1.90"
      }
    },
    "node_modules/@dabh/diagnostics": {
      "version": "2.0.8",
      "resolved": "https://registry.npmjs.org/@dabh/diagnostics/-/diagnostics-2.0.8.tgz",
      "integrity": "sha512-R4MSXTVnuMzGD7bzHdW2ZhhdPC/igELENcq5IjEverBvq5hn1SXCWcsi6eSsdWP0/Ur+SItRRjAktmdoX/8R/Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@so-ric/colorspace": "^1.1.6",
        "enabled": "2.0.x",
        "kuler": "^2.0.0"
      }
    },
    "node_modules/@electric-sql/pglite": {
      "version": "0.2.17",
      "resolved": "https://registry.npmjs.org/@electric-sql/pglite/-/pglite-0.2.17.tgz",
      "integrity": "sha512-qEpKRT2oUaWDH6tjRxLHjdzMqRUGYDnGZlKrnL4dJ77JVMcP2Hpo3NYnOSPKdZdeec57B6QPprCUFg0picx5Pw==",
      "dev": true,
      "license": "Apache-2.0"
    },
    "node_modules/@esbuild/aix-ppc64": {
      "version": "0.25.11",
      "resolved": "https://registry.npmjs.org/@esbuild/aix-ppc64/-/aix-ppc64-0.25.11.tgz",
      "integrity": "sha512-Xt1dOL13m8u0WE8iplx9Ibbm+hFAO0GsU2P34UNoDGvZYkY8ifSiy6Zuc1lYxfG7svWE2fzqCUmFp5HCn51gJg==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "aix"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/android-arm": {
      "version": "0.25.11",
      "resolved": "https://registry.npmjs.org/@esbuild/android-arm/-/android-arm-0.25.11.tgz",
      "integrity": "sha512-uoa7dU+Dt3HYsethkJ1k6Z9YdcHjTrSb5NUy66ZfZaSV8hEYGD5ZHbEMXnqLFlbBflLsl89Zke7CAdDJ4JI+Gg==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/android-arm64": {
      "version": "0.25.11",
      "resolved": "https://registry.npmjs.org/@esbuild/android-arm64/-/android-arm64-0.25.11.tgz",
      "integrity": "sha512-9slpyFBc4FPPz48+f6jyiXOx/Y4v34TUeDDXJpZqAWQn/08lKGeD8aDp9TMn9jDz2CiEuHwfhRmGBvpnd/PWIQ==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/android-x64": {
      "version": "0.25.11",
      "resolved": "https://registry.npmjs.org/@esbuild/android-x64/-/android-x64-0.25.11.tgz",
      "integrity": "sha512-Sgiab4xBjPU1QoPEIqS3Xx+R2lezu0LKIEcYe6pftr56PqPygbB7+szVnzoShbx64MUupqoE0KyRlN7gezbl8g==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/darwin-arm64": {
      "version": "0.25.11",
      "resolved": "https://registry.npmjs.org/@esbuild/darwin-arm64/-/darwin-arm64-0.25.11.tgz",
      "integrity": "sha512-VekY0PBCukppoQrycFxUqkCojnTQhdec0vevUL/EDOCnXd9LKWqD/bHwMPzigIJXPhC59Vd1WFIL57SKs2mg4w==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/darwin-x64": {
      "version": "0.25.11",
      "resolved": "https://registry.npmjs.org/@esbuild/darwin-x64/-/darwin-x64-0.25.11.tgz",
      "integrity": "sha512-+hfp3yfBalNEpTGp9loYgbknjR695HkqtY3d3/JjSRUyPg/xd6q+mQqIb5qdywnDxRZykIHs3axEqU6l1+oWEQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/freebsd-arm64": {
      "version": "0.25.11",
      "resolved": "https://registry.npmjs.org/@esbuild/freebsd-arm64/-/freebsd-arm64-0.25.11.tgz",
      "integrity": "sha512-CmKjrnayyTJF2eVuO//uSjl/K3KsMIeYeyN7FyDBjsR3lnSJHaXlVoAK8DZa7lXWChbuOk7NjAc7ygAwrnPBhA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/freebsd-x64": {
      "version": "0.25.11",
      "resolved": "https://registry.npmjs.org/@esbuild/freebsd-x64/-/freebsd-x64-0.25.11.tgz",
      "integrity": "sha512-Dyq+5oscTJvMaYPvW3x3FLpi2+gSZTCE/1ffdwuM6G1ARang/mb3jvjxs0mw6n3Lsw84ocfo9CrNMqc5lTfGOw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-arm": {
      "version": "0.25.11",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-arm/-/linux-arm-0.25.11.tgz",
      "integrity": "sha512-TBMv6B4kCfrGJ8cUPo7vd6NECZH/8hPpBHHlYI3qzoYFvWu2AdTvZNuU/7hsbKWqu/COU7NIK12dHAAqBLLXgw==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-arm64": {
      "version": "0.25.11",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-arm64/-/linux-arm64-0.25.11.tgz",
      "integrity": "sha512-Qr8AzcplUhGvdyUF08A1kHU3Vr2O88xxP0Tm8GcdVOUm25XYcMPp2YqSVHbLuXzYQMf9Bh/iKx7YPqECs6ffLA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-ia32": {
      "version": "0.25.11",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-ia32/-/linux-ia32-0.25.11.tgz",
      "integrity": "sha512-TmnJg8BMGPehs5JKrCLqyWTVAvielc615jbkOirATQvWWB1NMXY77oLMzsUjRLa0+ngecEmDGqt5jiDC6bfvOw==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-loong64": {
      "version": "0.25.11",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-loong64/-/linux-loong64-0.25.11.tgz",
      "integrity": "sha512-DIGXL2+gvDaXlaq8xruNXUJdT5tF+SBbJQKbWy/0J7OhU8gOHOzKmGIlfTTl6nHaCOoipxQbuJi7O++ldrxgMw==",
      "cpu": [
        "loong64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-mips64el": {
      "version": "0.25.11",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-mips64el/-/linux-mips64el-0.25.11.tgz",
      "integrity": "sha512-Osx1nALUJu4pU43o9OyjSCXokFkFbyzjXb6VhGIJZQ5JZi8ylCQ9/LFagolPsHtgw6himDSyb5ETSfmp4rpiKQ==",
      "cpu": [
        "mips64el"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-ppc64": {
      "version": "0.25.11",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-ppc64/-/linux-ppc64-0.25.11.tgz",
      "integrity": "sha512-nbLFgsQQEsBa8XSgSTSlrnBSrpoWh7ioFDUmwo158gIm5NNP+17IYmNWzaIzWmgCxq56vfr34xGkOcZ7jX6CPw==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-riscv64": {
      "version": "0.25.11",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-riscv64/-/linux-riscv64-0.25.11.tgz",
      "integrity": "sha512-HfyAmqZi9uBAbgKYP1yGuI7tSREXwIb438q0nqvlpxAOs3XnZ8RsisRfmVsgV486NdjD7Mw2UrFSw51lzUk1ww==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-s390x": {
      "version": "0.25.11",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-s390x/-/linux-s390x-0.25.11.tgz",
      "integrity": "sha512-HjLqVgSSYnVXRisyfmzsH6mXqyvj0SA7pG5g+9W7ESgwA70AXYNpfKBqh1KbTxmQVaYxpzA/SvlB9oclGPbApw==",
      "cpu": [
        "s390x"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-x64": {
      "version": "0.25.11",
      "resolved": "https://registry.npmjs.org/@esbuild/linux-x64/-/linux-x64-0.25.11.tgz",
      "integrity": "sha512-HSFAT4+WYjIhrHxKBwGmOOSpphjYkcswF449j6EjsjbinTZbp8PJtjsVK1XFJStdzXdy/jaddAep2FGY+wyFAQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/netbsd-arm64": {
      "version": "0.25.11",
      "resolved": "https://registry.npmjs.org/@esbuild/netbsd-arm64/-/netbsd-arm64-0.25.11.tgz",
      "integrity": "sha512-hr9Oxj1Fa4r04dNpWr3P8QKVVsjQhqrMSUzZzf+LZcYjZNqhA3IAfPQdEh1FLVUJSiu6sgAwp3OmwBfbFgG2Xg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "netbsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/netbsd-x64": {
      "version": "0.25.11",
      "resolved": "https://registry.npmjs.org/@esbuild/netbsd-x64/-/netbsd-x64-0.25.11.tgz",
      "integrity": "sha512-u7tKA+qbzBydyj0vgpu+5h5AeudxOAGncb8N6C9Kh1N4n7wU1Xw1JDApsRjpShRpXRQlJLb9wY28ELpwdPcZ7A==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "netbsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/openbsd-arm64": {
      "version": "0.25.11",
      "resolved": "https://registry.npmjs.org/@esbuild/openbsd-arm64/-/openbsd-arm64-0.25.11.tgz",
      "integrity": "sha512-Qq6YHhayieor3DxFOoYM1q0q1uMFYb7cSpLD2qzDSvK1NAvqFi8Xgivv0cFC6J+hWVw2teCYltyy9/m/14ryHg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "openbsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/openbsd-x64": {
      "version": "0.25.11",
      "resolved": "https://registry.npmjs.org/@esbuild/openbsd-x64/-/openbsd-x64-0.25.11.tgz",
      "integrity": "sha512-CN+7c++kkbrckTOz5hrehxWN7uIhFFlmS/hqziSFVWpAzpWrQoAG4chH+nN3Be+Kzv/uuo7zhX716x3Sn2Jduw==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "openbsd"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/openharmony-arm64": {
      "version": "0.25.11",
      "resolved": "https://registry.npmjs.org/@esbuild/openharmony-arm64/-/openharmony-arm64-0.25.11.tgz",
      "integrity": "sha512-rOREuNIQgaiR+9QuNkbkxubbp8MSO9rONmwP5nKncnWJ9v5jQ4JxFnLu4zDSRPf3x4u+2VN4pM4RdyIzDty/wQ==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "openharmony"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/sunos-x64": {
      "version": "0.25.11",
      "resolved": "https://registry.npmjs.org/@esbuild/sunos-x64/-/sunos-x64-0.25.11.tgz",
      "integrity": "sha512-nq2xdYaWxyg9DcIyXkZhcYulC6pQ2FuCgem3LI92IwMgIZ69KHeY8T4Y88pcwoLIjbed8n36CyKoYRDygNSGhA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "sunos"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/win32-arm64": {
      "version": "0.25.11",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-arm64/-/win32-arm64-0.25.11.tgz",
      "integrity": "sha512-3XxECOWJq1qMZ3MN8srCJ/QfoLpL+VaxD/WfNRm1O3B4+AZ/BnLVgFbUV3eiRYDMXetciH16dwPbbHqwe1uU0Q==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/win32-ia32": {
      "version": "0.25.11",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-ia32/-/win32-ia32-0.25.11.tgz",
      "integrity": "sha512-3ukss6gb9XZ8TlRyJlgLn17ecsK4NSQTmdIXRASVsiS2sQ6zPPZklNJT5GR5tE/MUarymmy8kCEf5xPCNCqVOA==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/win32-x64": {
      "version": "0.25.11",
      "resolved": "https://registry.npmjs.org/@esbuild/win32-x64/-/win32-x64-0.25.11.tgz",
      "integrity": "sha512-D7Hpz6A2L4hzsRpPaCYkQnGOotdUpDzSGRIv9I+1ITdHROSFUWW95ZPZWQmGka1Fg7W3zFJowyn9WGwMJ0+KPA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@eslint-community/eslint-utils": {
      "version": "4.9.0",
      "resolved": "https://registry.npmjs.org/@eslint-community/eslint-utils/-/eslint-utils-4.9.0.tgz",
      "integrity": "sha512-ayVFHdtZ+hsq1t2Dy24wCmGXGe4q9Gu3smhLYALJrr473ZH27MsnSL+LKUlimp4BWJqMDMLmPpx/Q9R3OAlL4g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "eslint-visitor-keys": "^3.4.3"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      },
      "peerDependencies": {
        "eslint": "^6.0.0 || ^7.0.0 || >=8.0.0"
      }
    },
    "node_modules/@eslint-community/regexpp": {
      "version": "4.12.1",
      "resolved": "https://registry.npmjs.org/@eslint-community/regexpp/-/regexpp-4.12.1.tgz",
      "integrity": "sha512-CCZCDJuduB9OUkFkY2IgppNZMi2lBQgD2qzwXkEia16cge2pijY/aXi96CJMquDMn3nJdlPV1A5KrJEXwfLNzQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^12.0.0 || ^14.0.0 || >=16.0.0"
      }
    },
    "node_modules/@eslint/config-array": {
      "version": "0.21.1",
      "resolved": "https://registry.npmjs.org/@eslint/config-array/-/config-array-0.21.1.tgz",
      "integrity": "sha512-aw1gNayWpdI/jSYVgzN5pL0cfzU02GT3NBpeT/DXbx1/1x7ZKxFPd9bwrzygx/qiwIQiJ1sw/zD8qY/kRvlGHA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@eslint/object-schema": "^2.1.7",
        "debug": "^4.3.1",
        "minimatch": "^3.1.2"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/config-array/node_modules/brace-expansion": {
      "version": "1.1.12",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
      "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/@eslint/config-array/node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/@eslint/config-helpers": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/@eslint/config-helpers/-/config-helpers-0.4.1.tgz",
      "integrity": "sha512-csZAzkNhsgwb0I/UAV6/RGFTbiakPCf0ZrGmrIxQpYvGZ00PhTkSnyKNolphgIvmnJeGw6rcGVEXfTzUnFuEvw==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@eslint/core": "^0.16.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/core": {
      "version": "0.16.0",
      "resolved": "https://registry.npmjs.org/@eslint/core/-/core-0.16.0.tgz",
      "integrity": "sha512-nmC8/totwobIiFcGkDza3GIKfAw1+hLiYVrh3I1nIomQ8PEr5cxg34jnkmGawul/ep52wGRAcyeDCNtWKSOj4Q==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@types/json-schema": "^7.0.15"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/eslintrc": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/@eslint/eslintrc/-/eslintrc-3.3.1.tgz",
      "integrity": "sha512-gtF186CXhIl1p4pJNGZw8Yc6RlshoePRvE0X91oPGb3vZ8pM3qOS9W9NGPat9LziaBV7XrJWGylNQXkGcnM3IQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ajv": "^6.12.4",
        "debug": "^4.3.2",
        "espree": "^10.0.1",
        "globals": "^14.0.0",
        "ignore": "^5.2.0",
        "import-fresh": "^3.2.1",
        "js-yaml": "^4.1.0",
        "minimatch": "^3.1.2",
        "strip-json-comments": "^3.1.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/@eslint/eslintrc/node_modules/brace-expansion": {
      "version": "1.1.12",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
      "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/@eslint/eslintrc/node_modules/ignore": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/ignore/-/ignore-5.3.2.tgz",
      "integrity": "sha512-hsBTNUqQTDwkWtcdYI2i06Y/nUBEsNEDJKjWdigLvegy8kDuJAS8uRlpkkcQpyEXL0Z/pjDy5HBmMjRCJ2gq+g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 4"
      }
    },
    "node_modules/@eslint/eslintrc/node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/@eslint/js": {
      "version": "9.38.0",
      "resolved": "https://registry.npmjs.org/@eslint/js/-/js-9.38.0.tgz",
      "integrity": "sha512-UZ1VpFvXf9J06YG9xQBdnzU+kthors6KjhMAl6f4gH4usHyh31rUf2DLGInT8RFYIReYXNSydgPY0V2LuWgl7A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://eslint.org/donate"
      }
    },
    "node_modules/@eslint/object-schema": {
      "version": "2.1.7",
      "resolved": "https://registry.npmjs.org/@eslint/object-schema/-/object-schema-2.1.7.tgz",
      "integrity": "sha512-VtAOaymWVfZcmZbp6E2mympDIHvyjXs/12LqWYjVw6qjrfF+VK+fyG33kChz3nnK+SU5/NeHOqrTEHS8sXO3OA==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@eslint/plugin-kit": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/@eslint/plugin-kit/-/plugin-kit-0.4.0.tgz",
      "integrity": "sha512-sB5uyeq+dwCWyPi31B2gQlVlo+j5brPlWx4yZBrEaRo/nhdDE8Xke1gsGgtiBdaBTxuTkceLVuVt/pclrasb0A==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@eslint/core": "^0.16.0",
        "levn": "^0.4.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      }
    },
    "node_modules/@google-cloud/cloud-sql-connector": {
      "version": "1.8.4",
      "resolved": "https://registry.npmjs.org/@google-cloud/cloud-sql-connector/-/cloud-sql-connector-1.8.4.tgz",
      "integrity": "sha512-dX36ksbh4xrIsALCHxNYXwvRUtlZ/msQ/PL0LpSYWHnfMenRM+watAzM/XIVr8tQOtzhT7mrmrAb/W/bgayQAQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@googleapis/sqladmin": "^31.1.0",
        "gaxios": "^7.1.2",
        "google-auth-library": "^10.4.0",
        "p-throttle": "^7.0.0"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@google-cloud/cloud-sql-connector/node_modules/data-uri-to-buffer": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/data-uri-to-buffer/-/data-uri-to-buffer-4.0.1.tgz",
      "integrity": "sha512-0R9ikRb668HB7QDxT1vkpuUBtqc53YyAwMwGeUFKRojY/NWKvdZ+9UYtRfGmhqNbRkTSVpMbmyhXipFFv2cb/A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 12"
      }
    },
    "node_modules/@google-cloud/cloud-sql-connector/node_modules/gaxios": {
      "version": "7.1.2",
      "resolved": "https://registry.npmjs.org/gaxios/-/gaxios-7.1.2.tgz",
      "integrity": "sha512-/Szrn8nr+2TsQT1Gp8iIe/BEytJmbyfrbFh419DfGQSkEgNEhbPi7JRJuughjkTzPWgU9gBQf5AVu3DbHt0OXA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "extend": "^3.0.2",
        "https-proxy-agent": "^7.0.1",
        "node-fetch": "^3.3.2"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@google-cloud/cloud-sql-connector/node_modules/gcp-metadata": {
      "version": "8.1.1",
      "resolved": "https://registry.npmjs.org/gcp-metadata/-/gcp-metadata-8.1.1.tgz",
      "integrity": "sha512-dTCcAe9fRQf06ELwel6lWWFrEbstwjUBYEhr5VRGoC+iPDZQucHppCowaIp8b8v92tU1G4X4H3b/Y6zXZxkMsQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "gaxios": "^7.0.0",
        "google-logging-utils": "^1.0.0",
        "json-bigint": "^1.0.0"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@google-cloud/cloud-sql-connector/node_modules/google-auth-library": {
      "version": "10.4.1",
      "resolved": "https://registry.npmjs.org/google-auth-library/-/google-auth-library-10.4.1.tgz",
      "integrity": "sha512-VlvZ+QDWng3aPh++0BSQlSJyjn4qgLLTmqylAR3as0dr6YwPkZpHcZAngAFr68TDVCUSQVRTkV73K/D3m7vEIg==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "base64-js": "^1.3.0",
        "ecdsa-sig-formatter": "^1.0.11",
        "gaxios": "^7.0.0",
        "gcp-metadata": "^8.0.0",
        "google-logging-utils": "^1.0.0",
        "gtoken": "^8.0.0",
        "jws": "^4.0.0"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@google-cloud/cloud-sql-connector/node_modules/google-logging-utils": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/google-logging-utils/-/google-logging-utils-1.1.1.tgz",
      "integrity": "sha512-rcX58I7nqpu4mbKztFeOAObbomBbHU2oIb/d3tJfF3dizGSApqtSwYJigGCooHdnMyQBIw8BrWyK96w3YXgr6A==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=14"
      }
    },
    "node_modules/@google-cloud/cloud-sql-connector/node_modules/gtoken": {
      "version": "8.0.0",
      "resolved": "https://registry.npmjs.org/gtoken/-/gtoken-8.0.0.tgz",
      "integrity": "sha512-+CqsMbHPiSTdtSO14O51eMNlrp9N79gmeqmXeouJOhfucAedHw9noVe/n5uJk3tbKE6a+6ZCQg3RPhVhHByAIw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "gaxios": "^7.0.0",
        "jws": "^4.0.0"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@google-cloud/cloud-sql-connector/node_modules/node-fetch": {
      "version": "3.3.2",
      "resolved": "https://registry.npmjs.org/node-fetch/-/node-fetch-3.3.2.tgz",
      "integrity": "sha512-dRB78srN/l6gqWulah9SrxeYnxeddIG30+GOqK/9OlLVyLg3HPnr6SqOWTWOXKRwC2eGYCkZ59NNuSgvSrpgOA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "data-uri-to-buffer": "^4.0.0",
        "fetch-blob": "^3.1.4",
        "formdata-polyfill": "^4.0.10"
      },
      "engines": {
        "node": "^12.20.0 || ^14.13.1 || >=16.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/node-fetch"
      }
    },
    "node_modules/@google-cloud/paginator": {
      "version": "5.0.2",
      "resolved": "https://registry.npmjs.org/@google-cloud/paginator/-/paginator-5.0.2.tgz",
      "integrity": "sha512-DJS3s0OVH4zFDB1PzjxAsHqJT6sKVbRwwML0ZBP9PbU7Yebtu/7SWMRzvO2J3nUi9pRNITCfu4LJeooM2w4pjg==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "arrify": "^2.0.0",
        "extend": "^3.0.2"
      },
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/@google-cloud/precise-date": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/@google-cloud/precise-date/-/precise-date-4.0.0.tgz",
      "integrity": "sha512-1TUx3KdaU3cN7nfCdNf+UVqA/PSX29Cjcox3fZZBtINlRrXVTmUkQnCKv2MbBUbCopbK4olAT1IHl76uZyCiVA==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/@google-cloud/projectify": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/@google-cloud/projectify/-/projectify-4.0.0.tgz",
      "integrity": "sha512-MmaX6HeSvyPbWGwFq7mXdo0uQZLGBYCwziiLIGq5JVX+/bdI3SAq6bP98trV5eTWfLuvsMcIC1YJOF2vfteLFA==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/@google-cloud/promisify": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/@google-cloud/promisify/-/promisify-4.0.0.tgz",
      "integrity": "sha512-Orxzlfb9c67A15cq2JQEyVc7wEsmFBmHjZWZYQMUyJ1qivXyMwdyNOs9odi79hze+2zqdTtu1E19IM/FtqZ10g==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=14"
      }
    },
    "node_modules/@google-cloud/pubsub": {
      "version": "4.11.0",
      "resolved": "https://registry.npmjs.org/@google-cloud/pubsub/-/pubsub-4.11.0.tgz",
      "integrity": "sha512-xWxJAlyUGd6OPp97u8maMcI3xVXuHjxfwh6Dr7P/P+6NK9o446slJobsbgsmK0xKY4nTK8m5uuJrhEKapfZSmQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@google-cloud/paginator": "^5.0.0",
        "@google-cloud/precise-date": "^4.0.0",
        "@google-cloud/projectify": "^4.0.0",
        "@google-cloud/promisify": "~4.0.0",
        "@opentelemetry/api": "~1.9.0",
        "@opentelemetry/semantic-conventions": "~1.30.0",
        "arrify": "^2.0.0",
        "extend": "^3.0.2",
        "google-auth-library": "^9.3.0",
        "google-gax": "^4.3.3",
        "heap-js": "^2.2.0",
        "is-stream-ended": "^0.1.4",
        "lodash.snakecase": "^4.1.1",
        "p-defer": "^3.0.0"
      },
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/@google/generative-ai": {
      "version": "0.24.1",
      "resolved": "https://registry.npmjs.org/@google/generative-ai/-/generative-ai-0.24.1.tgz",
      "integrity": "sha512-MqO+MLfM6kjxcKoy0p1wRzG3b4ZZXtPI+z2IE26UogS2Cm/XHO+7gGRBh6gcJsOiIVoH93UwKvW4HdgiOZCy9Q==",
      "license": "Apache-2.0",
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@googleapis/sqladmin": {
      "version": "31.1.0",
      "resolved": "https://registry.npmjs.org/@googleapis/sqladmin/-/sqladmin-31.1.0.tgz",
      "integrity": "sha512-k4lXSFCFuZmWtYuW/OH/PcHimZP5P/uDLK0+ACbgoZFB8qmlgcyF0531aJt6JHIdBwCRlHXZlMW4LDC5Gqra5w==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "googleapis-common": "^8.0.2-rc.0"
      },
      "engines": {
        "node": ">=12.0.0"
      }
    },
    "node_modules/@grpc/grpc-js": {
      "version": "1.14.0",
      "resolved": "https://registry.npmjs.org/@grpc/grpc-js/-/grpc-js-1.14.0.tgz",
      "integrity": "sha512-N8Jx6PaYzcTRNzirReJCtADVoq4z7+1KQ4E70jTg/koQiMoUSN1kbNjPOqpPbhMFhfU1/l7ixspPl8dNY+FoUg==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@grpc/proto-loader": "^0.8.0",
        "@js-sdsl/ordered-map": "^4.4.2"
      },
      "engines": {
        "node": ">=12.10.0"
      }
    },
    "node_modules/@grpc/grpc-js/node_modules/@grpc/proto-loader": {
      "version": "0.8.0",
      "resolved": "https://registry.npmjs.org/@grpc/proto-loader/-/proto-loader-0.8.0.tgz",
      "integrity": "sha512-rc1hOQtjIWGxcxpb9aHAfLpIctjEnsDehj0DAiVfBlmT84uvR0uUtN2hEi/ecvWVjXUGf5qPF4qEgiLOx1YIMQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "lodash.camelcase": "^4.3.0",
        "long": "^5.0.0",
        "protobufjs": "^7.5.3",
        "yargs": "^17.7.2"
      },
      "bin": {
        "proto-loader-gen-types": "build/bin/proto-loader-gen-types.js"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/@grpc/proto-loader": {
      "version": "0.7.15",
      "resolved": "https://registry.npmjs.org/@grpc/proto-loader/-/proto-loader-0.7.15.tgz",
      "integrity": "sha512-tMXdRCfYVixjuFK+Hk0Q1s38gV9zDiDJfWL3h1rv4Qc39oILCu1TRTDt7+fGUI8K4G1Fj125Hx/ru3azECWTyQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "lodash.camelcase": "^4.3.0",
        "long": "^5.0.0",
        "protobufjs": "^7.2.5",
        "yargs": "^17.7.2"
      },
      "bin": {
        "proto-loader-gen-types": "build/bin/proto-loader-gen-types.js"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/@heroicons/react": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/@heroicons/react/-/react-2.2.0.tgz",
      "integrity": "sha512-LMcepvRaS9LYHJGsF0zzmgKCUim/X3N/DQKc4jepAXJ7l8QxJ1PmxJzqplF2Z3FE4PqBAIGyJAQ/w4B5dsqbtQ==",
      "license": "MIT",
      "peerDependencies": {
        "react": ">= 16 || ^19.0.0-rc"
      }
    },
    "node_modules/@humanfs/core": {
      "version": "0.19.1",
      "resolved": "https://registry.npmjs.org/@humanfs/core/-/core-0.19.1.tgz",
      "integrity": "sha512-5DyQ4+1JEUzejeK1JGICcideyfUbGixgS9jNgex5nqkW+cY7WZhxBigmieN5Qnw9ZosSNVC9KQKyb+GUaGyKUA==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=18.18.0"
      }
    },
    "node_modules/@humanfs/node": {
      "version": "0.16.7",
      "resolved": "https://registry.npmjs.org/@humanfs/node/-/node-0.16.7.tgz",
      "integrity": "sha512-/zUx+yOsIrG4Y43Eh2peDeKCxlRt/gET6aHfaKpuq267qXdYDFViVHfMaLyygZOnl0kGWxFIgsBy8QFuTLUXEQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@humanfs/core": "^0.19.1",
        "@humanwhocodes/retry": "^0.4.0"
      },
      "engines": {
        "node": ">=18.18.0"
      }
    },
    "node_modules/@humanwhocodes/module-importer": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/module-importer/-/module-importer-1.0.1.tgz",
      "integrity": "sha512-bxveV4V8v5Yb4ncFTT3rPSgZBOpCkjfK0y4oVVVJwIuDVBRMDXrPyXRL988i5ap9m9bnyEEjWfm5WkBmtffLfA==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=12.22"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/nzakas"
      }
    },
    "node_modules/@humanwhocodes/retry": {
      "version": "0.4.3",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/retry/-/retry-0.4.3.tgz",
      "integrity": "sha512-bV0Tgo9K4hfPCek+aMAn81RppFKv2ySDQeMoSZuvTASywNTnVJCArCZE2FWqpvIatKu7VMRLWlR1EazvVhDyhQ==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=18.18"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/nzakas"
      }
    },
    "node_modules/@inquirer/external-editor": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/@inquirer/external-editor/-/external-editor-1.0.2.tgz",
      "integrity": "sha512-yy9cOoBnx58TlsPrIxauKIFQTiyH+0MK4e97y4sV9ERbI+zDxw7i2hxHLCIEGIE/8PPvDxGhgzIOTSOWcs6/MQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "chardet": "^2.1.0",
        "iconv-lite": "^0.7.0"
      },
      "engines": {
        "node": ">=18"
      },
      "peerDependencies": {
        "@types/node": ">=18"
      },
      "peerDependenciesMeta": {
        "@types/node": {
          "optional": true
        }
      }
    },
    "node_modules/@inquirer/external-editor/node_modules/iconv-lite": {
      "version": "0.7.0",
      "resolved": "https://registry.npmjs.org/iconv-lite/-/iconv-lite-0.7.0.tgz",
      "integrity": "sha512-cf6L2Ds3h57VVmkZe+Pn+5APsT7FpqJtEhhieDCvrE2MK5Qk9MyffgQyuxQTm6BChfeZNtcOLHp9IcWRVcIcBQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "safer-buffer": ">= 2.1.2 < 3.0.0"
      },
      "engines": {
        "node": ">=0.10.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/express"
      }
    },
    "node_modules/@isaacs/cliui": {
      "version": "8.0.2",
      "resolved": "https://registry.npmjs.org/@isaacs/cliui/-/cliui-8.0.2.tgz",
      "integrity": "sha512-O8jcjabXaleOG9DQ0+ARXWZBTfnP4WNAqzuiJK7ll44AmxGKv/J2M4TPjxjY3znBCfvBXFzucm1twdyFybFqEA==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "string-width": "^5.1.2",
        "string-width-cjs": "npm:string-width@^4.2.0",
        "strip-ansi": "^7.0.1",
        "strip-ansi-cjs": "npm:strip-ansi@^6.0.1",
        "wrap-ansi": "^8.1.0",
        "wrap-ansi-cjs": "npm:wrap-ansi@^7.0.0"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@isaacs/cliui/node_modules/ansi-styles": {
      "version": "6.2.3",
      "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-6.2.3.tgz",
      "integrity": "sha512-4Dj6M28JB+oAH8kFkTLUo+a2jwOFkuqb3yucU0CANcRRUbxS0cP0nZYCGjcc3BNXwRIsUVmDGgzawme7zvJHvg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/chalk/ansi-styles?sponsor=1"
      }
    },
    "node_modules/@isaacs/cliui/node_modules/emoji-regex": {
      "version": "9.2.2",
      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-9.2.2.tgz",
      "integrity": "sha512-L18DaJsXSUk2+42pv8mLs5jJT2hqFkFE4j21wOmgbUqsZ2hL72NsUU785g9RXgo3s0ZNgVl42TiHp3ZtOv/Vyg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@isaacs/cliui/node_modules/string-width": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/string-width/-/string-width-5.1.2.tgz",
      "integrity": "sha512-HnLOCR3vjcY8beoNLtcjZ5/nxn2afmME6lhrDrebokqMap+XbeW8n9TXpPDOqdGK5qcI3oT0GKTW6wC7EMiVqA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "eastasianwidth": "^0.2.0",
        "emoji-regex": "^9.2.2",
        "strip-ansi": "^7.0.1"
      },
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/@isaacs/cliui/node_modules/strip-ansi": {
      "version": "7.1.2",
      "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-7.1.2.tgz",
      "integrity": "sha512-gmBGslpoQJtgnMAvOVqGZpEz9dyoKTCzy2nfz/n8aIFhN/jCE/rCmcxabB6jOOHV+0WNnylOxaxBQPSvcWklhA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-regex": "^6.0.1"
      },
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/chalk/strip-ansi?sponsor=1"
      }
    },
    "node_modules/@isaacs/cliui/node_modules/wrap-ansi": {
      "version": "8.1.0",
      "resolved": "https://registry.npmjs.org/wrap-ansi/-/wrap-ansi-8.1.0.tgz",
      "integrity": "sha512-si7QWI6zUMq56bESFvagtmzMdGOtoxfR+Sez11Mobfc7tm+VkUckk9bW2UeffTGVUbOksxmSw0AA2gs8g71NCQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-styles": "^6.1.0",
        "string-width": "^5.0.1",
        "strip-ansi": "^7.0.1"
      },
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/chalk/wrap-ansi?sponsor=1"
      }
    },
    "node_modules/@isaacs/fs-minipass": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/@isaacs/fs-minipass/-/fs-minipass-4.0.1.tgz",
      "integrity": "sha512-wgm9Ehl2jpeqP3zw/7mo3kRHFp5MEDhqAdwy1fTGkHAwnkGOVsgpvQhL8B5n1qlb01jV3n/bI0ZfZp5lWA1k4w==",
      "dev": true,
      "license": "ISC",
      "optional": true,
      "dependencies": {
        "minipass": "^7.0.4"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@jridgewell/gen-mapping": {
      "version": "0.3.13",
      "resolved": "https://registry.npmjs.org/@jridgewell/gen-mapping/-/gen-mapping-0.3.13.tgz",
      "integrity": "sha512-2kkt/7niJ6MgEPxF0bYdQ6etZaA+fQvDcLKckhy1yIQOzaoKjBBjSj63/aLVjYE3qhRt5dvM+uUyfCg6UKCBbA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/sourcemap-codec": "^1.5.0",
        "@jridgewell/trace-mapping": "^0.3.24"
      }
    },
    "node_modules/@jridgewell/remapping": {
      "version": "2.3.5",
      "resolved": "https://registry.npmjs.org/@jridgewell/remapping/-/remapping-2.3.5.tgz",
      "integrity": "sha512-LI9u/+laYG4Ds1TDKSJW2YPrIlcVYOwi2fUC6xB43lueCjgxV4lffOCZCtYFiH6TNOX+tQKXx97T4IKHbhyHEQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/gen-mapping": "^0.3.5",
        "@jridgewell/trace-mapping": "^0.3.24"
      }
    },
    "node_modules/@jridgewell/resolve-uri": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/@jridgewell/resolve-uri/-/resolve-uri-3.1.2.tgz",
      "integrity": "sha512-bRISgCIjP20/tbWSPWMEi54QVPRZExkuD9lJL+UIxUKtwVJA8wW1Trb1jMs1RFXo1CBTNZ/5hpC9QvmKWdopKw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@jridgewell/sourcemap-codec": {
      "version": "1.5.5",
      "resolved": "https://registry.npmjs.org/@jridgewell/sourcemap-codec/-/sourcemap-codec-1.5.5.tgz",
      "integrity": "sha512-cYQ9310grqxueWbl+WuIUIaiUaDcj7WOq5fVhEljNVgRfOUhY9fy2zTvfoqWsnebh8Sl70VScFbICvJnLKB0Og==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@jridgewell/trace-mapping": {
      "version": "0.3.31",
      "resolved": "https://registry.npmjs.org/@jridgewell/trace-mapping/-/trace-mapping-0.3.31.tgz",
      "integrity": "sha512-zzNR+SdQSDJzc8joaeP8QQoCQr8NuYx2dIIytl1QeBEZHJ9uW6hebsrYgbz8hJwUQao3TWCMtmfV8Nu1twOLAw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/resolve-uri": "^3.1.0",
        "@jridgewell/sourcemap-codec": "^1.4.14"
      }
    },
    "node_modules/@js-sdsl/ordered-map": {
      "version": "4.4.2",
      "resolved": "https://registry.npmjs.org/@js-sdsl/ordered-map/-/ordered-map-4.4.2.tgz",
      "integrity": "sha512-iUKgm52T8HOE/makSxjqoWhe95ZJA1/G1sYsGev2JDKUSS14KAgg1LHb+Ba+IPow0xflbnSkOsZcO08C7w1gYw==",
      "dev": true,
      "license": "MIT",
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/js-sdsl"
      }
    },
    "node_modules/@jsdevtools/ono": {
      "version": "7.1.3",
      "resolved": "https://registry.npmjs.org/@jsdevtools/ono/-/ono-7.1.3.tgz",
      "integrity": "sha512-4JQNk+3mVzK3xh2rqd6RB4J46qUR19azEHBneZyTZM+c456qOrbbM/5xcR8huNCCcbVt7+UmizG6GuUvPvKUYg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@nodelib/fs.scandir": {
      "version": "2.1.5",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.scandir/-/fs.scandir-2.1.5.tgz",
      "integrity": "sha512-vq24Bq3ym5HEQm2NKCr3yXDwjc7vTsEThRDnkp2DK9p1uqLR+DHurm/NOTo0KG7HYHU7eppKZj3MyqYuMBf62g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@nodelib/fs.stat": "2.0.5",
        "run-parallel": "^1.1.9"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/@nodelib/fs.stat": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.stat/-/fs.stat-2.0.5.tgz",
      "integrity": "sha512-RkhPPp2zrqDAQA/2jNhnztcPAlv64XdhIp7a7454A5ovI7Bukxgt7MX7udwAu3zg1DcpPU0rz3VV1SeaqvY4+A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/@nodelib/fs.walk": {
      "version": "1.2.8",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.walk/-/fs.walk-1.2.8.tgz",
      "integrity": "sha512-oGB+UxlgWcgQkgwo8GcEGwemoTFt3FIO9ababBmaGwXIoBKZ+GTy0pP185beGg7Llih/NSHSV2XAs1lnznocSg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@nodelib/fs.scandir": "2.1.5",
        "fastq": "^1.6.0"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/@npmcli/agent": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/@npmcli/agent/-/agent-3.0.0.tgz",
      "integrity": "sha512-S79NdEgDQd/NGCay6TCoVzXSj74skRZIKJcpJjC5lOq34SZzyI6MqtiiWoiVWoVrTcGjNeC4ipbh1VIHlpfF5Q==",
      "dev": true,
      "license": "ISC",
      "optional": true,
      "dependencies": {
        "agent-base": "^7.1.0",
        "http-proxy-agent": "^7.0.0",
        "https-proxy-agent": "^7.0.1",
        "lru-cache": "^10.0.1",
        "socks-proxy-agent": "^8.0.3"
      },
      "engines": {
        "node": "^18.17.0 || >=20.5.0"
      }
    },
    "node_modules/@npmcli/agent/node_modules/lru-cache": {
      "version": "10.4.3",
      "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-10.4.3.tgz",
      "integrity": "sha512-JNAzZcXrCt42VGLuYz0zfAzDfAvJWW6AfYlDBQyDV5DClI2m5sAmK+OIO7s59XfsRsWHp02jAJrRadPRGTt6SQ==",
      "dev": true,
      "license": "ISC",
      "optional": true
    },
    "node_modules/@npmcli/fs": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/@npmcli/fs/-/fs-4.0.0.tgz",
      "integrity": "sha512-/xGlezI6xfGO9NwuJlnwz/K14qD1kCSAGtacBHnGzeAIuJGazcp45KP5NuyARXoKb7cwulAGWVsbeSxdG/cb0Q==",
      "dev": true,
      "license": "ISC",
      "optional": true,
      "dependencies": {
        "semver": "^7.3.5"
      },
      "engines": {
        "node": "^18.17.0 || >=20.5.0"
      }
    },
    "node_modules/@opentelemetry/api": {
      "version": "1.9.0",
      "resolved": "https://registry.npmjs.org/@opentelemetry/api/-/api-1.9.0.tgz",
      "integrity": "sha512-3giAOQvZiH5F9bMlMiv8+GSPMeqg0dbaeo58/0SlA9sxSqZhnUtxzX9/2FzyhS9sWQf5S0GJE0AKBrFqjpeYcg==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=8.0.0"
      }
    },
    "node_modules/@opentelemetry/semantic-conventions": {
      "version": "1.30.0",
      "resolved": "https://registry.npmjs.org/@opentelemetry/semantic-conventions/-/semantic-conventions-1.30.0.tgz",
      "integrity": "sha512-4VlGgo32k2EQ2wcCY3vEU28A0O13aOtHz3Xt2/2U5FAh9EfhD6t6DqL5Z6yAnRCntbTFDU4YfbpyzSlHNWycPw==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=14"
      }
    },
    "node_modules/@pkgjs/parseargs": {
      "version": "0.11.0",
      "resolved": "https://registry.npmjs.org/@pkgjs/parseargs/-/parseargs-0.11.0.tgz",
      "integrity": "sha512-+1VkjdD0QBLPodGrJUeqarH8VAIvQODIbwh9XpP5Syisf7YoQgsJKPNFoqqLQlu+VQ/tVSshMR6loPMn8U+dPg==",
      "dev": true,
      "license": "MIT",
      "optional": true,
      "engines": {
        "node": ">=14"
      }
    },
    "node_modules/@pnpm/config.env-replace": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@pnpm/config.env-replace/-/config.env-replace-1.1.0.tgz",
      "integrity": "sha512-htyl8TWnKL7K/ESFa1oW2UB5lVDxuF5DpM7tBi6Hu2LNL3mWkIzNLG6N4zoCUP1lCKNxWy/3iu8mS8MvToGd6w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12.22.0"
      }
    },
    "node_modules/@pnpm/network.ca-file": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/@pnpm/network.ca-file/-/network.ca-file-1.0.2.tgz",
      "integrity": "sha512-YcPQ8a0jwYU9bTdJDpXjMi7Brhkr1mXsXrUJvjqM2mQDgkRiz8jFaQGOdaLxgjtUfQgZhKy/O3cG/YwmgKaxLA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "graceful-fs": "4.2.10"
      },
      "engines": {
        "node": ">=12.22.0"
      }
    },
    "node_modules/@pnpm/network.ca-file/node_modules/graceful-fs": {
      "version": "4.2.10",
      "resolved": "https://registry.npmjs.org/graceful-fs/-/graceful-fs-4.2.10.tgz",
      "integrity": "sha512-9ByhssR2fPVsNZj478qUUbKfmL0+t5BDVyjShtyZZLiK7ZDAArFFfopyOTj0M05wE2tJPisA4iTnnXl2YoPvOA==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/@pnpm/npm-conf": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/@pnpm/npm-conf/-/npm-conf-2.3.1.tgz",
      "integrity": "sha512-c83qWb22rNRuB0UaVCI0uRPNRr8Z0FWnEIvT47jiHAmOIUHbBOg5XvV7pM5x+rKn9HRpjxquDbXYSXr3fAKFcw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@pnpm/config.env-replace": "^1.1.0",
        "@pnpm/network.ca-file": "^1.0.1",
        "config-chain": "^1.1.11"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@protobufjs/aspromise": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/@protobufjs/aspromise/-/aspromise-1.1.2.tgz",
      "integrity": "sha512-j+gKExEuLmKwvz3OgROXtrJ2UG2x8Ch2YZUxahh+s1F2HZ+wAceUNLkvy6zKCPVRkU++ZWQrdxsUeQXmcg4uoQ==",
      "dev": true,
      "license": "BSD-3-Clause"
    },
    "node_modules/@protobufjs/base64": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/@protobufjs/base64/-/base64-1.1.2.tgz",
      "integrity": "sha512-AZkcAA5vnN/v4PDqKyMR5lx7hZttPDgClv83E//FMNhR2TMcLUhfRUBHCmSl0oi9zMgDDqRUJkSxO3wm85+XLg==",
      "dev": true,
      "license": "BSD-3-Clause"
    },
    "node_modules/@protobufjs/codegen": {
      "version": "2.0.4",
      "resolved": "https://registry.npmjs.org/@protobufjs/codegen/-/codegen-2.0.4.tgz",
      "integrity": "sha512-YyFaikqM5sH0ziFZCN3xDC7zeGaB/d0IUb9CATugHWbd1FRFwWwt4ld4OYMPWu5a3Xe01mGAULCdqhMlPl29Jg==",
      "dev": true,
      "license": "BSD-3-Clause"
    },
    "node_modules/@protobufjs/eventemitter": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@protobufjs/eventemitter/-/eventemitter-1.1.0.tgz",
      "integrity": "sha512-j9ednRT81vYJ9OfVuXG6ERSTdEL1xVsNgqpkxMsbIabzSo3goCjDIveeGv5d03om39ML71RdmrGNjG5SReBP/Q==",
      "dev": true,
      "license": "BSD-3-Clause"
    },
    "node_modules/@protobufjs/fetch": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@protobufjs/fetch/-/fetch-1.1.0.tgz",
      "integrity": "sha512-lljVXpqXebpsijW71PZaCYeIcE5on1w5DlQy5WH6GLbFryLUrBD4932W/E2BSpfRJWseIL4v/KPgBFxDOIdKpQ==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "@protobufjs/aspromise": "^1.1.1",
        "@protobufjs/inquire": "^1.1.0"
      }
    },
    "node_modules/@protobufjs/float": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/@protobufjs/float/-/float-1.0.2.tgz",
      "integrity": "sha512-Ddb+kVXlXst9d+R9PfTIxh1EdNkgoRe5tOX6t01f1lYWOvJnSPDBlG241QLzcyPdoNTsblLUdujGSE4RzrTZGQ==",
      "dev": true,
      "license": "BSD-3-Clause"
    },
    "node_modules/@protobufjs/inquire": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@protobufjs/inquire/-/inquire-1.1.0.tgz",
      "integrity": "sha512-kdSefcPdruJiFMVSbn801t4vFK7KB/5gd2fYvrxhuJYg8ILrmn9SKSX2tZdV6V+ksulWqS7aXjBcRXl3wHoD9Q==",
      "dev": true,
      "license": "BSD-3-Clause"
    },
    "node_modules/@protobufjs/path": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/@protobufjs/path/-/path-1.1.2.tgz",
      "integrity": "sha512-6JOcJ5Tm08dOHAbdR3GrvP+yUUfkjG5ePsHYczMFLq3ZmMkAD98cDgcT2iA1lJ9NVwFd4tH/iSSoe44YWkltEA==",
      "dev": true,
      "license": "BSD-3-Clause"
    },
    "node_modules/@protobufjs/pool": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@protobufjs/pool/-/pool-1.1.0.tgz",
      "integrity": "sha512-0kELaGSIDBKvcgS4zkjz1PeddatrjYcmMWOlAuAPwAeccUrPHdUqo/J6LiymHHEiJT5NrF1UVwxY14f+fy4WQw==",
      "dev": true,
      "license": "BSD-3-Clause"
    },
    "node_modules/@protobufjs/utf8": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@protobufjs/utf8/-/utf8-1.1.0.tgz",
      "integrity": "sha512-Vvn3zZrhQZkkBE8LSuW3em98c0FwgO4nxzv6OdSxPKJIEKY2bGbHn+mhGIPerzI4twdxaP8/0+06HBpwf345Lw==",
      "dev": true,
      "license": "BSD-3-Clause"
    },
    "node_modules/@remix-run/router": {
      "version": "1.23.0",
      "resolved": "https://registry.npmjs.org/@remix-run/router/-/router-1.23.0.tgz",
      "integrity": "sha512-O3rHJzAQKamUz1fvE0Qaw0xSFqsA/yafi2iqeE0pvdFtCO1viYx8QL6f3Ln/aCCTLxs68SLf0KPM9eSeM8yBnA==",
      "license": "MIT",
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/@rolldown/pluginutils": {
      "version": "1.0.0-beta.27",
      "resolved": "https://registry.npmjs.org/@rolldown/pluginutils/-/pluginutils-1.0.0-beta.27.tgz",
      "integrity": "sha512-+d0F4MKMCbeVUJwG96uQ4SgAznZNSq93I3V+9NHA4OpvqG8mRCpGdKmK8l/dl02h2CCDHwW2FqilnTyDcAnqjA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@rollup/rollup-android-arm-eabi": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-android-arm-eabi/-/rollup-android-arm-eabi-4.52.5.tgz",
      "integrity": "sha512-8c1vW4ocv3UOMp9K+gToY5zL2XiiVw3k7f1ksf4yO1FlDFQ1C2u72iACFnSOceJFsWskc2WZNqeRhFRPzv+wtQ==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ]
    },
    "node_modules/@rollup/rollup-android-arm64": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-android-arm64/-/rollup-android-arm64-4.52.5.tgz",
      "integrity": "sha512-mQGfsIEFcu21mvqkEKKu2dYmtuSZOBMmAl5CFlPGLY94Vlcm+zWApK7F/eocsNzp8tKmbeBP8yXyAbx0XHsFNA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "android"
      ]
    },
    "node_modules/@rollup/rollup-darwin-arm64": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-darwin-arm64/-/rollup-darwin-arm64-4.52.5.tgz",
      "integrity": "sha512-takF3CR71mCAGA+v794QUZ0b6ZSrgJkArC+gUiG6LB6TQty9T0Mqh3m2ImRBOxS2IeYBo4lKWIieSvnEk2OQWA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ]
    },
    "node_modules/@rollup/rollup-darwin-x64": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-darwin-x64/-/rollup-darwin-x64-4.52.5.tgz",
      "integrity": "sha512-W901Pla8Ya95WpxDn//VF9K9u2JbocwV/v75TE0YIHNTbhqUTv9w4VuQ9MaWlNOkkEfFwkdNhXgcLqPSmHy0fA==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ]
    },
    "node_modules/@rollup/rollup-freebsd-arm64": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-freebsd-arm64/-/rollup-freebsd-arm64-4.52.5.tgz",
      "integrity": "sha512-QofO7i7JycsYOWxe0GFqhLmF6l1TqBswJMvICnRUjqCx8b47MTo46W8AoeQwiokAx3zVryVnxtBMcGcnX12LvA==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ]
    },
    "node_modules/@rollup/rollup-freebsd-x64": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-freebsd-x64/-/rollup-freebsd-x64-4.52.5.tgz",
      "integrity": "sha512-jr21b/99ew8ujZubPo9skbrItHEIE50WdV86cdSoRkKtmWa+DDr6fu2c/xyRT0F/WazZpam6kk7IHBerSL7LDQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "freebsd"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm-gnueabihf": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm-gnueabihf/-/rollup-linux-arm-gnueabihf-4.52.5.tgz",
      "integrity": "sha512-PsNAbcyv9CcecAUagQefwX8fQn9LQ4nZkpDboBOttmyffnInRy8R8dSg6hxxl2Re5QhHBf6FYIDhIj5v982ATQ==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm-musleabihf": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm-musleabihf/-/rollup-linux-arm-musleabihf-4.52.5.tgz",
      "integrity": "sha512-Fw4tysRutyQc/wwkmcyoqFtJhh0u31K+Q6jYjeicsGJJ7bbEq8LwPWV/w0cnzOqR2m694/Af6hpFayLJZkG2VQ==",
      "cpu": [
        "arm"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm64-gnu": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm64-gnu/-/rollup-linux-arm64-gnu-4.52.5.tgz",
      "integrity": "sha512-a+3wVnAYdQClOTlyapKmyI6BLPAFYs0JM8HRpgYZQO02rMR09ZcV9LbQB+NL6sljzG38869YqThrRnfPMCDtZg==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-arm64-musl": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-arm64-musl/-/rollup-linux-arm64-musl-4.52.5.tgz",
      "integrity": "sha512-AvttBOMwO9Pcuuf7m9PkC1PUIKsfaAJ4AYhy944qeTJgQOqJYJ9oVl2nYgY7Rk0mkbsuOpCAYSs6wLYB2Xiw0Q==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-loong64-gnu": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-loong64-gnu/-/rollup-linux-loong64-gnu-4.52.5.tgz",
      "integrity": "sha512-DkDk8pmXQV2wVrF6oq5tONK6UHLz/XcEVow4JTTerdeV1uqPeHxwcg7aFsfnSm9L+OO8WJsWotKM2JJPMWrQtA==",
      "cpu": [
        "loong64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-ppc64-gnu": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-ppc64-gnu/-/rollup-linux-ppc64-gnu-4.52.5.tgz",
      "integrity": "sha512-W/b9ZN/U9+hPQVvlGwjzi+Wy4xdoH2I8EjaCkMvzpI7wJUs8sWJ03Rq96jRnHkSrcHTpQe8h5Tg3ZzUPGauvAw==",
      "cpu": [
        "ppc64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-riscv64-gnu": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-riscv64-gnu/-/rollup-linux-riscv64-gnu-4.52.5.tgz",
      "integrity": "sha512-sjQLr9BW7R/ZiXnQiWPkErNfLMkkWIoCz7YMn27HldKsADEKa5WYdobaa1hmN6slu9oWQbB6/jFpJ+P2IkVrmw==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-riscv64-musl": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-riscv64-musl/-/rollup-linux-riscv64-musl-4.52.5.tgz",
      "integrity": "sha512-hq3jU/kGyjXWTvAh2awn8oHroCbrPm8JqM7RUpKjalIRWWXE01CQOf/tUNWNHjmbMHg/hmNCwc/Pz3k1T/j/Lg==",
      "cpu": [
        "riscv64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-s390x-gnu": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-s390x-gnu/-/rollup-linux-s390x-gnu-4.52.5.tgz",
      "integrity": "sha512-gn8kHOrku8D4NGHMK1Y7NA7INQTRdVOntt1OCYypZPRt6skGbddska44K8iocdpxHTMMNui5oH4elPH4QOLrFQ==",
      "cpu": [
        "s390x"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-x64-gnu": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-x64-gnu/-/rollup-linux-x64-gnu-4.52.5.tgz",
      "integrity": "sha512-hXGLYpdhiNElzN770+H2nlx+jRog8TyynpTVzdlc6bndktjKWyZyiCsuDAlpd+j+W+WNqfcyAWz9HxxIGfZm1Q==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-linux-x64-musl": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-linux-x64-musl/-/rollup-linux-x64-musl-4.52.5.tgz",
      "integrity": "sha512-arCGIcuNKjBoKAXD+y7XomR9gY6Mw7HnFBv5Rw7wQRvwYLR7gBAgV7Mb2QTyjXfTveBNFAtPt46/36vV9STLNg==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ]
    },
    "node_modules/@rollup/rollup-openharmony-arm64": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-openharmony-arm64/-/rollup-openharmony-arm64-4.52.5.tgz",
      "integrity": "sha512-QoFqB6+/9Rly/RiPjaomPLmR/13cgkIGfA40LHly9zcH1S0bN2HVFYk3a1eAyHQyjs3ZJYlXvIGtcCs5tko9Cw==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "openharmony"
      ]
    },
    "node_modules/@rollup/rollup-win32-arm64-msvc": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-arm64-msvc/-/rollup-win32-arm64-msvc-4.52.5.tgz",
      "integrity": "sha512-w0cDWVR6MlTstla1cIfOGyl8+qb93FlAVutcor14Gf5Md5ap5ySfQ7R9S/NjNaMLSFdUnKGEasmVnu3lCMqB7w==",
      "cpu": [
        "arm64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@rollup/rollup-win32-ia32-msvc": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-ia32-msvc/-/rollup-win32-ia32-msvc-4.52.5.tgz",
      "integrity": "sha512-Aufdpzp7DpOTULJCuvzqcItSGDH73pF3ko/f+ckJhxQyHtp67rHw3HMNxoIdDMUITJESNE6a8uh4Lo4SLouOUg==",
      "cpu": [
        "ia32"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@rollup/rollup-win32-x64-gnu": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-x64-gnu/-/rollup-win32-x64-gnu-4.52.5.tgz",
      "integrity": "sha512-UGBUGPFp1vkj6p8wCRraqNhqwX/4kNQPS57BCFc8wYh0g94iVIW33wJtQAx3G7vrjjNtRaxiMUylM0ktp/TRSQ==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@rollup/rollup-win32-x64-msvc": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/@rollup/rollup-win32-x64-msvc/-/rollup-win32-x64-msvc-4.52.5.tgz",
      "integrity": "sha512-TAcgQh2sSkykPRWLrdyy2AiceMckNf5loITqXxFI5VuQjS5tSuw3WlwdN8qv8vzjLAUTvYaH/mVjSFpbkFbpTg==",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "win32"
      ]
    },
    "node_modules/@sindresorhus/is": {
      "version": "4.6.0",
      "resolved": "https://registry.npmjs.org/@sindresorhus/is/-/is-4.6.0.tgz",
      "integrity": "sha512-t09vSN3MdfsyCHoFcTRCH/iUtG7OJ0CsjzB8cjAmKc/va/kIgeDI/TxsigdncE/4be734m0cvIYwNaV4i2XqAw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sindresorhus/is?sponsor=1"
      }
    },
    "node_modules/@so-ric/colorspace": {
      "version": "1.1.6",
      "resolved": "https://registry.npmjs.org/@so-ric/colorspace/-/colorspace-1.1.6.tgz",
      "integrity": "sha512-/KiKkpHNOBgkFJwu9sh48LkHSMYGyuTcSFK/qMBdnOAlrRJzRSXAOFB5qwzaVQuDl8wAvHVMkaASQDReTahxuw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "color": "^5.0.2",
        "text-hex": "1.0.x"
      }
    },
    "node_modules/@supabase/auth-js": {
      "version": "2.76.0",
      "resolved": "https://registry.npmjs.org/@supabase/auth-js/-/auth-js-2.76.0.tgz",
      "integrity": "sha512-3dXiy0e6h/I7PmtoHDd78LnaZaJGGGi175siUiZRUAZNm7anfmxuLBUFZH+AkRZXOj63/cmmMb2Y/eUvwLjL2A==",
      "license": "MIT",
      "dependencies": {
        "@supabase/node-fetch": "2.6.15"
      }
    },
    "node_modules/@supabase/functions-js": {
      "version": "2.76.0",
      "resolved": "https://registry.npmjs.org/@supabase/functions-js/-/functions-js-2.76.0.tgz",
      "integrity": "sha512-KQiC0crFWcS9zKXd+wPue6o/Q1xjGCodI9/cZTRIlVMUB/5YhAOg9HWK5fLt0NRTBSkLhXgz/vjl0KRxg0GoQA==",
      "license": "MIT",
      "dependencies": {
        "@supabase/node-fetch": "2.6.15"
      }
    },
    "node_modules/@supabase/node-fetch": {
      "version": "2.6.15",
      "resolved": "https://registry.npmjs.org/@supabase/node-fetch/-/node-fetch-2.6.15.tgz",
      "integrity": "sha512-1ibVeYUacxWYi9i0cf5efil6adJ9WRyZBLivgjs+AUpewx1F3xPi7gLgaASI2SmIQxPoCEjAsLAzKPgMJVgOUQ==",
      "license": "MIT",
      "dependencies": {
        "whatwg-url": "^5.0.0"
      },
      "engines": {
        "node": "4.x || >=6.0.0"
      }
    },
    "node_modules/@supabase/postgrest-js": {
      "version": "2.76.0",
      "resolved": "https://registry.npmjs.org/@supabase/postgrest-js/-/postgrest-js-2.76.0.tgz",
      "integrity": "sha512-Ty+AB73Cmcjn0sQcyoy+IEOHe0n8PbzXq3Ezyq5ijjU0++BqqzWFRO8zsGkb47KCUL0M5VWaCZxs0/wlhehMvw==",
      "license": "MIT",
      "dependencies": {
        "@supabase/node-fetch": "2.6.15"
      }
    },
    "node_modules/@supabase/realtime-js": {
      "version": "2.76.0",
      "resolved": "https://registry.npmjs.org/@supabase/realtime-js/-/realtime-js-2.76.0.tgz",
      "integrity": "sha512-1C4RXOS7v1Go8GIJGtfwUwJDG7RxzlU1WdgeqRBX8u+2vnl0qQ+2HQl21mHvbKPLrKGxP/1iwYhj8kwFuExX3g==",
      "license": "MIT",
      "dependencies": {
        "@supabase/node-fetch": "2.6.15",
        "@types/phoenix": "^1.6.6",
        "@types/ws": "^8.18.1",
        "ws": "^8.18.2"
      }
    },
    "node_modules/@supabase/storage-js": {
      "version": "2.76.0",
      "resolved": "https://registry.npmjs.org/@supabase/storage-js/-/storage-js-2.76.0.tgz",
      "integrity": "sha512-v011IlS2eZz4Xkutkw8x8Lm9lGjV8tK1vqQeoVkX5hrXYJE/jTg2++Xt/ENG5jp8MErDY/P5JcWAOlAsuumnvQ==",
      "license": "MIT",
      "dependencies": {
        "@supabase/node-fetch": "2.6.15"
      }
    },
    "node_modules/@supabase/supabase-js": {
      "version": "2.76.0",
      "resolved": "https://registry.npmjs.org/@supabase/supabase-js/-/supabase-js-2.76.0.tgz",
      "integrity": "sha512-fPqdcelzZj2eA4M3ybqt8JsFnzKXjWRH7rXr45gVaMAtMkfsaQpq1itDWFHeVJSgHXudQo3Yi4QQ9U/nvTs7PA==",
      "license": "MIT",
      "dependencies": {
        "@supabase/auth-js": "2.76.0",
        "@supabase/functions-js": "2.76.0",
        "@supabase/node-fetch": "2.6.15",
        "@supabase/postgrest-js": "2.76.0",
        "@supabase/realtime-js": "2.76.0",
        "@supabase/storage-js": "2.76.0"
      }
    },
    "node_modules/@tootallnate/once": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/@tootallnate/once/-/once-2.0.0.tgz",
      "integrity": "sha512-XCuKFP5PS55gnMVu3dty8KPatLqUoy/ZYzDzAGCQ8JNFCkLXzmI7vNHCR+XpbZaMWQK/vQubr7PkYq8g470J/A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/@tootallnate/quickjs-emscripten": {
      "version": "0.23.0",
      "resolved": "https://registry.npmjs.org/@tootallnate/quickjs-emscripten/-/quickjs-emscripten-0.23.0.tgz",
      "integrity": "sha512-C5Mc6rdnsaJDjO3UpGW/CQTHtCKaYlScZTly4JIu97Jxo/odCiH0ITnDXSJPTOrEKk/ycSZ0AOgTmkDtkOsvIA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/babel__core": {
      "version": "7.20.5",
      "resolved": "https://registry.npmjs.org/@types/babel__core/-/babel__core-7.20.5.tgz",
      "integrity": "sha512-qoQprZvz5wQFJwMDqeseRXWv3rqMvhgpbXFfVyWhbx9X47POIA6i/+dXefEmZKoAgOaTdaIgNSMqMIU61yRyzA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.20.7",
        "@babel/types": "^7.20.7",
        "@types/babel__generator": "*",
        "@types/babel__template": "*",
        "@types/babel__traverse": "*"
      }
    },
    "node_modules/@types/babel__generator": {
      "version": "7.27.0",
      "resolved": "https://registry.npmjs.org/@types/babel__generator/-/babel__generator-7.27.0.tgz",
      "integrity": "sha512-ufFd2Xi92OAVPYsy+P4n7/U7e68fex0+Ee8gSG9KX7eo084CWiQ4sdxktvdl0bOPupXtVJPY19zk6EwWqUQ8lg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.0.0"
      }
    },
    "node_modules/@types/babel__template": {
      "version": "7.4.4",
      "resolved": "https://registry.npmjs.org/@types/babel__template/-/babel__template-7.4.4.tgz",
      "integrity": "sha512-h/NUaSyG5EyxBIp8YRxo4RMe2/qQgvyowRwVMzhYhBCONbW8PUsg4lkFMrhgZhUe5z3L3MiLDuvyJ/CaPa2A8A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.1.0",
        "@babel/types": "^7.0.0"
      }
    },
    "node_modules/@types/babel__traverse": {
      "version": "7.28.0",
      "resolved": "https://registry.npmjs.org/@types/babel__traverse/-/babel__traverse-7.28.0.tgz",
      "integrity": "sha512-8PvcXf70gTDZBgt9ptxJ8elBeBjcLOAcOtoO/mPJjtji1+CdGbHgm77om1GrsPxsiE+uXIpNSK64UYaIwQXd4Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.28.2"
      }
    },
    "node_modules/@types/caseless": {
      "version": "0.12.5",
      "resolved": "https://registry.npmjs.org/@types/caseless/-/caseless-0.12.5.tgz",
      "integrity": "sha512-hWtVTC2q7hc7xZ/RLbxapMvDMgUnDvKvMOpKal4DrMyfGBUfB1oKaZlIRr6mJL+If3bAP6sV/QneGzF6tJjZDg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/debug": {
      "version": "4.1.12",
      "resolved": "https://registry.npmjs.org/@types/debug/-/debug-4.1.12.tgz",
      "integrity": "sha512-vIChWdVG3LG1SMxEvI/AK+FWJthlrqlTu7fbrlywTkkaONwk/UAGaULXRlf8vkzFBLVm0zkMdCquhL5aOjhXPQ==",
      "license": "MIT",
      "dependencies": {
        "@types/ms": "*"
      }
    },
    "node_modules/@types/estree": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/@types/estree/-/estree-1.0.8.tgz",
      "integrity": "sha512-dWHzHa2WqEXI/O1E9OjrocMTKJl2mSrEolh1Iomrv6U+JuNwaHXsXx9bLu5gG7BUWFIN0skIQJQ/L1rIex4X6w==",
      "license": "MIT"
    },
    "node_modules/@types/estree-jsx": {
      "version": "1.0.5",
      "resolved": "https://registry.npmjs.org/@types/estree-jsx/-/estree-jsx-1.0.5.tgz",
      "integrity": "sha512-52CcUVNFyfb1A2ALocQw/Dd1BQFNmSdkuC3BkZ6iqhdMfQz7JWOFRuJFloOzjk+6WijU56m9oKXFAXc7o3Towg==",
      "license": "MIT",
      "dependencies": {
        "@types/estree": "*"
      }
    },
    "node_modules/@types/hast": {
      "version": "3.0.4",
      "resolved": "https://registry.npmjs.org/@types/hast/-/hast-3.0.4.tgz",
      "integrity": "sha512-WPs+bbQw5aCj+x6laNGWLH3wviHtoCv/P3+otBhbOhJgG8qtpdAMlTCxLtsTWA7LH1Oh/bFCHsBn0TPS5m30EQ==",
      "license": "MIT",
      "dependencies": {
        "@types/unist": "*"
      }
    },
    "node_modules/@types/json-schema": {
      "version": "7.0.15",
      "resolved": "https://registry.npmjs.org/@types/json-schema/-/json-schema-7.0.15.tgz",
      "integrity": "sha512-5+fP8P8MFNC+AyZCDxrB2pkZFPGzqQWUzpSeuuVLvm8VMcorNYavBqoFcxK8bQz4Qsbn4oUEEem4wDLfcysGHA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/long": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/@types/long/-/long-4.0.2.tgz",
      "integrity": "sha512-MqTGEo5bj5t157U6fA/BiDynNkn0YknVdh48CMPkTSpFTVmvao5UQmm7uEF6xBEo7qIMAlY/JSleYaE6VOdpaA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/mdast": {
      "version": "4.0.4",
      "resolved": "https://registry.npmjs.org/@types/mdast/-/mdast-4.0.4.tgz",
      "integrity": "sha512-kGaNbPh1k7AFzgpud/gMdvIm5xuECykRR+JnWKQno9TAXVa6WIVCGTPvYGekIDL4uwCZQSYbUxNBSb1aUo79oA==",
      "license": "MIT",
      "dependencies": {
        "@types/unist": "*"
      }
    },
    "node_modules/@types/ms": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/@types/ms/-/ms-2.1.0.tgz",
      "integrity": "sha512-GsCCIZDE/p3i96vtEqx+7dBUGXrc7zeSK3wwPHIaRThS+9OhWIXRqzs4d6k1SVU8g91DrNRWxWUGhp5KXQb2VA==",
      "license": "MIT"
    },
    "node_modules/@types/node": {
      "version": "22.18.11",
      "resolved": "https://registry.npmjs.org/@types/node/-/node-22.18.11.tgz",
      "integrity": "sha512-Gd33J2XIrXurb+eT2ktze3rJAfAp9ZNjlBdh4SVgyrKEOADwCbdUDaK7QgJno8Ue4kcajscsKqu6n8OBG3hhCQ==",
      "license": "MIT",
      "dependencies": {
        "undici-types": "~6.21.0"
      }
    },
    "node_modules/@types/phoenix": {
      "version": "1.6.6",
      "resolved": "https://registry.npmjs.org/@types/phoenix/-/phoenix-1.6.6.tgz",
      "integrity": "sha512-PIzZZlEppgrpoT2QgbnDU+MMzuR6BbCjllj0bM70lWoejMeNJAxCchxnv7J3XFkI8MpygtRpzXrIlmWUBclP5A==",
      "license": "MIT"
    },
    "node_modules/@types/prop-types": {
      "version": "15.7.15",
      "resolved": "https://registry.npmjs.org/@types/prop-types/-/prop-types-15.7.15.tgz",
      "integrity": "sha512-F6bEyamV9jKGAFBEmlQnesRPGOQqS2+Uwi0Em15xenOxHaf2hv6L8YCVn3rPdPJOiJfPiCnLIRyvwVaqMY3MIw==",
      "license": "MIT"
    },
    "node_modules/@types/react": {
      "version": "18.3.26",
      "resolved": "https://registry.npmjs.org/@types/react/-/react-18.3.26.tgz",
      "integrity": "sha512-RFA/bURkcKzx/X9oumPG9Vp3D3JUgus/d0b67KB0t5S/raciymilkOa66olh78MUI92QLbEJevO7rvqU/kjwKA==",
      "license": "MIT",
      "dependencies": {
        "@types/prop-types": "*",
        "csstype": "^3.0.2"
      }
    },
    "node_modules/@types/react-dom": {
      "version": "18.3.7",
      "resolved": "https://registry.npmjs.org/@types/react-dom/-/react-dom-18.3.7.tgz",
      "integrity": "sha512-MEe3UeoENYVFXzoXEWsvcpg6ZvlrFNlOQ7EOsvhI3CfAXwzPfO8Qwuxd40nepsYKqyyVQnTdEfv68q91yLcKrQ==",
      "dev": true,
      "license": "MIT",
      "peerDependencies": {
        "@types/react": "^18.0.0"
      }
    },
    "node_modules/@types/request": {
      "version": "2.48.13",
      "resolved": "https://registry.npmjs.org/@types/request/-/request-2.48.13.tgz",
      "integrity": "sha512-FGJ6udDNUCjd19pp0Q3iTiDkwhYup7J8hpMW9c4k53NrccQFFWKRho6hvtPPEhnXWKvukfwAlB6DbDz4yhH5Gg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/caseless": "*",
        "@types/node": "*",
        "@types/tough-cookie": "*",
        "form-data": "^2.5.5"
      }
    },
    "node_modules/@types/request/node_modules/form-data": {
      "version": "2.5.5",
      "resolved": "https://registry.npmjs.org/form-data/-/form-data-2.5.5.tgz",
      "integrity": "sha512-jqdObeR2rxZZbPSGL+3VckHMYtu+f9//KXBsVny6JSX/pa38Fy+bGjuG8eW/H6USNQWhLi8Num++cU2yOCNz4A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "asynckit": "^0.4.0",
        "combined-stream": "^1.0.8",
        "es-set-tostringtag": "^2.1.0",
        "hasown": "^2.0.2",
        "mime-types": "^2.1.35",
        "safe-buffer": "^5.2.1"
      },
      "engines": {
        "node": ">= 0.12"
      }
    },
    "node_modules/@types/tough-cookie": {
      "version": "4.0.5",
      "resolved": "https://registry.npmjs.org/@types/tough-cookie/-/tough-cookie-4.0.5.tgz",
      "integrity": "sha512-/Ad8+nIOV7Rl++6f1BdKxFSMgmoqEoYbHRpPcx3JEfv8VRsQe9Z4mCXeJBzxs7mbHY/XOZZuXlRNfhpVPbs6ZA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/triple-beam": {
      "version": "1.3.5",
      "resolved": "https://registry.npmjs.org/@types/triple-beam/-/triple-beam-1.3.5.tgz",
      "integrity": "sha512-6WaYesThRMCl19iryMYP7/x2OVgCtbIVflDGFpWnb9irXI3UjYE4AzmYuiUKY1AJstGijoY+MgUszMgRxIYTYw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/unist": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/@types/unist/-/unist-3.0.3.tgz",
      "integrity": "sha512-ko/gIFJRv177XgZsZcBwnqJN5x/Gien8qNOn0D5bQU/zAzVf9Zt3BlcUiLqhV9y4ARk0GbT3tnUiPNgnTXzc/Q==",
      "license": "MIT"
    },
    "node_modules/@types/ws": {
      "version": "8.18.1",
      "resolved": "https://registry.npmjs.org/@types/ws/-/ws-8.18.1.tgz",
      "integrity": "sha512-ThVF6DCVhA8kUGy+aazFQ4kXQ7E1Ty7A3ypFOe0IcJV8O/M511G99AW24irKrW56Wt44yG9+ij8FaqoBGkuBXg==",
      "license": "MIT",
      "dependencies": {
        "@types/node": "*"
      }
    },
    "node_modules/@typescript-eslint/eslint-plugin": {
      "version": "8.46.2",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/eslint-plugin/-/eslint-plugin-8.46.2.tgz",
      "integrity": "sha512-ZGBMToy857/NIPaaCucIUQgqueOiq7HeAKkhlvqVV4lm089zUFW6ikRySx2v+cAhKeUCPuWVHeimyk6Dw1iY3w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@eslint-community/regexpp": "^4.10.0",
        "@typescript-eslint/scope-manager": "8.46.2",
        "@typescript-eslint/type-utils": "8.46.2",
        "@typescript-eslint/utils": "8.46.2",
        "@typescript-eslint/visitor-keys": "8.46.2",
        "graphemer": "^1.4.0",
        "ignore": "^7.0.0",
        "natural-compare": "^1.4.0",
        "ts-api-utils": "^2.1.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "@typescript-eslint/parser": "^8.46.2",
        "eslint": "^8.57.0 || ^9.0.0",
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/parser": {
      "version": "8.46.2",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/parser/-/parser-8.46.2.tgz",
      "integrity": "sha512-BnOroVl1SgrPLywqxyqdJ4l3S2MsKVLDVxZvjI1Eoe8ev2r3kGDo+PcMihNmDE+6/KjkTubSJnmqGZZjQSBq/g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/scope-manager": "8.46.2",
        "@typescript-eslint/types": "8.46.2",
        "@typescript-eslint/typescript-estree": "8.46.2",
        "@typescript-eslint/visitor-keys": "8.46.2",
        "debug": "^4.3.4"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "eslint": "^8.57.0 || ^9.0.0",
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/project-service": {
      "version": "8.46.2",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/project-service/-/project-service-8.46.2.tgz",
      "integrity": "sha512-PULOLZ9iqwI7hXcmL4fVfIsBi6AN9YxRc0frbvmg8f+4hQAjQ5GYNKK0DIArNo+rOKmR/iBYwkpBmnIwin4wBg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/tsconfig-utils": "^8.46.2",
        "@typescript-eslint/types": "^8.46.2",
        "debug": "^4.3.4"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/scope-manager": {
      "version": "8.46.2",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/scope-manager/-/scope-manager-8.46.2.tgz",
      "integrity": "sha512-LF4b/NmGvdWEHD2H4MsHD8ny6JpiVNDzrSZr3CsckEgCbAGZbYM4Cqxvi9L+WqDMT+51Ozy7lt2M+d0JLEuBqA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/types": "8.46.2",
        "@typescript-eslint/visitor-keys": "8.46.2"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@typescript-eslint/tsconfig-utils": {
      "version": "8.46.2",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/tsconfig-utils/-/tsconfig-utils-8.46.2.tgz",
      "integrity": "sha512-a7QH6fw4S57+F5y2FIxxSDyi5M4UfGF+Jl1bCGd7+L4KsaUY80GsiF/t0UoRFDHAguKlBaACWJRmdrc6Xfkkag==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/type-utils": {
      "version": "8.46.2",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/type-utils/-/type-utils-8.46.2.tgz",
      "integrity": "sha512-HbPM4LbaAAt/DjxXaG9yiS9brOOz6fabal4uvUmaUYe6l3K1phQDMQKBRUrr06BQkxkvIZVVHttqiybM9nJsLA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/types": "8.46.2",
        "@typescript-eslint/typescript-estree": "8.46.2",
        "@typescript-eslint/utils": "8.46.2",
        "debug": "^4.3.4",
        "ts-api-utils": "^2.1.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "eslint": "^8.57.0 || ^9.0.0",
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/types": {
      "version": "8.46.2",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/types/-/types-8.46.2.tgz",
      "integrity": "sha512-lNCWCbq7rpg7qDsQrd3D6NyWYu+gkTENkG5IKYhUIcxSb59SQC/hEQ+MrG4sTgBVghTonNWq42bA/d4yYumldQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@typescript-eslint/typescript-estree": {
      "version": "8.46.2",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/typescript-estree/-/typescript-estree-8.46.2.tgz",
      "integrity": "sha512-f7rW7LJ2b7Uh2EiQ+7sza6RDZnajbNbemn54Ob6fRwQbgcIn+GWfyuHDHRYgRoZu1P4AayVScrRW+YfbTvPQoQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/project-service": "8.46.2",
        "@typescript-eslint/tsconfig-utils": "8.46.2",
        "@typescript-eslint/types": "8.46.2",
        "@typescript-eslint/visitor-keys": "8.46.2",
        "debug": "^4.3.4",
        "fast-glob": "^3.3.2",
        "is-glob": "^4.0.3",
        "minimatch": "^9.0.4",
        "semver": "^7.6.0",
        "ts-api-utils": "^2.1.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/utils": {
      "version": "8.46.2",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/utils/-/utils-8.46.2.tgz",
      "integrity": "sha512-sExxzucx0Tud5tE0XqR0lT0psBQvEpnpiul9XbGUB1QwpWJJAps1O/Z7hJxLGiZLBKMCutjTzDgmd1muEhBnVg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@eslint-community/eslint-utils": "^4.7.0",
        "@typescript-eslint/scope-manager": "8.46.2",
        "@typescript-eslint/types": "8.46.2",
        "@typescript-eslint/typescript-estree": "8.46.2"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "eslint": "^8.57.0 || ^9.0.0",
        "typescript": ">=4.8.4 <6.0.0"
      }
    },
    "node_modules/@typescript-eslint/visitor-keys": {
      "version": "8.46.2",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/visitor-keys/-/visitor-keys-8.46.2.tgz",
      "integrity": "sha512-tUFMXI4gxzzMXt4xpGJEsBsTox0XbNQ1y94EwlD/CuZwFcQP79xfQqMhau9HsRc/J0cAPA/HZt1dZPtGn9V/7w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/types": "8.46.2",
        "eslint-visitor-keys": "^4.2.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@typescript-eslint/visitor-keys/node_modules/eslint-visitor-keys": {
      "version": "4.2.1",
      "resolved": "https://registry.npmjs.org/eslint-visitor-keys/-/eslint-visitor-keys-4.2.1.tgz",
      "integrity": "sha512-Uhdk5sfqcee/9H/rCOJikYz67o0a2Tw2hGRPOG2Y1R2dg7brRe1uG0yaNQDHu+TO/uQPF/5eCapvYSmHUjt7JQ==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/@ungap/structured-clone": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/@ungap/structured-clone/-/structured-clone-1.3.0.tgz",
      "integrity": "sha512-WmoN8qaIAo7WTYWbAZuG8PYEhn5fkz7dZrqTBZ7dtt//lL2Gwms1IcnQ5yHqjDfX8Ft5j4YzDM23f87zBfDe9g==",
      "license": "ISC"
    },
    "node_modules/@vitejs/plugin-react": {
      "version": "4.7.0",
      "resolved": "https://registry.npmjs.org/@vitejs/plugin-react/-/plugin-react-4.7.0.tgz",
      "integrity": "sha512-gUu9hwfWvvEDBBmgtAowQCojwZmJ5mcLn3aufeCsitijs3+f2NsrPtlAWIR6OPiqljl96GVCUbLe0HyqIpVaoA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/core": "^7.28.0",
        "@babel/plugin-transform-react-jsx-self": "^7.27.1",
        "@babel/plugin-transform-react-jsx-source": "^7.27.1",
        "@rolldown/pluginutils": "1.0.0-beta.27",
        "@types/babel__core": "^7.20.5",
        "react-refresh": "^0.17.0"
      },
      "engines": {
        "node": "^14.18.0 || >=16.0.0"
      },
      "peerDependencies": {
        "vite": "^4.2.0 || ^5.0.0 || ^6.0.0 || ^7.0.0"
      }
    },
    "node_modules/abbrev": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/abbrev/-/abbrev-3.0.1.tgz",
      "integrity": "sha512-AO2ac6pjRB3SJmGJo+v5/aK6Omggp6fsLrs6wN9bd35ulu4cCwaAU9+7ZhXjeqHVkaHThLuzH0nZr0YpCDhygg==",
      "dev": true,
      "license": "ISC",
      "optional": true,
      "engines": {
        "node": "^18.17.0 || >=20.5.0"
      }
    },
    "node_modules/abort-controller": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/abort-controller/-/abort-controller-3.0.0.tgz",
      "integrity": "sha512-h8lQ8tacZYnR3vNQTgibj+tODHI5/+l06Au2Pcriv/Gmet0eaj4TwWH41sO9wnHDiQsEj19q0drzdWdeAHtweg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "event-target-shim": "^5.0.0"
      },
      "engines": {
        "node": ">=6.5"
      }
    },
    "node_modules/accepts": {
      "version": "1.3.8",
      "resolved": "https://registry.npmjs.org/accepts/-/accepts-1.3.8.tgz",
      "integrity": "sha512-PYAthTa2m2VKxuvSD3DPC/Gy+U+sOA1LAuT8mkmRuvw+NACSaeXEQ+NHcVF7rONl6qcaxV3Uuemwawk+7+SJLw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "mime-types": "~2.1.34",
        "negotiator": "0.6.3"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/acorn": {
      "version": "8.15.0",
      "resolved": "https://registry.npmjs.org/acorn/-/acorn-8.15.0.tgz",
      "integrity": "sha512-NZyJarBfL7nWwIq+FDL6Zp/yHEhePMNnnJ0y3qfieCrmNvYct8uvtiV41UvlSe6apAfk0fY1FbWx+NwfmpvtTg==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "acorn": "bin/acorn"
      },
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/acorn-jsx": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/acorn-jsx/-/acorn-jsx-5.3.2.tgz",
      "integrity": "sha512-rq9s+JNhf0IChjtDXxllJ7g41oZk5SlXtp0LHwyA5cejwn7vKmKp4pPri6YEePv2PU65sAsegbXtIinmDFDXgQ==",
      "dev": true,
      "license": "MIT",
      "peerDependencies": {
        "acorn": "^6.0.0 || ^7.0.0 || ^8.0.0"
      }
    },
    "node_modules/agent-base": {
      "version": "7.1.4",
      "resolved": "https://registry.npmjs.org/agent-base/-/agent-base-7.1.4.tgz",
      "integrity": "sha512-MnA+YT8fwfJPgBx3m60MNqakm30XOkyIoH1y6huTQvC0PwZG7ki8NacLBcrPbNoo8vEZy7Jpuk7+jMO+CUovTQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 14"
      }
    },
    "node_modules/ajv": {
      "version": "6.12.6",
      "resolved": "https://registry.npmjs.org/ajv/-/ajv-6.12.6.tgz",
      "integrity": "sha512-j3fVLgvTo527anyYyJOGTYJbG+vnnQYvE0m5mmkc1TK+nxAppkCLMIL0aZ4dblVCNoGShhm+kzE4ZUykBoMg4g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fast-deep-equal": "^3.1.1",
        "fast-json-stable-stringify": "^2.0.0",
        "json-schema-traverse": "^0.4.1",
        "uri-js": "^4.2.2"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/epoberezkin"
      }
    },
    "node_modules/ajv-formats": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/ajv-formats/-/ajv-formats-3.0.1.tgz",
      "integrity": "sha512-8iUql50EUR+uUcdRQ3HDqa6EVyo3docL8g5WJ3FNcWmu62IbkGUue/pEyLBW8VGKKucTPgqeks4fIU1DA4yowQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ajv": "^8.0.0"
      },
      "peerDependencies": {
        "ajv": "^8.0.0"
      },
      "peerDependenciesMeta": {
        "ajv": {
          "optional": true
        }
      }
    },
    "node_modules/ajv-formats/node_modules/ajv": {
      "version": "8.17.1",
      "resolved": "https://registry.npmjs.org/ajv/-/ajv-8.17.1.tgz",
      "integrity": "sha512-B/gBuNg5SiMTrPkC+A2+cW0RszwxYmn6VYxB/inlBStS5nx6xHIt/ehKRhIMhqusl7a8LjQoZnjCs5vhwxOQ1g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fast-deep-equal": "^3.1.3",
        "fast-uri": "^3.0.1",
        "json-schema-traverse": "^1.0.0",
        "require-from-string": "^2.0.2"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/epoberezkin"
      }
    },
    "node_modules/ajv-formats/node_modules/json-schema-traverse": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/json-schema-traverse/-/json-schema-traverse-1.0.0.tgz",
      "integrity": "sha512-NM8/P9n3XjXhIZn1lLhkFaACTOURQXjWhV4BA/RnOv8xvgqtqpAX9IO4mRQxSx1Rlo4tqzeqb0sOlruaOy3dug==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/ansi-align": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/ansi-align/-/ansi-align-3.0.1.tgz",
      "integrity": "sha512-IOfwwBF5iczOjp/WeY4YxyjqAFMQoZufdQWDd19SEExbVLNXqvpzSJ/M7Za4/sCPmQ0+GRquoA7bGcINcxew6w==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "string-width": "^4.1.0"
      }
    },
    "node_modules/ansi-escapes": {
      "version": "4.3.2",
      "resolved": "https://registry.npmjs.org/ansi-escapes/-/ansi-escapes-4.3.2.tgz",
      "integrity": "sha512-gKXj5ALrKWQLsYG9jlTRmR/xKluxHV+Z9QEwNIgCfM1/uwPMCuzVVnh5mwTd+OuBZcwSIMbqssNWRm1lE51QaQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "type-fest": "^0.21.3"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/ansi-regex": {
      "version": "6.2.2",
      "resolved": "https://registry.npmjs.org/ansi-regex/-/ansi-regex-6.2.2.tgz",
      "integrity": "sha512-Bq3SmSpyFHaWjPk8If9yc6svM8c56dB5BAtW4Qbw5jHTwwXXcTLoRMkpDJp6VL0XzlWaCHTXrkFURMYmD0sLqg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/chalk/ansi-regex?sponsor=1"
      }
    },
    "node_modules/ansi-styles": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-4.3.0.tgz",
      "integrity": "sha512-zbB9rCJAT1rbjiVDb2hqKFHNYLxgtk8NURxZ3IZwD3F6NtxbXZQCnnSi1Lkx+IDohdPlFp222wVALIheZJQSEg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "color-convert": "^2.0.1"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/chalk/ansi-styles?sponsor=1"
      }
    },
    "node_modules/any-promise": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/any-promise/-/any-promise-1.3.0.tgz",
      "integrity": "sha512-7UvmKalWRt1wgjL1RrGxoSJW/0QZFIegpeGvZG9kjp8vrRu55XTHbwnqq2GpXm9uLbcuhxm3IqX9OB4MZR1b2A==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/anymatch": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/anymatch/-/anymatch-3.1.3.tgz",
      "integrity": "sha512-KMReFUr0B4t+D+OBkjR3KYqvocp2XaSzO55UcB6mgQMd3KbcE+mWTyvVV7D/zsdEbNnV6acZUutkiHQXvTr1Rw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "normalize-path": "^3.0.0",
        "picomatch": "^2.0.4"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/archiver": {
      "version": "7.0.1",
      "resolved": "https://registry.npmjs.org/archiver/-/archiver-7.0.1.tgz",
      "integrity": "sha512-ZcbTaIqJOfCc03QwD468Unz/5Ir8ATtvAHsK+FdXbDIbGfihqh9mrvdcYunQzqn4HrvWWaFyaxJhGZagaJJpPQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "archiver-utils": "^5.0.2",
        "async": "^3.2.4",
        "buffer-crc32": "^1.0.0",
        "readable-stream": "^4.0.0",
        "readdir-glob": "^1.1.2",
        "tar-stream": "^3.0.0",
        "zip-stream": "^6.0.1"
      },
      "engines": {
        "node": ">= 14"
      }
    },
    "node_modules/archiver-utils": {
      "version": "5.0.2",
      "resolved": "https://registry.npmjs.org/archiver-utils/-/archiver-utils-5.0.2.tgz",
      "integrity": "sha512-wuLJMmIBQYCsGZgYLTy5FIB2pF6Lfb6cXMSF8Qywwk3t20zWnAi7zLcQFdKQmIB8wyZpY5ER38x08GbwtR2cLA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "glob": "^10.0.0",
        "graceful-fs": "^4.2.0",
        "is-stream": "^2.0.1",
        "lazystream": "^1.0.0",
        "lodash": "^4.17.15",
        "normalize-path": "^3.0.0",
        "readable-stream": "^4.0.0"
      },
      "engines": {
        "node": ">= 14"
      }
    },
    "node_modules/arg": {
      "version": "5.0.2",
      "resolved": "https://registry.npmjs.org/arg/-/arg-5.0.2.tgz",
      "integrity": "sha512-PYjyFOLKQ9y57JvQ6QLo8dAgNqswh8M1RMJYdQduT6xbWSgK36P/Z/v+p888pM69jMMfS8Xd8F6I1kQ/I9HUGg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/argparse": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/argparse/-/argparse-2.0.1.tgz",
      "integrity": "sha512-8+9WqebbFzpX9OR+Wa6O29asIogeRMzcGtAINdpMHHyAg10f05aSFVBbcEqGf/PXw1EjAZ+q2/bEBg3DvurK3Q==",
      "dev": true,
      "license": "Python-2.0"
    },
    "node_modules/array-flatten": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/array-flatten/-/array-flatten-1.1.1.tgz",
      "integrity": "sha512-PCVAQswWemu6UdxsDFFX/+gVeYqKAod3D3UVm91jHwynguOwAvYPhx8nNlM++NqRcK6CxxpUafjmhIdKiHibqg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/arrify": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/arrify/-/arrify-2.0.1.tgz",
      "integrity": "sha512-3duEwti880xqi4eAMN8AyR4a0ByT90zoYdLlevfrvU43vb0YZwZVfxOgxWrLXXXpyugL0hNZc9G6BiB5B3nUug==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/as-array": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/as-array/-/as-array-2.0.0.tgz",
      "integrity": "sha512-1Sd1LrodN0XYxYeZcN1J4xYZvmvTwD5tDWaPUGPIzH1mFsmzsPnVtd2exWhecMjtZk/wYWjNZJiD3b1SLCeJqg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/ast-types": {
      "version": "0.13.4",
      "resolved": "https://registry.npmjs.org/ast-types/-/ast-types-0.13.4.tgz",
      "integrity": "sha512-x1FCFnFifvYDDzTaLII71vG5uvDwgtmDTEVWAxrgeiR8VjMONcCXJx7E+USjDtHlwFmt9MysbqgF9b9Vjr6w+w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "tslib": "^2.0.1"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/async": {
      "version": "3.2.6",
      "resolved": "https://registry.npmjs.org/async/-/async-3.2.6.tgz",
      "integrity": "sha512-htCUDlxyyCLMgaM3xXg0C0LW2xqfuQ6p05pCEIsXuyQ+a1koYKTuBMzRNwmybfLgvJDMd0r1LTn4+E0Ti6C2AA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/async-lock": {
      "version": "1.4.1",
      "resolved": "https://registry.npmjs.org/async-lock/-/async-lock-1.4.1.tgz",
      "integrity": "sha512-Az2ZTpuytrtqENulXwO3GGv1Bztugx6TT37NIo7imr/Qo0gsYiGtSdBa2B6fsXhTpVZDNfu1Qn3pk531e3q+nQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/asynckit": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/asynckit/-/asynckit-0.4.0.tgz",
      "integrity": "sha512-Oei9OH4tRh0YqU3GxhX79dM/mwVgvbZJaSNaRk+bshkj0S5cfHcgYakreBjrHwatXKbz+IoIdYLxrKim2MjW0Q==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/autoprefixer": {
      "version": "10.4.21",
      "resolved": "https://registry.npmjs.org/autoprefixer/-/autoprefixer-10.4.21.tgz",
      "integrity": "sha512-O+A6LWV5LDHSJD3LjHYoNi4VLsj/Whi7k6zG12xTYaU4cQ8oxQGckXNX8cRHK5yOZ/ppVHe0ZBXGzSV9jXdVbQ==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/autoprefixer"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "browserslist": "^4.24.4",
        "caniuse-lite": "^1.0.30001702",
        "fraction.js": "^4.3.7",
        "normalize-range": "^0.1.2",
        "picocolors": "^1.1.1",
        "postcss-value-parser": "^4.2.0"
      },
      "bin": {
        "autoprefixer": "bin/autoprefixer"
      },
      "engines": {
        "node": "^10 || ^12 || >=14"
      },
      "peerDependencies": {
        "postcss": "^8.1.0"
      }
    },
    "node_modules/bail": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/bail/-/bail-2.0.2.tgz",
      "integrity": "sha512-0xO6mYd7JB2YesxDKplafRpsiOzPt9V02ddPCLbY1xYGPOX24NTyN50qnUxgCPcSoYMhKpAuBTjQoRZCAkUDRw==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/balanced-match": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/balanced-match/-/balanced-match-1.0.2.tgz",
      "integrity": "sha512-3oSeUO0TMV67hN1AmbXsK4yaqU7tjiHlbxRDZOpH0KW9+CeX4bRAaX0Anxt0tx2MrpRpWwQaPwIlISEJhYU5Pw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/bare-events": {
      "version": "2.8.0",
      "resolved": "https://registry.npmjs.org/bare-events/-/bare-events-2.8.0.tgz",
      "integrity": "sha512-AOhh6Bg5QmFIXdViHbMc2tLDsBIRxdkIaIddPslJF9Z5De3APBScuqGP2uThXnIpqFrgoxMNC6km7uXNIMLHXA==",
      "dev": true,
      "license": "Apache-2.0",
      "peerDependencies": {
        "bare-abort-controller": "*"
      },
      "peerDependenciesMeta": {
        "bare-abort-controller": {
          "optional": true
        }
      }
    },
    "node_modules/base64-js": {
      "version": "1.5.1",
      "resolved": "https://registry.npmjs.org/base64-js/-/base64-js-1.5.1.tgz",
      "integrity": "sha512-AKpaYlHn8t4SVbOHCy+b5+KKgvR4vrsD8vbvrbiQJps7fKDTkjkDry6ji0rUJjC0kzbNePLwzxq8iypo41qeWA==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT"
    },
    "node_modules/baseline-browser-mapping": {
      "version": "2.8.18",
      "resolved": "https://registry.npmjs.org/baseline-browser-mapping/-/baseline-browser-mapping-2.8.18.tgz",
      "integrity": "sha512-UYmTpOBwgPScZpS4A+YbapwWuBwasxvO/2IOHArSsAhL/+ZdmATBXTex3t+l2hXwLVYK382ibr/nKoY9GKe86w==",
      "dev": true,
      "license": "Apache-2.0",
      "bin": {
        "baseline-browser-mapping": "dist/cli.js"
      }
    },
    "node_modules/basic-auth": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/basic-auth/-/basic-auth-2.0.1.tgz",
      "integrity": "sha512-NF+epuEdnUYVlGuhaxbbq+dvJttwLnGY+YixlXlME5KpQ5W3CnXA5cVTneY3SPbPDRkcjMbifrwmFYcClgOZeg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "safe-buffer": "5.1.2"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/basic-auth-connect": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/basic-auth-connect/-/basic-auth-connect-1.1.0.tgz",
      "integrity": "sha512-rKcWjfiRZ3p5WS9e5q6msXa07s6DaFAMXoyowV+mb2xQG+oYdw2QEUyKi0Xp95JvXzShlM+oGy5QuqSK6TfC1Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "tsscmp": "^1.0.6"
      }
    },
    "node_modules/basic-auth/node_modules/safe-buffer": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/safe-buffer/-/safe-buffer-5.1.2.tgz",
      "integrity": "sha512-Gd2UZBJDkXlY7GbJxfsE8/nvKkUEU1G38c1siN6QP6a9PT9MmHB8GnpscSmMJSoF8LOIrt8ud/wPtojys4G6+g==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/basic-ftp": {
      "version": "5.0.5",
      "resolved": "https://registry.npmjs.org/basic-ftp/-/basic-ftp-5.0.5.tgz",
      "integrity": "sha512-4Bcg1P8xhUuqcii/S0Z9wiHIrQVPMermM1any+MX5GeGD7faD3/msQUDGLol9wOcz4/jbg/WJnGqoJF6LiBdtg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10.0.0"
      }
    },
    "node_modules/bignumber.js": {
      "version": "9.3.1",
      "resolved": "https://registry.npmjs.org/bignumber.js/-/bignumber.js-9.3.1.tgz",
      "integrity": "sha512-Ko0uX15oIUS7wJ3Rb30Fs6SkVbLmPBAKdlm7q9+ak9bbIeFf0MwuBsQV6z7+X768/cHsfg+WlysDWJcmthjsjQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "*"
      }
    },
    "node_modules/binary-extensions": {
      "version": "2.3.0",
      "resolved": "https://registry.npmjs.org/binary-extensions/-/binary-extensions-2.3.0.tgz",
      "integrity": "sha512-Ceh+7ox5qe7LJuLHoY0feh3pHuUDHAcRUeyL2VYghZwfpkNIy/+8Ocg0a3UuSoYzavmylwuLWQOf3hl0jjMMIw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/bl": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/bl/-/bl-4.1.0.tgz",
      "integrity": "sha512-1W07cM9gS6DcLperZfFSj+bWLtaPGSOHWhPiGzXmvVJbRLdG82sH/Kn8EtW1VqWVA54AKf2h5k5BbnIbwF3h6w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "buffer": "^5.5.0",
        "inherits": "^2.0.4",
        "readable-stream": "^3.4.0"
      }
    },
    "node_modules/bl/node_modules/readable-stream": {
      "version": "3.6.2",
      "resolved": "https://registry.npmjs.org/readable-stream/-/readable-stream-3.6.2.tgz",
      "integrity": "sha512-9u/sniCrY3D5WdsERHzHE4G2YCXqoG5FTHUiCC4SIbr6XcLZBY05ya9EKjYek9O5xOAwjGq+1JdGBAS7Q9ScoA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "inherits": "^2.0.3",
        "string_decoder": "^1.1.1",
        "util-deprecate": "^1.0.1"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/body-parser": {
      "version": "1.20.3",
      "resolved": "https://registry.npmjs.org/body-parser/-/body-parser-1.20.3.tgz",
      "integrity": "sha512-7rAxByjUMqQ3/bHJy7D6OGXvx/MMc4IqBn/X0fcM1QUcAItpZrBEYhWGem+tzXH90c+G01ypMcYJBO9Y30203g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "bytes": "3.1.2",
        "content-type": "~1.0.5",
        "debug": "2.6.9",
        "depd": "2.0.0",
        "destroy": "1.2.0",
        "http-errors": "2.0.0",
        "iconv-lite": "0.4.24",
        "on-finished": "2.4.1",
        "qs": "6.13.0",
        "raw-body": "2.5.2",
        "type-is": "~1.6.18",
        "unpipe": "1.0.0"
      },
      "engines": {
        "node": ">= 0.8",
        "npm": "1.2.8000 || >= 1.4.16"
      }
    },
    "node_modules/body-parser/node_modules/debug": {
      "version": "2.6.9",
      "resolved": "https://registry.npmjs.org/debug/-/debug-2.6.9.tgz",
      "integrity": "sha512-bC7ElrdJaJnPbAP+1EotYvqZsb3ecl5wi6Bfi6BJTUcNowp6cvspg0jXznRTKDjm/E7AdgFBVeAPVMNcKGsHMA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ms": "2.0.0"
      }
    },
    "node_modules/body-parser/node_modules/ms": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.0.0.tgz",
      "integrity": "sha512-Tpp60P6IUJDTuOq/5Z8cdskzJujfwqfOTkrwIwj7IRISpnkJnT6SyJ4PCPnGMoFjC9ddhal5KVIYtAt97ix05A==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/boxen": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/boxen/-/boxen-5.1.2.tgz",
      "integrity": "sha512-9gYgQKXx+1nP8mP7CzFyaUARhg7D3n1dF/FnErWmu9l6JvGpNUN278h0aSb+QjoiKSWG+iZ3uHrcqk0qrY9RQQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-align": "^3.0.0",
        "camelcase": "^6.2.0",
        "chalk": "^4.1.0",
        "cli-boxes": "^2.2.1",
        "string-width": "^4.2.2",
        "type-fest": "^0.20.2",
        "widest-line": "^3.1.0",
        "wrap-ansi": "^7.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/boxen/node_modules/type-fest": {
      "version": "0.20.2",
      "resolved": "https://registry.npmjs.org/type-fest/-/type-fest-0.20.2.tgz",
      "integrity": "sha512-Ne+eE4r0/iWnpAxD852z3A+N0Bt5RN//NjJwRd2VFHEmrywxf5vsZlh4R6lixl6B+wz/8d+maTSAkN1FIkI3LQ==",
      "dev": true,
      "license": "(MIT OR CC0-1.0)",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/boxen/node_modules/wrap-ansi": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/wrap-ansi/-/wrap-ansi-7.0.0.tgz",
      "integrity": "sha512-YVGIj2kamLSTxw6NsZjoBxfSwsn0ycdesmc4p+Q21c5zPuZ1pl+NfxVdxPtdHvmNVOQ6XSYG4AUtyt/Fi7D16Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-styles": "^4.0.0",
        "string-width": "^4.1.0",
        "strip-ansi": "^6.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/wrap-ansi?sponsor=1"
      }
    },
    "node_modules/brace-expansion": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-2.0.2.tgz",
      "integrity": "sha512-Jt0vHyM+jmUBqojB7E1NIYadt0vI0Qxjxd2TErW94wDz+E2LAm5vKMXXwg6ZZBTHPuUlDgQHKXvjGBdfcF1ZDQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0"
      }
    },
    "node_modules/braces": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/braces/-/braces-3.0.3.tgz",
      "integrity": "sha512-yQbXgO/OSZVD2IsiLlro+7Hf6Q18EJrKSEsdoMzKePKXct3gvD8oLcOQdIzGupr5Fj+EDe8gO/lxc1BzfMpxvA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fill-range": "^7.1.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/browserslist": {
      "version": "4.26.3",
      "resolved": "https://registry.npmjs.org/browserslist/-/browserslist-4.26.3.tgz",
      "integrity": "sha512-lAUU+02RFBuCKQPj/P6NgjlbCnLBMp4UtgTx7vNHd3XSIJF87s9a5rA3aH2yw3GS9DqZAUbOtZdCCiZeVRqt0w==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/browserslist"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "baseline-browser-mapping": "^2.8.9",
        "caniuse-lite": "^1.0.30001746",
        "electron-to-chromium": "^1.5.227",
        "node-releases": "^2.0.21",
        "update-browserslist-db": "^1.1.3"
      },
      "bin": {
        "browserslist": "cli.js"
      },
      "engines": {
        "node": "^6 || ^7 || ^8 || ^9 || ^10 || ^11 || ^12 || >=13.7"
      }
    },
    "node_modules/buffer": {
      "version": "5.7.1",
      "resolved": "https://registry.npmjs.org/buffer/-/buffer-5.7.1.tgz",
      "integrity": "sha512-EHcyIPBQ4BSGlvjB16k5KgAJ27CIsHY/2JBmCRReo48y9rQ3MaUzWX3KVlBa4U7MyX02HdVj0K7C3WaB3ju7FQ==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "base64-js": "^1.3.1",
        "ieee754": "^1.1.13"
      }
    },
    "node_modules/buffer-crc32": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/buffer-crc32/-/buffer-crc32-1.0.0.tgz",
      "integrity": "sha512-Db1SbgBS/fg/392AblrMJk97KggmvYhr4pB5ZIMTWtaivCPMWLkmb7m21cJvpvgK+J3nsU2CmmixNBZx4vFj/w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8.0.0"
      }
    },
    "node_modules/buffer-equal-constant-time": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/buffer-equal-constant-time/-/buffer-equal-constant-time-1.0.1.tgz",
      "integrity": "sha512-zRpUiDwd/xk6ADqPMATG8vc9VPrkck7T07OIx0gnjmJAnHnTVXNQG3vfvWNuiZIkwu9KrKdA1iJKfsfTVxE6NA==",
      "dev": true,
      "license": "BSD-3-Clause"
    },
    "node_modules/bytes": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/bytes/-/bytes-3.1.2.tgz",
      "integrity": "sha512-/Nf7TyzTx6S3yRJObOAV7956r8cr2+Oj8AC5dt8wSP3BQAoeX58NoHyCU8P8zGkNXStjTSi6fzO6F0pBdcYbEg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/cacache": {
      "version": "19.0.1",
      "resolved": "https://registry.npmjs.org/cacache/-/cacache-19.0.1.tgz",
      "integrity": "sha512-hdsUxulXCi5STId78vRVYEtDAjq99ICAUktLTeTYsLoTE6Z8dS0c8pWNCxwdrk9YfJeobDZc2Y186hD/5ZQgFQ==",
      "dev": true,
      "license": "ISC",
      "optional": true,
      "dependencies": {
        "@npmcli/fs": "^4.0.0",
        "fs-minipass": "^3.0.0",
        "glob": "^10.2.2",
        "lru-cache": "^10.0.1",
        "minipass": "^7.0.3",
        "minipass-collect": "^2.0.1",
        "minipass-flush": "^1.0.5",
        "minipass-pipeline": "^1.2.4",
        "p-map": "^7.0.2",
        "ssri": "^12.0.0",
        "tar": "^7.4.3",
        "unique-filename": "^4.0.0"
      },
      "engines": {
        "node": "^18.17.0 || >=20.5.0"
      }
    },
    "node_modules/cacache/node_modules/chownr": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/chownr/-/chownr-3.0.0.tgz",
      "integrity": "sha512-+IxzY9BZOQd/XuYPRmrvEVjF/nqj5kgT4kEq7VofrDoM1MxoRjEWkrCC3EtLi59TVawxTAn+orJwFQcrqEN1+g==",
      "dev": true,
      "license": "BlueOak-1.0.0",
      "optional": true,
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/cacache/node_modules/lru-cache": {
      "version": "10.4.3",
      "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-10.4.3.tgz",
      "integrity": "sha512-JNAzZcXrCt42VGLuYz0zfAzDfAvJWW6AfYlDBQyDV5DClI2m5sAmK+OIO7s59XfsRsWHp02jAJrRadPRGTt6SQ==",
      "dev": true,
      "license": "ISC",
      "optional": true
    },
    "node_modules/cacache/node_modules/tar": {
      "version": "7.5.1",
      "resolved": "https://registry.npmjs.org/tar/-/tar-7.5.1.tgz",
      "integrity": "sha512-nlGpxf+hv0v7GkWBK2V9spgactGOp0qvfWRxUMjqHyzrt3SgwE48DIv/FhqPHJYLHpgW1opq3nERbz5Anq7n1g==",
      "dev": true,
      "license": "ISC",
      "optional": true,
      "dependencies": {
        "@isaacs/fs-minipass": "^4.0.0",
        "chownr": "^3.0.0",
        "minipass": "^7.1.2",
        "minizlib": "^3.1.0",
        "yallist": "^5.0.0"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/cacache/node_modules/yallist": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/yallist/-/yallist-5.0.0.tgz",
      "integrity": "sha512-YgvUTfwqyc7UXVMrB+SImsVYSmTS8X/tSrtdNZMImM+n7+QTriRXyXim0mBrTXNeqzVF0KWGgHPeiyViFFrNDw==",
      "dev": true,
      "license": "BlueOak-1.0.0",
      "optional": true,
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/call-bind-apply-helpers": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/call-bind-apply-helpers/-/call-bind-apply-helpers-1.0.2.tgz",
      "integrity": "sha512-Sp1ablJ0ivDkSzjcaJdxEunN5/XvksFJ2sMBFfq6x0ryhQV/2b/KwFe21cMpmHtPOSij8K99/wSfoEuTObmuMQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/call-bound": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/call-bound/-/call-bound-1.0.4.tgz",
      "integrity": "sha512-+ys997U96po4Kx/ABpBCqhA9EuxJaQWDQg7295H4hBphv3IZg0boBKuwYpt4YXp6MZ5AmZQnU/tyMTlRpaSejg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.2",
        "get-intrinsic": "^1.3.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/call-me-maybe": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/call-me-maybe/-/call-me-maybe-1.0.2.tgz",
      "integrity": "sha512-HpX65o1Hnr9HH25ojC1YGs7HCQLq0GCOibSaWER0eNpgJ/Z1MZv2mTc7+xh6WOPxbRVcmgbv4hGU+uSQ/2xFZQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/callsites": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/callsites/-/callsites-3.1.0.tgz",
      "integrity": "sha512-P8BjAsXvZS+VIDUI11hHCQEv74YT67YUi5JJFNWIqL235sBmjX4+qx9Muvls5ivyNENctx46xQLQ3aTuE7ssaQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/camelcase": {
      "version": "6.3.0",
      "resolved": "https://registry.npmjs.org/camelcase/-/camelcase-6.3.0.tgz",
      "integrity": "sha512-Gmy6FhYlCY7uOElZUSbxo2UCDH8owEk996gkbrpsgGtrJLM3J7jGxl9Ic7Qwwj4ivOE5AWZWRMecDdF7hqGjFA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/camelcase-css": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/camelcase-css/-/camelcase-css-2.0.1.tgz",
      "integrity": "sha512-QOSvevhslijgYwRx6Rv7zKdMF8lbRmx+uQGx2+vDc+KI/eBnsy9kit5aj23AgGu3pa4t9AgwbnXWqS+iOY+2aA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/caniuse-lite": {
      "version": "1.0.30001751",
      "resolved": "https://registry.npmjs.org/caniuse-lite/-/caniuse-lite-1.0.30001751.tgz",
      "integrity": "sha512-A0QJhug0Ly64Ii3eIqHu5X51ebln3k4yTUkY1j8drqpWHVreg/VLijN48cZ1bYPiqOQuqpkIKnzr/Ul8V+p6Cw==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/caniuse-lite"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "CC-BY-4.0"
    },
    "node_modules/ccount": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/ccount/-/ccount-2.0.1.tgz",
      "integrity": "sha512-eyrF0jiFpY+3drT6383f1qhkbGsLSifNAjA61IUjZjmLCWjItY6LB9ft9YhoDgwfmclB2zhu51Lc7+95b8NRAg==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/chalk": {
      "version": "4.1.2",
      "resolved": "https://registry.npmjs.org/chalk/-/chalk-4.1.2.tgz",
      "integrity": "sha512-oKnbhFyRIXpUuez8iBMmyEa4nbj4IOQyuhc/wy9kY7/WVPcwIO9VA668Pu8RkO7+0G76SLROeyw9CpQ061i4mA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-styles": "^4.1.0",
        "supports-color": "^7.1.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/chalk?sponsor=1"
      }
    },
    "node_modules/char-regex": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/char-regex/-/char-regex-1.0.2.tgz",
      "integrity": "sha512-kWWXztvZ5SBQV+eRgKFeh8q5sLuZY2+8WUIzlxWVTg+oGwY14qylx1KbKzHd8P6ZYkAg0xyIDU9JMHhyJMZ1jw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/character-entities": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/character-entities/-/character-entities-2.0.2.tgz",
      "integrity": "sha512-shx7oQ0Awen/BRIdkjkvz54PnEEI/EjwXDSIZp86/KKdbafHh1Df/RYGBhn4hbe2+uKC9FnT5UCEdyPz3ai9hQ==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/character-entities-html4": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/character-entities-html4/-/character-entities-html4-2.1.0.tgz",
      "integrity": "sha512-1v7fgQRj6hnSwFpq1Eu0ynr/CDEw0rXo2B61qXrLNdHZmPKgb7fqS1a2JwF0rISo9q77jDI8VMEHoApn8qDoZA==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/character-entities-legacy": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/character-entities-legacy/-/character-entities-legacy-3.0.0.tgz",
      "integrity": "sha512-RpPp0asT/6ufRm//AJVwpViZbGM/MkjQFxJccQRHmISF/22NBtsHqAWmL+/pmkPWoIUJdWyeVleTl1wydHATVQ==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/character-reference-invalid": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/character-reference-invalid/-/character-reference-invalid-2.0.1.tgz",
      "integrity": "sha512-iBZ4F4wRbyORVsu0jPV7gXkOsGYjGHPmAyv+HiHG8gi5PtC9KI2j1+v8/tlibRvjoWX027ypmG/n0HtO5t7unw==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/chardet": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/chardet/-/chardet-2.1.0.tgz",
      "integrity": "sha512-bNFETTG/pM5ryzQ9Ad0lJOTa6HWD/YsScAR3EnCPZRPlQh77JocYktSHOUHelyhm8IARL+o4c4F1bP5KVOjiRA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/chokidar": {
      "version": "3.6.0",
      "resolved": "https://registry.npmjs.org/chokidar/-/chokidar-3.6.0.tgz",
      "integrity": "sha512-7VT13fmjotKpGipCW9JEQAusEPE+Ei8nl6/g4FBAmIm0GOOLMua9NDDo/DWp0ZAxCr3cPq5ZpBqmPAQgDda2Pw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "anymatch": "~3.1.2",
        "braces": "~3.0.2",
        "glob-parent": "~5.1.2",
        "is-binary-path": "~2.1.0",
        "is-glob": "~4.0.1",
        "normalize-path": "~3.0.0",
        "readdirp": "~3.6.0"
      },
      "engines": {
        "node": ">= 8.10.0"
      },
      "funding": {
        "url": "https://paulmillr.com/funding/"
      },
      "optionalDependencies": {
        "fsevents": "~2.3.2"
      }
    },
    "node_modules/chokidar/node_modules/glob-parent": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-5.1.2.tgz",
      "integrity": "sha512-AOIgSQCepiJYwP3ARnGx+5VnTu2HBYdzbGP45eLw1vr3zB3vZLeyed1sC9hnbcOc9/SrMyM5RPQrkGz4aS9Zow==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "is-glob": "^4.0.1"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/chownr": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/chownr/-/chownr-2.0.0.tgz",
      "integrity": "sha512-bIomtDF5KGpdogkLd9VspvFzk9KfpyyGlS8YFVZl7TGPBHL5snIOnxeshwVgPteQ9b4Eydl+pVbIyE1DcvCWgQ==",
      "dev": true,
      "license": "ISC",
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/ci-info": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/ci-info/-/ci-info-2.0.0.tgz",
      "integrity": "sha512-5tK7EtrZ0N+OLFMthtqOj4fI2Jeb88C4CAZPu25LDVUgXJ0A3Js4PMGqrn0JU1W0Mh1/Z8wZzYPxqUrXeBboCQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/cjson": {
      "version": "0.3.3",
      "resolved": "https://registry.npmjs.org/cjson/-/cjson-0.3.3.tgz",
      "integrity": "sha512-yKNcXi/Mvi5kb1uK0sahubYiyfUO2EUgOp4NcY9+8NX5Xmc+4yeNogZuLFkpLBBj7/QI9MjRUIuXrV9XOw5kVg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "json-parse-helpfulerror": "^1.0.3"
      },
      "engines": {
        "node": ">= 0.3.0"
      }
    },
    "node_modules/cli-boxes": {
      "version": "2.2.1",
      "resolved": "https://registry.npmjs.org/cli-boxes/-/cli-boxes-2.2.1.tgz",
      "integrity": "sha512-y4coMcylgSCdVinjiDBuR8PCC2bLjyGTwEmPb9NHR/QaNU6EUOXcTY/s6VjGMD6ENSEaeQYHCY0GNGS5jfMwPw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/cli-cursor": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/cli-cursor/-/cli-cursor-3.1.0.tgz",
      "integrity": "sha512-I/zHAwsKf9FqGoXM4WWRACob9+SNukZTd94DWF57E4toouRulbCxcUh6RKUEOQlYTHJnzkPMySvPNaaSLNfLZw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "restore-cursor": "^3.1.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/cli-highlight": {
      "version": "2.1.11",
      "resolved": "https://registry.npmjs.org/cli-highlight/-/cli-highlight-2.1.11.tgz",
      "integrity": "sha512-9KDcoEVwyUXrjcJNvHD0NFc/hiwe/WPVYIleQh2O1N2Zro5gWJZ/K+3DGn8w8P/F6FxOgzyC5bxDyHIgCSPhGg==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "chalk": "^4.0.0",
        "highlight.js": "^10.7.1",
        "mz": "^2.4.0",
        "parse5": "^5.1.1",
        "parse5-htmlparser2-tree-adapter": "^6.0.0",
        "yargs": "^16.0.0"
      },
      "bin": {
        "highlight": "bin/highlight"
      },
      "engines": {
        "node": ">=8.0.0",
        "npm": ">=5.0.0"
      }
    },
    "node_modules/cli-highlight/node_modules/cliui": {
      "version": "7.0.4",
      "resolved": "https://registry.npmjs.org/cliui/-/cliui-7.0.4.tgz",
      "integrity": "sha512-OcRE68cOsVMXp1Yvonl/fzkQOyjLSu/8bhPDfQt0e0/Eb283TKP20Fs2MqoPsr9SwA595rRCA+QMzYc9nBP+JQ==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "string-width": "^4.2.0",
        "strip-ansi": "^6.0.0",
        "wrap-ansi": "^7.0.0"
      }
    },
    "node_modules/cli-highlight/node_modules/wrap-ansi": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/wrap-ansi/-/wrap-ansi-7.0.0.tgz",
      "integrity": "sha512-YVGIj2kamLSTxw6NsZjoBxfSwsn0ycdesmc4p+Q21c5zPuZ1pl+NfxVdxPtdHvmNVOQ6XSYG4AUtyt/Fi7D16Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-styles": "^4.0.0",
        "string-width": "^4.1.0",
        "strip-ansi": "^6.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/wrap-ansi?sponsor=1"
      }
    },
    "node_modules/cli-highlight/node_modules/yargs": {
      "version": "16.2.0",
      "resolved": "https://registry.npmjs.org/yargs/-/yargs-16.2.0.tgz",
      "integrity": "sha512-D1mvvtDG0L5ft/jGWkLpG1+m0eQxOfaBvTNELraWj22wSVUMWxZUvYgJYcKh6jGGIkJFhH4IZPQhR4TKpc8mBw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "cliui": "^7.0.2",
        "escalade": "^3.1.1",
        "get-caller-file": "^2.0.5",
        "require-directory": "^2.1.1",
        "string-width": "^4.2.0",
        "y18n": "^5.0.5",
        "yargs-parser": "^20.2.2"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/cli-highlight/node_modules/yargs-parser": {
      "version": "20.2.9",
      "resolved": "https://registry.npmjs.org/yargs-parser/-/yargs-parser-20.2.9.tgz",
      "integrity": "sha512-y11nGElTIV+CT3Zv9t7VKl+Q3hTQoT9a1Qzezhhl6Rp21gJ/IVTW7Z3y9EWXhuUBC2Shnf+DX0antecpAwSP8w==",
      "dev": true,
      "license": "ISC",
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/cli-spinners": {
      "version": "2.9.2",
      "resolved": "https://registry.npmjs.org/cli-spinners/-/cli-spinners-2.9.2.tgz",
      "integrity": "sha512-ywqV+5MmyL4E7ybXgKys4DugZbX0FC6LnwrhjuykIjnK9k8OQacQ7axGKnjDXWNhns0xot3bZI5h55H8yo9cJg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/cli-table3": {
      "version": "0.6.5",
      "resolved": "https://registry.npmjs.org/cli-table3/-/cli-table3-0.6.5.tgz",
      "integrity": "sha512-+W/5efTR7y5HRD7gACw9yQjqMVvEMLBHmboM/kPWam+H+Hmyrgjh6YncVKK122YZkXrLudzTuAukUw9FnMf7IQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "string-width": "^4.2.0"
      },
      "engines": {
        "node": "10.* || >= 12.*"
      },
      "optionalDependencies": {
        "@colors/colors": "1.5.0"
      }
    },
    "node_modules/cli-width": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/cli-width/-/cli-width-3.0.0.tgz",
      "integrity": "sha512-FxqpkPPwu1HjuN93Omfm4h8uIanXofW0RxVEW3k5RKx+mJJYSthzNhp32Kzxxy3YAEZ/Dc/EWN1vZRY0+kOhbw==",
      "dev": true,
      "license": "ISC",
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/cliui": {
      "version": "8.0.1",
      "resolved": "https://registry.npmjs.org/cliui/-/cliui-8.0.1.tgz",
      "integrity": "sha512-BSeNnyus75C4//NQ9gQt1/csTXyo/8Sb+afLAkzAptFuMsod9HFokGNudZpi/oQV73hnVK+sR+5PVRMd+Dr7YQ==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "string-width": "^4.2.0",
        "strip-ansi": "^6.0.1",
        "wrap-ansi": "^7.0.0"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/cliui/node_modules/wrap-ansi": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/wrap-ansi/-/wrap-ansi-7.0.0.tgz",
      "integrity": "sha512-YVGIj2kamLSTxw6NsZjoBxfSwsn0ycdesmc4p+Q21c5zPuZ1pl+NfxVdxPtdHvmNVOQ6XSYG4AUtyt/Fi7D16Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-styles": "^4.0.0",
        "string-width": "^4.1.0",
        "strip-ansi": "^6.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/wrap-ansi?sponsor=1"
      }
    },
    "node_modules/clone": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/clone/-/clone-1.0.4.tgz",
      "integrity": "sha512-JQHZ2QMW6l3aH/j6xCqQThY/9OH4D/9ls34cgkUBiEeocRTU04tHfKPBsUK1PqZCUQM7GiA0IIXJSuXHI64Kbg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.8"
      }
    },
    "node_modules/clsx": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/clsx/-/clsx-2.1.1.tgz",
      "integrity": "sha512-eYm0QWBtUrBWZWG0d386OGAw16Z995PiOVo2B7bjWSbHedGl5e0ZWaq65kOGgUSNesEIDkB9ISbTg/JK9dhCZA==",
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/color": {
      "version": "5.0.2",
      "resolved": "https://registry.npmjs.org/color/-/color-5.0.2.tgz",
      "integrity": "sha512-e2hz5BzbUPcYlIRHo8ieAhYgoajrJr+hWoceg6E345TPsATMUKqDgzt8fSXZJJbxfpiPzkWyphz8yn8At7q3fA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "color-convert": "^3.0.1",
        "color-string": "^2.0.0"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/color-convert": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/color-convert/-/color-convert-2.0.1.tgz",
      "integrity": "sha512-RRECPsj7iu/xb5oKYcsFHSppFNnsj/52OVTRKb4zP5onXwVF3zVmmToNcOfGC+CRDpfK/U584fMg38ZHCaElKQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "color-name": "~1.1.4"
      },
      "engines": {
        "node": ">=7.0.0"
      }
    },
    "node_modules/color-name": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/color-name/-/color-name-1.1.4.tgz",
      "integrity": "sha512-dOy+3AuW3a2wNbZHIuMZpTcgjGuLU/uBL/ubcZF9OXbDo8ff4O8yVp5Bf0efS8uEoYo5q4Fx7dY9OgQGXgAsQA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/color-string": {
      "version": "2.1.2",
      "resolved": "https://registry.npmjs.org/color-string/-/color-string-2.1.2.tgz",
      "integrity": "sha512-RxmjYxbWemV9gKu4zPgiZagUxbH3RQpEIO77XoSSX0ivgABDZ+h8Zuash/EMFLTI4N9QgFPOJ6JQpPZKFxa+dA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "color-name": "^2.0.0"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/color-string/node_modules/color-name": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/color-name/-/color-name-2.0.2.tgz",
      "integrity": "sha512-9vEt7gE16EW7Eu7pvZnR0abW9z6ufzhXxGXZEVU9IqPdlsUiMwJeJfRtq0zePUmnbHGT9zajca7mX8zgoayo4A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12.20"
      }
    },
    "node_modules/color/node_modules/color-convert": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/color-convert/-/color-convert-3.1.2.tgz",
      "integrity": "sha512-UNqkvCDXstVck3kdowtOTWROIJQwafjOfXSmddoDrXo4cewMKmusCeF22Q24zvjR8nwWib/3S/dfyzPItPEiJg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "color-name": "^2.0.0"
      },
      "engines": {
        "node": ">=14.6"
      }
    },
    "node_modules/color/node_modules/color-name": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/color-name/-/color-name-2.0.2.tgz",
      "integrity": "sha512-9vEt7gE16EW7Eu7pvZnR0abW9z6ufzhXxGXZEVU9IqPdlsUiMwJeJfRtq0zePUmnbHGT9zajca7mX8zgoayo4A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12.20"
      }
    },
    "node_modules/colorette": {
      "version": "2.0.20",
      "resolved": "https://registry.npmjs.org/colorette/-/colorette-2.0.20.tgz",
      "integrity": "sha512-IfEDxwoWIjkeXL1eXcDiow4UbKjhLdq6/EuSVR9GMN7KVH3r9gQ83e73hsz1Nd1T3ijd5xv1wcWRYO+D6kCI2w==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/combined-stream": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/combined-stream/-/combined-stream-1.0.8.tgz",
      "integrity": "sha512-FQN4MRfuJeHf7cBbBMJFXhKSDq+2kAArBlmRBvcvFE5BB1HZKXtSFASDhdlz9zOYwxh8lDdnvmMOe/+5cdoEdg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "delayed-stream": "~1.0.0"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/comma-separated-tokens": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/comma-separated-tokens/-/comma-separated-tokens-2.0.3.tgz",
      "integrity": "sha512-Fu4hJdvzeylCfQPp9SGWidpzrMs7tTrlu6Vb8XGaRGck8QSNZJJp538Wrb60Lax4fPwR64ViY468OIUTbRlGZg==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/commander": {
      "version": "5.1.0",
      "resolved": "https://registry.npmjs.org/commander/-/commander-5.1.0.tgz",
      "integrity": "sha512-P0CysNDQ7rtVw4QIQtm+MRxV66vKFSvlsQvGYXZWR3qFU0jlMKHZZZgw8e+8DSah4UDKMqnknRDQz+xuQXQ/Zg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/compress-commons": {
      "version": "6.0.2",
      "resolved": "https://registry.npmjs.org/compress-commons/-/compress-commons-6.0.2.tgz",
      "integrity": "sha512-6FqVXeETqWPoGcfzrXb37E50NP0LXT8kAMu5ooZayhWWdgEY4lBEEcbQNXtkuKQsGduxiIcI4gOTsxTmuq/bSg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "crc-32": "^1.2.0",
        "crc32-stream": "^6.0.0",
        "is-stream": "^2.0.1",
        "normalize-path": "^3.0.0",
        "readable-stream": "^4.0.0"
      },
      "engines": {
        "node": ">= 14"
      }
    },
    "node_modules/compressible": {
      "version": "2.0.18",
      "resolved": "https://registry.npmjs.org/compressible/-/compressible-2.0.18.tgz",
      "integrity": "sha512-AF3r7P5dWxL8MxyITRMlORQNaOA2IkAFaTr4k7BUumjPtRpGDTZpl0Pb1XCO6JeDCBdp126Cgs9sMxqSjgYyRg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "mime-db": ">= 1.43.0 < 2"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/compression": {
      "version": "1.8.1",
      "resolved": "https://registry.npmjs.org/compression/-/compression-1.8.1.tgz",
      "integrity": "sha512-9mAqGPHLakhCLeNyxPkK4xVo746zQ/czLH1Ky+vkitMnWfWZps8r0qXuwhwizagCRttsL4lfG4pIOvaWLpAP0w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "bytes": "3.1.2",
        "compressible": "~2.0.18",
        "debug": "2.6.9",
        "negotiator": "~0.6.4",
        "on-headers": "~1.1.0",
        "safe-buffer": "5.2.1",
        "vary": "~1.1.2"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/compression/node_modules/debug": {
      "version": "2.6.9",
      "resolved": "https://registry.npmjs.org/debug/-/debug-2.6.9.tgz",
      "integrity": "sha512-bC7ElrdJaJnPbAP+1EotYvqZsb3ecl5wi6Bfi6BJTUcNowp6cvspg0jXznRTKDjm/E7AdgFBVeAPVMNcKGsHMA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ms": "2.0.0"
      }
    },
    "node_modules/compression/node_modules/ms": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.0.0.tgz",
      "integrity": "sha512-Tpp60P6IUJDTuOq/5Z8cdskzJujfwqfOTkrwIwj7IRISpnkJnT6SyJ4PCPnGMoFjC9ddhal5KVIYtAt97ix05A==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/compression/node_modules/negotiator": {
      "version": "0.6.4",
      "resolved": "https://registry.npmjs.org/negotiator/-/negotiator-0.6.4.tgz",
      "integrity": "sha512-myRT3DiWPHqho5PrJaIRyaMv2kgYf0mUVgBNOYMuCH5Ki1yEiQaf/ZJuQ62nvpc44wL5WDbTX7yGJi1Neevw8w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/concat-map": {
      "version": "0.0.1",
      "resolved": "https://registry.npmjs.org/concat-map/-/concat-map-0.0.1.tgz",
      "integrity": "sha512-/Srv4dswyQNBfohGpz9o6Yb3Gz3SrUDqBH5rTuhGR7ahtlbYKnVxw2bCFMRljaA7EXHaXZ8wsHdodFvbkhKmqg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/config-chain": {
      "version": "1.1.13",
      "resolved": "https://registry.npmjs.org/config-chain/-/config-chain-1.1.13.tgz",
      "integrity": "sha512-qj+f8APARXHrM0hraqXYb2/bOVSV4PvJQlNZ/DVj0QrmNM2q2euizkeuVckQ57J+W0mRH6Hvi+k50M4Jul2VRQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ini": "^1.3.4",
        "proto-list": "~1.2.1"
      }
    },
    "node_modules/config-chain/node_modules/ini": {
      "version": "1.3.8",
      "resolved": "https://registry.npmjs.org/ini/-/ini-1.3.8.tgz",
      "integrity": "sha512-JV/yugV2uzW5iMRSiZAyDtQd+nxtUnjeLt0acNdw98kKLrvuRVyB80tsREOE7yvGVgalhZ6RNXCmEHkUKBKxew==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/configstore": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/configstore/-/configstore-5.0.1.tgz",
      "integrity": "sha512-aMKprgk5YhBNyH25hj8wGt2+D52Sw1DRRIzqBwLp2Ya9mFmY8KPvvtvmna8SxVR9JMZ4kzMD68N22vlaRpkeFA==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "dot-prop": "^5.2.0",
        "graceful-fs": "^4.1.2",
        "make-dir": "^3.0.0",
        "unique-string": "^2.0.0",
        "write-file-atomic": "^3.0.0",
        "xdg-basedir": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/connect": {
      "version": "3.7.0",
      "resolved": "https://registry.npmjs.org/connect/-/connect-3.7.0.tgz",
      "integrity": "sha512-ZqRXc+tZukToSNmh5C2iWMSoV3X1YUcPbqEM4DkEG5tNQXrQUZCNVGGv3IuicnkMtPfGf3Xtp8WCXs295iQ1pQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "debug": "2.6.9",
        "finalhandler": "1.1.2",
        "parseurl": "~1.3.3",
        "utils-merge": "1.0.1"
      },
      "engines": {
        "node": ">= 0.10.0"
      }
    },
    "node_modules/connect/node_modules/debug": {
      "version": "2.6.9",
      "resolved": "https://registry.npmjs.org/debug/-/debug-2.6.9.tgz",
      "integrity": "sha512-bC7ElrdJaJnPbAP+1EotYvqZsb3ecl5wi6Bfi6BJTUcNowp6cvspg0jXznRTKDjm/E7AdgFBVeAPVMNcKGsHMA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ms": "2.0.0"
      }
    },
    "node_modules/connect/node_modules/encodeurl": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/encodeurl/-/encodeurl-1.0.2.tgz",
      "integrity": "sha512-TPJXq8JqFaVYm2CWmPvnP2Iyo4ZSM7/QKcSmuMLDObfpH5fi7RUGmd/rTDf+rut/saiDiQEeVTNgAmJEdAOx0w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/connect/node_modules/finalhandler": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/finalhandler/-/finalhandler-1.1.2.tgz",
      "integrity": "sha512-aAWcW57uxVNrQZqFXjITpW3sIUQmHGG3qSb9mUah9MgMC4NeWhNOlNjXEYq3HjRAvL6arUviZGGJsBg6z0zsWA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "debug": "2.6.9",
        "encodeurl": "~1.0.2",
        "escape-html": "~1.0.3",
        "on-finished": "~2.3.0",
        "parseurl": "~1.3.3",
        "statuses": "~1.5.0",
        "unpipe": "~1.0.0"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/connect/node_modules/ms": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.0.0.tgz",
      "integrity": "sha512-Tpp60P6IUJDTuOq/5Z8cdskzJujfwqfOTkrwIwj7IRISpnkJnT6SyJ4PCPnGMoFjC9ddhal5KVIYtAt97ix05A==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/connect/node_modules/on-finished": {
      "version": "2.3.0",
      "resolved": "https://registry.npmjs.org/on-finished/-/on-finished-2.3.0.tgz",
      "integrity": "sha512-ikqdkGAAyf/X/gPhXGvfgAytDZtDbr+bkNUJ0N9h5MI/dmdgCs3l6hoHrcUv41sRKew3jIwrp4qQDXiK99Utww==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ee-first": "1.1.1"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/connect/node_modules/statuses": {
      "version": "1.5.0",
      "resolved": "https://registry.npmjs.org/statuses/-/statuses-1.5.0.tgz",
      "integrity": "sha512-OpZ3zP+jT1PI7I8nemJX4AKmAX070ZkYPVWV/AaKTJl+tXCTGyVdC1a4SL8RUQYEwk/f34ZX8UTykN68FwrqAA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/content-disposition": {
      "version": "0.5.4",
      "resolved": "https://registry.npmjs.org/content-disposition/-/content-disposition-0.5.4.tgz",
      "integrity": "sha512-FveZTNuGw04cxlAiWbzi6zTAL/lhehaWbTtgluJh4/E95DqMwTmha3KZN1aAWA8cFIhHzMZUvLevkw5Rqk+tSQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "safe-buffer": "5.2.1"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/content-type": {
      "version": "1.0.5",
      "resolved": "https://registry.npmjs.org/content-type/-/content-type-1.0.5.tgz",
      "integrity": "sha512-nTjqfcBFEipKdXCv4YDQWCfmcLZKm81ldF0pAopTvyrFGVbcR6P/VAAd5G7N+0tTr8QqiU0tFadD6FK4NtJwOA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/convert-source-map": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/convert-source-map/-/convert-source-map-2.0.0.tgz",
      "integrity": "sha512-Kvp459HrV2FEJ1CAsi1Ku+MY3kasH19TFykTz2xWmMeq6bk2NU3XXvfJ+Q61m0xktWwt+1HSYf3JZsTms3aRJg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/cookie": {
      "version": "0.7.1",
      "resolved": "https://registry.npmjs.org/cookie/-/cookie-0.7.1.tgz",
      "integrity": "sha512-6DnInpx7SJ2AK3+CTUE/ZM0vWTUboZCegxhC2xiIydHR9jNuTAASBrfEpHhiGOZw/nX51bHt6YQl8jsGo4y/0w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/cookie-signature": {
      "version": "1.0.6",
      "resolved": "https://registry.npmjs.org/cookie-signature/-/cookie-signature-1.0.6.tgz",
      "integrity": "sha512-QADzlaHc8icV8I7vbaJXJwod9HWYp8uCqf1xa4OfNu1T7JVxQIrUgOWtHdNDtPiywmFbiS12VjotIXLrKM3orQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/core-util-is": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/core-util-is/-/core-util-is-1.0.3.tgz",
      "integrity": "sha512-ZQBvi1DcpJ4GDqanjucZ2Hj3wEO5pZDS89BWbkcrvdxksJorwUDDZamX9ldFkp9aw2lmBDLgkObEA4DWNJ9FYQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/cors": {
      "version": "2.8.5",
      "resolved": "https://registry.npmjs.org/cors/-/cors-2.8.5.tgz",
      "integrity": "sha512-KIHbLJqu73RGr/hnbrO9uBeixNGuvSQjul/jdFvS/KFSIH1hWVd1ng7zOHx+YrEfInLG7q4n6GHQ9cDtxv/P6g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "object-assign": "^4",
        "vary": "^1"
      },
      "engines": {
        "node": ">= 0.10"
      }
    },
    "node_modules/crc-32": {
      "version": "1.2.2",
      "resolved": "https://registry.npmjs.org/crc-32/-/crc-32-1.2.2.tgz",
      "integrity": "sha512-ROmzCKrTnOwybPcJApAA6WBWij23HVfGVNKqqrZpuyZOHqK2CwHSvpGuyt/UNNvaIjEd8X5IFGp4Mh+Ie1IHJQ==",
      "dev": true,
      "license": "Apache-2.0",
      "bin": {
        "crc32": "bin/crc32.njs"
      },
      "engines": {
        "node": ">=0.8"
      }
    },
    "node_modules/crc32-stream": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/crc32-stream/-/crc32-stream-6.0.0.tgz",
      "integrity": "sha512-piICUB6ei4IlTv1+653yq5+KoqfBYmj9bw6LqXoOneTMDXk5nM1qt12mFW1caG3LlJXEKW1Bp0WggEmIfQB34g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "crc-32": "^1.2.0",
        "readable-stream": "^4.0.0"
      },
      "engines": {
        "node": ">= 14"
      }
    },
    "node_modules/cross-env": {
      "version": "7.0.3",
      "resolved": "https://registry.npmjs.org/cross-env/-/cross-env-7.0.3.tgz",
      "integrity": "sha512-+/HKd6EgcQCJGh2PSjZuUitQBQynKor4wrFbRg4DtAgS1aWO+gU52xpH7M9ScGgXSYmAVS9bIJ8EzuaGw0oNAw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "cross-spawn": "^7.0.1"
      },
      "bin": {
        "cross-env": "src/bin/cross-env.js",
        "cross-env-shell": "src/bin/cross-env-shell.js"
      },
      "engines": {
        "node": ">=10.14",
        "npm": ">=6",
        "yarn": ">=1"
      }
    },
    "node_modules/cross-spawn": {
      "version": "7.0.6",
      "resolved": "https://registry.npmjs.org/cross-spawn/-/cross-spawn-7.0.6.tgz",
      "integrity": "sha512-uV2QOWP2nWzsy2aMp8aRibhi9dlzF5Hgh5SHaB9OiTGEyDTiJJyx0uy51QXdyWbtAHNua4XJzUKca3OzKUd3vA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "path-key": "^3.1.0",
        "shebang-command": "^2.0.0",
        "which": "^2.0.1"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/crypto-random-string": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/crypto-random-string/-/crypto-random-string-2.0.0.tgz",
      "integrity": "sha512-v1plID3y9r/lPhviJ1wrXpLeyUIGAZ2SHNYTEapm7/8A9nLPoyvVp3RK/EPFqn5kEznyWgYZNsRtYYIWbuG8KA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/cssesc": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/cssesc/-/cssesc-3.0.0.tgz",
      "integrity": "sha512-/Tb/JcjK111nNScGob5MNtsntNM1aCNUDipB/TkwZFhyDrrE47SOx/18wF2bbjgc3ZzCSKW1T5nt5EbFoAz/Vg==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "cssesc": "bin/cssesc"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/csstype": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/csstype/-/csstype-3.1.3.tgz",
      "integrity": "sha512-M1uQkMl8rQK/szD0LNhtqxIPLpimGm8sOBwU7lLnCpSbTyY3yeU1Vc7l4KT5zT4s/yOxHH5O7tIuuLOCnLADRw==",
      "license": "MIT"
    },
    "node_modules/csv-parse": {
      "version": "5.6.0",
      "resolved": "https://registry.npmjs.org/csv-parse/-/csv-parse-5.6.0.tgz",
      "integrity": "sha512-l3nz3euub2QMg5ouu5U09Ew9Wf6/wQ8I++ch1loQ0ljmzhmfZYrH9fflS22i/PQEvsPvxCwxgz5q7UB8K1JO4Q==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/data-uri-to-buffer": {
      "version": "6.0.2",
      "resolved": "https://registry.npmjs.org/data-uri-to-buffer/-/data-uri-to-buffer-6.0.2.tgz",
      "integrity": "sha512-7hvf7/GW8e86rW0ptuwS3OcBGDjIi6SZva7hCyWC0yYry2cOPmLIjXAUHI6DK2HsnwJd9ifmt57i8eV2n4YNpw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 14"
      }
    },
    "node_modules/debug": {
      "version": "4.4.3",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.4.3.tgz",
      "integrity": "sha512-RGwwWnwQvkVfavKVt22FGLw+xYSdzARwm0ru6DhTVA3umU5hZc28V3kO4stgYryrTlLpuvgI9GiijltAjNbcqA==",
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/decode-named-character-reference": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/decode-named-character-reference/-/decode-named-character-reference-1.2.0.tgz",
      "integrity": "sha512-c6fcElNV6ShtZXmsgNgFFV5tVX2PaV4g+MOAkb8eXHvn6sryJBrZa9r0zV6+dtTyoCKxtDy5tyQ5ZwQuidtd+Q==",
      "license": "MIT",
      "dependencies": {
        "character-entities": "^2.0.0"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/deep-equal-in-any-order": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/deep-equal-in-any-order/-/deep-equal-in-any-order-2.1.0.tgz",
      "integrity": "sha512-9FklcFjcehm1yBWiOYtmazJOiMbT+v81Kq6nThIuXbWLWIZMX3ZI+QoLf7wCi0T8XzTAXf6XqEdEyVrjZkhbGA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "lodash.mapvalues": "^4.6.0",
        "sort-any": "^2.0.0"
      }
    },
    "node_modules/deep-extend": {
      "version": "0.6.0",
      "resolved": "https://registry.npmjs.org/deep-extend/-/deep-extend-0.6.0.tgz",
      "integrity": "sha512-LOHxIOaPYdHlJRtCQfDIVZtfw/ufM8+rVj649RIHzcm/vGwQRXFt6OPqIFWsm2XEMrNIEtWR64sY1LEKD2vAOA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=4.0.0"
      }
    },
    "node_modules/deep-freeze": {
      "version": "0.0.1",
      "resolved": "https://registry.npmjs.org/deep-freeze/-/deep-freeze-0.0.1.tgz",
      "integrity": "sha512-Z+z8HiAvsGwmjqlphnHW5oz6yWlOwu6EQfFTjmeTWlDeda3FS2yv3jhq35TX/ewmsnqB+RX2IdsIOyjJCQN5tg==",
      "dev": true,
      "license": "public domain"
    },
    "node_modules/deep-is": {
      "version": "0.1.4",
      "resolved": "https://registry.npmjs.org/deep-is/-/deep-is-0.1.4.tgz",
      "integrity": "sha512-oIPzksmTg4/MriiaYGO+okXDT7ztn/w3Eptv/+gSIdMdKsJo0u4CfYNFJPy+4SKMuCqGw2wxnA+URMg3t8a/bQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/defaults": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/defaults/-/defaults-1.0.4.tgz",
      "integrity": "sha512-eFuaLoy/Rxalv2kr+lqMlUnrDWV+3j4pljOIJgLIhI058IQfWJ7vXhyEIHu+HtC738klGALYxOKDO0bQP3tg8A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "clone": "^1.0.2"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/degenerator": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/degenerator/-/degenerator-5.0.1.tgz",
      "integrity": "sha512-TllpMR/t0M5sqCXfj85i4XaAzxmS5tVA16dqvdkMwGmzI+dXLXnw3J+3Vdv7VKw+ThlTMboK6i9rnZ6Nntj5CQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ast-types": "^0.13.4",
        "escodegen": "^2.1.0",
        "esprima": "^4.0.1"
      },
      "engines": {
        "node": ">= 14"
      }
    },
    "node_modules/delayed-stream": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/delayed-stream/-/delayed-stream-1.0.0.tgz",
      "integrity": "sha512-ZySD7Nf91aLB0RxL4KGrKHBXl7Eds1DAmEdcoVawXnLD7SDhpNgtuII2aAkg7a7QS41jxPSZ17p4VdGnMHk3MQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/depd": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/depd/-/depd-2.0.0.tgz",
      "integrity": "sha512-g7nH6P6dyDioJogAAGprGpCtVImJhpPk/roCzdb3fIh61/s/nPsfR6onyMwkCAR/OlC3yBC0lESvUoQEAssIrw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/dequal": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/dequal/-/dequal-2.0.3.tgz",
      "integrity": "sha512-0je+qPKHEMohvfRTCEo3CrPG6cAzAYgmzKyxRiYSSDkS6eGJdyVJm7WaYA5ECaAD9wLB2T4EEeymA5aFVcYXCA==",
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/destroy": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/destroy/-/destroy-1.2.0.tgz",
      "integrity": "sha512-2sJGJTaXIIaR1w4iJSNoN0hnMY7Gpc/n8D4qSCJw8QqFWXf7cuAgnEHxBpweaVcPevC2l3KpjYCx3NypQQgaJg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.8",
        "npm": "1.2.8000 || >= 1.4.16"
      }
    },
    "node_modules/devlop": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/devlop/-/devlop-1.1.0.tgz",
      "integrity": "sha512-RWmIqhcFf1lRYBvNmr7qTNuyCt/7/ns2jbpp1+PalgE/rDQcBT0fioSMUpJ93irlUhC5hrg4cYqe6U+0ImW0rA==",
      "license": "MIT",
      "dependencies": {
        "dequal": "^2.0.0"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/didyoumean": {
      "version": "1.2.2",
      "resolved": "https://registry.npmjs.org/didyoumean/-/didyoumean-1.2.2.tgz",
      "integrity": "sha512-gxtyfqMg7GKyhQmb056K7M3xszy/myH8w+B4RT+QXBQsvAOdc3XymqDDPHx1BgPgsdAA5SIifona89YtRATDzw==",
      "dev": true,
      "license": "Apache-2.0"
    },
    "node_modules/discontinuous-range": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/discontinuous-range/-/discontinuous-range-1.0.0.tgz",
      "integrity": "sha512-c68LpLbO+7kP/b1Hr1qs8/BJ09F5khZGTxqxZuhzxpmwJKOgRFHJWIb9/KmqnqHhLdO55aOxFH/EGBvUQbL/RQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/dlv": {
      "version": "1.1.3",
      "resolved": "https://registry.npmjs.org/dlv/-/dlv-1.1.3.tgz",
      "integrity": "sha512-+HlytyjlPKnIG8XuRG8WvmBP8xs8P71y+SKKS6ZXWoEgLuePxtDoUEiH7WkdePWrQ5JBpE6aoVqfZfJUQkjXwA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/dot-prop": {
      "version": "5.3.0",
      "resolved": "https://registry.npmjs.org/dot-prop/-/dot-prop-5.3.0.tgz",
      "integrity": "sha512-QM8q3zDe58hqUqjraQOmzZ1LIH9SWQJTlEKCH4kJ2oQvLZk7RbQXvtDM2XEq3fwkV9CCvvH4LA0AV+ogFsBM2Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-obj": "^2.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/dunder-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/dunder-proto/-/dunder-proto-1.0.1.tgz",
      "integrity": "sha512-KIN/nDJBQRcXw0MLVhZE9iQHmG68qAVIBg9CqmUYjmQIhgij9U5MFvrqkUL5FbtyyzZuOeOt0zdeRe4UY7ct+A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.1",
        "es-errors": "^1.3.0",
        "gopd": "^1.2.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/duplexify": {
      "version": "4.1.3",
      "resolved": "https://registry.npmjs.org/duplexify/-/duplexify-4.1.3.tgz",
      "integrity": "sha512-M3BmBhwJRZsSx38lZyhE53Csddgzl5R7xGJNk7CVddZD6CcmwMCH8J+7AprIrQKH7TonKxaCjcv27Qmf+sQ+oA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "end-of-stream": "^1.4.1",
        "inherits": "^2.0.3",
        "readable-stream": "^3.1.1",
        "stream-shift": "^1.0.2"
      }
    },
    "node_modules/duplexify/node_modules/readable-stream": {
      "version": "3.6.2",
      "resolved": "https://registry.npmjs.org/readable-stream/-/readable-stream-3.6.2.tgz",
      "integrity": "sha512-9u/sniCrY3D5WdsERHzHE4G2YCXqoG5FTHUiCC4SIbr6XcLZBY05ya9EKjYek9O5xOAwjGq+1JdGBAS7Q9ScoA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "inherits": "^2.0.3",
        "string_decoder": "^1.1.1",
        "util-deprecate": "^1.0.1"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/eastasianwidth": {
      "version": "0.2.0",
      "resolved": "https://registry.npmjs.org/eastasianwidth/-/eastasianwidth-0.2.0.tgz",
      "integrity": "sha512-I88TYZWc9XiYHRQ4/3c5rjjfgkjhLyW2luGIheGERbNQ6OY7yTybanSpDXZa8y7VUP9YmDcYa+eyq4ca7iLqWA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/ecdsa-sig-formatter": {
      "version": "1.0.11",
      "resolved": "https://registry.npmjs.org/ecdsa-sig-formatter/-/ecdsa-sig-formatter-1.0.11.tgz",
      "integrity": "sha512-nagl3RYrbNv6kQkeJIpt6NJZy8twLB/2vtz6yN9Z4vRKHN4/QZJIEbqohALSgwKdnksuY3k5Addp5lg8sVoVcQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "safe-buffer": "^5.0.1"
      }
    },
    "node_modules/ee-first": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/ee-first/-/ee-first-1.1.1.tgz",
      "integrity": "sha512-WMwm9LhRUo+WUaRN+vRuETqG89IgZphVSNkdFgeb6sS/E4OrDIN7t48CAewSHXc6C8lefD8KKfr5vY61brQlow==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/electron-to-chromium": {
      "version": "1.5.237",
      "resolved": "https://registry.npmjs.org/electron-to-chromium/-/electron-to-chromium-1.5.237.tgz",
      "integrity": "sha512-icUt1NvfhGLar5lSWH3tHNzablaA5js3HVHacQimfP8ViEBOQv+L7DKEuHdbTZ0SKCO1ogTJTIL1Gwk9S6Qvcg==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/emoji-regex": {
      "version": "8.0.0",
      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
      "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/emojilib": {
      "version": "2.4.0",
      "resolved": "https://registry.npmjs.org/emojilib/-/emojilib-2.4.0.tgz",
      "integrity": "sha512-5U0rVMU5Y2n2+ykNLQqMoqklN9ICBT/KsvC1Gz6vqHbz2AXXGkG+Pm5rMWk/8Vjrr/mY9985Hi8DYzn1F09Nyw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/enabled": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/enabled/-/enabled-2.0.0.tgz",
      "integrity": "sha512-AKrN98kuwOzMIdAizXGI86UFBoo26CL21UM763y1h/GMSJ4/OHU9k2YlsmBpyScFo/wbLzWQJBMCW4+IO3/+OQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/encodeurl": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/encodeurl/-/encodeurl-2.0.0.tgz",
      "integrity": "sha512-Q0n9HRi4m6JuGIV1eFlmvJB7ZEVxu93IrMyiMsGC0lrMJMWzRgx6WGquyfQgZVb31vhGgXnfmPNNXmxnOkRBrg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/encoding": {
      "version": "0.1.13",
      "resolved": "https://registry.npmjs.org/encoding/-/encoding-0.1.13.tgz",
      "integrity": "sha512-ETBauow1T35Y/WZMkio9jiM0Z5xjHHmJ4XmjZOq1l/dXz3lr2sRn87nJy20RupqSh1F2m3HHPSp8ShIPQJrJ3A==",
      "dev": true,
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "iconv-lite": "^0.6.2"
      }
    },
    "node_modules/encoding/node_modules/iconv-lite": {
      "version": "0.6.3",
      "resolved": "https://registry.npmjs.org/iconv-lite/-/iconv-lite-0.6.3.tgz",
      "integrity": "sha512-4fCk79wshMdzMp2rH06qWrJE4iolqLhCUH+OiuIgU++RB0+94NlDL81atO7GX55uUKueo0txHNtvEyI6D7WdMw==",
      "dev": true,
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "safer-buffer": ">= 2.1.2 < 3.0.0"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/end-of-stream": {
      "version": "1.4.5",
      "resolved": "https://registry.npmjs.org/end-of-stream/-/end-of-stream-1.4.5.tgz",
      "integrity": "sha512-ooEGc6HP26xXq/N+GCGOT0JKCLDGrq2bQUZrQ7gyrJiZANJ/8YDTxTpQBXGMn+WbIQXNVpyWymm7KYVICQnyOg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "once": "^1.4.0"
      }
    },
    "node_modules/env-paths": {
      "version": "2.2.1",
      "resolved": "https://registry.npmjs.org/env-paths/-/env-paths-2.2.1.tgz",
      "integrity": "sha512-+h1lkLKhZMTYjog1VEpJNG7NZJWcuc2DDk/qsqSTRRCOXiLjeQ1d1/udrUGhqMxUgAlwKNZ0cf2uqan5GLuS2A==",
      "dev": true,
      "license": "MIT",
      "optional": true,
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/environment": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/environment/-/environment-1.1.0.tgz",
      "integrity": "sha512-xUtoPkMggbz0MPyPiIWr1Kp4aeWJjDZ6SMvURhimjdZgsRuDplF5/s9hcgGhyXMhs+6vpnuoiZ2kFiu3FMnS8Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=18"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/err-code": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/err-code/-/err-code-2.0.3.tgz",
      "integrity": "sha512-2bmlRpNKBxT/CRmPOlyISQpNj+qSeYvcym/uT0Jx2bMOlKLtSy1ZmLuVxSEKKyor/N5yhvp/ZiG1oE3DEYMSFA==",
      "dev": true,
      "license": "MIT",
      "optional": true
    },
    "node_modules/es-define-property": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/es-define-property/-/es-define-property-1.0.1.tgz",
      "integrity": "sha512-e3nRfgfUZ4rNGL232gUgX06QNyyez04KdjFrF+LTRoOXmrOgFKDg4BCdsjW8EnT69eqdYGmRpJwiPVYNrCaW3g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-errors": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/es-errors/-/es-errors-1.3.0.tgz",
      "integrity": "sha512-Zf5H2Kxt2xjTvbJvP2ZWLEICxA6j+hAmMzIlypy4xcBg1vKVnx89Wy0GbS+kf5cwCVFFzdCFh2XSCFNULS6csw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-object-atoms": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/es-object-atoms/-/es-object-atoms-1.1.1.tgz",
      "integrity": "sha512-FGgH2h8zKNim9ljj7dankFPcICIK9Cp5bm+c2gQSYePhpaG5+esrLODihIorn+Pe6FGJzWhXQotPv73jTaldXA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-set-tostringtag": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/es-set-tostringtag/-/es-set-tostringtag-2.1.0.tgz",
      "integrity": "sha512-j6vWzfrGVfyXxge+O0x5sh6cvxAog0a/4Rdd2K36zCMV5eJ+/+tOAngRO8cODMNWbVRdVlmGZQL2YS3yR8bIUA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.6",
        "has-tostringtag": "^1.0.2",
        "hasown": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/esbuild": {
      "version": "0.25.11",
      "resolved": "https://registry.npmjs.org/esbuild/-/esbuild-0.25.11.tgz",
      "integrity": "sha512-KohQwyzrKTQmhXDW1PjCv3Tyspn9n5GcY2RTDqeORIdIJY8yKIF7sTSopFmn/wpMPW4rdPXI0UE5LJLuq3bx0Q==",
      "dev": true,
      "hasInstallScript": true,
      "license": "MIT",
      "bin": {
        "esbuild": "bin/esbuild"
      },
      "engines": {
        "node": ">=18"
      },
      "optionalDependencies": {
        "@esbuild/aix-ppc64": "0.25.11",
        "@esbuild/android-arm": "0.25.11",
        "@esbuild/android-arm64": "0.25.11",
        "@esbuild/android-x64": "0.25.11",
        "@esbuild/darwin-arm64": "0.25.11",
        "@esbuild/darwin-x64": "0.25.11",
        "@esbuild/freebsd-arm64": "0.25.11",
        "@esbuild/freebsd-x64": "0.25.11",
        "@esbuild/linux-arm": "0.25.11",
        "@esbuild/linux-arm64": "0.25.11",
        "@esbuild/linux-ia32": "0.25.11",
        "@esbuild/linux-loong64": "0.25.11",
        "@esbuild/linux-mips64el": "0.25.11",
        "@esbuild/linux-ppc64": "0.25.11",
        "@esbuild/linux-riscv64": "0.25.11",
        "@esbuild/linux-s390x": "0.25.11",
        "@esbuild/linux-x64": "0.25.11",
        "@esbuild/netbsd-arm64": "0.25.11",
        "@esbuild/netbsd-x64": "0.25.11",
        "@esbuild/openbsd-arm64": "0.25.11",
        "@esbuild/openbsd-x64": "0.25.11",
        "@esbuild/openharmony-arm64": "0.25.11",
        "@esbuild/sunos-x64": "0.25.11",
        "@esbuild/win32-arm64": "0.25.11",
        "@esbuild/win32-ia32": "0.25.11",
        "@esbuild/win32-x64": "0.25.11"
      }
    },
    "node_modules/escalade": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/escalade/-/escalade-3.2.0.tgz",
      "integrity": "sha512-WUj2qlxaQtO4g6Pq5c29GTcWGDyd8itL8zTlipgECz3JesAiiOKotd8JU6otB3PACgG6xkJUyVhboMS+bje/jA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/escape-goat": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/escape-goat/-/escape-goat-2.1.1.tgz",
      "integrity": "sha512-8/uIhbG12Csjy2JEW7D9pHbreaVaS/OpN3ycnyvElTdwM5n6GY6W6e2IPemfvGZeUMqZ9A/3GqIZMgKnBhAw/Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/escape-html": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/escape-html/-/escape-html-1.0.3.tgz",
      "integrity": "sha512-NiSupZ4OeuGwr68lGIeym/ksIZMJodUGOSCZ/FSnTxcrekbvqrgdUxlJOMpijaKZVjAJrWrGs/6Jy8OMuyj9ow==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/escape-string-regexp": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/escape-string-regexp/-/escape-string-regexp-4.0.0.tgz",
      "integrity": "sha512-TtpcNJ3XAzx3Gq8sWRzJaVajRs0uVxA2YAkdb1jm2YkPz4G6egUFAyA3n5vtEIZefPk5Wa4UXbKuS5fKkJWdgA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/escodegen": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/escodegen/-/escodegen-2.1.0.tgz",
      "integrity": "sha512-2NlIDTwUWJN0mRPQOdtQBzbUHvdGY2P1VXSyU83Q3xKxM7WHX2Ql8dKq782Q9TgQUNOLEzEYu9bzLNj1q88I5w==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "esprima": "^4.0.1",
        "estraverse": "^5.2.0",
        "esutils": "^2.0.2"
      },
      "bin": {
        "escodegen": "bin/escodegen.js",
        "esgenerate": "bin/esgenerate.js"
      },
      "engines": {
        "node": ">=6.0"
      },
      "optionalDependencies": {
        "source-map": "~0.6.1"
      }
    },
    "node_modules/eslint": {
      "version": "9.38.0",
      "resolved": "https://registry.npmjs.org/eslint/-/eslint-9.38.0.tgz",
      "integrity": "sha512-t5aPOpmtJcZcz5UJyY2GbvpDlsK5E8JqRqoKtfiKE3cNh437KIqfJr3A3AKf5k64NPx6d0G3dno6XDY05PqPtw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@eslint-community/eslint-utils": "^4.8.0",
        "@eslint-community/regexpp": "^4.12.1",
        "@eslint/config-array": "^0.21.1",
        "@eslint/config-helpers": "^0.4.1",
        "@eslint/core": "^0.16.0",
        "@eslint/eslintrc": "^3.3.1",
        "@eslint/js": "9.38.0",
        "@eslint/plugin-kit": "^0.4.0",
        "@humanfs/node": "^0.16.6",
        "@humanwhocodes/module-importer": "^1.0.1",
        "@humanwhocodes/retry": "^0.4.2",
        "@types/estree": "^1.0.6",
        "ajv": "^6.12.4",
        "chalk": "^4.0.0",
        "cross-spawn": "^7.0.6",
        "debug": "^4.3.2",
        "escape-string-regexp": "^4.0.0",
        "eslint-scope": "^8.4.0",
        "eslint-visitor-keys": "^4.2.1",
        "espree": "^10.4.0",
        "esquery": "^1.5.0",
        "esutils": "^2.0.2",
        "fast-deep-equal": "^3.1.3",
        "file-entry-cache": "^8.0.0",
        "find-up": "^5.0.0",
        "glob-parent": "^6.0.2",
        "ignore": "^5.2.0",
        "imurmurhash": "^0.1.4",
        "is-glob": "^4.0.0",
        "json-stable-stringify-without-jsonify": "^1.0.1",
        "lodash.merge": "^4.6.2",
        "minimatch": "^3.1.2",
        "natural-compare": "^1.4.0",
        "optionator": "^0.9.3"
      },
      "bin": {
        "eslint": "bin/eslint.js"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://eslint.org/donate"
      },
      "peerDependencies": {
        "jiti": "*"
      },
      "peerDependenciesMeta": {
        "jiti": {
          "optional": true
        }
      }
    },
    "node_modules/eslint-plugin-react-hooks": {
      "version": "5.2.0",
      "resolved": "https://registry.npmjs.org/eslint-plugin-react-hooks/-/eslint-plugin-react-hooks-5.2.0.tgz",
      "integrity": "sha512-+f15FfK64YQwZdJNELETdn5ibXEUQmW1DZL6KXhNnc2heoy/sg9VJJeT7n8TlMWouzWqSWavFkIhHyIbIAEapg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "peerDependencies": {
        "eslint": "^3.0.0 || ^4.0.0 || ^5.0.0 || ^6.0.0 || ^7.0.0 || ^8.0.0-0 || ^9.0.0"
      }
    },
    "node_modules/eslint-plugin-react-refresh": {
      "version": "0.4.24",
      "resolved": "https://registry.npmjs.org/eslint-plugin-react-refresh/-/eslint-plugin-react-refresh-0.4.24.tgz",
      "integrity": "sha512-nLHIW7TEq3aLrEYWpVaJ1dRgFR+wLDPN8e8FpYAql/bMV2oBEfC37K0gLEGgv9fy66juNShSMV8OkTqzltcG/w==",
      "dev": true,
      "license": "MIT",
      "peerDependencies": {
        "eslint": ">=8.40"
      }
    },
    "node_modules/eslint-scope": {
      "version": "8.4.0",
      "resolved": "https://registry.npmjs.org/eslint-scope/-/eslint-scope-8.4.0.tgz",
      "integrity": "sha512-sNXOfKCn74rt8RICKMvJS7XKV/Xk9kA7DyJr8mJik3S7Cwgy3qlkkmyS2uQB3jiJg6VNdZd/pDBJu0nvG2NlTg==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "esrecurse": "^4.3.0",
        "estraverse": "^5.2.0"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/eslint-visitor-keys": {
      "version": "3.4.3",
      "resolved": "https://registry.npmjs.org/eslint-visitor-keys/-/eslint-visitor-keys-3.4.3.tgz",
      "integrity": "sha512-wpc+LXeiyiisxPlEkUzU6svyS1frIO3Mgxj1fdy7Pm8Ygzguax2N3Fa/D/ag1WqbOprdI+uY6wMUl8/a2G+iag==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/eslint/node_modules/brace-expansion": {
      "version": "1.1.12",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
      "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/eslint/node_modules/eslint-visitor-keys": {
      "version": "4.2.1",
      "resolved": "https://registry.npmjs.org/eslint-visitor-keys/-/eslint-visitor-keys-4.2.1.tgz",
      "integrity": "sha512-Uhdk5sfqcee/9H/rCOJikYz67o0a2Tw2hGRPOG2Y1R2dg7brRe1uG0yaNQDHu+TO/uQPF/5eCapvYSmHUjt7JQ==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/eslint/node_modules/ignore": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/ignore/-/ignore-5.3.2.tgz",
      "integrity": "sha512-hsBTNUqQTDwkWtcdYI2i06Y/nUBEsNEDJKjWdigLvegy8kDuJAS8uRlpkkcQpyEXL0Z/pjDy5HBmMjRCJ2gq+g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 4"
      }
    },
    "node_modules/eslint/node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/espree": {
      "version": "10.4.0",
      "resolved": "https://registry.npmjs.org/espree/-/espree-10.4.0.tgz",
      "integrity": "sha512-j6PAQ2uUr79PZhBjP5C5fhl8e39FmRnOjsD5lGnWrFU8i2G776tBK7+nP8KuQUTTyAZUwfQqXAgrVH5MbH9CYQ==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "acorn": "^8.15.0",
        "acorn-jsx": "^5.3.2",
        "eslint-visitor-keys": "^4.2.1"
      },
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/espree/node_modules/eslint-visitor-keys": {
      "version": "4.2.1",
      "resolved": "https://registry.npmjs.org/eslint-visitor-keys/-/eslint-visitor-keys-4.2.1.tgz",
      "integrity": "sha512-Uhdk5sfqcee/9H/rCOJikYz67o0a2Tw2hGRPOG2Y1R2dg7brRe1uG0yaNQDHu+TO/uQPF/5eCapvYSmHUjt7JQ==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": "^18.18.0 || ^20.9.0 || >=21.1.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/esprima": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/esprima/-/esprima-4.0.1.tgz",
      "integrity": "sha512-eGuFFw7Upda+g4p+QHvnW0RyTX/SVeJBDM/gCtMARO0cLuT2HcEKnTPvhjV6aGeqrCB/sbNop0Kszm0jsaWU4A==",
      "dev": true,
      "license": "BSD-2-Clause",
      "bin": {
        "esparse": "bin/esparse.js",
        "esvalidate": "bin/esvalidate.js"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/esquery": {
      "version": "1.6.0",
      "resolved": "https://registry.npmjs.org/esquery/-/esquery-1.6.0.tgz",
      "integrity": "sha512-ca9pw9fomFcKPvFLXhBKUK90ZvGibiGOvRJNbjljY7s7uq/5YO4BOzcYtJqExdx99rF6aAcnRxHmcUHcz6sQsg==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "estraverse": "^5.1.0"
      },
      "engines": {
        "node": ">=0.10"
      }
    },
    "node_modules/esrecurse": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/esrecurse/-/esrecurse-4.3.0.tgz",
      "integrity": "sha512-KmfKL3b6G+RXvP8N1vr3Tq1kL/oCFgn2NYXEtqP8/L3pKapUA4G8cFVaoF3SU323CD4XypR/ffioHmkti6/Tag==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "estraverse": "^5.2.0"
      },
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/estraverse": {
      "version": "5.3.0",
      "resolved": "https://registry.npmjs.org/estraverse/-/estraverse-5.3.0.tgz",
      "integrity": "sha512-MMdARuVEQziNTeJD8DgMqmhwR11BRQ/cBP+pLtYdSTnf3MIO8fFeiINEbX36ZdNlfU/7A9f3gUw49B3oQsvwBA==",
      "dev": true,
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/estree-util-is-identifier-name": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/estree-util-is-identifier-name/-/estree-util-is-identifier-name-3.0.0.tgz",
      "integrity": "sha512-hFtqIDZTIUZ9BXLb8y4pYGyk6+wekIivNVTcmvk8NoOh+VeRn5y6cEHzbURrWbfp1fIqdVipilzj+lfaadNZmg==",
      "license": "MIT",
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/esutils": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/esutils/-/esutils-2.0.3.tgz",
      "integrity": "sha512-kVscqXk4OCp68SZ0dkgEKVi6/8ij300KBWTJq32P/dYeWTSwK41WyTxalN1eRmA5Z9UU/LX9D7FWSmV9SAYx6g==",
      "dev": true,
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/etag": {
      "version": "1.8.1",
      "resolved": "https://registry.npmjs.org/etag/-/etag-1.8.1.tgz",
      "integrity": "sha512-aIL5Fx7mawVa300al2BnEE4iNvo1qETxLrPI/o05L7z6go7fCw1J6EQmbK4FmJ2AS7kgVF/KEZWufBfdClMcPg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/event-target-shim": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/event-target-shim/-/event-target-shim-5.0.1.tgz",
      "integrity": "sha512-i/2XbnSz/uxRCU6+NdVJgKWDTM427+MqYbkQzD321DuCQJUqOuJKIA0IM2+W2xtYHdKOmZ4dR6fExsd4SXL+WQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/events": {
      "version": "3.3.0",
      "resolved": "https://registry.npmjs.org/events/-/events-3.3.0.tgz",
      "integrity": "sha512-mQw+2fkQbALzQ7V0MY0IqdnXNOeTtP4r0lN9z7AAawCXgqea7bDii20AYrIBrFd/Hx0M2Ocz6S111CaFkUcb0Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.8.x"
      }
    },
    "node_modules/events-listener": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/events-listener/-/events-listener-1.1.0.tgz",
      "integrity": "sha512-Kd3EgYfODHueq6GzVfs/VUolh2EgJsS8hkO3KpnDrxVjU3eq63eXM2ujXkhPP+OkeUOhL8CxdfZbQXzryb5C4g==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/events-universal": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/events-universal/-/events-universal-1.0.1.tgz",
      "integrity": "sha512-LUd5euvbMLpwOF8m6ivPCbhQeSiYVNb8Vs0fQ8QjXo0JTkEHpz8pxdQf0gStltaPpw0Cca8b39KxvK9cfKRiAw==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "bare-events": "^2.7.0"
      }
    },
    "node_modules/exegesis": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/exegesis/-/exegesis-4.3.0.tgz",
      "integrity": "sha512-V90IJQ4XYO1SfH5qdJTOijXkQTF3hSpSHHqlf7MstUMDKP22iAvi63gweFLtPZ4Gj3Wnh8RgJX5TGu0WiwTyDQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@apidevtools/json-schema-ref-parser": "^9.0.3",
        "ajv": "^8.3.0",
        "ajv-formats": "^2.1.0",
        "body-parser": "^1.18.3",
        "content-type": "^1.0.4",
        "deep-freeze": "0.0.1",
        "events-listener": "^1.1.0",
        "glob": "^10.3.10",
        "json-ptr": "^3.0.1",
        "json-schema-traverse": "^1.0.0",
        "lodash": "^4.17.11",
        "openapi3-ts": "^3.1.1",
        "promise-breaker": "^6.0.0",
        "qs": "^6.6.0",
        "raw-body": "^2.3.3",
        "semver": "^7.0.0"
      },
      "engines": {
        "node": ">=10.0.0",
        "npm": ">5.0.0"
      }
    },
    "node_modules/exegesis-express": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/exegesis-express/-/exegesis-express-4.0.0.tgz",
      "integrity": "sha512-V2hqwTtYRj0bj43K4MCtm0caD97YWkqOUHFMRCBW5L1x9IjyqOEc7Xa4oQjjiFbeFOSQzzwPV+BzXsQjSz08fw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "exegesis": "^4.1.0"
      },
      "engines": {
        "node": ">=6.0.0",
        "npm": ">5.0.0"
      }
    },
    "node_modules/exegesis/node_modules/ajv": {
      "version": "8.17.1",
      "resolved": "https://registry.npmjs.org/ajv/-/ajv-8.17.1.tgz",
      "integrity": "sha512-B/gBuNg5SiMTrPkC+A2+cW0RszwxYmn6VYxB/inlBStS5nx6xHIt/ehKRhIMhqusl7a8LjQoZnjCs5vhwxOQ1g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fast-deep-equal": "^3.1.3",
        "fast-uri": "^3.0.1",
        "json-schema-traverse": "^1.0.0",
        "require-from-string": "^2.0.2"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/epoberezkin"
      }
    },
    "node_modules/exegesis/node_modules/ajv-formats": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/ajv-formats/-/ajv-formats-2.1.1.tgz",
      "integrity": "sha512-Wx0Kx52hxE7C18hkMEggYlEifqWZtYaRgouJor+WMdPnQyEK13vgEWyVNup7SoeeoLMsr4kf5h6dOW11I15MUA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ajv": "^8.0.0"
      },
      "peerDependencies": {
        "ajv": "^8.0.0"
      },
      "peerDependenciesMeta": {
        "ajv": {
          "optional": true
        }
      }
    },
    "node_modules/exegesis/node_modules/json-schema-traverse": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/json-schema-traverse/-/json-schema-traverse-1.0.0.tgz",
      "integrity": "sha512-NM8/P9n3XjXhIZn1lLhkFaACTOURQXjWhV4BA/RnOv8xvgqtqpAX9IO4mRQxSx1Rlo4tqzeqb0sOlruaOy3dug==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/exponential-backoff": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/exponential-backoff/-/exponential-backoff-3.1.3.tgz",
      "integrity": "sha512-ZgEeZXj30q+I0EN+CbSSpIyPaJ5HVQD18Z1m+u1FXbAeT94mr1zw50q4q6jiiC447Nl/YTcIYSAftiGqetwXCA==",
      "dev": true,
      "license": "Apache-2.0",
      "optional": true
    },
    "node_modules/express": {
      "version": "4.21.2",
      "resolved": "https://registry.npmjs.org/express/-/express-4.21.2.tgz",
      "integrity": "sha512-28HqgMZAmih1Czt9ny7qr6ek2qddF4FclbMzwhCREB6OFfH+rXAnuNCwo1/wFvrtbgsQDb4kSbX9de9lFbrXnA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "accepts": "~1.3.8",
        "array-flatten": "1.1.1",
        "body-parser": "1.20.3",
        "content-disposition": "0.5.4",
        "content-type": "~1.0.4",
        "cookie": "0.7.1",
        "cookie-signature": "1.0.6",
        "debug": "2.6.9",
        "depd": "2.0.0",
        "encodeurl": "~2.0.0",
        "escape-html": "~1.0.3",
        "etag": "~1.8.1",
        "finalhandler": "1.3.1",
        "fresh": "0.5.2",
        "http-errors": "2.0.0",
        "merge-descriptors": "1.0.3",
        "methods": "~1.1.2",
        "on-finished": "2.4.1",
        "parseurl": "~1.3.3",
        "path-to-regexp": "0.1.12",
        "proxy-addr": "~2.0.7",
        "qs": "6.13.0",
        "range-parser": "~1.2.1",
        "safe-buffer": "5.2.1",
        "send": "0.19.0",
        "serve-static": "1.16.2",
        "setprototypeof": "1.2.0",
        "statuses": "2.0.1",
        "type-is": "~1.6.18",
        "utils-merge": "1.0.1",
        "vary": "~1.1.2"
      },
      "engines": {
        "node": ">= 0.10.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/express"
      }
    },
    "node_modules/express/node_modules/debug": {
      "version": "2.6.9",
      "resolved": "https://registry.npmjs.org/debug/-/debug-2.6.9.tgz",
      "integrity": "sha512-bC7ElrdJaJnPbAP+1EotYvqZsb3ecl5wi6Bfi6BJTUcNowp6cvspg0jXznRTKDjm/E7AdgFBVeAPVMNcKGsHMA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ms": "2.0.0"
      }
    },
    "node_modules/express/node_modules/ms": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.0.0.tgz",
      "integrity": "sha512-Tpp60P6IUJDTuOq/5Z8cdskzJujfwqfOTkrwIwj7IRISpnkJnT6SyJ4PCPnGMoFjC9ddhal5KVIYtAt97ix05A==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/extend": {
      "version": "3.0.2",
      "resolved": "https://registry.npmjs.org/extend/-/extend-3.0.2.tgz",
      "integrity": "sha512-fjquC59cD7CyW6urNXK0FBufkZcoiGG80wTuPujX590cB5Ttln20E2UB4S/WARVqhXffZl2LNgS+gQdPIIim/g==",
      "license": "MIT"
    },
    "node_modules/fast-deep-equal": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/fast-deep-equal/-/fast-deep-equal-3.1.3.tgz",
      "integrity": "sha512-f3qQ9oQy9j2AhBe/H9VC91wLmKBCCU/gDOnKNAYG5hswO7BLKj09Hc5HYNz9cGI++xlpDCIgDaitVs03ATR84Q==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fast-fifo": {
      "version": "1.3.2",
      "resolved": "https://registry.npmjs.org/fast-fifo/-/fast-fifo-1.3.2.tgz",
      "integrity": "sha512-/d9sfos4yxzpwkDkuN7k2SqFKtYNmCTzgfEpz82x34IM9/zc8KGxQoXg1liNC/izpRM/MBdt44Nmx41ZWqk+FQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fast-glob": {
      "version": "3.3.3",
      "resolved": "https://registry.npmjs.org/fast-glob/-/fast-glob-3.3.3.tgz",
      "integrity": "sha512-7MptL8U0cqcFdzIzwOTHoilX9x5BrNqye7Z/LuC7kCMRio1EMSyqRK3BEAUD7sXRq4iT4AzTVuZdhgQ2TCvYLg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@nodelib/fs.stat": "^2.0.2",
        "@nodelib/fs.walk": "^1.2.3",
        "glob-parent": "^5.1.2",
        "merge2": "^1.3.0",
        "micromatch": "^4.0.8"
      },
      "engines": {
        "node": ">=8.6.0"
      }
    },
    "node_modules/fast-glob/node_modules/glob-parent": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-5.1.2.tgz",
      "integrity": "sha512-AOIgSQCepiJYwP3ARnGx+5VnTu2HBYdzbGP45eLw1vr3zB3vZLeyed1sC9hnbcOc9/SrMyM5RPQrkGz4aS9Zow==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "is-glob": "^4.0.1"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/fast-json-stable-stringify": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/fast-json-stable-stringify/-/fast-json-stable-stringify-2.1.0.tgz",
      "integrity": "sha512-lhd/wF+Lk98HZoTCtlVraHtfh5XYijIjalXck7saUtuanSDyLMxnHhSXEDJqHxD7msR8D0uCmqlkwjCV8xvwHw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fast-levenshtein": {
      "version": "2.0.6",
      "resolved": "https://registry.npmjs.org/fast-levenshtein/-/fast-levenshtein-2.0.6.tgz",
      "integrity": "sha512-DCXu6Ifhqcks7TZKY3Hxp3y6qphY5SJZmrWMDrKcERSOXWQdMhU9Ig/PYrzyw/ul9jOIyh0N4M0tbC5hodg8dw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fast-uri": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/fast-uri/-/fast-uri-3.1.0.tgz",
      "integrity": "sha512-iPeeDKJSWf4IEOasVVrknXpaBV0IApz/gp7S2bb7Z4Lljbl2MGJRqInZiUrQwV16cpzw/D3S5j5Julj/gT52AA==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/fastify"
        },
        {
          "type": "opencollective",
          "url": "https://opencollective.com/fastify"
        }
      ],
      "license": "BSD-3-Clause"
    },
    "node_modules/fastq": {
      "version": "1.19.1",
      "resolved": "https://registry.npmjs.org/fastq/-/fastq-1.19.1.tgz",
      "integrity": "sha512-GwLTyxkCXjXbxqIhTsMI2Nui8huMPtnxg7krajPJAjnEG/iiOS7i+zCtWGZR9G0NBKbXKh6X9m9UIsYX/N6vvQ==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "reusify": "^1.0.4"
      }
    },
    "node_modules/fecha": {
      "version": "4.2.3",
      "resolved": "https://registry.npmjs.org/fecha/-/fecha-4.2.3.tgz",
      "integrity": "sha512-OP2IUU6HeYKJi3i0z4A19kHMQoLVs4Hc+DPqqxI2h/DPZHTm/vjsfC6P0b4jCMy14XizLBqvndQ+UilD7707Jw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fetch-blob": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/fetch-blob/-/fetch-blob-3.2.0.tgz",
      "integrity": "sha512-7yAQpD2UMJzLi1Dqv7qFYnPbaPx7ZfFK6PiIxQ4PfkGPyNyl2Ugx+a/umUonmKqjhM4DnfbMvdX6otXq83soQQ==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/jimmywarting"
        },
        {
          "type": "paypal",
          "url": "https://paypal.me/jimmywarting"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "node-domexception": "^1.0.0",
        "web-streams-polyfill": "^3.0.3"
      },
      "engines": {
        "node": "^12.20 || >= 14.13"
      }
    },
    "node_modules/figures": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/figures/-/figures-3.2.0.tgz",
      "integrity": "sha512-yaduQFRKLXYOGgEn6AZau90j3ggSOyiqXU0F9JZfeXYhNa+Jk4X+s45A2zg5jns87GAFa34BBm2kXw4XpNcbdg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "escape-string-regexp": "^1.0.5"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/figures/node_modules/escape-string-regexp": {
      "version": "1.0.5",
      "resolved": "https://registry.npmjs.org/escape-string-regexp/-/escape-string-regexp-1.0.5.tgz",
      "integrity": "sha512-vbRorB5FUQWvla16U8R/qgaFIya2qGzwDrNmCZuYKrbdSUMG6I1ZCGQRefkRVhuOkIGVne7BQ35DSfo1qvJqFg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.8.0"
      }
    },
    "node_modules/file-entry-cache": {
      "version": "8.0.0",
      "resolved": "https://registry.npmjs.org/file-entry-cache/-/file-entry-cache-8.0.0.tgz",
      "integrity": "sha512-XXTUwCvisa5oacNGRP9SfNtYBNAMi+RPwBFmblZEF7N7swHYQS6/Zfk7SRwx4D5j3CH211YNRco1DEMNVfZCnQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "flat-cache": "^4.0.0"
      },
      "engines": {
        "node": ">=16.0.0"
      }
    },
    "node_modules/filesize": {
      "version": "6.4.0",
      "resolved": "https://registry.npmjs.org/filesize/-/filesize-6.4.0.tgz",
      "integrity": "sha512-mjFIpOHC4jbfcTfoh4rkWpI31mF7viw9ikj/JyLoKzqlwG/YsefKfvYlYhdYdg/9mtK2z1AzgN/0LvVQ3zdlSQ==",
      "dev": true,
      "license": "BSD-3-Clause",
      "engines": {
        "node": ">= 0.4.0"
      }
    },
    "node_modules/fill-range": {
      "version": "7.1.1",
      "resolved": "https://registry.npmjs.org/fill-range/-/fill-range-7.1.1.tgz",
      "integrity": "sha512-YsGpe3WHLK8ZYi4tWDg2Jy3ebRz2rXowDxnld4bkQB00cc/1Zw9AWnC0i9ztDJitivtQvaI9KaLyKrc+hBW0yg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "to-regex-range": "^5.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/finalhandler": {
      "version": "1.3.1",
      "resolved": "https://registry.npmjs.org/finalhandler/-/finalhandler-1.3.1.tgz",
      "integrity": "sha512-6BN9trH7bp3qvnrRyzsBz+g3lZxTNZTbVO2EV1CS0WIcDbawYVdYvGflME/9QP0h0pYlCDBCTjYa9nZzMDpyxQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "debug": "2.6.9",
        "encodeurl": "~2.0.0",
        "escape-html": "~1.0.3",
        "on-finished": "2.4.1",
        "parseurl": "~1.3.3",
        "statuses": "2.0.1",
        "unpipe": "~1.0.0"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/finalhandler/node_modules/debug": {
      "version": "2.6.9",
      "resolved": "https://registry.npmjs.org/debug/-/debug-2.6.9.tgz",
      "integrity": "sha512-bC7ElrdJaJnPbAP+1EotYvqZsb3ecl5wi6Bfi6BJTUcNowp6cvspg0jXznRTKDjm/E7AdgFBVeAPVMNcKGsHMA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ms": "2.0.0"
      }
    },
    "node_modules/finalhandler/node_modules/ms": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.0.0.tgz",
      "integrity": "sha512-Tpp60P6IUJDTuOq/5Z8cdskzJujfwqfOTkrwIwj7IRISpnkJnT6SyJ4PCPnGMoFjC9ddhal5KVIYtAt97ix05A==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/find-up": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/find-up/-/find-up-5.0.0.tgz",
      "integrity": "sha512-78/PXT1wlLLDgTzDs7sjq9hzz0vXD+zn+7wypEe4fXQxCmdmqfGsEPQxmiCSQI3ajFV91bVSsvNtrJRiW6nGng==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "locate-path": "^6.0.0",
        "path-exists": "^4.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/firebase-tools": {
      "version": "13.35.1",
      "resolved": "https://registry.npmjs.org/firebase-tools/-/firebase-tools-13.35.1.tgz",
      "integrity": "sha512-QmMy4hnd0Q+V+7GFhZUV80+kG0WC1+UOtuaaQWx+cstt+XepUcpju/KW4cBknnyql521BghfuAhveckQQ1g+HA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@electric-sql/pglite": "^0.2.16",
        "@google-cloud/cloud-sql-connector": "^1.3.3",
        "@google-cloud/pubsub": "^4.5.0",
        "abort-controller": "^3.0.0",
        "ajv": "^8.17.1",
        "ajv-formats": "3.0.1",
        "archiver": "^7.0.0",
        "async-lock": "1.4.1",
        "body-parser": "^1.19.0",
        "chokidar": "^3.6.0",
        "cjson": "^0.3.1",
        "cli-table3": "0.6.5",
        "colorette": "^2.0.19",
        "commander": "^5.1.0",
        "configstore": "^5.0.1",
        "cors": "^2.8.5",
        "cross-env": "^7.0.3",
        "cross-spawn": "^7.0.5",
        "csv-parse": "^5.0.4",
        "deep-equal-in-any-order": "^2.0.6",
        "exegesis": "^4.2.0",
        "exegesis-express": "^4.0.0",
        "express": "^4.16.4",
        "filesize": "^6.1.0",
        "form-data": "^4.0.1",
        "fs-extra": "^10.1.0",
        "fuzzy": "^0.1.3",
        "gaxios": "^6.7.0",
        "glob": "^10.4.1",
        "google-auth-library": "^9.11.0",
        "inquirer": "^8.2.6",
        "inquirer-autocomplete-prompt": "^2.0.1",
        "js-yaml": "^3.14.1",
        "jsonwebtoken": "^9.0.0",
        "leven": "^3.1.0",
        "libsodium-wrappers": "^0.7.10",
        "lodash": "^4.17.21",
        "lsofi": "1.0.0",
        "marked": "^13.0.2",
        "marked-terminal": "^7.0.0",
        "mime": "^2.5.2",
        "minimatch": "^3.0.4",
        "morgan": "^1.10.0",
        "node-fetch": "^2.6.7",
        "open": "^6.3.0",
        "ora": "^5.4.1",
        "p-limit": "^3.0.1",
        "pg": "^8.11.3",
        "portfinder": "^1.0.32",
        "progress": "^2.0.3",
        "proxy-agent": "^6.3.0",
        "retry": "^0.13.1",
        "semver": "^7.5.2",
        "sql-formatter": "^15.3.0",
        "stream-chain": "^2.2.4",
        "stream-json": "^1.7.3",
        "superstatic": "^9.2.0",
        "tar": "^6.1.11",
        "tcp-port-used": "^1.0.2",
        "tmp": "^0.2.3",
        "triple-beam": "^1.3.0",
        "universal-analytics": "^0.5.3",
        "update-notifier-cjs": "^5.1.6",
        "uuid": "^8.3.2",
        "winston": "^3.0.0",
        "winston-transport": "^4.4.0",
        "ws": "^7.5.10",
        "yaml": "^2.4.1"
      },
      "bin": {
        "firebase": "lib/bin/firebase.js"
      },
      "engines": {
        "node": ">=18.0.0 || >=20.0.0 || >=22.0.0"
      }
    },
    "node_modules/firebase-tools/node_modules/ajv": {
      "version": "8.17.1",
      "resolved": "https://registry.npmjs.org/ajv/-/ajv-8.17.1.tgz",
      "integrity": "sha512-B/gBuNg5SiMTrPkC+A2+cW0RszwxYmn6VYxB/inlBStS5nx6xHIt/ehKRhIMhqusl7a8LjQoZnjCs5vhwxOQ1g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fast-deep-equal": "^3.1.3",
        "fast-uri": "^3.0.1",
        "json-schema-traverse": "^1.0.0",
        "require-from-string": "^2.0.2"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/epoberezkin"
      }
    },
    "node_modules/firebase-tools/node_modules/argparse": {
      "version": "1.0.10",
      "resolved": "https://registry.npmjs.org/argparse/-/argparse-1.0.10.tgz",
      "integrity": "sha512-o5Roy6tNG4SL/FOkCAN6RzjiakZS25RLYFrcMttJqbdd8BWrnA+fGz57iN5Pb06pvBGvl5gQ0B48dJlslXvoTg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "sprintf-js": "~1.0.2"
      }
    },
    "node_modules/firebase-tools/node_modules/brace-expansion": {
      "version": "1.1.12",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
      "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/firebase-tools/node_modules/js-yaml": {
      "version": "3.14.1",
      "resolved": "https://registry.npmjs.org/js-yaml/-/js-yaml-3.14.1.tgz",
      "integrity": "sha512-okMH7OXXJ7YrN9Ok3/SXrnu4iX9yOk+25nqX4imS2npuvTYDmo/QEZoqwZkYaIDk3jVvBOTOIEgEhaLOynBS9g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "argparse": "^1.0.7",
        "esprima": "^4.0.0"
      },
      "bin": {
        "js-yaml": "bin/js-yaml.js"
      }
    },
    "node_modules/firebase-tools/node_modules/json-schema-traverse": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/json-schema-traverse/-/json-schema-traverse-1.0.0.tgz",
      "integrity": "sha512-NM8/P9n3XjXhIZn1lLhkFaACTOURQXjWhV4BA/RnOv8xvgqtqpAX9IO4mRQxSx1Rlo4tqzeqb0sOlruaOy3dug==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/firebase-tools/node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/firebase-tools/node_modules/ws": {
      "version": "7.5.10",
      "resolved": "https://registry.npmjs.org/ws/-/ws-7.5.10.tgz",
      "integrity": "sha512-+dbF1tHwZpXcbOJdVOkzLDxZP1ailvSxM6ZweXTegylPny803bFhA+vqBYw4s31NSAk4S2Qz+AKXK9a4wkdjcQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8.3.0"
      },
      "peerDependencies": {
        "bufferutil": "^4.0.1",
        "utf-8-validate": "^5.0.2"
      },
      "peerDependenciesMeta": {
        "bufferutil": {
          "optional": true
        },
        "utf-8-validate": {
          "optional": true
        }
      }
    },
    "node_modules/flat-cache": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/flat-cache/-/flat-cache-4.0.1.tgz",
      "integrity": "sha512-f7ccFPK3SXFHpx15UIGyRJ/FJQctuKZ0zVuN3frBo4HnK3cay9VEW0R6yPYFHC0AgqhukPzKjq22t5DmAyqGyw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "flatted": "^3.2.9",
        "keyv": "^4.5.4"
      },
      "engines": {
        "node": ">=16"
      }
    },
    "node_modules/flatted": {
      "version": "3.3.3",
      "resolved": "https://registry.npmjs.org/flatted/-/flatted-3.3.3.tgz",
      "integrity": "sha512-GX+ysw4PBCz0PzosHDepZGANEuFCMLrnRTiEy9McGjmkCQYwRq4A/X786G/fjM/+OjsWSU1ZrY5qyARZmO/uwg==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/fn.name": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/fn.name/-/fn.name-1.1.0.tgz",
      "integrity": "sha512-GRnmB5gPyJpAhTQdSZTSp9uaPSvl09KoYcMQtsB9rQoOmzs9dH6ffeccH+Z+cv6P68Hu5bC6JjRh4Ah/mHSNRw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/foreground-child": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/foreground-child/-/foreground-child-3.3.1.tgz",
      "integrity": "sha512-gIXjKqtFuWEgzFRJA9WCQeSJLZDjgJUOMCMzxtvFq/37KojM1BFGufqsCy0r4qSQmYLsZYMeyRqzIWOMup03sw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "cross-spawn": "^7.0.6",
        "signal-exit": "^4.0.1"
      },
      "engines": {
        "node": ">=14"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/form-data": {
      "version": "4.0.4",
      "resolved": "https://registry.npmjs.org/form-data/-/form-data-4.0.4.tgz",
      "integrity": "sha512-KrGhL9Q4zjj0kiUt5OO4Mr/A/jlI2jDYs5eHBpYHPcBEVSiipAvn2Ko2HnPe20rmcuuvMHNdZFp+4IlGTMF0Ow==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "asynckit": "^0.4.0",
        "combined-stream": "^1.0.8",
        "es-set-tostringtag": "^2.1.0",
        "hasown": "^2.0.2",
        "mime-types": "^2.1.12"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/formdata-polyfill": {
      "version": "4.0.10",
      "resolved": "https://registry.npmjs.org/formdata-polyfill/-/formdata-polyfill-4.0.10.tgz",
      "integrity": "sha512-buewHzMvYL29jdeQTVILecSaZKnt/RJWjoZCF5OW60Z67/GmSLBkOFM7qh1PI3zFNtJbaZL5eQu1vLfazOwj4g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fetch-blob": "^3.1.2"
      },
      "engines": {
        "node": ">=12.20.0"
      }
    },
    "node_modules/forwarded": {
      "version": "0.2.0",
      "resolved": "https://registry.npmjs.org/forwarded/-/forwarded-0.2.0.tgz",
      "integrity": "sha512-buRG0fpBtRHSTCOASe6hD258tEubFoRLb4ZNA6NxMVHNw2gOcwHo9wyablzMzOA5z9xA9L1KNjk/Nt6MT9aYow==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/fraction.js": {
      "version": "4.3.7",
      "resolved": "https://registry.npmjs.org/fraction.js/-/fraction.js-4.3.7.tgz",
      "integrity": "sha512-ZsDfxO51wGAXREY55a7la9LScWpwv9RxIrYABrlvOFBlH/ShPnrtsXeuUIfXKKOVicNxQ+o8JTbJvjS4M89yew==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "*"
      },
      "funding": {
        "type": "patreon",
        "url": "https://github.com/sponsors/rawify"
      }
    },
    "node_modules/fresh": {
      "version": "0.5.2",
      "resolved": "https://registry.npmjs.org/fresh/-/fresh-0.5.2.tgz",
      "integrity": "sha512-zJ2mQYM18rEFOudeV4GShTGIQ7RbzA7ozbU9I/XBpm7kqgMywgmylMwXHxZJmkVoYkna9d2pVXVXPdYTP9ej8Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/fs-extra": {
      "version": "10.1.0",
      "resolved": "https://registry.npmjs.org/fs-extra/-/fs-extra-10.1.0.tgz",
      "integrity": "sha512-oRXApq54ETRj4eMiFzGnHWGy+zo5raudjuxN0b8H7s/RU2oW0Wvsx9O0ACRN/kRq9E8Vu/ReskGB5o3ji+FzHQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "graceful-fs": "^4.2.0",
        "jsonfile": "^6.0.1",
        "universalify": "^2.0.0"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/fs-minipass": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/fs-minipass/-/fs-minipass-3.0.3.tgz",
      "integrity": "sha512-XUBA9XClHbnJWSfBzjkm6RvPsyg3sryZt06BEQoXcF7EK/xpGaQYJgQKDJSUH5SGZ76Y7pFx1QBnXz09rU5Fbw==",
      "dev": true,
      "license": "ISC",
      "optional": true,
      "dependencies": {
        "minipass": "^7.0.3"
      },
      "engines": {
        "node": "^14.17.0 || ^16.13.0 || >=18.0.0"
      }
    },
    "node_modules/fsevents": {
      "version": "2.3.3",
      "resolved": "https://registry.npmjs.org/fsevents/-/fsevents-2.3.3.tgz",
      "integrity": "sha512-5xoDfX+fL7faATnagmWPpbFtwh/R77WmMMqqHGS65C3vvB0YHrgF+B1YmZ3441tMj5n63k0212XNoJwzlhffQw==",
      "dev": true,
      "hasInstallScript": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": "^8.16.0 || ^10.6.0 || >=11.0.0"
      }
    },
    "node_modules/function-bind": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/function-bind/-/function-bind-1.1.2.tgz",
      "integrity": "sha512-7XHNxH7qX9xG5mIwxkhumTox/MIRNcOgDrxWsMt2pAr23WHp6MrRlN7FBSFpCpr+oVO0F744iUgR82nJMfG2SA==",
      "dev": true,
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/fuzzy": {
      "version": "0.1.3",
      "resolved": "https://registry.npmjs.org/fuzzy/-/fuzzy-0.1.3.tgz",
      "integrity": "sha512-/gZffu4ykarLrCiP3Ygsa86UAo1E5vEVlvTrpkKywXSbP9Xhln3oSp9QSV57gEq3JFFpGJ4GZ+5zdEp3FcUh4w==",
      "dev": true,
      "engines": {
        "node": ">= 0.6.0"
      }
    },
    "node_modules/gaxios": {
      "version": "6.7.1",
      "resolved": "https://registry.npmjs.org/gaxios/-/gaxios-6.7.1.tgz",
      "integrity": "sha512-LDODD4TMYx7XXdpwxAVRAIAuB0bzv0s+ywFonY46k126qzQHT9ygyoa9tncmOiQmmDrik65UYsEkv3lbfqQ3yQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "extend": "^3.0.2",
        "https-proxy-agent": "^7.0.1",
        "is-stream": "^2.0.0",
        "node-fetch": "^2.6.9",
        "uuid": "^9.0.1"
      },
      "engines": {
        "node": ">=14"
      }
    },
    "node_modules/gaxios/node_modules/uuid": {
      "version": "9.0.1",
      "resolved": "https://registry.npmjs.org/uuid/-/uuid-9.0.1.tgz",
      "integrity": "sha512-b+1eJOlsR9K8HJpow9Ok3fiWOWSIcIzXodvv0rQjVoOVNpWMpxf1wZNpt4y9h10odCNrqnYp1OBzRktckBe3sA==",
      "dev": true,
      "funding": [
        "https://github.com/sponsors/broofa",
        "https://github.com/sponsors/ctavan"
      ],
      "license": "MIT",
      "bin": {
        "uuid": "dist/bin/uuid"
      }
    },
    "node_modules/gcp-metadata": {
      "version": "6.1.1",
      "resolved": "https://registry.npmjs.org/gcp-metadata/-/gcp-metadata-6.1.1.tgz",
      "integrity": "sha512-a4tiq7E0/5fTjxPAaH4jpjkSv/uCaU2p5KC6HVGrvl0cDjA8iBZv4vv1gyzlmK0ZUKqwpOyQMKzZQe3lTit77A==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "gaxios": "^6.1.1",
        "google-logging-utils": "^0.0.2",
        "json-bigint": "^1.0.0"
      },
      "engines": {
        "node": ">=14"
      }
    },
    "node_modules/gensync": {
      "version": "1.0.0-beta.2",
      "resolved": "https://registry.npmjs.org/gensync/-/gensync-1.0.0-beta.2.tgz",
      "integrity": "sha512-3hN7NaskYvMDLQY55gnW3NQ+mesEAepTqlg+VEbj7zzqEMBVNhzcGYYeqFo/TlYz6eQiFcp1HcsCZO+nGgS8zg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/get-caller-file": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/get-caller-file/-/get-caller-file-2.0.5.tgz",
      "integrity": "sha512-DyFP3BM/3YHTQOCUL/w0OZHR0lpKeGrxotcHWcqNEdnltqFwXVfhEBQ94eIo34AfQpo0rGki4cyIiftY06h2Fg==",
      "dev": true,
      "license": "ISC",
      "engines": {
        "node": "6.* || 8.* || >= 10.*"
      }
    },
    "node_modules/get-intrinsic": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/get-intrinsic/-/get-intrinsic-1.3.0.tgz",
      "integrity": "sha512-9fSjSaos/fRIVIp+xSJlE6lfwhES7LNtKaCBIamHsjr2na1BiABJPo0mOjjz8GJDURarmCPGqaiVg5mfjb98CQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.2",
        "es-define-property": "^1.0.1",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.1.1",
        "function-bind": "^1.1.2",
        "get-proto": "^1.0.1",
        "gopd": "^1.2.0",
        "has-symbols": "^1.1.0",
        "hasown": "^2.0.2",
        "math-intrinsics": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/get-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/get-proto/-/get-proto-1.0.1.tgz",
      "integrity": "sha512-sTSfBjoXBp89JvIKIefqw7U2CCebsc74kiY6awiGogKtoSGbgjYE/G/+l9sF3MWFPNc9IcoOC4ODfKHfxFmp0g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "dunder-proto": "^1.0.1",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/get-uri": {
      "version": "6.0.5",
      "resolved": "https://registry.npmjs.org/get-uri/-/get-uri-6.0.5.tgz",
      "integrity": "sha512-b1O07XYq8eRuVzBNgJLstU6FYc1tS6wnMtF1I1D9lE8LxZSOGZ7LhxN54yPP6mGw5f2CkXY2BQUL9Fx41qvcIg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "basic-ftp": "^5.0.2",
        "data-uri-to-buffer": "^6.0.2",
        "debug": "^4.3.4"
      },
      "engines": {
        "node": ">= 14"
      }
    },
    "node_modules/glob": {
      "version": "10.4.5",
      "resolved": "https://registry.npmjs.org/glob/-/glob-10.4.5.tgz",
      "integrity": "sha512-7Bv8RF0k6xjo7d4A/PxYLbUCfb6c+Vpd2/mB2yRDlew7Jb5hEXiCD9ibfO7wpk8i4sevK6DFny9h7EYbM3/sHg==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "foreground-child": "^3.1.0",
        "jackspeak": "^3.1.2",
        "minimatch": "^9.0.4",
        "minipass": "^7.1.2",
        "package-json-from-dist": "^1.0.0",
        "path-scurry": "^1.11.1"
      },
      "bin": {
        "glob": "dist/esm/bin.mjs"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/glob-parent": {
      "version": "6.0.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-6.0.2.tgz",
      "integrity": "sha512-XxwI8EOhVQgWp6iDL+3b0r86f4d6AX6zSU55HfB4ydCEuXLXc5FcYeOu+nnGftS4TEju/11rt4KJPTMgbfmv4A==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "is-glob": "^4.0.3"
      },
      "engines": {
        "node": ">=10.13.0"
      }
    },
    "node_modules/glob-slash": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/glob-slash/-/glob-slash-1.0.0.tgz",
      "integrity": "sha512-ZwFh34WZhZX28ntCMAP1mwyAJkn8+Omagvt/GvA+JQM/qgT0+MR2NPF3vhvgdshfdvDyGZXs8fPXW84K32Wjuw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/glob-slasher": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/glob-slasher/-/glob-slasher-1.0.1.tgz",
      "integrity": "sha512-5MUzqFiycIKLMD1B0dYOE4hGgLLUZUNGGYO4BExdwT32wUwW3DBOE7lMQars7vB1q43Fb3Tyt+HmgLKsJhDYdg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "glob-slash": "^1.0.0",
        "lodash.isobject": "^2.4.1",
        "toxic": "^1.0.0"
      }
    },
    "node_modules/global-dirs": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/global-dirs/-/global-dirs-3.0.1.tgz",
      "integrity": "sha512-NBcGGFbBA9s1VzD41QXDG+3++t9Mn5t1FpLdhESY6oKY4gYTFpX4wO3sqGUa0Srjtbfj3szX0RnemmrVRUdULA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ini": "2.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/globals": {
      "version": "14.0.0",
      "resolved": "https://registry.npmjs.org/globals/-/globals-14.0.0.tgz",
      "integrity": "sha512-oahGvuMGQlPw/ivIYBjVSrWAfWLBeku5tpPE2fOPLi+WHffIWbuh2tCjhyQhTBPMf5E9jDEH4FOmTYgYwbKwtQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=18"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/google-auth-library": {
      "version": "9.15.1",
      "resolved": "https://registry.npmjs.org/google-auth-library/-/google-auth-library-9.15.1.tgz",
      "integrity": "sha512-Jb6Z0+nvECVz+2lzSMt9u98UsoakXxA2HGHMCxh+so3n90XgYWkq5dur19JAJV7ONiJY22yBTyJB1TSkvPq9Ng==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "base64-js": "^1.3.0",
        "ecdsa-sig-formatter": "^1.0.11",
        "gaxios": "^6.1.1",
        "gcp-metadata": "^6.1.0",
        "gtoken": "^7.0.0",
        "jws": "^4.0.0"
      },
      "engines": {
        "node": ">=14"
      }
    },
    "node_modules/google-gax": {
      "version": "4.6.1",
      "resolved": "https://registry.npmjs.org/google-gax/-/google-gax-4.6.1.tgz",
      "integrity": "sha512-V6eky/xz2mcKfAd1Ioxyd6nmA61gao3n01C+YeuIwu3vzM9EDR6wcVzMSIbLMDXWeoi9SHYctXuKYC5uJUT3eQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@grpc/grpc-js": "^1.10.9",
        "@grpc/proto-loader": "^0.7.13",
        "@types/long": "^4.0.0",
        "abort-controller": "^3.0.0",
        "duplexify": "^4.0.0",
        "google-auth-library": "^9.3.0",
        "node-fetch": "^2.7.0",
        "object-hash": "^3.0.0",
        "proto3-json-serializer": "^2.0.2",
        "protobufjs": "^7.3.2",
        "retry-request": "^7.0.0",
        "uuid": "^9.0.1"
      },
      "engines": {
        "node": ">=14"
      }
    },
    "node_modules/google-gax/node_modules/uuid": {
      "version": "9.0.1",
      "resolved": "https://registry.npmjs.org/uuid/-/uuid-9.0.1.tgz",
      "integrity": "sha512-b+1eJOlsR9K8HJpow9Ok3fiWOWSIcIzXodvv0rQjVoOVNpWMpxf1wZNpt4y9h10odCNrqnYp1OBzRktckBe3sA==",
      "dev": true,
      "funding": [
        "https://github.com/sponsors/broofa",
        "https://github.com/sponsors/ctavan"
      ],
      "license": "MIT",
      "bin": {
        "uuid": "dist/bin/uuid"
      }
    },
    "node_modules/google-logging-utils": {
      "version": "0.0.2",
      "resolved": "https://registry.npmjs.org/google-logging-utils/-/google-logging-utils-0.0.2.tgz",
      "integrity": "sha512-NEgUnEcBiP5HrPzufUkBzJOD/Sxsco3rLNo1F1TNf7ieU8ryUzBhqba8r756CjLX7rn3fHl6iLEwPYuqpoKgQQ==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=14"
      }
    },
    "node_modules/googleapis-common": {
      "version": "8.0.2-rc.0",
      "resolved": "https://registry.npmjs.org/googleapis-common/-/googleapis-common-8.0.2-rc.0.tgz",
      "integrity": "sha512-JTcxRvmFa9Ec1uyfMEimEMeeKq1sHNZX3vn2qmoUMtnvixXXvcqTcbDZvEZXkEWpGlPlOf4joyep6/qs0BrLyg==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "extend": "^3.0.2",
        "gaxios": "^7.0.0-rc.4",
        "google-auth-library": "^10.0.0-rc.1",
        "qs": "^6.7.0",
        "url-template": "^2.0.8"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/googleapis-common/node_modules/data-uri-to-buffer": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/data-uri-to-buffer/-/data-uri-to-buffer-4.0.1.tgz",
      "integrity": "sha512-0R9ikRb668HB7QDxT1vkpuUBtqc53YyAwMwGeUFKRojY/NWKvdZ+9UYtRfGmhqNbRkTSVpMbmyhXipFFv2cb/A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 12"
      }
    },
    "node_modules/googleapis-common/node_modules/gaxios": {
      "version": "7.1.2",
      "resolved": "https://registry.npmjs.org/gaxios/-/gaxios-7.1.2.tgz",
      "integrity": "sha512-/Szrn8nr+2TsQT1Gp8iIe/BEytJmbyfrbFh419DfGQSkEgNEhbPi7JRJuughjkTzPWgU9gBQf5AVu3DbHt0OXA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "extend": "^3.0.2",
        "https-proxy-agent": "^7.0.1",
        "node-fetch": "^3.3.2"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/googleapis-common/node_modules/gcp-metadata": {
      "version": "8.1.1",
      "resolved": "https://registry.npmjs.org/gcp-metadata/-/gcp-metadata-8.1.1.tgz",
      "integrity": "sha512-dTCcAe9fRQf06ELwel6lWWFrEbstwjUBYEhr5VRGoC+iPDZQucHppCowaIp8b8v92tU1G4X4H3b/Y6zXZxkMsQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "gaxios": "^7.0.0",
        "google-logging-utils": "^1.0.0",
        "json-bigint": "^1.0.0"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/googleapis-common/node_modules/google-auth-library": {
      "version": "10.4.1",
      "resolved": "https://registry.npmjs.org/google-auth-library/-/google-auth-library-10.4.1.tgz",
      "integrity": "sha512-VlvZ+QDWng3aPh++0BSQlSJyjn4qgLLTmqylAR3as0dr6YwPkZpHcZAngAFr68TDVCUSQVRTkV73K/D3m7vEIg==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "base64-js": "^1.3.0",
        "ecdsa-sig-formatter": "^1.0.11",
        "gaxios": "^7.0.0",
        "gcp-metadata": "^8.0.0",
        "google-logging-utils": "^1.0.0",
        "gtoken": "^8.0.0",
        "jws": "^4.0.0"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/googleapis-common/node_modules/google-logging-utils": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/google-logging-utils/-/google-logging-utils-1.1.1.tgz",
      "integrity": "sha512-rcX58I7nqpu4mbKztFeOAObbomBbHU2oIb/d3tJfF3dizGSApqtSwYJigGCooHdnMyQBIw8BrWyK96w3YXgr6A==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=14"
      }
    },
    "node_modules/googleapis-common/node_modules/gtoken": {
      "version": "8.0.0",
      "resolved": "https://registry.npmjs.org/gtoken/-/gtoken-8.0.0.tgz",
      "integrity": "sha512-+CqsMbHPiSTdtSO14O51eMNlrp9N79gmeqmXeouJOhfucAedHw9noVe/n5uJk3tbKE6a+6ZCQg3RPhVhHByAIw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "gaxios": "^7.0.0",
        "jws": "^4.0.0"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/googleapis-common/node_modules/node-fetch": {
      "version": "3.3.2",
      "resolved": "https://registry.npmjs.org/node-fetch/-/node-fetch-3.3.2.tgz",
      "integrity": "sha512-dRB78srN/l6gqWulah9SrxeYnxeddIG30+GOqK/9OlLVyLg3HPnr6SqOWTWOXKRwC2eGYCkZ59NNuSgvSrpgOA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "data-uri-to-buffer": "^4.0.0",
        "fetch-blob": "^3.1.4",
        "formdata-polyfill": "^4.0.10"
      },
      "engines": {
        "node": "^12.20.0 || ^14.13.1 || >=16.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/node-fetch"
      }
    },
    "node_modules/gopd": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/gopd/-/gopd-1.2.0.tgz",
      "integrity": "sha512-ZUKRh6/kUFoAiTAtTYPZJ3hw9wNxx+BIBOijnlG9PnrJsCcSjs1wyyD6vJpaYtgnzDrKYRSqf3OO6Rfa93xsRg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/graceful-fs": {
      "version": "4.2.11",
      "resolved": "https://registry.npmjs.org/graceful-fs/-/graceful-fs-4.2.11.tgz",
      "integrity": "sha512-RbJ5/jmFcNNCcDV5o9eTnBLJ/HszWV0P73bc+Ff4nS/rJj+YaS6IGyiOL0VoBYX+l1Wrl3k63h/KrH+nhJ0XvQ==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/graphemer": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/graphemer/-/graphemer-1.4.0.tgz",
      "integrity": "sha512-EtKwoO6kxCL9WO5xipiHTZlSzBm7WLT627TqC/uVRd0HKmq8NXyebnNYxDoBi7wt8eTWrUrKXCOVaFq9x1kgag==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/gtoken": {
      "version": "7.1.0",
      "resolved": "https://registry.npmjs.org/gtoken/-/gtoken-7.1.0.tgz",
      "integrity": "sha512-pCcEwRi+TKpMlxAQObHDQ56KawURgyAf6jtIY046fJ5tIv3zDe/LEIubckAO8fj6JnAxLdmWkUfNyulQ2iKdEw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "gaxios": "^6.0.0",
        "jws": "^4.0.0"
      },
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/has-flag": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/has-flag/-/has-flag-4.0.0.tgz",
      "integrity": "sha512-EykJT/Q1KjTWctppgIAgfSO0tKVuZUjhgMr17kqTumMl6Afv3EISleU7qZUzoXDFTAHTDC4NOoG/ZxU3EvlMPQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/has-symbols": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/has-symbols/-/has-symbols-1.1.0.tgz",
      "integrity": "sha512-1cDNdwJ2Jaohmb3sg4OmKaMBwuC48sYni5HUw2DvsC8LjGTLK9h+eb1X6RyuOHe4hT0ULCW68iomhjUoKUqlPQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-tostringtag": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/has-tostringtag/-/has-tostringtag-1.0.2.tgz",
      "integrity": "sha512-NqADB8VjPFLM2V0VvHUewwwsw0ZWBaIdgo+ieHtK3hasLz4qeCRjYcqfB6AQrBggRKppKF8L52/VqdVsO47Dlw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "has-symbols": "^1.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-yarn": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/has-yarn/-/has-yarn-2.1.0.tgz",
      "integrity": "sha512-UqBRqi4ju7T+TqGNdqAO0PaSVGsDGJUBQvk9eUWNGRY1CFGDzYhLWoM7JQEemnlvVcv/YEmc2wNW8BC24EnUsw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/hasown": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/hasown/-/hasown-2.0.2.tgz",
      "integrity": "sha512-0hJU9SCPvmMzIBdZFqNPXWa6dqh7WdH0cII9y+CyS8rG3nL48Bclra9HmKhVVUHyPWNH5Y7xDwAB7bfgSjkUMQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/hast-util-to-jsx-runtime": {
      "version": "2.3.6",
      "resolved": "https://registry.npmjs.org/hast-util-to-jsx-runtime/-/hast-util-to-jsx-runtime-2.3.6.tgz",
      "integrity": "sha512-zl6s8LwNyo1P9uw+XJGvZtdFF1GdAkOg8ujOw+4Pyb76874fLps4ueHXDhXWdk6YHQ6OgUtinliG7RsYvCbbBg==",
      "license": "MIT",
      "dependencies": {
        "@types/estree": "^1.0.0",
        "@types/hast": "^3.0.0",
        "@types/unist": "^3.0.0",
        "comma-separated-tokens": "^2.0.0",
        "devlop": "^1.0.0",
        "estree-util-is-identifier-name": "^3.0.0",
        "hast-util-whitespace": "^3.0.0",
        "mdast-util-mdx-expression": "^2.0.0",
        "mdast-util-mdx-jsx": "^3.0.0",
        "mdast-util-mdxjs-esm": "^2.0.0",
        "property-information": "^7.0.0",
        "space-separated-tokens": "^2.0.0",
        "style-to-js": "^1.0.0",
        "unist-util-position": "^5.0.0",
        "vfile-message": "^4.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/hast-util-whitespace": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/hast-util-whitespace/-/hast-util-whitespace-3.0.0.tgz",
      "integrity": "sha512-88JUN06ipLwsnv+dVn+OIYOvAuvBMy/Qoi6O7mQHxdPXpjy+Cd6xRkWwux7DKO+4sYILtLBRIKgsdpS2gQc7qw==",
      "license": "MIT",
      "dependencies": {
        "@types/hast": "^3.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/heap-js": {
      "version": "2.7.1",
      "resolved": "https://registry.npmjs.org/heap-js/-/heap-js-2.7.1.tgz",
      "integrity": "sha512-EQfezRg0NCZGNlhlDR3Evrw1FVL2G3LhU7EgPoxufQKruNBSYA8MiRPHeWbU+36o+Fhel0wMwM+sLEiBAlNLJA==",
      "dev": true,
      "license": "BSD-3-Clause",
      "engines": {
        "node": ">=10.0.0"
      }
    },
    "node_modules/highlight.js": {
      "version": "10.7.3",
      "resolved": "https://registry.npmjs.org/highlight.js/-/highlight.js-10.7.3.tgz",
      "integrity": "sha512-tzcUFauisWKNHaRkN4Wjl/ZA07gENAjFl3J/c480dprkGTg5EQstgaNFqBfUqCq54kZRIEcreTsAgF/m2quD7A==",
      "dev": true,
      "license": "BSD-3-Clause",
      "engines": {
        "node": "*"
      }
    },
    "node_modules/html-url-attributes": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/html-url-attributes/-/html-url-attributes-3.0.1.tgz",
      "integrity": "sha512-ol6UPyBWqsrO6EJySPz2O7ZSr856WDrEzM5zMqp+FJJLGMW35cLYmmZnl0vztAZxRUoNZJFTCohfjuIJ8I4QBQ==",
      "license": "MIT",
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/http-cache-semantics": {
      "version": "4.2.0",
      "resolved": "https://registry.npmjs.org/http-cache-semantics/-/http-cache-semantics-4.2.0.tgz",
      "integrity": "sha512-dTxcvPXqPvXBQpq5dUr6mEMJX4oIEFv6bwom3FDwKRDsuIjjJGANqhBuoAn9c1RQJIdAKav33ED65E2ys+87QQ==",
      "dev": true,
      "license": "BSD-2-Clause",
      "optional": true
    },
    "node_modules/http-errors": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/http-errors/-/http-errors-2.0.0.tgz",
      "integrity": "sha512-FtwrG/euBzaEjYeRqOgly7G0qviiXoJWnvEH2Z1plBdXgbyjv34pHTSb9zoeHMyDy33+DWy5Wt9Wo+TURtOYSQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "depd": "2.0.0",
        "inherits": "2.0.4",
        "setprototypeof": "1.2.0",
        "statuses": "2.0.1",
        "toidentifier": "1.0.1"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/http-proxy-agent": {
      "version": "7.0.2",
      "resolved": "https://registry.npmjs.org/http-proxy-agent/-/http-proxy-agent-7.0.2.tgz",
      "integrity": "sha512-T1gkAiYYDWYx3V5Bmyu7HcfcvL7mUrTWiM6yOfa3PIphViJ/gFPbvidQ+veqSOHci/PxBcDabeUNCzpOODJZig==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "agent-base": "^7.1.0",
        "debug": "^4.3.4"
      },
      "engines": {
        "node": ">= 14"
      }
    },
    "node_modules/https-proxy-agent": {
      "version": "7.0.6",
      "resolved": "https://registry.npmjs.org/https-proxy-agent/-/https-proxy-agent-7.0.6.tgz",
      "integrity": "sha512-vK9P5/iUfdl95AI+JVyUuIcVtd4ofvtrOr3HNtM2yxC9bnMbEdp3x01OhQNnjb8IJYi38VlTE3mBXwcfvywuSw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "agent-base": "^7.1.2",
        "debug": "4"
      },
      "engines": {
        "node": ">= 14"
      }
    },
    "node_modules/iconv-lite": {
      "version": "0.4.24",
      "resolved": "https://registry.npmjs.org/iconv-lite/-/iconv-lite-0.4.24.tgz",
      "integrity": "sha512-v3MXnZAcvnywkTUEZomIActle7RXXeedOR31wwl7VlyoXO4Qi9arvSenNQWne1TcRwhCL1HwLI21bEqdpj8/rA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "safer-buffer": ">= 2.1.2 < 3"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/ieee754": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/ieee754/-/ieee754-1.2.1.tgz",
      "integrity": "sha512-dcyqhDvX1C46lXZcVqCpK+FtMRQVdIMN6/Df5js2zouUsqG7I6sFxitIC+7KYK29KdXOLHdu9zL4sFnoVQnqaA==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "BSD-3-Clause"
    },
    "node_modules/ignore": {
      "version": "7.0.5",
      "resolved": "https://registry.npmjs.org/ignore/-/ignore-7.0.5.tgz",
      "integrity": "sha512-Hs59xBNfUIunMFgWAbGX5cq6893IbWg4KnrjbYwX3tx0ztorVgTDA6B2sxf8ejHJ4wz8BqGUMYlnzNBer5NvGg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 4"
      }
    },
    "node_modules/import-fresh": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/import-fresh/-/import-fresh-3.3.1.tgz",
      "integrity": "sha512-TR3KfrTZTYLPB6jUjfx6MF9WcWrHL9su5TObK4ZkYgBdWKPOFoSoQIdEuTuR82pmtxH2spWG9h6etwfr1pLBqQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "parent-module": "^1.0.0",
        "resolve-from": "^4.0.0"
      },
      "engines": {
        "node": ">=6"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/import-lazy": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/import-lazy/-/import-lazy-2.1.0.tgz",
      "integrity": "sha512-m7ZEHgtw69qOGw+jwxXkHlrlIPdTGkyh66zXZ1ajZbxkDBNjSY/LGbmjc7h0s2ELsUDTAhFr55TrPSSqJGPG0A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/imurmurhash": {
      "version": "0.1.4",
      "resolved": "https://registry.npmjs.org/imurmurhash/-/imurmurhash-0.1.4.tgz",
      "integrity": "sha512-JmXMZ6wuvDmLiHEml9ykzqO6lwFbof0GG4IkcGaENdCRDDmMVnny7s5HsIgHCbaq0w2MyPhDqkhTUgS2LU2PHA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.8.19"
      }
    },
    "node_modules/inherits": {
      "version": "2.0.4",
      "resolved": "https://registry.npmjs.org/inherits/-/inherits-2.0.4.tgz",
      "integrity": "sha512-k/vGaX4/Yla3WzyMCvTQOXYeIHvqOKtnqBduzTHpzpQZzAskKMhZ2K+EnBiSM9zGSoIFeMpXKxa4dYeZIQqewQ==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/ini": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/ini/-/ini-2.0.0.tgz",
      "integrity": "sha512-7PnF4oN3CvZF23ADhA5wRaYEQpJ8qygSkbtTXWBeXWXmEVRXK+1ITciHWwHhsjv1TmW0MgacIv6hEi5pX5NQdA==",
      "dev": true,
      "license": "ISC",
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/inline-style-parser": {
      "version": "0.2.4",
      "resolved": "https://registry.npmjs.org/inline-style-parser/-/inline-style-parser-0.2.4.tgz",
      "integrity": "sha512-0aO8FkhNZlj/ZIbNi7Lxxr12obT7cL1moPfE4tg1LkX7LlLfC6DeX4l2ZEud1ukP9jNQyNnfzQVqwbwmAATY4Q==",
      "license": "MIT"
    },
    "node_modules/inquirer": {
      "version": "8.2.7",
      "resolved": "https://registry.npmjs.org/inquirer/-/inquirer-8.2.7.tgz",
      "integrity": "sha512-UjOaSel/iddGZJ5xP/Eixh6dY1XghiBw4XK13rCCIJcJfyhhoul/7KhLLUGtebEj6GDYM6Vnx/mVsjx2L/mFIA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@inquirer/external-editor": "^1.0.0",
        "ansi-escapes": "^4.2.1",
        "chalk": "^4.1.1",
        "cli-cursor": "^3.1.0",
        "cli-width": "^3.0.0",
        "figures": "^3.0.0",
        "lodash": "^4.17.21",
        "mute-stream": "0.0.8",
        "ora": "^5.4.1",
        "run-async": "^2.4.0",
        "rxjs": "^7.5.5",
        "string-width": "^4.1.0",
        "strip-ansi": "^6.0.0",
        "through": "^2.3.6",
        "wrap-ansi": "^6.0.1"
      },
      "engines": {
        "node": ">=12.0.0"
      }
    },
    "node_modules/inquirer-autocomplete-prompt": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/inquirer-autocomplete-prompt/-/inquirer-autocomplete-prompt-2.0.1.tgz",
      "integrity": "sha512-jUHrH0btO7j5r8DTQgANf2CBkTZChoVySD8zF/wp5fZCOLIuUbleXhf4ZY5jNBOc1owA3gdfWtfZuppfYBhcUg==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "ansi-escapes": "^4.3.2",
        "figures": "^3.2.0",
        "picocolors": "^1.0.0",
        "run-async": "^2.4.1",
        "rxjs": "^7.5.4"
      },
      "engines": {
        "node": ">=12"
      },
      "peerDependencies": {
        "inquirer": "^8.0.0"
      }
    },
    "node_modules/install-artifact-from-github": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/install-artifact-from-github/-/install-artifact-from-github-1.4.0.tgz",
      "integrity": "sha512-+y6WywKZREw5rq7U2jvr2nmZpT7cbWbQQ0N/qfcseYnzHFz2cZz1Et52oY+XttYuYeTkI8Y+R2JNWj68MpQFSg==",
      "dev": true,
      "license": "BSD-3-Clause",
      "optional": true,
      "bin": {
        "install-from-cache": "bin/install-from-cache.js",
        "save-to-github-cache": "bin/save-to-github-cache.js"
      }
    },
    "node_modules/ip-address": {
      "version": "10.0.1",
      "resolved": "https://registry.npmjs.org/ip-address/-/ip-address-10.0.1.tgz",
      "integrity": "sha512-NWv9YLW4PoW2B7xtzaS3NCot75m6nK7Icdv0o3lfMceJVRfSoQwqD4wEH5rLwoKJwUiZ/rfpiVBhnaF0FK4HoA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 12"
      }
    },
    "node_modules/ip-regex": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/ip-regex/-/ip-regex-4.3.0.tgz",
      "integrity": "sha512-B9ZWJxHHOHUhUjCPrMpLD4xEq35bUTClHM1S6CBU5ixQnkZmwipwgc96vAd7AAGM9TGHvJR+Uss+/Ak6UphK+Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/ipaddr.js": {
      "version": "1.9.1",
      "resolved": "https://registry.npmjs.org/ipaddr.js/-/ipaddr.js-1.9.1.tgz",
      "integrity": "sha512-0KI/607xoxSToH7GjN1FfSbLoU0+btTicjsQSWQlh/hZykN8KpmMf7uYwPW3R+akZ6R/w18ZlXSHBYXiYUPO3g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.10"
      }
    },
    "node_modules/is-alphabetical": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/is-alphabetical/-/is-alphabetical-2.0.1.tgz",
      "integrity": "sha512-FWyyY60MeTNyeSRpkM2Iry0G9hpr7/9kD40mD/cGQEuilcZYS4okz8SN2Q6rLCJ8gbCt6fN+rC+6tMGS99LaxQ==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/is-alphanumerical": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/is-alphanumerical/-/is-alphanumerical-2.0.1.tgz",
      "integrity": "sha512-hmbYhX/9MUMF5uh7tOXyK/n0ZvWpad5caBA17GsC6vyuCqaWliRG5K1qS9inmUhEMaOBIW7/whAnSwveW/LtZw==",
      "license": "MIT",
      "dependencies": {
        "is-alphabetical": "^2.0.0",
        "is-decimal": "^2.0.0"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/is-binary-path": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/is-binary-path/-/is-binary-path-2.1.0.tgz",
      "integrity": "sha512-ZMERYes6pDydyuGidse7OsHxtbI7WVeUEozgR/g7rd0xUimYNlvZRE/K2MgZTjWy725IfelLeVcEM97mmtRGXw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "binary-extensions": "^2.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/is-buffer": {
      "version": "1.1.6",
      "resolved": "https://registry.npmjs.org/is-buffer/-/is-buffer-1.1.6.tgz",
      "integrity": "sha512-NcdALwpXkTm5Zvvbk7owOUSvVvBKDgKP5/ewfXEznmQFfs4ZRmanOeKBTjRVjka3QFoN6XJ+9F3USqfHqTaU5w==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/is-ci": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/is-ci/-/is-ci-2.0.0.tgz",
      "integrity": "sha512-YfJT7rkpQB0updsdHLGWrvhBJfcfzNNawYDNIyQXJz0IViGf75O8EBPKSdvw2rF+LGCsX4FZ8tcr3b19LcZq4w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ci-info": "^2.0.0"
      },
      "bin": {
        "is-ci": "bin.js"
      }
    },
    "node_modules/is-core-module": {
      "version": "2.16.1",
      "resolved": "https://registry.npmjs.org/is-core-module/-/is-core-module-2.16.1.tgz",
      "integrity": "sha512-UfoeMA6fIJ8wTYFEUjelnaGI67v6+N7qXJEvQuIGa99l4xsCruSYOVSQ0uPANn4dAzm8lkYPaKLrrijLq7x23w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "hasown": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-decimal": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/is-decimal/-/is-decimal-2.0.1.tgz",
      "integrity": "sha512-AAB9hiomQs5DXWcRB1rqsxGUstbRroFOPPVAomNk/3XHR5JyEZChOyTWe2oayKnsSsr/kcGqF+z6yuH6HHpN0A==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/is-extglob": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/is-extglob/-/is-extglob-2.1.1.tgz",
      "integrity": "sha512-SbKbANkN603Vi4jEZv49LeVJMn4yGwsbzZworEoyEiutsN3nJYdbO36zfhGJ6QEDpOZIFkDtnq5JRxmvl3jsoQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/is-fullwidth-code-point": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
      "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/is-glob": {
      "version": "4.0.3",
      "resolved": "https://registry.npmjs.org/is-glob/-/is-glob-4.0.3.tgz",
      "integrity": "sha512-xelSayHH36ZgE7ZWhli7pW34hNbNl8Ojv5KVmkJD4hBdD3th8Tfk9vYasLM+mXWOZhFkgZfxhLSnrwRr4elSSg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-extglob": "^2.1.1"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/is-hexadecimal": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/is-hexadecimal/-/is-hexadecimal-2.0.1.tgz",
      "integrity": "sha512-DgZQp241c8oO6cA1SbTEWiXeoxV42vlcJxgH+B3hi1AiqqKruZR3ZGF8In3fj4+/y/7rHvlOZLZtgJ/4ttYGZg==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/is-installed-globally": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/is-installed-globally/-/is-installed-globally-0.4.0.tgz",
      "integrity": "sha512-iwGqO3J21aaSkC7jWnHP/difazwS7SFeIqxv6wEtLU8Y5KlzFTjyqcSIT0d8s4+dDhKytsk9PJZ2BkS5eZwQRQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "global-dirs": "^3.0.0",
        "is-path-inside": "^3.0.2"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/is-interactive": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/is-interactive/-/is-interactive-1.0.0.tgz",
      "integrity": "sha512-2HvIEKRoqS62guEC+qBjpvRubdX910WCMuJTZ+I9yvqKU2/12eSL549HMwtabb4oupdj2sMP50k+XJfB/8JE6w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/is-npm": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/is-npm/-/is-npm-5.0.0.tgz",
      "integrity": "sha512-WW/rQLOazUq+ST/bCAVBp/2oMERWLsR7OrKyt052dNDk4DHcDE0/7QSXITlmi+VBcV13DfIbysG3tZJm5RfdBA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/is-number": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/is-number/-/is-number-2.1.0.tgz",
      "integrity": "sha512-QUzH43Gfb9+5yckcrSA0VBDwEtDUchrk4F6tfJZQuNzDJbEDB9cZNzSfXGQ1jqmdDY/kl41lUOWM9syA8z8jlg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "kind-of": "^3.0.2"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/is-obj": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/is-obj/-/is-obj-2.0.0.tgz",
      "integrity": "sha512-drqDG3cbczxxEJRoOXcOjtdp1J/lyp1mNn0xaznRs8+muBhgQcrnbspox5X5fOw0HnMnbfDzvnEMEtqDEJEo8w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/is-path-inside": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/is-path-inside/-/is-path-inside-3.0.3.tgz",
      "integrity": "sha512-Fd4gABb+ycGAmKou8eMftCupSir5lRxqf4aD/vd0cD2qc4HL07OjCeuHMr8Ro4CoMaeCKDB0/ECBOVWjTwUvPQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/is-plain-obj": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/is-plain-obj/-/is-plain-obj-4.1.0.tgz",
      "integrity": "sha512-+Pgi+vMuUNkJyExiMBt5IlFoMyKnr5zhJ4Uspz58WOhBF5QoIZkFyNHIbBAtHwzVAgk5RtndVNsDRN61/mmDqg==",
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/is-promise": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/is-promise/-/is-promise-4.0.0.tgz",
      "integrity": "sha512-hvpoI6korhJMnej285dSg6nu1+e6uxs7zG3BYAm5byqDsgJNWwxzM6z6iZiAgQR4TJ30JmBTOwqZUw3WlyH3AQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/is-stream": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/is-stream/-/is-stream-2.0.1.tgz",
      "integrity": "sha512-hFoiJiTl63nn+kstHGBtewWSKnQLpyb155KHheA1l39uvtO9nWIop1p3udqPcUd/xbF1VLMO4n7OI6p7RbngDg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/is-stream-ended": {
      "version": "0.1.4",
      "resolved": "https://registry.npmjs.org/is-stream-ended/-/is-stream-ended-0.1.4.tgz",
      "integrity": "sha512-xj0XPvmr7bQFTvirqnFr50o0hQIh6ZItDqloxt5aJrR4NQsYeSsyFQERYGCAzfindAcnKjINnwEEgLx4IqVzQw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/is-typedarray": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/is-typedarray/-/is-typedarray-1.0.0.tgz",
      "integrity": "sha512-cyA56iCMHAh5CdzjJIa4aohJyeO1YbwLi3Jc35MmRU6poroFjIGZzUzupGiRPOjgHg9TLu43xbpwXk523fMxKA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/is-unicode-supported": {
      "version": "0.1.0",
      "resolved": "https://registry.npmjs.org/is-unicode-supported/-/is-unicode-supported-0.1.0.tgz",
      "integrity": "sha512-knxG2q4UC3u8stRGyAVJCOdxFmv5DZiRcdlIaAQXAbSfJya+OhopNotLQrstBhququ4ZpuKbDc/8S6mgXgPFPw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/is-url": {
      "version": "1.2.4",
      "resolved": "https://registry.npmjs.org/is-url/-/is-url-1.2.4.tgz",
      "integrity": "sha512-ITvGim8FhRiYe4IQ5uHSkj7pVaPDrCTkNd3yq3cV7iZAcJdHTUMPMEHcqSOy9xZ9qFenQCvi+2wjH9a1nXqHww==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/is-wsl": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/is-wsl/-/is-wsl-1.1.0.tgz",
      "integrity": "sha512-gfygJYZ2gLTDlmbWMI0CE2MwnFzSN/2SZfkMlItC4K/JBlsWVDB0bO6XhqcY13YXE7iMcAJnzTCJjPiTeJJ0Mw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/is-yarn-global": {
      "version": "0.3.0",
      "resolved": "https://registry.npmjs.org/is-yarn-global/-/is-yarn-global-0.3.0.tgz",
      "integrity": "sha512-VjSeb/lHmkoyd8ryPVIKvOCn4D1koMqY+vqyjjUfc3xyKtP4dYOxM44sZrnqQSzSds3xyOrUTLTC9LVCVgLngw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/is2": {
      "version": "2.0.9",
      "resolved": "https://registry.npmjs.org/is2/-/is2-2.0.9.tgz",
      "integrity": "sha512-rZkHeBn9Zzq52sd9IUIV3a5mfwBY+o2HePMh0wkGBM4z4qjvy2GwVxQ6nNXSfw6MmVP6gf1QIlWjiOavhM3x5g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "deep-is": "^0.1.3",
        "ip-regex": "^4.1.0",
        "is-url": "^1.2.4"
      },
      "engines": {
        "node": ">=v0.10.0"
      }
    },
    "node_modules/isarray": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/isarray/-/isarray-1.0.0.tgz",
      "integrity": "sha512-VLghIWNM6ELQzo7zwmcg0NmTVyWKYjvIeM83yjp0wRDTmUnrM678fQbcKBo6n2CJEF0szoG//ytg+TKla89ALQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/isexe": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/isexe/-/isexe-2.0.0.tgz",
      "integrity": "sha512-RHxMLp9lnKHGHRng9QFhRCMbYAcVpn69smSGcq3f36xjgVVWThj4qqLbTLlq7Ssj8B+fIQ1EuCEGI2lKsyQeIw==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/isomorphic-fetch": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/isomorphic-fetch/-/isomorphic-fetch-3.0.0.tgz",
      "integrity": "sha512-qvUtwJ3j6qwsF3jLxkZ72qCgjMysPzDfeV240JHiGZsANBYd+EEuu35v7dfrJ9Up0Ak07D7GGSkGhCHTqg/5wA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "node-fetch": "^2.6.1",
        "whatwg-fetch": "^3.4.1"
      }
    },
    "node_modules/jackspeak": {
      "version": "3.4.3",
      "resolved": "https://registry.npmjs.org/jackspeak/-/jackspeak-3.4.3.tgz",
      "integrity": "sha512-OGlZQpz2yfahA/Rd1Y8Cd9SIEsqvXkLVoSw/cgwhnhFMDbsQFeZYoJJ7bIZBS9BcamUW96asq/npPWugM+RQBw==",
      "dev": true,
      "license": "BlueOak-1.0.0",
      "dependencies": {
        "@isaacs/cliui": "^8.0.2"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      },
      "optionalDependencies": {
        "@pkgjs/parseargs": "^0.11.0"
      }
    },
    "node_modules/jiti": {
      "version": "1.21.7",
      "resolved": "https://registry.npmjs.org/jiti/-/jiti-1.21.7.tgz",
      "integrity": "sha512-/imKNG4EbWNrVjoNC/1H5/9GFy+tqjGBHCaSsN+P2RnPqjsLmv6UD3Ej+Kj8nBWaRAwyk7kK5ZUc+OEatnTR3A==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "jiti": "bin/jiti.js"
      }
    },
    "node_modules/jju": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/jju/-/jju-1.4.0.tgz",
      "integrity": "sha512-8wb9Yw966OSxApiCt0K3yNJL8pnNeIv+OEq2YMidz4FKP6nonSRoOXc80iXY4JaN2FC11B9qsNmDsm+ZOfMROA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/join-path": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/join-path/-/join-path-1.1.1.tgz",
      "integrity": "sha512-jnt9OC34sLXMLJ6YfPQ2ZEKrR9mB5ZbSnQb4LPaOx1c5rTzxpR33L18jjp0r75mGGTJmsil3qwN1B5IBeTnSSA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "as-array": "^2.0.0",
        "url-join": "0.0.1",
        "valid-url": "^1"
      }
    },
    "node_modules/js-tokens": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/js-tokens/-/js-tokens-4.0.0.tgz",
      "integrity": "sha512-RdJUflcE3cUzKiMqQgsCu06FPu9UdIJO0beYbPhHN4k6apgJtifcoCtT9bcxOpYBtpD2kCM6Sbzg4CausW/PKQ==",
      "license": "MIT"
    },
    "node_modules/js-yaml": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/js-yaml/-/js-yaml-4.1.0.tgz",
      "integrity": "sha512-wpxZs9NoxZaJESJGIZTyDEaYpl0FKSA+FB9aJiyemKhMwkxQg63h4T1KJgUGHpTqPDNRcmmYLugrRjJlBtWvRA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "argparse": "^2.0.1"
      },
      "bin": {
        "js-yaml": "bin/js-yaml.js"
      }
    },
    "node_modules/jsesc": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/jsesc/-/jsesc-3.1.0.tgz",
      "integrity": "sha512-/sM3dO2FOzXjKQhJuo0Q173wf2KOo8t4I8vHy6lF9poUp7bKT0/NHE8fPX23PwfhnykfqnC2xRxOnVw5XuGIaA==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "jsesc": "bin/jsesc"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/json-bigint": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/json-bigint/-/json-bigint-1.0.0.tgz",
      "integrity": "sha512-SiPv/8VpZuWbvLSMtTDU8hEfrZWg/mH/nV/b4o0CYbSxu1UIQPLdwKOCIyLQX+VIPO5vrLX3i8qtqFyhdPSUSQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "bignumber.js": "^9.0.0"
      }
    },
    "node_modules/json-buffer": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/json-buffer/-/json-buffer-3.0.1.tgz",
      "integrity": "sha512-4bV5BfR2mqfQTJm+V5tPPdf+ZpuhiIvTuAB5g8kcrXOZpTT/QwwVRWBywX1ozr6lEuPdbHxwaJlm9G6mI2sfSQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json-parse-helpfulerror": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/json-parse-helpfulerror/-/json-parse-helpfulerror-1.0.3.tgz",
      "integrity": "sha512-XgP0FGR77+QhUxjXkwOMkC94k3WtqEBfcnjWqhRd82qTat4SWKRE+9kUnynz/shm3I4ea2+qISvTIeGTNU7kJg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "jju": "^1.1.0"
      }
    },
    "node_modules/json-ptr": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/json-ptr/-/json-ptr-3.1.1.tgz",
      "integrity": "sha512-SiSJQ805W1sDUCD1+/t1/1BIrveq2Fe9HJqENxZmMCILmrPI7WhS/pePpIOx85v6/H2z1Vy7AI08GV2TzfXocg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json-schema-traverse": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/json-schema-traverse/-/json-schema-traverse-0.4.1.tgz",
      "integrity": "sha512-xbbCH5dCYU5T8LcEhhuh7HJ88HXuW3qsI3Y0zOZFKfZEHcpWiHU/Jxzk629Brsab/mMiHQti9wMP+845RPe3Vg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json-stable-stringify-without-jsonify": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/json-stable-stringify-without-jsonify/-/json-stable-stringify-without-jsonify-1.0.1.tgz",
      "integrity": "sha512-Bdboy+l7tA3OGW6FjyFHWkP5LuByj1Tk33Ljyq0axyzdk9//JSi2u3fP1QSmd1KNwq6VOKYGlAu87CisVir6Pw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json5": {
      "version": "2.2.3",
      "resolved": "https://registry.npmjs.org/json5/-/json5-2.2.3.tgz",
      "integrity": "sha512-XmOWe7eyHYH14cLdVPoyg+GOH3rYX++KpzrylJwSW98t3Nk+U8XOl8FWKOgwtzdb8lXGf6zYwDUzeHMWfxasyg==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "json5": "lib/cli.js"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/jsonfile": {
      "version": "6.2.0",
      "resolved": "https://registry.npmjs.org/jsonfile/-/jsonfile-6.2.0.tgz",
      "integrity": "sha512-FGuPw30AdOIUTRMC2OMRtQV+jkVj2cfPqSeWXv1NEAJ1qZ5zb1X6z1mFhbfOB/iy3ssJCD+3KuZ8r8C3uVFlAg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "universalify": "^2.0.0"
      },
      "optionalDependencies": {
        "graceful-fs": "^4.1.6"
      }
    },
    "node_modules/jsonwebtoken": {
      "version": "9.0.2",
      "resolved": "https://registry.npmjs.org/jsonwebtoken/-/jsonwebtoken-9.0.2.tgz",
      "integrity": "sha512-PRp66vJ865SSqOlgqS8hujT5U4AOgMfhrwYIuIhfKaoSCZcirrmASQr8CX7cUg+RMih+hgznrjp99o+W4pJLHQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "jws": "^3.2.2",
        "lodash.includes": "^4.3.0",
        "lodash.isboolean": "^3.0.3",
        "lodash.isinteger": "^4.0.4",
        "lodash.isnumber": "^3.0.3",
        "lodash.isplainobject": "^4.0.6",
        "lodash.isstring": "^4.0.1",
        "lodash.once": "^4.0.0",
        "ms": "^2.1.1",
        "semver": "^7.5.4"
      },
      "engines": {
        "node": ">=12",
        "npm": ">=6"
      }
    },
    "node_modules/jsonwebtoken/node_modules/jwa": {
      "version": "1.4.2",
      "resolved": "https://registry.npmjs.org/jwa/-/jwa-1.4.2.tgz",
      "integrity": "sha512-eeH5JO+21J78qMvTIDdBXidBd6nG2kZjg5Ohz/1fpa28Z4CcsWUzJ1ZZyFq/3z3N17aZy+ZuBoHljASbL1WfOw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "buffer-equal-constant-time": "^1.0.1",
        "ecdsa-sig-formatter": "1.0.11",
        "safe-buffer": "^5.0.1"
      }
    },
    "node_modules/jsonwebtoken/node_modules/jws": {
      "version": "3.2.2",
      "resolved": "https://registry.npmjs.org/jws/-/jws-3.2.2.tgz",
      "integrity": "sha512-YHlZCB6lMTllWDtSPHz/ZXTsi8S00usEV6v1tjq8tOUZzw7DpSDWVXjXDre6ed1w/pd495ODpHZYSdkRTsa0HA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "jwa": "^1.4.1",
        "safe-buffer": "^5.0.1"
      }
    },
    "node_modules/jwa": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/jwa/-/jwa-2.0.1.tgz",
      "integrity": "sha512-hRF04fqJIP8Abbkq5NKGN0Bbr3JxlQ+qhZufXVr0DvujKy93ZCbXZMHDL4EOtodSbCWxOqR8MS1tXA5hwqCXDg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "buffer-equal-constant-time": "^1.0.1",
        "ecdsa-sig-formatter": "1.0.11",
        "safe-buffer": "^5.0.1"
      }
    },
    "node_modules/jws": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/jws/-/jws-4.0.0.tgz",
      "integrity": "sha512-KDncfTmOZoOMTFG4mBlG0qUIOlc03fmzH+ru6RgYVZhPkyiy/92Owlt/8UEN+a4TXR1FQetfIpJE8ApdvdVxTg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "jwa": "^2.0.0",
        "safe-buffer": "^5.0.1"
      }
    },
    "node_modules/keyv": {
      "version": "4.5.4",
      "resolved": "https://registry.npmjs.org/keyv/-/keyv-4.5.4.tgz",
      "integrity": "sha512-oxVHkHR/EJf2CNXnWxRLW6mg7JyCCUcG0DtEGmL2ctUo1PNTin1PUil+r/+4r5MpVgC/fn1kjsx7mjSujKqIpw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "json-buffer": "3.0.1"
      }
    },
    "node_modules/kind-of": {
      "version": "3.2.2",
      "resolved": "https://registry.npmjs.org/kind-of/-/kind-of-3.2.2.tgz",
      "integrity": "sha512-NOW9QQXMoZGg/oqnVNoNTTIFEIid1627WCffUBJEdMxYApq7mNE7CpzucIPc+ZQg25Phej7IJSmX3hO+oblOtQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-buffer": "^1.1.5"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/kuler": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/kuler/-/kuler-2.0.0.tgz",
      "integrity": "sha512-Xq9nH7KlWZmXAtodXDDRE7vs6DU1gTU8zYDHDiWLSip45Egwq3plLHzPn27NgvzL2r1LMPC1vdqh98sQxtqj4A==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/lazystream": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/lazystream/-/lazystream-1.0.1.tgz",
      "integrity": "sha512-b94GiNHQNy6JNTrt5w6zNyffMrNkXZb3KTkCZJb2V1xaEGCk093vkZ2jk3tpaeP33/OiXC+WvK9AxUebnf5nbw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "readable-stream": "^2.0.5"
      },
      "engines": {
        "node": ">= 0.6.3"
      }
    },
    "node_modules/lazystream/node_modules/readable-stream": {
      "version": "2.3.8",
      "resolved": "https://registry.npmjs.org/readable-stream/-/readable-stream-2.3.8.tgz",
      "integrity": "sha512-8p0AUk4XODgIewSi0l8Epjs+EVnWiK7NoDIEGU0HhE7+ZyY8D1IMY7odu5lRrFXGg71L15KG8QrPmum45RTtdA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "core-util-is": "~1.0.0",
        "inherits": "~2.0.3",
        "isarray": "~1.0.0",
        "process-nextick-args": "~2.0.0",
        "safe-buffer": "~5.1.1",
        "string_decoder": "~1.1.1",
        "util-deprecate": "~1.0.1"
      }
    },
    "node_modules/lazystream/node_modules/safe-buffer": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/safe-buffer/-/safe-buffer-5.1.2.tgz",
      "integrity": "sha512-Gd2UZBJDkXlY7GbJxfsE8/nvKkUEU1G38c1siN6QP6a9PT9MmHB8GnpscSmMJSoF8LOIrt8ud/wPtojys4G6+g==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/lazystream/node_modules/string_decoder": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/string_decoder/-/string_decoder-1.1.1.tgz",
      "integrity": "sha512-n/ShnvDi6FHbbVfviro+WojiFzv+s8MPMHBczVePfUpDJLwoLT0ht1l4YwBCbi8pJAveEEdnkHyPyTP/mzRfwg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "safe-buffer": "~5.1.0"
      }
    },
    "node_modules/leven": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/leven/-/leven-3.1.0.tgz",
      "integrity": "sha512-qsda+H8jTaUaN/x5vzW2rzc+8Rw4TAQ/4KjB46IwK5VH+IlVeeeje/EoZRpiXvIqjFgK84QffqPztGI3VBLG1A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/levn": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/levn/-/levn-0.4.1.tgz",
      "integrity": "sha512-+bT2uH4E5LGE7h/n3evcS/sQlJXCpIp6ym8OWJ5eV6+67Dsql/LaaT7qJBAt2rzfoa/5QBGBhxDix1dMt2kQKQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "prelude-ls": "^1.2.1",
        "type-check": "~0.4.0"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/libsodium": {
      "version": "0.7.15",
      "resolved": "https://registry.npmjs.org/libsodium/-/libsodium-0.7.15.tgz",
      "integrity": "sha512-sZwRknt/tUpE2AwzHq3jEyUU5uvIZHtSssktXq7owd++3CSgn8RGrv6UZJJBpP7+iBghBqe7Z06/2M31rI2NKw==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/libsodium-wrappers": {
      "version": "0.7.15",
      "resolved": "https://registry.npmjs.org/libsodium-wrappers/-/libsodium-wrappers-0.7.15.tgz",
      "integrity": "sha512-E4anqJQwcfiC6+Yrl01C1m8p99wEhLmJSs0VQqST66SbQXXBoaJY0pF4BNjRYa/sOQAxx6lXAaAFIlx+15tXJQ==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "libsodium": "^0.7.15"
      }
    },
    "node_modules/lilconfig": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/lilconfig/-/lilconfig-3.1.3.tgz",
      "integrity": "sha512-/vlFKAoH5Cgt3Ie+JLhRbwOsCQePABiU3tJ1egGvyQ+33R/vcwM2Zl2QR/LzjsBeItPt3oSVXapn+m4nQDvpzw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=14"
      },
      "funding": {
        "url": "https://github.com/sponsors/antonk52"
      }
    },
    "node_modules/lines-and-columns": {
      "version": "1.2.4",
      "resolved": "https://registry.npmjs.org/lines-and-columns/-/lines-and-columns-1.2.4.tgz",
      "integrity": "sha512-7ylylesZQ/PV29jhEDl3Ufjo6ZX7gCqJr5F7PKrqc93v7fzSymt1BpwEU8nAUXs8qzzvqhbjhK5QZg6Mt/HkBg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/locate-path": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/locate-path/-/locate-path-6.0.0.tgz",
      "integrity": "sha512-iPZK6eYjbxRu3uB4/WZ3EsEIMJFMqAoopl3R+zuq0UjcAm/MO6KCweDgPfP3elTztoKP3KtnVHxTn2NHBSDVUw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-locate": "^5.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/lodash": {
      "version": "4.17.21",
      "resolved": "https://registry.npmjs.org/lodash/-/lodash-4.17.21.tgz",
      "integrity": "sha512-v2kDEe57lecTulaDIuNTPy3Ry4gLGJ6Z1O3vE1krgXZNrsQ+LFTGHVxVjcXPs17LhbZVGedAJv8XZ1tvj5FvSg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/lodash._objecttypes": {
      "version": "2.4.1",
      "resolved": "https://registry.npmjs.org/lodash._objecttypes/-/lodash._objecttypes-2.4.1.tgz",
      "integrity": "sha512-XpqGh1e7hhkOzftBfWE7zt+Yn9mVHFkDhicVttvKLsoCMLVVL+xTQjfjB4X4vtznauxv0QZ5ZAeqjvat0dh62Q==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/lodash.camelcase": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/lodash.camelcase/-/lodash.camelcase-4.3.0.tgz",
      "integrity": "sha512-TwuEnCnxbc3rAvhf/LbG7tJUDzhqXyFnv3dtzLOPgCG/hODL7WFnsbwktkD7yUV0RrreP/l1PALq/YSg6VvjlA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/lodash.includes": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/lodash.includes/-/lodash.includes-4.3.0.tgz",
      "integrity": "sha512-W3Bx6mdkRTGtlJISOvVD/lbqjTlPPUDTMnlXZFnVwi9NKJ6tiAk6LVdlhZMm17VZisqhKcgzpO5Wz91PCt5b0w==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/lodash.isboolean": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/lodash.isboolean/-/lodash.isboolean-3.0.3.tgz",
      "integrity": "sha512-Bz5mupy2SVbPHURB98VAcw+aHh4vRV5IPNhILUCsOzRmsTmSQ17jIuqopAentWoehktxGd9e/hbIXq980/1QJg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/lodash.isinteger": {
      "version": "4.0.4",
      "resolved": "https://registry.npmjs.org/lodash.isinteger/-/lodash.isinteger-4.0.4.tgz",
      "integrity": "sha512-DBwtEWN2caHQ9/imiNeEA5ys1JoRtRfY3d7V9wkqtbycnAmTvRRmbHKDV4a0EYc678/dia0jrte4tjYwVBaZUA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/lodash.isnumber": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/lodash.isnumber/-/lodash.isnumber-3.0.3.tgz",
      "integrity": "sha512-QYqzpfwO3/CWf3XP+Z+tkQsfaLL/EnUlXWVkIk5FUPc4sBdTehEqZONuyRt2P67PXAk+NXmTBcc97zw9t1FQrw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/lodash.isobject": {
      "version": "2.4.1",
      "resolved": "https://registry.npmjs.org/lodash.isobject/-/lodash.isobject-2.4.1.tgz",
      "integrity": "sha512-sTebg2a1PoicYEZXD5PBdQcTlIJ6hUslrlWr7iV0O7n+i4596s2NQ9I5CaZ5FbXSfya/9WQsrYLANUJv9paYVA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "lodash._objecttypes": "~2.4.1"
      }
    },
    "node_modules/lodash.isplainobject": {
      "version": "4.0.6",
      "resolved": "https://registry.npmjs.org/lodash.isplainobject/-/lodash.isplainobject-4.0.6.tgz",
      "integrity": "sha512-oSXzaWypCMHkPC3NvBEaPHf0KsA5mvPrOPgQWDsbg8n7orZ290M0BmC/jgRZ4vcJ6DTAhjrsSYgdsW/F+MFOBA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/lodash.isstring": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/lodash.isstring/-/lodash.isstring-4.0.1.tgz",
      "integrity": "sha512-0wJxfxH1wgO3GrbuP+dTTk7op+6L41QCXbGINEmD+ny/G/eCqGzxyCsh7159S+mgDDcoarnBw6PC1PS5+wUGgw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/lodash.mapvalues": {
      "version": "4.6.0",
      "resolved": "https://registry.npmjs.org/lodash.mapvalues/-/lodash.mapvalues-4.6.0.tgz",
      "integrity": "sha512-JPFqXFeZQ7BfS00H58kClY7SPVeHertPE0lNuCyZ26/XlN8TvakYD7b9bGyNmXbT/D3BbtPAAmq90gPWqLkxlQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/lodash.merge": {
      "version": "4.6.2",
      "resolved": "https://registry.npmjs.org/lodash.merge/-/lodash.merge-4.6.2.tgz",
      "integrity": "sha512-0KpjqXRVvrYyCsX1swR/XTK0va6VQkQM6MNo7PqW77ByjAhoARA8EfrP1N4+KlKj8YS0ZUCtRT/YUuhyYDujIQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/lodash.once": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/lodash.once/-/lodash.once-4.1.1.tgz",
      "integrity": "sha512-Sb487aTOCr9drQVL8pIxOzVhafOjZN9UU54hiN8PU3uAiSV7lx1yYNpbNmex2PK6dSJoNTSJUUswT651yww3Mg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/lodash.snakecase": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/lodash.snakecase/-/lodash.snakecase-4.1.1.tgz",
      "integrity": "sha512-QZ1d4xoBHYUeuouhEq3lk3Uq7ldgyFXGBhg04+oRLnIz8o9T65Eh+8YdroUwn846zchkA9yDsDl5CVVaV2nqYw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/log-symbols": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/log-symbols/-/log-symbols-4.1.0.tgz",
      "integrity": "sha512-8XPvpAA8uyhfteu8pIvQxpJZ7SYYdpUivZpGy6sFsBuKRY/7rQGavedeB8aK+Zkyq6upMFVL/9AW6vOYzfRyLg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "chalk": "^4.1.0",
        "is-unicode-supported": "^0.1.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/logform": {
      "version": "2.7.0",
      "resolved": "https://registry.npmjs.org/logform/-/logform-2.7.0.tgz",
      "integrity": "sha512-TFYA4jnP7PVbmlBIfhlSe+WKxs9dklXMTEGcBCIvLhE/Tn3H6Gk1norupVW7m5Cnd4bLcr08AytbyV/xj7f/kQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@colors/colors": "1.6.0",
        "@types/triple-beam": "^1.3.2",
        "fecha": "^4.2.0",
        "ms": "^2.1.1",
        "safe-stable-stringify": "^2.3.1",
        "triple-beam": "^1.3.0"
      },
      "engines": {
        "node": ">= 12.0.0"
      }
    },
    "node_modules/logform/node_modules/@colors/colors": {
      "version": "1.6.0",
      "resolved": "https://registry.npmjs.org/@colors/colors/-/colors-1.6.0.tgz",
      "integrity": "sha512-Ir+AOibqzrIsL6ajt3Rz3LskB7OiMVHqltZmspbW/TJuTVuyOMirVqAkjfY6JISiLHgyNqicAC8AyHHGzNd/dA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.1.90"
      }
    },
    "node_modules/long": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/long/-/long-5.3.2.tgz",
      "integrity": "sha512-mNAgZ1GmyNhD7AuqnTG3/VQ26o760+ZYBPKjPvugO8+nLbYfX6TVpJPseBvopbdY+qpZ/lKUnmEc1LeZYS3QAA==",
      "dev": true,
      "license": "Apache-2.0"
    },
    "node_modules/longest-streak": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/longest-streak/-/longest-streak-3.1.0.tgz",
      "integrity": "sha512-9Ri+o0JYgehTaVBBDoMqIl8GXtbWg711O3srftcHhZ0dqnETqLaoIK0x17fUw9rFSlK/0NlsKe0Ahhyl5pXE2g==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/loose-envify": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/loose-envify/-/loose-envify-1.4.0.tgz",
      "integrity": "sha512-lyuxPGr/Wfhrlem2CL/UcnUc1zcqKAImBDzukY7Y5F/yQiNdko6+fRLevlw1HgMySw7f611UIY408EtxRSoK3Q==",
      "license": "MIT",
      "dependencies": {
        "js-tokens": "^3.0.0 || ^4.0.0"
      },
      "bin": {
        "loose-envify": "cli.js"
      }
    },
    "node_modules/lru-cache": {
      "version": "5.1.1",
      "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-5.1.1.tgz",
      "integrity": "sha512-KpNARQA3Iwv+jTA0utUVVbrh+Jlrr1Fv0e56GGzAFOXN7dk/FviaDW8LHmK52DlcH4WP2n6gI8vN1aesBFgo9w==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "yallist": "^3.0.2"
      }
    },
    "node_modules/lsofi": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/lsofi/-/lsofi-1.0.0.tgz",
      "integrity": "sha512-MKr9vM1MSm+TSKfI05IYxpKV1NCxpJaBLnELyIf784zYJ5KV9lGCE1EvpA2DtXDNM3fCuFeCwXUzim/fyQRi+A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-number": "^2.1.0",
        "through2": "^2.0.1"
      }
    },
    "node_modules/make-dir": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/make-dir/-/make-dir-3.1.0.tgz",
      "integrity": "sha512-g3FeP20LNwhALb/6Cz6Dd4F2ngze0jz7tbzrD2wAV+o9FeNHe4rL+yK2md0J/fiSf1sa1ADhXqi5+oVwOM/eGw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "semver": "^6.0.0"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/make-dir/node_modules/semver": {
      "version": "6.3.1",
      "resolved": "https://registry.npmjs.org/semver/-/semver-6.3.1.tgz",
      "integrity": "sha512-BR7VvDCVHO+q2xBEWskxS6DJE1qRnb7DxzUrogb71CWoSficBxYsiAGd+Kl0mmq/MprG9yArRkyrQxTO6XjMzA==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      }
    },
    "node_modules/make-fetch-happen": {
      "version": "14.0.3",
      "resolved": "https://registry.npmjs.org/make-fetch-happen/-/make-fetch-happen-14.0.3.tgz",
      "integrity": "sha512-QMjGbFTP0blj97EeidG5hk/QhKQ3T4ICckQGLgz38QF7Vgbk6e6FTARN8KhKxyBbWn8R0HU+bnw8aSoFPD4qtQ==",
      "dev": true,
      "license": "ISC",
      "optional": true,
      "dependencies": {
        "@npmcli/agent": "^3.0.0",
        "cacache": "^19.0.1",
        "http-cache-semantics": "^4.1.1",
        "minipass": "^7.0.2",
        "minipass-fetch": "^4.0.0",
        "minipass-flush": "^1.0.5",
        "minipass-pipeline": "^1.2.4",
        "negotiator": "^1.0.0",
        "proc-log": "^5.0.0",
        "promise-retry": "^2.0.1",
        "ssri": "^12.0.0"
      },
      "engines": {
        "node": "^18.17.0 || >=20.5.0"
      }
    },
    "node_modules/make-fetch-happen/node_modules/negotiator": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/negotiator/-/negotiator-1.0.0.tgz",
      "integrity": "sha512-8Ofs/AUQh8MaEcrlq5xOX0CQ9ypTF5dl78mjlMNfOK08fzpgTHQRQPBxcPlEtIw0yRpws+Zo/3r+5WRby7u3Gg==",
      "dev": true,
      "license": "MIT",
      "optional": true,
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/markdown-table": {
      "version": "3.0.4",
      "resolved": "https://registry.npmjs.org/markdown-table/-/markdown-table-3.0.4.tgz",
      "integrity": "sha512-wiYz4+JrLyb/DqW2hkFJxP7Vd7JuTDm77fvbM8VfEQdmSMqcImWeeRbHwZjBjIFki/VaMK2BhFi7oUUZeM5bqw==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/marked": {
      "version": "13.0.3",
      "resolved": "https://registry.npmjs.org/marked/-/marked-13.0.3.tgz",
      "integrity": "sha512-rqRix3/TWzE9rIoFGIn8JmsVfhiuC8VIQ8IdX5TfzmeBucdY05/0UlzKaw0eVtpcN/OdVFpBk7CjKGo9iHJ/zA==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "marked": "bin/marked.js"
      },
      "engines": {
        "node": ">= 18"
      }
    },
    "node_modules/marked-terminal": {
      "version": "7.3.0",
      "resolved": "https://registry.npmjs.org/marked-terminal/-/marked-terminal-7.3.0.tgz",
      "integrity": "sha512-t4rBvPsHc57uE/2nJOLmMbZCQ4tgAccAED3ngXQqW6g+TxA488JzJ+FK3lQkzBQOI1mRV/r/Kq+1ZlJ4D0owQw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-escapes": "^7.0.0",
        "ansi-regex": "^6.1.0",
        "chalk": "^5.4.1",
        "cli-highlight": "^2.1.11",
        "cli-table3": "^0.6.5",
        "node-emoji": "^2.2.0",
        "supports-hyperlinks": "^3.1.0"
      },
      "engines": {
        "node": ">=16.0.0"
      },
      "peerDependencies": {
        "marked": ">=1 <16"
      }
    },
    "node_modules/marked-terminal/node_modules/ansi-escapes": {
      "version": "7.1.1",
      "resolved": "https://registry.npmjs.org/ansi-escapes/-/ansi-escapes-7.1.1.tgz",
      "integrity": "sha512-Zhl0ErHcSRUaVfGUeUdDuLgpkEo8KIFjB4Y9uAc46ScOpdDiU1Dbyplh7qWJeJ/ZHpbyMSM26+X3BySgnIz40Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "environment": "^1.0.0"
      },
      "engines": {
        "node": ">=18"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/marked-terminal/node_modules/chalk": {
      "version": "5.6.2",
      "resolved": "https://registry.npmjs.org/chalk/-/chalk-5.6.2.tgz",
      "integrity": "sha512-7NzBL0rN6fMUW+f7A6Io4h40qQlG+xGmtMxfbnH/K7TAtt8JQWVQK+6g0UXKMeVJoyV5EkkNsErQ8pVD3bLHbA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^12.17.0 || ^14.13 || >=16.0.0"
      },
      "funding": {
        "url": "https://github.com/chalk/chalk?sponsor=1"
      }
    },
    "node_modules/math-intrinsics": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/math-intrinsics/-/math-intrinsics-1.1.0.tgz",
      "integrity": "sha512-/IXtbwEk5HTPyEwyKX6hGkYXxM9nbj64B+ilVJnC/R6B0pH5G4V3b0pVbL7DBj4tkhBAppbQUlf6F6Xl9LHu1g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/mdast-util-find-and-replace": {
      "version": "3.0.2",
      "resolved": "https://registry.npmjs.org/mdast-util-find-and-replace/-/mdast-util-find-and-replace-3.0.2.tgz",
      "integrity": "sha512-Tmd1Vg/m3Xz43afeNxDIhWRtFZgM2VLyaf4vSTYwudTyeuTneoL3qtWMA5jeLyz/O1vDJmmV4QuScFCA2tBPwg==",
      "license": "MIT",
      "dependencies": {
        "@types/mdast": "^4.0.0",
        "escape-string-regexp": "^5.0.0",
        "unist-util-is": "^6.0.0",
        "unist-util-visit-parents": "^6.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/mdast-util-find-and-replace/node_modules/escape-string-regexp": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/escape-string-regexp/-/escape-string-regexp-5.0.0.tgz",
      "integrity": "sha512-/veY75JbMK4j1yjvuUxuVsiS/hr/4iHs9FTT6cgTexxdE0Ly/glccBAkloH/DofkjRbZU3bnoj38mOmhkZ0lHw==",
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/mdast-util-from-markdown": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/mdast-util-from-markdown/-/mdast-util-from-markdown-2.0.2.tgz",
      "integrity": "sha512-uZhTV/8NBuw0WHkPTrCqDOl0zVe1BIng5ZtHoDk49ME1qqcjYmmLmOf0gELgcRMxN4w2iuIeVso5/6QymSrgmA==",
      "license": "MIT",
      "dependencies": {
        "@types/mdast": "^4.0.0",
        "@types/unist": "^3.0.0",
        "decode-named-character-reference": "^1.0.0",
        "devlop": "^1.0.0",
        "mdast-util-to-string": "^4.0.0",
        "micromark": "^4.0.0",
        "micromark-util-decode-numeric-character-reference": "^2.0.0",
        "micromark-util-decode-string": "^2.0.0",
        "micromark-util-normalize-identifier": "^2.0.0",
        "micromark-util-symbol": "^2.0.0",
        "micromark-util-types": "^2.0.0",
        "unist-util-stringify-position": "^4.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/mdast-util-gfm": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/mdast-util-gfm/-/mdast-util-gfm-3.1.0.tgz",
      "integrity": "sha512-0ulfdQOM3ysHhCJ1p06l0b0VKlhU0wuQs3thxZQagjcjPrlFRqY215uZGHHJan9GEAXd9MbfPjFJz+qMkVR6zQ==",
      "license": "MIT",
      "dependencies": {
        "mdast-util-from-markdown": "^2.0.0",
        "mdast-util-gfm-autolink-literal": "^2.0.0",
        "mdast-util-gfm-footnote": "^2.0.0",
        "mdast-util-gfm-strikethrough": "^2.0.0",
        "mdast-util-gfm-table": "^2.0.0",
        "mdast-util-gfm-task-list-item": "^2.0.0",
        "mdast-util-to-markdown": "^2.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/mdast-util-gfm-autolink-literal": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/mdast-util-gfm-autolink-literal/-/mdast-util-gfm-autolink-literal-2.0.1.tgz",
      "integrity": "sha512-5HVP2MKaP6L+G6YaxPNjuL0BPrq9orG3TsrZ9YXbA3vDw/ACI4MEsnoDpn6ZNm7GnZgtAcONJyPhOP8tNJQavQ==",
      "license": "MIT",
      "dependencies": {
        "@types/mdast": "^4.0.0",
        "ccount": "^2.0.0",
        "devlop": "^1.0.0",
        "mdast-util-find-and-replace": "^3.0.0",
        "micromark-util-character": "^2.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/mdast-util-gfm-footnote": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/mdast-util-gfm-footnote/-/mdast-util-gfm-footnote-2.1.0.tgz",
      "integrity": "sha512-sqpDWlsHn7Ac9GNZQMeUzPQSMzR6Wv0WKRNvQRg0KqHh02fpTz69Qc1QSseNX29bhz1ROIyNyxExfawVKTm1GQ==",
      "license": "MIT",
      "dependencies": {
        "@types/mdast": "^4.0.0",
        "devlop": "^1.1.0",
        "mdast-util-from-markdown": "^2.0.0",
        "mdast-util-to-markdown": "^2.0.0",
        "micromark-util-normalize-identifier": "^2.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/mdast-util-gfm-strikethrough": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/mdast-util-gfm-strikethrough/-/mdast-util-gfm-strikethrough-2.0.0.tgz",
      "integrity": "sha512-mKKb915TF+OC5ptj5bJ7WFRPdYtuHv0yTRxK2tJvi+BDqbkiG7h7u/9SI89nRAYcmap2xHQL9D+QG/6wSrTtXg==",
      "license": "MIT",
      "dependencies": {
        "@types/mdast": "^4.0.0",
        "mdast-util-from-markdown": "^2.0.0",
        "mdast-util-to-markdown": "^2.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/mdast-util-gfm-table": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/mdast-util-gfm-table/-/mdast-util-gfm-table-2.0.0.tgz",
      "integrity": "sha512-78UEvebzz/rJIxLvE7ZtDd/vIQ0RHv+3Mh5DR96p7cS7HsBhYIICDBCu8csTNWNO6tBWfqXPWekRuj2FNOGOZg==",
      "license": "MIT",
      "dependencies": {
        "@types/mdast": "^4.0.0",
        "devlop": "^1.0.0",
        "markdown-table": "^3.0.0",
        "mdast-util-from-markdown": "^2.0.0",
        "mdast-util-to-markdown": "^2.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/mdast-util-gfm-task-list-item": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/mdast-util-gfm-task-list-item/-/mdast-util-gfm-task-list-item-2.0.0.tgz",
      "integrity": "sha512-IrtvNvjxC1o06taBAVJznEnkiHxLFTzgonUdy8hzFVeDun0uTjxxrRGVaNFqkU1wJR3RBPEfsxmU6jDWPofrTQ==",
      "license": "MIT",
      "dependencies": {
        "@types/mdast": "^4.0.0",
        "devlop": "^1.0.0",
        "mdast-util-from-markdown": "^2.0.0",
        "mdast-util-to-markdown": "^2.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/mdast-util-mdx-expression": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/mdast-util-mdx-expression/-/mdast-util-mdx-expression-2.0.1.tgz",
      "integrity": "sha512-J6f+9hUp+ldTZqKRSg7Vw5V6MqjATc+3E4gf3CFNcuZNWD8XdyI6zQ8GqH7f8169MM6P7hMBRDVGnn7oHB9kXQ==",
      "license": "MIT",
      "dependencies": {
        "@types/estree-jsx": "^1.0.0",
        "@types/hast": "^3.0.0",
        "@types/mdast": "^4.0.0",
        "devlop": "^1.0.0",
        "mdast-util-from-markdown": "^2.0.0",
        "mdast-util-to-markdown": "^2.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/mdast-util-mdx-jsx": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/mdast-util-mdx-jsx/-/mdast-util-mdx-jsx-3.2.0.tgz",
      "integrity": "sha512-lj/z8v0r6ZtsN/cGNNtemmmfoLAFZnjMbNyLzBafjzikOM+glrjNHPlf6lQDOTccj9n5b0PPihEBbhneMyGs1Q==",
      "license": "MIT",
      "dependencies": {
        "@types/estree-jsx": "^1.0.0",
        "@types/hast": "^3.0.0",
        "@types/mdast": "^4.0.0",
        "@types/unist": "^3.0.0",
        "ccount": "^2.0.0",
        "devlop": "^1.1.0",
        "mdast-util-from-markdown": "^2.0.0",
        "mdast-util-to-markdown": "^2.0.0",
        "parse-entities": "^4.0.0",
        "stringify-entities": "^4.0.0",
        "unist-util-stringify-position": "^4.0.0",
        "vfile-message": "^4.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/mdast-util-mdxjs-esm": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/mdast-util-mdxjs-esm/-/mdast-util-mdxjs-esm-2.0.1.tgz",
      "integrity": "sha512-EcmOpxsZ96CvlP03NghtH1EsLtr0n9Tm4lPUJUBccV9RwUOneqSycg19n5HGzCf+10LozMRSObtVr3ee1WoHtg==",
      "license": "MIT",
      "dependencies": {
        "@types/estree-jsx": "^1.0.0",
        "@types/hast": "^3.0.0",
        "@types/mdast": "^4.0.0",
        "devlop": "^1.0.0",
        "mdast-util-from-markdown": "^2.0.0",
        "mdast-util-to-markdown": "^2.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/mdast-util-phrasing": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/mdast-util-phrasing/-/mdast-util-phrasing-4.1.0.tgz",
      "integrity": "sha512-TqICwyvJJpBwvGAMZjj4J2n0X8QWp21b9l0o7eXyVJ25YNWYbJDVIyD1bZXE6WtV6RmKJVYmQAKWa0zWOABz2w==",
      "license": "MIT",
      "dependencies": {
        "@types/mdast": "^4.0.0",
        "unist-util-is": "^6.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/mdast-util-to-hast": {
      "version": "13.2.0",
      "resolved": "https://registry.npmjs.org/mdast-util-to-hast/-/mdast-util-to-hast-13.2.0.tgz",
      "integrity": "sha512-QGYKEuUsYT9ykKBCMOEDLsU5JRObWQusAolFMeko/tYPufNkRffBAQjIE+99jbA87xv6FgmjLtwjh9wBWajwAA==",
      "license": "MIT",
      "dependencies": {
        "@types/hast": "^3.0.0",
        "@types/mdast": "^4.0.0",
        "@ungap/structured-clone": "^1.0.0",
        "devlop": "^1.0.0",
        "micromark-util-sanitize-uri": "^2.0.0",
        "trim-lines": "^3.0.0",
        "unist-util-position": "^5.0.0",
        "unist-util-visit": "^5.0.0",
        "vfile": "^6.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/mdast-util-to-markdown": {
      "version": "2.1.2",
      "resolved": "https://registry.npmjs.org/mdast-util-to-markdown/-/mdast-util-to-markdown-2.1.2.tgz",
      "integrity": "sha512-xj68wMTvGXVOKonmog6LwyJKrYXZPvlwabaryTjLh9LuvovB/KAH+kvi8Gjj+7rJjsFi23nkUxRQv1KqSroMqA==",
      "license": "MIT",
      "dependencies": {
        "@types/mdast": "^4.0.0",
        "@types/unist": "^3.0.0",
        "longest-streak": "^3.0.0",
        "mdast-util-phrasing": "^4.0.0",
        "mdast-util-to-string": "^4.0.0",
        "micromark-util-classify-character": "^2.0.0",
        "micromark-util-decode-string": "^2.0.0",
        "unist-util-visit": "^5.0.0",
        "zwitch": "^2.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/mdast-util-to-string": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/mdast-util-to-string/-/mdast-util-to-string-4.0.0.tgz",
      "integrity": "sha512-0H44vDimn51F0YwvxSJSm0eCDOJTRlmN0R1yBh4HLj9wiV1Dn0QoXGbvFAWj2hSItVTlCmBF1hqKlIyUBVFLPg==",
      "license": "MIT",
      "dependencies": {
        "@types/mdast": "^4.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/media-typer": {
      "version": "0.3.0",
      "resolved": "https://registry.npmjs.org/media-typer/-/media-typer-0.3.0.tgz",
      "integrity": "sha512-dq+qelQ9akHpcOl/gUVRTxVIOkAJ1wR3QAvb4RsVjS8oVoFjDGTc679wJYmUmknUF5HwMLOgb5O+a3KxfWapPQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/merge-descriptors": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/merge-descriptors/-/merge-descriptors-1.0.3.tgz",
      "integrity": "sha512-gaNvAS7TZ897/rVaZ0nMtAyxNyi/pdbjbAwUpFQpN70GqnVfOiXpeUUMKRBmzXaSQ8DdTX4/0ms62r2K+hE6mQ==",
      "dev": true,
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/merge2": {
      "version": "1.4.1",
      "resolved": "https://registry.npmjs.org/merge2/-/merge2-1.4.1.tgz",
      "integrity": "sha512-8q7VEgMJW4J8tcfVPy8g09NcQwZdbwFEqhe/WZkoIzjn/3TGDwtOCYtXGxA3O8tPzpczCCDgv+P2P5y00ZJOOg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/methods": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/methods/-/methods-1.1.2.tgz",
      "integrity": "sha512-iclAHeNqNm68zFtnZ0e+1L2yUIdvzNoauKU4WBA3VvH/vPFieF7qfRlwUZU+DA9P9bPXIS90ulxoUoCH23sV2w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/micromark": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/micromark/-/micromark-4.0.2.tgz",
      "integrity": "sha512-zpe98Q6kvavpCr1NPVSCMebCKfD7CA2NqZ+rykeNhONIJBpc1tFKt9hucLGwha3jNTNI8lHpctWJWoimVF4PfA==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "@types/debug": "^4.0.0",
        "debug": "^4.0.0",
        "decode-named-character-reference": "^1.0.0",
        "devlop": "^1.0.0",
        "micromark-core-commonmark": "^2.0.0",
        "micromark-factory-space": "^2.0.0",
        "micromark-util-character": "^2.0.0",
        "micromark-util-chunked": "^2.0.0",
        "micromark-util-combine-extensions": "^2.0.0",
        "micromark-util-decode-numeric-character-reference": "^2.0.0",
        "micromark-util-encode": "^2.0.0",
        "micromark-util-normalize-identifier": "^2.0.0",
        "micromark-util-resolve-all": "^2.0.0",
        "micromark-util-sanitize-uri": "^2.0.0",
        "micromark-util-subtokenize": "^2.0.0",
        "micromark-util-symbol": "^2.0.0",
        "micromark-util-types": "^2.0.0"
      }
    },
    "node_modules/micromark-core-commonmark": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/micromark-core-commonmark/-/micromark-core-commonmark-2.0.3.tgz",
      "integrity": "sha512-RDBrHEMSxVFLg6xvnXmb1Ayr2WzLAWjeSATAoxwKYJV94TeNavgoIdA0a9ytzDSVzBy2YKFK+emCPOEibLeCrg==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "decode-named-character-reference": "^1.0.0",
        "devlop": "^1.0.0",
        "micromark-factory-destination": "^2.0.0",
        "micromark-factory-label": "^2.0.0",
        "micromark-factory-space": "^2.0.0",
        "micromark-factory-title": "^2.0.0",
        "micromark-factory-whitespace": "^2.0.0",
        "micromark-util-character": "^2.0.0",
        "micromark-util-chunked": "^2.0.0",
        "micromark-util-classify-character": "^2.0.0",
        "micromark-util-html-tag-name": "^2.0.0",
        "micromark-util-normalize-identifier": "^2.0.0",
        "micromark-util-resolve-all": "^2.0.0",
        "micromark-util-subtokenize": "^2.0.0",
        "micromark-util-symbol": "^2.0.0",
        "micromark-util-types": "^2.0.0"
      }
    },
    "node_modules/micromark-extension-gfm": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/micromark-extension-gfm/-/micromark-extension-gfm-3.0.0.tgz",
      "integrity": "sha512-vsKArQsicm7t0z2GugkCKtZehqUm31oeGBV/KVSorWSy8ZlNAv7ytjFhvaryUiCUJYqs+NoE6AFhpQvBTM6Q4w==",
      "license": "MIT",
      "dependencies": {
        "micromark-extension-gfm-autolink-literal": "^2.0.0",
        "micromark-extension-gfm-footnote": "^2.0.0",
        "micromark-extension-gfm-strikethrough": "^2.0.0",
        "micromark-extension-gfm-table": "^2.0.0",
        "micromark-extension-gfm-tagfilter": "^2.0.0",
        "micromark-extension-gfm-task-list-item": "^2.0.0",
        "micromark-util-combine-extensions": "^2.0.0",
        "micromark-util-types": "^2.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/micromark-extension-gfm-autolink-literal": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/micromark-extension-gfm-autolink-literal/-/micromark-extension-gfm-autolink-literal-2.1.0.tgz",
      "integrity": "sha512-oOg7knzhicgQ3t4QCjCWgTmfNhvQbDDnJeVu9v81r7NltNCVmhPy1fJRX27pISafdjL+SVc4d3l48Gb6pbRypw==",
      "license": "MIT",
      "dependencies": {
        "micromark-util-character": "^2.0.0",
        "micromark-util-sanitize-uri": "^2.0.0",
        "micromark-util-symbol": "^2.0.0",
        "micromark-util-types": "^2.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/micromark-extension-gfm-footnote": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/micromark-extension-gfm-footnote/-/micromark-extension-gfm-footnote-2.1.0.tgz",
      "integrity": "sha512-/yPhxI1ntnDNsiHtzLKYnE3vf9JZ6cAisqVDauhp4CEHxlb4uoOTxOCJ+9s51bIB8U1N1FJ1RXOKTIlD5B/gqw==",
      "license": "MIT",
      "dependencies": {
        "devlop": "^1.0.0",
        "micromark-core-commonmark": "^2.0.0",
        "micromark-factory-space": "^2.0.0",
        "micromark-util-character": "^2.0.0",
        "micromark-util-normalize-identifier": "^2.0.0",
        "micromark-util-sanitize-uri": "^2.0.0",
        "micromark-util-symbol": "^2.0.0",
        "micromark-util-types": "^2.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/micromark-extension-gfm-strikethrough": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/micromark-extension-gfm-strikethrough/-/micromark-extension-gfm-strikethrough-2.1.0.tgz",
      "integrity": "sha512-ADVjpOOkjz1hhkZLlBiYA9cR2Anf8F4HqZUO6e5eDcPQd0Txw5fxLzzxnEkSkfnD0wziSGiv7sYhk/ktvbf1uw==",
      "license": "MIT",
      "dependencies": {
        "devlop": "^1.0.0",
        "micromark-util-chunked": "^2.0.0",
        "micromark-util-classify-character": "^2.0.0",
        "micromark-util-resolve-all": "^2.0.0",
        "micromark-util-symbol": "^2.0.0",
        "micromark-util-types": "^2.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/micromark-extension-gfm-table": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/micromark-extension-gfm-table/-/micromark-extension-gfm-table-2.1.1.tgz",
      "integrity": "sha512-t2OU/dXXioARrC6yWfJ4hqB7rct14e8f7m0cbI5hUmDyyIlwv5vEtooptH8INkbLzOatzKuVbQmAYcbWoyz6Dg==",
      "license": "MIT",
      "dependencies": {
        "devlop": "^1.0.0",
        "micromark-factory-space": "^2.0.0",
        "micromark-util-character": "^2.0.0",
        "micromark-util-symbol": "^2.0.0",
        "micromark-util-types": "^2.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/micromark-extension-gfm-tagfilter": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/micromark-extension-gfm-tagfilter/-/micromark-extension-gfm-tagfilter-2.0.0.tgz",
      "integrity": "sha512-xHlTOmuCSotIA8TW1mDIM6X2O1SiX5P9IuDtqGonFhEK0qgRI4yeC6vMxEV2dgyr2TiD+2PQ10o+cOhdVAcwfg==",
      "license": "MIT",
      "dependencies": {
        "micromark-util-types": "^2.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/micromark-extension-gfm-task-list-item": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/micromark-extension-gfm-task-list-item/-/micromark-extension-gfm-task-list-item-2.1.0.tgz",
      "integrity": "sha512-qIBZhqxqI6fjLDYFTBIa4eivDMnP+OZqsNwmQ3xNLE4Cxwc+zfQEfbs6tzAo2Hjq+bh6q5F+Z8/cksrLFYWQQw==",
      "license": "MIT",
      "dependencies": {
        "devlop": "^1.0.0",
        "micromark-factory-space": "^2.0.0",
        "micromark-util-character": "^2.0.0",
        "micromark-util-symbol": "^2.0.0",
        "micromark-util-types": "^2.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/micromark-factory-destination": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/micromark-factory-destination/-/micromark-factory-destination-2.0.1.tgz",
      "integrity": "sha512-Xe6rDdJlkmbFRExpTOmRj9N3MaWmbAgdpSrBQvCFqhezUn4AHqJHbaEnfbVYYiexVSs//tqOdY/DxhjdCiJnIA==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "micromark-util-character": "^2.0.0",
        "micromark-util-symbol": "^2.0.0",
        "micromark-util-types": "^2.0.0"
      }
    },
    "node_modules/micromark-factory-label": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/micromark-factory-label/-/micromark-factory-label-2.0.1.tgz",
      "integrity": "sha512-VFMekyQExqIW7xIChcXn4ok29YE3rnuyveW3wZQWWqF4Nv9Wk5rgJ99KzPvHjkmPXF93FXIbBp6YdW3t71/7Vg==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "devlop": "^1.0.0",
        "micromark-util-character": "^2.0.0",
        "micromark-util-symbol": "^2.0.0",
        "micromark-util-types": "^2.0.0"
      }
    },
    "node_modules/micromark-factory-space": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/micromark-factory-space/-/micromark-factory-space-2.0.1.tgz",
      "integrity": "sha512-zRkxjtBxxLd2Sc0d+fbnEunsTj46SWXgXciZmHq0kDYGnck/ZSGj9/wULTV95uoeYiK5hRXP2mJ98Uo4cq/LQg==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "micromark-util-character": "^2.0.0",
        "micromark-util-types": "^2.0.0"
      }
    },
    "node_modules/micromark-factory-title": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/micromark-factory-title/-/micromark-factory-title-2.0.1.tgz",
      "integrity": "sha512-5bZ+3CjhAd9eChYTHsjy6TGxpOFSKgKKJPJxr293jTbfry2KDoWkhBb6TcPVB4NmzaPhMs1Frm9AZH7OD4Cjzw==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "micromark-factory-space": "^2.0.0",
        "micromark-util-character": "^2.0.0",
        "micromark-util-symbol": "^2.0.0",
        "micromark-util-types": "^2.0.0"
      }
    },
    "node_modules/micromark-factory-whitespace": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/micromark-factory-whitespace/-/micromark-factory-whitespace-2.0.1.tgz",
      "integrity": "sha512-Ob0nuZ3PKt/n0hORHyvoD9uZhr+Za8sFoP+OnMcnWK5lngSzALgQYKMr9RJVOWLqQYuyn6ulqGWSXdwf6F80lQ==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "micromark-factory-space": "^2.0.0",
        "micromark-util-character": "^2.0.0",
        "micromark-util-symbol": "^2.0.0",
        "micromark-util-types": "^2.0.0"
      }
    },
    "node_modules/micromark-util-character": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/micromark-util-character/-/micromark-util-character-2.1.1.tgz",
      "integrity": "sha512-wv8tdUTJ3thSFFFJKtpYKOYiGP2+v96Hvk4Tu8KpCAsTMs6yi+nVmGh1syvSCsaxz45J6Jbw+9DD6g97+NV67Q==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "micromark-util-symbol": "^2.0.0",
        "micromark-util-types": "^2.0.0"
      }
    },
    "node_modules/micromark-util-chunked": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/micromark-util-chunked/-/micromark-util-chunked-2.0.1.tgz",
      "integrity": "sha512-QUNFEOPELfmvv+4xiNg2sRYeS/P84pTW0TCgP5zc9FpXetHY0ab7SxKyAQCNCc1eK0459uoLI1y5oO5Vc1dbhA==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "micromark-util-symbol": "^2.0.0"
      }
    },
    "node_modules/micromark-util-classify-character": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/micromark-util-classify-character/-/micromark-util-classify-character-2.0.1.tgz",
      "integrity": "sha512-K0kHzM6afW/MbeWYWLjoHQv1sgg2Q9EccHEDzSkxiP/EaagNzCm7T/WMKZ3rjMbvIpvBiZgwR3dKMygtA4mG1Q==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "micromark-util-character": "^2.0.0",
        "micromark-util-symbol": "^2.0.0",
        "micromark-util-types": "^2.0.0"
      }
    },
    "node_modules/micromark-util-combine-extensions": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/micromark-util-combine-extensions/-/micromark-util-combine-extensions-2.0.1.tgz",
      "integrity": "sha512-OnAnH8Ujmy59JcyZw8JSbK9cGpdVY44NKgSM7E9Eh7DiLS2E9RNQf0dONaGDzEG9yjEl5hcqeIsj4hfRkLH/Bg==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "micromark-util-chunked": "^2.0.0",
        "micromark-util-types": "^2.0.0"
      }
    },
    "node_modules/micromark-util-decode-numeric-character-reference": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/micromark-util-decode-numeric-character-reference/-/micromark-util-decode-numeric-character-reference-2.0.2.tgz",
      "integrity": "sha512-ccUbYk6CwVdkmCQMyr64dXz42EfHGkPQlBj5p7YVGzq8I7CtjXZJrubAYezf7Rp+bjPseiROqe7G6foFd+lEuw==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "micromark-util-symbol": "^2.0.0"
      }
    },
    "node_modules/micromark-util-decode-string": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/micromark-util-decode-string/-/micromark-util-decode-string-2.0.1.tgz",
      "integrity": "sha512-nDV/77Fj6eH1ynwscYTOsbK7rR//Uj0bZXBwJZRfaLEJ1iGBR6kIfNmlNqaqJf649EP0F3NWNdeJi03elllNUQ==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "decode-named-character-reference": "^1.0.0",
        "micromark-util-character": "^2.0.0",
        "micromark-util-decode-numeric-character-reference": "^2.0.0",
        "micromark-util-symbol": "^2.0.0"
      }
    },
    "node_modules/micromark-util-encode": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/micromark-util-encode/-/micromark-util-encode-2.0.1.tgz",
      "integrity": "sha512-c3cVx2y4KqUnwopcO9b/SCdo2O67LwJJ/UyqGfbigahfegL9myoEFoDYZgkT7f36T0bLrM9hZTAaAyH+PCAXjw==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT"
    },
    "node_modules/micromark-util-html-tag-name": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/micromark-util-html-tag-name/-/micromark-util-html-tag-name-2.0.1.tgz",
      "integrity": "sha512-2cNEiYDhCWKI+Gs9T0Tiysk136SnR13hhO8yW6BGNyhOC4qYFnwF1nKfD3HFAIXA5c45RrIG1ub11GiXeYd1xA==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT"
    },
    "node_modules/micromark-util-normalize-identifier": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/micromark-util-normalize-identifier/-/micromark-util-normalize-identifier-2.0.1.tgz",
      "integrity": "sha512-sxPqmo70LyARJs0w2UclACPUUEqltCkJ6PhKdMIDuJ3gSf/Q+/GIe3WKl0Ijb/GyH9lOpUkRAO2wp0GVkLvS9Q==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "micromark-util-symbol": "^2.0.0"
      }
    },
    "node_modules/micromark-util-resolve-all": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/micromark-util-resolve-all/-/micromark-util-resolve-all-2.0.1.tgz",
      "integrity": "sha512-VdQyxFWFT2/FGJgwQnJYbe1jjQoNTS4RjglmSjTUlpUMa95Htx9NHeYW4rGDJzbjvCsl9eLjMQwGeElsqmzcHg==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "micromark-util-types": "^2.0.0"
      }
    },
    "node_modules/micromark-util-sanitize-uri": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/micromark-util-sanitize-uri/-/micromark-util-sanitize-uri-2.0.1.tgz",
      "integrity": "sha512-9N9IomZ/YuGGZZmQec1MbgxtlgougxTodVwDzzEouPKo3qFWvymFHWcnDi2vzV1ff6kas9ucW+o3yzJK9YB1AQ==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "micromark-util-character": "^2.0.0",
        "micromark-util-encode": "^2.0.0",
        "micromark-util-symbol": "^2.0.0"
      }
    },
    "node_modules/micromark-util-subtokenize": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/micromark-util-subtokenize/-/micromark-util-subtokenize-2.1.0.tgz",
      "integrity": "sha512-XQLu552iSctvnEcgXw6+Sx75GflAPNED1qx7eBJ+wydBb2KCbRZe+NwvIEEMM83uml1+2WSXpBAcp9IUCgCYWA==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "devlop": "^1.0.0",
        "micromark-util-chunked": "^2.0.0",
        "micromark-util-symbol": "^2.0.0",
        "micromark-util-types": "^2.0.0"
      }
    },
    "node_modules/micromark-util-symbol": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/micromark-util-symbol/-/micromark-util-symbol-2.0.1.tgz",
      "integrity": "sha512-vs5t8Apaud9N28kgCrRUdEed4UJ+wWNvicHLPxCa9ENlYuAY31M0ETy5y1vA33YoNPDFTghEbnh6efaE8h4x0Q==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT"
    },
    "node_modules/micromark-util-types": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/micromark-util-types/-/micromark-util-types-2.0.2.tgz",
      "integrity": "sha512-Yw0ECSpJoViF1qTU4DC6NwtC4aWGt1EkzaQB8KPPyCRR8z9TWeV0HbEFGTO+ZY1wB22zmxnJqhPyTpOVCpeHTA==",
      "funding": [
        {
          "type": "GitHub Sponsors",
          "url": "https://github.com/sponsors/unifiedjs"
        },
        {
          "type": "OpenCollective",
          "url": "https://opencollective.com/unified"
        }
      ],
      "license": "MIT"
    },
    "node_modules/micromatch": {
      "version": "4.0.8",
      "resolved": "https://registry.npmjs.org/micromatch/-/micromatch-4.0.8.tgz",
      "integrity": "sha512-PXwfBhYu0hBCPw8Dn0E+WDYb7af3dSLVWKi3HGv84IdF4TyFoC0ysxFd0Goxw7nSv4T/PzEJQxsYsEiFCKo2BA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "braces": "^3.0.3",
        "picomatch": "^2.3.1"
      },
      "engines": {
        "node": ">=8.6"
      }
    },
    "node_modules/mime": {
      "version": "2.6.0",
      "resolved": "https://registry.npmjs.org/mime/-/mime-2.6.0.tgz",
      "integrity": "sha512-USPkMeET31rOMiarsBNIHZKLGgvKc/LrjofAnBlOttf5ajRvqiRA8QsenbcooctK6d6Ts6aqZXBA+XbkKthiQg==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "mime": "cli.js"
      },
      "engines": {
        "node": ">=4.0.0"
      }
    },
    "node_modules/mime-db": {
      "version": "1.52.0",
      "resolved": "https://registry.npmjs.org/mime-db/-/mime-db-1.52.0.tgz",
      "integrity": "sha512-sPU4uV7dYlvtWJxwwxHD0PuihVNiE7TyAbQ5SWxDCB9mUYvOgroQOwYQQOKPJ8CIbE+1ETVlOoK1UC2nU3gYvg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/mime-types": {
      "version": "2.1.35",
      "resolved": "https://registry.npmjs.org/mime-types/-/mime-types-2.1.35.tgz",
      "integrity": "sha512-ZDY+bPm5zTTF+YpCrAU9nK0UgICYPT0QtT1NZWFv4s++TNkcgVaT0g6+4R2uI4MjQjzysHB1zxuWL50hzaeXiw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "mime-db": "1.52.0"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/mimic-fn": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/mimic-fn/-/mimic-fn-2.1.0.tgz",
      "integrity": "sha512-OqbOk5oEQeAZ8WXWydlu9HJjz9WVdEIvamMCcXmuqUYjTknH/sqsWvhQ3vgwKFRR1HpjvNBKQ37nbJgYzGqGcg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/minimatch": {
      "version": "9.0.5",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-9.0.5.tgz",
      "integrity": "sha512-G6T0ZX48xgozx7587koeX9Ys2NYy6Gmv//P89sEte9V9whIapMNF4idKxnW2QtCcLiTWlb/wfCabAtAFWhhBow==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^2.0.1"
      },
      "engines": {
        "node": ">=16 || 14 >=14.17"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/minimist": {
      "version": "1.2.8",
      "resolved": "https://registry.npmjs.org/minimist/-/minimist-1.2.8.tgz",
      "integrity": "sha512-2yyAR8qBkN3YuheJanUpWC5U3bb5osDywNB8RzDVlDwDHbocAJveqqj1u8+SVD7jkWT4yvsHCpWqqWqAxb0zCA==",
      "dev": true,
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/minipass": {
      "version": "7.1.2",
      "resolved": "https://registry.npmjs.org/minipass/-/minipass-7.1.2.tgz",
      "integrity": "sha512-qOOzS1cBTWYF4BH8fVePDBOO9iptMnGUEZwNc/cMWnTV2nVLZ7VoNWEPHkYczZA0pdoA7dl6e7FL659nX9S2aw==",
      "dev": true,
      "license": "ISC",
      "engines": {
        "node": ">=16 || 14 >=14.17"
      }
    },
    "node_modules/minipass-collect": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/minipass-collect/-/minipass-collect-2.0.1.tgz",
      "integrity": "sha512-D7V8PO9oaz7PWGLbCACuI1qEOsq7UKfLotx/C0Aet43fCUB/wfQ7DYeq2oR/svFJGYDHPr38SHATeaj/ZoKHKw==",
      "dev": true,
      "license": "ISC",
      "optional": true,
      "dependencies": {
        "minipass": "^7.0.3"
      },
      "engines": {
        "node": ">=16 || 14 >=14.17"
      }
    },
    "node_modules/minipass-fetch": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/minipass-fetch/-/minipass-fetch-4.0.1.tgz",
      "integrity": "sha512-j7U11C5HXigVuutxebFadoYBbd7VSdZWggSe64NVdvWNBqGAiXPL2QVCehjmw7lY1oF9gOllYbORh+hiNgfPgQ==",
      "dev": true,
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "minipass": "^7.0.3",
        "minipass-sized": "^1.0.3",
        "minizlib": "^3.0.1"
      },
      "engines": {
        "node": "^18.17.0 || >=20.5.0"
      },
      "optionalDependencies": {
        "encoding": "^0.1.13"
      }
    },
    "node_modules/minipass-flush": {
      "version": "1.0.5",
      "resolved": "https://registry.npmjs.org/minipass-flush/-/minipass-flush-1.0.5.tgz",
      "integrity": "sha512-JmQSYYpPUqX5Jyn1mXaRwOda1uQ8HP5KAT/oDSLCzt1BYRhQU0/hDtsB1ufZfEEzMZ9aAVmsBw8+FWsIXlClWw==",
      "dev": true,
      "license": "ISC",
      "optional": true,
      "dependencies": {
        "minipass": "^3.0.0"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/minipass-flush/node_modules/minipass": {
      "version": "3.3.6",
      "resolved": "https://registry.npmjs.org/minipass/-/minipass-3.3.6.tgz",
      "integrity": "sha512-DxiNidxSEK+tHG6zOIklvNOwm3hvCrbUrdtzY74U6HKTJxvIDfOUL5W5P2Ghd3DTkhhKPYGqeNUIh5qcM4YBfw==",
      "dev": true,
      "license": "ISC",
      "optional": true,
      "dependencies": {
        "yallist": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/minipass-flush/node_modules/yallist": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/yallist/-/yallist-4.0.0.tgz",
      "integrity": "sha512-3wdGidZyq5PB084XLES5TpOSRA3wjXAlIWMhum2kRcv/41Sn2emQ0dycQW4uZXLejwKvg6EsvbdlVL+FYEct7A==",
      "dev": true,
      "license": "ISC",
      "optional": true
    },
    "node_modules/minipass-pipeline": {
      "version": "1.2.4",
      "resolved": "https://registry.npmjs.org/minipass-pipeline/-/minipass-pipeline-1.2.4.tgz",
      "integrity": "sha512-xuIq7cIOt09RPRJ19gdi4b+RiNvDFYe5JH+ggNvBqGqpQXcru3PcRmOZuHBKWK1Txf9+cQ+HMVN4d6z46LZP7A==",
      "dev": true,
      "license": "ISC",
      "optional": true,
      "dependencies": {
        "minipass": "^3.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/minipass-pipeline/node_modules/minipass": {
      "version": "3.3.6",
      "resolved": "https://registry.npmjs.org/minipass/-/minipass-3.3.6.tgz",
      "integrity": "sha512-DxiNidxSEK+tHG6zOIklvNOwm3hvCrbUrdtzY74U6HKTJxvIDfOUL5W5P2Ghd3DTkhhKPYGqeNUIh5qcM4YBfw==",
      "dev": true,
      "license": "ISC",
      "optional": true,
      "dependencies": {
        "yallist": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/minipass-pipeline/node_modules/yallist": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/yallist/-/yallist-4.0.0.tgz",
      "integrity": "sha512-3wdGidZyq5PB084XLES5TpOSRA3wjXAlIWMhum2kRcv/41Sn2emQ0dycQW4uZXLejwKvg6EsvbdlVL+FYEct7A==",
      "dev": true,
      "license": "ISC",
      "optional": true
    },
    "node_modules/minipass-sized": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/minipass-sized/-/minipass-sized-1.0.3.tgz",
      "integrity": "sha512-MbkQQ2CTiBMlA2Dm/5cY+9SWFEN8pzzOXi6rlM5Xxq0Yqbda5ZQy9sU75a673FE9ZK0Zsbr6Y5iP6u9nktfg2g==",
      "dev": true,
      "license": "ISC",
      "optional": true,
      "dependencies": {
        "minipass": "^3.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/minipass-sized/node_modules/minipass": {
      "version": "3.3.6",
      "resolved": "https://registry.npmjs.org/minipass/-/minipass-3.3.6.tgz",
      "integrity": "sha512-DxiNidxSEK+tHG6zOIklvNOwm3hvCrbUrdtzY74U6HKTJxvIDfOUL5W5P2Ghd3DTkhhKPYGqeNUIh5qcM4YBfw==",
      "dev": true,
      "license": "ISC",
      "optional": true,
      "dependencies": {
        "yallist": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/minipass-sized/node_modules/yallist": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/yallist/-/yallist-4.0.0.tgz",
      "integrity": "sha512-3wdGidZyq5PB084XLES5TpOSRA3wjXAlIWMhum2kRcv/41Sn2emQ0dycQW4uZXLejwKvg6EsvbdlVL+FYEct7A==",
      "dev": true,
      "license": "ISC",
      "optional": true
    },
    "node_modules/minizlib": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/minizlib/-/minizlib-3.1.0.tgz",
      "integrity": "sha512-KZxYo1BUkWD2TVFLr0MQoM8vUUigWD3LlD83a/75BqC+4qE0Hb1Vo5v1FgcfaNXvfXzr+5EhQ6ing/CaBijTlw==",
      "dev": true,
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "minipass": "^7.1.2"
      },
      "engines": {
        "node": ">= 18"
      }
    },
    "node_modules/mkdirp": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/mkdirp/-/mkdirp-1.0.4.tgz",
      "integrity": "sha512-vVqVZQyf3WLx2Shd0qJ9xuvqgAyKPLAiqITEtqW0oIUjzo3PePDd6fW9iFz30ef7Ysp/oiWqbhszeGWW2T6Gzw==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "mkdirp": "bin/cmd.js"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/moo": {
      "version": "0.5.2",
      "resolved": "https://registry.npmjs.org/moo/-/moo-0.5.2.tgz",
      "integrity": "sha512-iSAJLHYKnX41mKcJKjqvnAN9sf0LMDTXDEvFv+ffuRR9a1MIuXLjMNL6EsnDHSkKLTWNqQQ5uo61P4EbU4NU+Q==",
      "dev": true,
      "license": "BSD-3-Clause"
    },
    "node_modules/morgan": {
      "version": "1.10.1",
      "resolved": "https://registry.npmjs.org/morgan/-/morgan-1.10.1.tgz",
      "integrity": "sha512-223dMRJtI/l25dJKWpgij2cMtywuG/WiUKXdvwfbhGKBhy1puASqXwFzmWZ7+K73vUPoR7SS2Qz2cI/g9MKw0A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "basic-auth": "~2.0.1",
        "debug": "2.6.9",
        "depd": "~2.0.0",
        "on-finished": "~2.3.0",
        "on-headers": "~1.1.0"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/morgan/node_modules/debug": {
      "version": "2.6.9",
      "resolved": "https://registry.npmjs.org/debug/-/debug-2.6.9.tgz",
      "integrity": "sha512-bC7ElrdJaJnPbAP+1EotYvqZsb3ecl5wi6Bfi6BJTUcNowp6cvspg0jXznRTKDjm/E7AdgFBVeAPVMNcKGsHMA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ms": "2.0.0"
      }
    },
    "node_modules/morgan/node_modules/ms": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.0.0.tgz",
      "integrity": "sha512-Tpp60P6IUJDTuOq/5Z8cdskzJujfwqfOTkrwIwj7IRISpnkJnT6SyJ4PCPnGMoFjC9ddhal5KVIYtAt97ix05A==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/morgan/node_modules/on-finished": {
      "version": "2.3.0",
      "resolved": "https://registry.npmjs.org/on-finished/-/on-finished-2.3.0.tgz",
      "integrity": "sha512-ikqdkGAAyf/X/gPhXGvfgAytDZtDbr+bkNUJ0N9h5MI/dmdgCs3l6hoHrcUv41sRKew3jIwrp4qQDXiK99Utww==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ee-first": "1.1.1"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/ms": {
      "version": "2.1.3",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.3.tgz",
      "integrity": "sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA==",
      "license": "MIT"
    },
    "node_modules/mute-stream": {
      "version": "0.0.8",
      "resolved": "https://registry.npmjs.org/mute-stream/-/mute-stream-0.0.8.tgz",
      "integrity": "sha512-nnbWWOkoWyUsTjKrhgD0dcz22mdkSnpYqbEjIm2nhwhuxlSkpywJmBo8h0ZqJdkp73mb90SssHkN4rsRaBAfAA==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/mz": {
      "version": "2.7.0",
      "resolved": "https://registry.npmjs.org/mz/-/mz-2.7.0.tgz",
      "integrity": "sha512-z81GNO7nnYMEhrGh9LeymoE4+Yr0Wn5McHIZMK5cfQCl+NDX08sCZgUc9/6MHni9IWuFLm1Z3HTCXu2z9fN62Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "any-promise": "^1.0.0",
        "object-assign": "^4.0.1",
        "thenify-all": "^1.0.0"
      }
    },
    "node_modules/nan": {
      "version": "2.23.0",
      "resolved": "https://registry.npmjs.org/nan/-/nan-2.23.0.tgz",
      "integrity": "sha512-1UxuyYGdoQHcGg87Lkqm3FzefucTa0NAiOcuRsDmysep3c1LVCRK2krrUDafMWtjSG04htvAmvg96+SDknOmgQ==",
      "dev": true,
      "license": "MIT",
      "optional": true
    },
    "node_modules/nanoid": {
      "version": "3.3.11",
      "resolved": "https://registry.npmjs.org/nanoid/-/nanoid-3.3.11.tgz",
      "integrity": "sha512-N8SpfPUnUp1bK+PMYW8qSWdl9U+wwNWI4QKxOYDy9JAro3WMX7p2OeVRF9v+347pnakNevPmiHhNmZ2HbFA76w==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "bin": {
        "nanoid": "bin/nanoid.cjs"
      },
      "engines": {
        "node": "^10 || ^12 || ^13.7 || ^14 || >=15.0.1"
      }
    },
    "node_modules/natural-compare": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/natural-compare/-/natural-compare-1.4.0.tgz",
      "integrity": "sha512-OWND8ei3VtNC9h7V60qff3SVobHr996CTwgxubgyQYEpg290h9J0buyECNNJexkFm5sOajh5G116RYA1c8ZMSw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/nearley": {
      "version": "2.20.1",
      "resolved": "https://registry.npmjs.org/nearley/-/nearley-2.20.1.tgz",
      "integrity": "sha512-+Mc8UaAebFzgV+KpI5n7DasuuQCHA89dmwm7JXw3TV43ukfNQ9DnBH3Mdb2g/I4Fdxc26pwimBWvjIw0UAILSQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "commander": "^2.19.0",
        "moo": "^0.5.0",
        "railroad-diagrams": "^1.0.0",
        "randexp": "0.4.6"
      },
      "bin": {
        "nearley-railroad": "bin/nearley-railroad.js",
        "nearley-test": "bin/nearley-test.js",
        "nearley-unparse": "bin/nearley-unparse.js",
        "nearleyc": "bin/nearleyc.js"
      },
      "funding": {
        "type": "individual",
        "url": "https://nearley.js.org/#give-to-nearley"
      }
    },
    "node_modules/nearley/node_modules/commander": {
      "version": "2.20.3",
      "resolved": "https://registry.npmjs.org/commander/-/commander-2.20.3.tgz",
      "integrity": "sha512-GpVkmM8vF2vQUkj2LvZmD35JxeJOLCwJ9cUkugyk2nuhbv3+mJvpLYYt+0+USMxE+oj+ey/lJEnhZw75x/OMcQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/negotiator": {
      "version": "0.6.3",
      "resolved": "https://registry.npmjs.org/negotiator/-/negotiator-0.6.3.tgz",
      "integrity": "sha512-+EUsqGPLsM+j/zdChZjsnX51g4XrHFOIXwfnCVPGlQk/k5giakcKsuxCObBRu6DSm9opw/O6slWbJdghQM4bBg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/netmask": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/netmask/-/netmask-2.0.2.tgz",
      "integrity": "sha512-dBpDMdxv9Irdq66304OLfEmQ9tbNRFnFTuZiLo+bD+r332bBmMJ8GBLXklIXXgxd3+v9+KUnZaUR5PJMa75Gsg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4.0"
      }
    },
    "node_modules/node-domexception": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/node-domexception/-/node-domexception-1.0.0.tgz",
      "integrity": "sha512-/jKZoMpw0F8GRwl4/eLROPA3cfcXtLApP0QzLmUT/HuPCZWyB7IY9ZrMeKw2O/nFIqPQB3PVM9aYm0F312AXDQ==",
      "deprecated": "Use your platform's native DOMException instead",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/jimmywarting"
        },
        {
          "type": "github",
          "url": "https://paypal.me/jimmywarting"
        }
      ],
      "license": "MIT",
      "engines": {
        "node": ">=10.5.0"
      }
    },
    "node_modules/node-emoji": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/node-emoji/-/node-emoji-2.2.0.tgz",
      "integrity": "sha512-Z3lTE9pLaJF47NyMhd4ww1yFTAP8YhYI8SleJiHzM46Fgpm5cnNzSl9XfzFNqbaz+VlJrIj3fXQ4DeN1Rjm6cw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@sindresorhus/is": "^4.6.0",
        "char-regex": "^1.0.2",
        "emojilib": "^2.4.0",
        "skin-tone": "^2.0.0"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/node-fetch": {
      "version": "2.7.0",
      "resolved": "https://registry.npmjs.org/node-fetch/-/node-fetch-2.7.0.tgz",
      "integrity": "sha512-c4FRfUm/dbcWZ7U+1Wq0AwCyFL+3nt2bEw05wfxSz+DWpWsitgmSgYmy2dQdWyKC1694ELPqMs/YzUSNozLt8A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "whatwg-url": "^5.0.0"
      },
      "engines": {
        "node": "4.x || >=6.0.0"
      },
      "peerDependencies": {
        "encoding": "^0.1.0"
      },
      "peerDependenciesMeta": {
        "encoding": {
          "optional": true
        }
      }
    },
    "node_modules/node-gyp": {
      "version": "11.5.0",
      "resolved": "https://registry.npmjs.org/node-gyp/-/node-gyp-11.5.0.tgz",
      "integrity": "sha512-ra7Kvlhxn5V9Slyus0ygMa2h+UqExPqUIkfk7Pc8QTLT956JLSy51uWFwHtIYy0vI8cB4BDhc/S03+880My/LQ==",
      "dev": true,
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "env-paths": "^2.2.0",
        "exponential-backoff": "^3.1.1",
        "graceful-fs": "^4.2.6",
        "make-fetch-happen": "^14.0.3",
        "nopt": "^8.0.0",
        "proc-log": "^5.0.0",
        "semver": "^7.3.5",
        "tar": "^7.4.3",
        "tinyglobby": "^0.2.12",
        "which": "^5.0.0"
      },
      "bin": {
        "node-gyp": "bin/node-gyp.js"
      },
      "engines": {
        "node": "^18.17.0 || >=20.5.0"
      }
    },
    "node_modules/node-gyp/node_modules/chownr": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/chownr/-/chownr-3.0.0.tgz",
      "integrity": "sha512-+IxzY9BZOQd/XuYPRmrvEVjF/nqj5kgT4kEq7VofrDoM1MxoRjEWkrCC3EtLi59TVawxTAn+orJwFQcrqEN1+g==",
      "dev": true,
      "license": "BlueOak-1.0.0",
      "optional": true,
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/node-gyp/node_modules/isexe": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/isexe/-/isexe-3.1.1.tgz",
      "integrity": "sha512-LpB/54B+/2J5hqQ7imZHfdU31OlgQqx7ZicVlkm9kzg9/w8GKLEcFfJl/t7DCEDueOyBAD6zCCwTO6Fzs0NoEQ==",
      "dev": true,
      "license": "ISC",
      "optional": true,
      "engines": {
        "node": ">=16"
      }
    },
    "node_modules/node-gyp/node_modules/tar": {
      "version": "7.5.1",
      "resolved": "https://registry.npmjs.org/tar/-/tar-7.5.1.tgz",
      "integrity": "sha512-nlGpxf+hv0v7GkWBK2V9spgactGOp0qvfWRxUMjqHyzrt3SgwE48DIv/FhqPHJYLHpgW1opq3nERbz5Anq7n1g==",
      "dev": true,
      "license": "ISC",
      "optional": true,
      "dependencies": {
        "@isaacs/fs-minipass": "^4.0.0",
        "chownr": "^3.0.0",
        "minipass": "^7.1.2",
        "minizlib": "^3.1.0",
        "yallist": "^5.0.0"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/node-gyp/node_modules/which": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/which/-/which-5.0.0.tgz",
      "integrity": "sha512-JEdGzHwwkrbWoGOlIHqQ5gtprKGOenpDHpxE9zVR1bWbOtYRyPPHMe9FaP6x61CmNaTThSkb0DAJte5jD+DmzQ==",
      "dev": true,
      "license": "ISC",
      "optional": true,
      "dependencies": {
        "isexe": "^3.1.1"
      },
      "bin": {
        "node-which": "bin/which.js"
      },
      "engines": {
        "node": "^18.17.0 || >=20.5.0"
      }
    },
    "node_modules/node-gyp/node_modules/yallist": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/yallist/-/yallist-5.0.0.tgz",
      "integrity": "sha512-YgvUTfwqyc7UXVMrB+SImsVYSmTS8X/tSrtdNZMImM+n7+QTriRXyXim0mBrTXNeqzVF0KWGgHPeiyViFFrNDw==",
      "dev": true,
      "license": "BlueOak-1.0.0",
      "optional": true,
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/node-releases": {
      "version": "2.0.25",
      "resolved": "https://registry.npmjs.org/node-releases/-/node-releases-2.0.25.tgz",
      "integrity": "sha512-4auku8B/vw5psvTiiN9j1dAOsXvMoGqJuKJcR+dTdqiXEK20mMTk1UEo3HS16LeGQsVG6+qKTPM9u/qQ2LqATA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/nopt": {
      "version": "8.1.0",
      "resolved": "https://registry.npmjs.org/nopt/-/nopt-8.1.0.tgz",
      "integrity": "sha512-ieGu42u/Qsa4TFktmaKEwM6MQH0pOWnaB3htzh0JRtx84+Mebc0cbZYN5bC+6WTZ4+77xrL9Pn5m7CV6VIkV7A==",
      "dev": true,
      "license": "ISC",
      "optional": true,
      "dependencies": {
        "abbrev": "^3.0.0"
      },
      "bin": {
        "nopt": "bin/nopt.js"
      },
      "engines": {
        "node": "^18.17.0 || >=20.5.0"
      }
    },
    "node_modules/normalize-path": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/normalize-path/-/normalize-path-3.0.0.tgz",
      "integrity": "sha512-6eZs5Ls3WtCisHWp9S2GUy8dqkpGi4BVSz3GaqiE6ezub0512ESztXUwUB6C6IKbQkY2Pnb/mD4WYojCRwcwLA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/normalize-range": {
      "version": "0.1.2",
      "resolved": "https://registry.npmjs.org/normalize-range/-/normalize-range-0.1.2.tgz",
      "integrity": "sha512-bdok/XvKII3nUpklnV6P2hxtMNrCboOjAcyBuQnWEhO665FwrSNRxU+AqpsyvO6LgGYPspN+lu5CLtw4jPRKNA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/object-assign": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/object-assign/-/object-assign-4.1.1.tgz",
      "integrity": "sha512-rJgTQnkUnH1sFw8yT6VSU3zD3sWmu6sZhIseY8VX+GRu3P6F7Fu+JNDoXfklElbLJSnc3FUQHVe4cU5hj+BcUg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/object-hash": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/object-hash/-/object-hash-3.0.0.tgz",
      "integrity": "sha512-RSn9F68PjH9HqtltsSnqYC1XXoWe9Bju5+213R98cNGttag9q9yAOTzdbsqvIa7aNm5WffBZFpWYr2aWrklWAw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/object-inspect": {
      "version": "1.13.4",
      "resolved": "https://registry.npmjs.org/object-inspect/-/object-inspect-1.13.4.tgz",
      "integrity": "sha512-W67iLl4J2EXEGTbfeHCffrjDfitvLANg0UlX3wFUUSTx92KXRFegMHUVgSqE+wvhAbi4WqjGg9czysTV2Epbew==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/on-finished": {
      "version": "2.4.1",
      "resolved": "https://registry.npmjs.org/on-finished/-/on-finished-2.4.1.tgz",
      "integrity": "sha512-oVlzkg3ENAhCk2zdv7IJwd/QUD4z2RxRwpkcGY8psCVcCYZNq4wYnVWALHM+brtuJjePWiYF/ClmuDr8Ch5+kg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ee-first": "1.1.1"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/on-headers": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/on-headers/-/on-headers-1.1.0.tgz",
      "integrity": "sha512-737ZY3yNnXy37FHkQxPzt4UZ2UWPWiCZWLvFZ4fu5cueciegX0zGPnrlY6bwRg4FdQOe9YU8MkmJwGhoMybl8A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/once": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/once/-/once-1.4.0.tgz",
      "integrity": "sha512-lNaJgI+2Q5URQBkccEKHTQOPaXdUxnZZElQTZY0MFUAuaEqe1E+Nyvgdz/aIyNi6Z9MzO5dv1H8n58/GELp3+w==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "wrappy": "1"
      }
    },
    "node_modules/one-time": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/one-time/-/one-time-1.0.0.tgz",
      "integrity": "sha512-5DXOiRKwuSEcQ/l0kGCF6Q3jcADFv5tSmRaJck/OqkVFcOzutB134KRSfF0xDrL39MNnqxbHBbUUcjZIhTgb2g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fn.name": "1.x.x"
      }
    },
    "node_modules/onetime": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/onetime/-/onetime-5.1.2.tgz",
      "integrity": "sha512-kbpaSSGJTWdAY5KPVeMOKXSrPtr8C8C7wodJbcsd51jRnmD+GZu8Y0VoU6Dm5Z4vWr0Ig/1NKuWRKf7j5aaYSg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "mimic-fn": "^2.1.0"
      },
      "engines": {
        "node": ">=6"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/open": {
      "version": "6.4.0",
      "resolved": "https://registry.npmjs.org/open/-/open-6.4.0.tgz",
      "integrity": "sha512-IFenVPgF70fSm1keSd2iDBIDIBZkroLeuffXq+wKTzTJlBpesFWojV9lb8mzOfaAzM1sr7HQHuO0vtV0zYekGg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-wsl": "^1.1.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/openapi3-ts": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/openapi3-ts/-/openapi3-ts-3.2.0.tgz",
      "integrity": "sha512-/ykNWRV5Qs0Nwq7Pc0nJ78fgILvOT/60OxEmB3v7yQ8a8Bwcm43D4diaYazG/KBn6czA+52XYy931WFLMCUeSg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "yaml": "^2.2.1"
      }
    },
    "node_modules/optionator": {
      "version": "0.9.4",
      "resolved": "https://registry.npmjs.org/optionator/-/optionator-0.9.4.tgz",
      "integrity": "sha512-6IpQ7mKUxRcZNLIObR0hz7lxsapSSIYNZJwXPGeF0mTVqGKFIXj1DQcMoT22S3ROcLyY/rz0PWaWZ9ayWmad9g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "deep-is": "^0.1.3",
        "fast-levenshtein": "^2.0.6",
        "levn": "^0.4.1",
        "prelude-ls": "^1.2.1",
        "type-check": "^0.4.0",
        "word-wrap": "^1.2.5"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/ora": {
      "version": "5.4.1",
      "resolved": "https://registry.npmjs.org/ora/-/ora-5.4.1.tgz",
      "integrity": "sha512-5b6Y85tPxZZ7QytO+BQzysW31HJku27cRIlkbAXaNx+BdcVi+LlRFmVXzeF6a7JCwJpyw5c4b+YSVImQIrBpuQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "bl": "^4.1.0",
        "chalk": "^4.1.0",
        "cli-cursor": "^3.1.0",
        "cli-spinners": "^2.5.0",
        "is-interactive": "^1.0.0",
        "is-unicode-supported": "^0.1.0",
        "log-symbols": "^4.1.0",
        "strip-ansi": "^6.0.0",
        "wcwidth": "^1.0.1"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/p-defer": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/p-defer/-/p-defer-3.0.0.tgz",
      "integrity": "sha512-ugZxsxmtTln604yeYd29EGrNhazN2lywetzpKhfmQjW/VJmhpDmWbiX+h0zL8V91R0UXkhb3KtPmyq9PZw3aYw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/p-limit": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/p-limit/-/p-limit-3.1.0.tgz",
      "integrity": "sha512-TYOanM3wGwNGsZN2cVTYPArw454xnXj5qmWF1bEoAc4+cU/ol7GVh7odevjp1FNHduHc3KZMcFduxU5Xc6uJRQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "yocto-queue": "^0.1.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/p-locate": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/p-locate/-/p-locate-5.0.0.tgz",
      "integrity": "sha512-LaNjtRWUBY++zB5nE/NwcaoMylSPk+S+ZHNB1TzdbMJMny6dynpAGt7X/tl/QYq3TIeE6nxHppbo2LGymrG5Pw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-limit": "^3.0.2"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/p-map": {
      "version": "7.0.3",
      "resolved": "https://registry.npmjs.org/p-map/-/p-map-7.0.3.tgz",
      "integrity": "sha512-VkndIv2fIB99swvQoA65bm+fsmt6UNdGeIB0oxBs+WhAhdh08QA04JXpI7rbB9r08/nkbysKoya9rtDERYOYMA==",
      "dev": true,
      "license": "MIT",
      "optional": true,
      "engines": {
        "node": ">=18"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/p-throttle": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/p-throttle/-/p-throttle-7.0.0.tgz",
      "integrity": "sha512-aio0v+S0QVkH1O+9x4dHtD4dgCExACcL+3EtNaGqC01GBudS9ijMuUsmN8OVScyV4OOp0jqdLShZFuSlbL/AsA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=18"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/pac-proxy-agent": {
      "version": "7.2.0",
      "resolved": "https://registry.npmjs.org/pac-proxy-agent/-/pac-proxy-agent-7.2.0.tgz",
      "integrity": "sha512-TEB8ESquiLMc0lV8vcd5Ql/JAKAoyzHFXaStwjkzpOpC5Yv+pIzLfHvjTSdf3vpa2bMiUQrg9i6276yn8666aA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@tootallnate/quickjs-emscripten": "^0.23.0",
        "agent-base": "^7.1.2",
        "debug": "^4.3.4",
        "get-uri": "^6.0.1",
        "http-proxy-agent": "^7.0.0",
        "https-proxy-agent": "^7.0.6",
        "pac-resolver": "^7.0.1",
        "socks-proxy-agent": "^8.0.5"
      },
      "engines": {
        "node": ">= 14"
      }
    },
    "node_modules/pac-resolver": {
      "version": "7.0.1",
      "resolved": "https://registry.npmjs.org/pac-resolver/-/pac-resolver-7.0.1.tgz",
      "integrity": "sha512-5NPgf87AT2STgwa2ntRMr45jTKrYBGkVU36yT0ig/n/GMAa3oPqhZfIQ2kMEimReg0+t9kZViDVZ83qfVUlckg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "degenerator": "^5.0.0",
        "netmask": "^2.0.2"
      },
      "engines": {
        "node": ">= 14"
      }
    },
    "node_modules/package-json-from-dist": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/package-json-from-dist/-/package-json-from-dist-1.0.1.tgz",
      "integrity": "sha512-UEZIS3/by4OC8vL3P2dTXRETpebLI2NiI5vIrjaD/5UtrkFX/tNbwjTSRAGC/+7CAo2pIcBaRgWmcBBHcsaCIw==",
      "dev": true,
      "license": "BlueOak-1.0.0"
    },
    "node_modules/parent-module": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/parent-module/-/parent-module-1.0.1.tgz",
      "integrity": "sha512-GQ2EWRpQV8/o+Aw8YqtfZZPfNRWZYkbidE9k5rpl/hC3vtHHBfGm2Ifi6qWV+coDGkrUKZAxE3Lot5kcsRlh+g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "callsites": "^3.0.0"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/parse-entities": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/parse-entities/-/parse-entities-4.0.2.tgz",
      "integrity": "sha512-GG2AQYWoLgL877gQIKeRPGO1xF9+eG1ujIb5soS5gPvLQ1y2o8FL90w2QWNdf9I361Mpp7726c+lj3U0qK1uGw==",
      "license": "MIT",
      "dependencies": {
        "@types/unist": "^2.0.0",
        "character-entities-legacy": "^3.0.0",
        "character-reference-invalid": "^2.0.0",
        "decode-named-character-reference": "^1.0.0",
        "is-alphanumerical": "^2.0.0",
        "is-decimal": "^2.0.0",
        "is-hexadecimal": "^2.0.0"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/parse-entities/node_modules/@types/unist": {
      "version": "2.0.11",
      "resolved": "https://registry.npmjs.org/@types/unist/-/unist-2.0.11.tgz",
      "integrity": "sha512-CmBKiL6NNo/OqgmMn95Fk9Whlp2mtvIv+KNpQKN2F4SjvrEesubTRWGYSg+BnWZOnlCaSTU1sMpsBOzgbYhnsA==",
      "license": "MIT"
    },
    "node_modules/parse5": {
      "version": "5.1.1",
      "resolved": "https://registry.npmjs.org/parse5/-/parse5-5.1.1.tgz",
      "integrity": "sha512-ugq4DFI0Ptb+WWjAdOK16+u/nHfiIrcE+sh8kZMaM0WllQKLI9rOUq6c2b7cwPkXdzfQESqvoqK6ug7U/Yyzug==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/parse5-htmlparser2-tree-adapter": {
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/parse5-htmlparser2-tree-adapter/-/parse5-htmlparser2-tree-adapter-6.0.1.tgz",
      "integrity": "sha512-qPuWvbLgvDGilKc5BoicRovlT4MtYT6JfJyBOMDsKoiT+GiuP5qyrPCnR9HcPECIJJmZh5jRndyNThnhhb/vlA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "parse5": "^6.0.1"
      }
    },
    "node_modules/parse5-htmlparser2-tree-adapter/node_modules/parse5": {
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/parse5/-/parse5-6.0.1.tgz",
      "integrity": "sha512-Ofn/CTFzRGTTxwpNEs9PP93gXShHcTq255nzRYSKe8AkVpZY7e1fpmTfOyoIvjP5HG7Z2ZM7VS9PPhQGW2pOpw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/parseurl": {
      "version": "1.3.3",
      "resolved": "https://registry.npmjs.org/parseurl/-/parseurl-1.3.3.tgz",
      "integrity": "sha512-CiyeOxFT/JZyN5m0z9PfXw4SCBJ6Sygz1Dpl0wqjlhDEGGBP1GnsUVEL0p63hoG1fcj3fHynXi9NYO4nWOL+qQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/path-exists": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/path-exists/-/path-exists-4.0.0.tgz",
      "integrity": "sha512-ak9Qy5Q7jYb2Wwcey5Fpvg2KoAc/ZIhLSLOSBmRmygPsGwkVVt0fZa0qrtMz+m6tJTAHfZQ8FnmB4MG4LWy7/w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/path-key": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/path-key/-/path-key-3.1.1.tgz",
      "integrity": "sha512-ojmeN0qd+y0jszEtoY48r0Peq5dwMEkIlCOu6Q5f41lfkswXuKtYrhgoTpLnyIcHm24Uhqx+5Tqm2InSwLhE6Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/path-parse": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/path-parse/-/path-parse-1.0.7.tgz",
      "integrity": "sha512-LDJzPVEEEPR+y48z93A0Ed0yXb8pAByGWo/k5YYdYgpY2/2EsOsksJrq7lOHxryrVOn1ejG6oAp8ahvOIQD8sw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/path-scurry": {
      "version": "1.11.1",
      "resolved": "https://registry.npmjs.org/path-scurry/-/path-scurry-1.11.1.tgz",
      "integrity": "sha512-Xa4Nw17FS9ApQFJ9umLiJS4orGjm7ZzwUrwamcGQuHSzDyth9boKDaycYdDcZDuqYATXw4HFXgaqWTctW/v1HA==",
      "dev": true,
      "license": "BlueOak-1.0.0",
      "dependencies": {
        "lru-cache": "^10.2.0",
        "minipass": "^5.0.0 || ^6.0.2 || ^7.0.0"
      },
      "engines": {
        "node": ">=16 || 14 >=14.18"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/path-scurry/node_modules/lru-cache": {
      "version": "10.4.3",
      "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-10.4.3.tgz",
      "integrity": "sha512-JNAzZcXrCt42VGLuYz0zfAzDfAvJWW6AfYlDBQyDV5DClI2m5sAmK+OIO7s59XfsRsWHp02jAJrRadPRGTt6SQ==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/path-to-regexp": {
      "version": "0.1.12",
      "resolved": "https://registry.npmjs.org/path-to-regexp/-/path-to-regexp-0.1.12.tgz",
      "integrity": "sha512-RA1GjUVMnvYFxuqovrEqZoxxW5NUZqbwKtYz/Tt7nXerk0LbLblQmrsgdeOxV5SFHf0UDggjS/bSeOZwt1pmEQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/pg": {
      "version": "8.16.3",
      "resolved": "https://registry.npmjs.org/pg/-/pg-8.16.3.tgz",
      "integrity": "sha512-enxc1h0jA/aq5oSDMvqyW3q89ra6XIIDZgCX9vkMrnz5DFTw/Ny3Li2lFQ+pt3L6MCgm/5o2o8HW9hiJji+xvw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "pg-connection-string": "^2.9.1",
        "pg-pool": "^3.10.1",
        "pg-protocol": "^1.10.3",
        "pg-types": "2.2.0",
        "pgpass": "1.0.5"
      },
      "engines": {
        "node": ">= 16.0.0"
      },
      "optionalDependencies": {
        "pg-cloudflare": "^1.2.7"
      },
      "peerDependencies": {
        "pg-native": ">=3.0.1"
      },
      "peerDependenciesMeta": {
        "pg-native": {
          "optional": true
        }
      }
    },
    "node_modules/pg-cloudflare": {
      "version": "1.2.7",
      "resolved": "https://registry.npmjs.org/pg-cloudflare/-/pg-cloudflare-1.2.7.tgz",
      "integrity": "sha512-YgCtzMH0ptvZJslLM1ffsY4EuGaU0cx4XSdXLRFae8bPP4dS5xL1tNB3k2o/N64cHJpwU7dxKli/nZ2lUa5fLg==",
      "dev": true,
      "license": "MIT",
      "optional": true
    },
    "node_modules/pg-connection-string": {
      "version": "2.9.1",
      "resolved": "https://registry.npmjs.org/pg-connection-string/-/pg-connection-string-2.9.1.tgz",
      "integrity": "sha512-nkc6NpDcvPVpZXxrreI/FOtX3XemeLl8E0qFr6F2Lrm/I8WOnaWNhIPK2Z7OHpw7gh5XJThi6j6ppgNoaT1w4w==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/pg-int8": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/pg-int8/-/pg-int8-1.0.1.tgz",
      "integrity": "sha512-WCtabS6t3c8SkpDBUlb1kjOs7l66xsGdKpIPZsg4wR+B3+u9UAum2odSsF9tnvxg80h4ZxLWMy4pRjOsFIqQpw==",
      "dev": true,
      "license": "ISC",
      "engines": {
        "node": ">=4.0.0"
      }
    },
    "node_modules/pg-pool": {
      "version": "3.10.1",
      "resolved": "https://registry.npmjs.org/pg-pool/-/pg-pool-3.10.1.tgz",
      "integrity": "sha512-Tu8jMlcX+9d8+QVzKIvM/uJtp07PKr82IUOYEphaWcoBhIYkoHpLXN3qO59nAI11ripznDsEzEv8nUxBVWajGg==",
      "dev": true,
      "license": "MIT",
      "peerDependencies": {
        "pg": ">=8.0"
      }
    },
    "node_modules/pg-protocol": {
      "version": "1.10.3",
      "resolved": "https://registry.npmjs.org/pg-protocol/-/pg-protocol-1.10.3.tgz",
      "integrity": "sha512-6DIBgBQaTKDJyxnXaLiLR8wBpQQcGWuAESkRBX/t6OwA8YsqP+iVSiond2EDy6Y/dsGk8rh/jtax3js5NeV7JQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/pg-types": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/pg-types/-/pg-types-2.2.0.tgz",
      "integrity": "sha512-qTAAlrEsl8s4OiEQY69wDvcMIdQN6wdz5ojQiOy6YRMuynxenON0O5oCpJI6lshc6scgAY8qvJ2On/p+CXY0GA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "pg-int8": "1.0.1",
        "postgres-array": "~2.0.0",
        "postgres-bytea": "~1.0.0",
        "postgres-date": "~1.0.4",
        "postgres-interval": "^1.1.0"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/pgpass": {
      "version": "1.0.5",
      "resolved": "https://registry.npmjs.org/pgpass/-/pgpass-1.0.5.tgz",
      "integrity": "sha512-FdW9r/jQZhSeohs1Z3sI1yxFQNFvMcnmfuj4WBMUTxOrAyLMaTcE1aAMBiTlbMNaXvBCQuVi0R7hd8udDSP7ug==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "split2": "^4.1.0"
      }
    },
    "node_modules/picocolors": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/picocolors/-/picocolors-1.1.1.tgz",
      "integrity": "sha512-xceH2snhtb5M9liqDsmEw56le376mTZkEX/jEb/RxNFyegNul7eNslCXP9FDj/Lcu0X8KEyMceP2ntpaHrDEVA==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/picomatch": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-2.3.1.tgz",
      "integrity": "sha512-JU3teHTNjmE2VCGFzuY8EXzCDVwEqB2a8fsIvwaStHhAWJEeVd1o1QD80CU6+ZdEXXSLbSsuLwJjkCBWqRQUVA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8.6"
      },
      "funding": {
        "url": "https://github.com/sponsors/jonschlinkert"
      }
    },
    "node_modules/pify": {
      "version": "2.3.0",
      "resolved": "https://registry.npmjs.org/pify/-/pify-2.3.0.tgz",
      "integrity": "sha512-udgsAY+fTnvv7kI7aaxbqwWNb0AHiB0qBO89PZKPkoTmGOgdbrHDKD+0B2X4uTfJ/FT1R09r9gTsjUjNJotuog==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/pirates": {
      "version": "4.0.7",
      "resolved": "https://registry.npmjs.org/pirates/-/pirates-4.0.7.tgz",
      "integrity": "sha512-TfySrs/5nm8fQJDcBDuUng3VOUKsd7S+zqvbOTiGXHfxX4wK31ard+hoNuvkicM/2YFzlpDgABOevKSsB4G/FA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/portfinder": {
      "version": "1.0.38",
      "resolved": "https://registry.npmjs.org/portfinder/-/portfinder-1.0.38.tgz",
      "integrity": "sha512-rEwq/ZHlJIKw++XtLAO8PPuOQA/zaPJOZJ37BVuN97nLpMJeuDVLVGRwbFoBgLudgdTMP2hdRJP++H+8QOA3vg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "async": "^3.2.6",
        "debug": "^4.3.6"
      },
      "engines": {
        "node": ">= 10.12"
      }
    },
    "node_modules/postcss": {
      "version": "8.5.6",
      "resolved": "https://registry.npmjs.org/postcss/-/postcss-8.5.6.tgz",
      "integrity": "sha512-3Ybi1tAuwAP9s0r1UQ2J4n5Y0G05bJkpUIO0/bI9MhwmD70S5aTWbXGBwxHrelT+XM1k6dM0pk+SwNkpTRN7Pg==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/postcss"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "nanoid": "^3.3.11",
        "picocolors": "^1.1.1",
        "source-map-js": "^1.2.1"
      },
      "engines": {
        "node": "^10 || ^12 || >=14"
      }
    },
    "node_modules/postcss-import": {
      "version": "15.1.0",
      "resolved": "https://registry.npmjs.org/postcss-import/-/postcss-import-15.1.0.tgz",
      "integrity": "sha512-hpr+J05B2FVYUAXHeK1YyI267J/dDDhMU6B6civm8hSY1jYJnBXxzKDKDswzJmtLHryrjhnDjqqp/49t8FALew==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "postcss-value-parser": "^4.0.0",
        "read-cache": "^1.0.0",
        "resolve": "^1.1.7"
      },
      "engines": {
        "node": ">=14.0.0"
      },
      "peerDependencies": {
        "postcss": "^8.0.0"
      }
    },
    "node_modules/postcss-js": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/postcss-js/-/postcss-js-4.1.0.tgz",
      "integrity": "sha512-oIAOTqgIo7q2EOwbhb8UalYePMvYoIeRY2YKntdpFQXNosSu3vLrniGgmH9OKs/qAkfoj5oB3le/7mINW1LCfw==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "camelcase-css": "^2.0.1"
      },
      "engines": {
        "node": "^12 || ^14 || >= 16"
      },
      "peerDependencies": {
        "postcss": "^8.4.21"
      }
    },
    "node_modules/postcss-load-config": {
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/postcss-load-config/-/postcss-load-config-6.0.1.tgz",
      "integrity": "sha512-oPtTM4oerL+UXmx+93ytZVN82RrlY/wPUV8IeDxFrzIjXOLF1pN+EmKPLbubvKHT2HC20xXsCAH2Z+CKV6Oz/g==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "lilconfig": "^3.1.1"
      },
      "engines": {
        "node": ">= 18"
      },
      "peerDependencies": {
        "jiti": ">=1.21.0",
        "postcss": ">=8.0.9",
        "tsx": "^4.8.1",
        "yaml": "^2.4.2"
      },
      "peerDependenciesMeta": {
        "jiti": {
          "optional": true
        },
        "postcss": {
          "optional": true
        },
        "tsx": {
          "optional": true
        },
        "yaml": {
          "optional": true
        }
      }
    },
    "node_modules/postcss-nested": {
      "version": "6.2.0",
      "resolved": "https://registry.npmjs.org/postcss-nested/-/postcss-nested-6.2.0.tgz",
      "integrity": "sha512-HQbt28KulC5AJzG+cZtj9kvKB93CFCdLvog1WFLf1D+xmMvPGlBstkpTEZfK5+AN9hfJocyBFCNiqyS48bpgzQ==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/postcss/"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "postcss-selector-parser": "^6.1.1"
      },
      "engines": {
        "node": ">=12.0"
      },
      "peerDependencies": {
        "postcss": "^8.2.14"
      }
    },
    "node_modules/postcss-selector-parser": {
      "version": "6.1.2",
      "resolved": "https://registry.npmjs.org/postcss-selector-parser/-/postcss-selector-parser-6.1.2.tgz",
      "integrity": "sha512-Q8qQfPiZ+THO/3ZrOrO0cJJKfpYCagtMUkXbnEfmgUjwXg6z/WBeOyS9APBBPCTSiDV+s4SwQGu8yFsiMRIudg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "cssesc": "^3.0.0",
        "util-deprecate": "^1.0.2"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/postcss-value-parser": {
      "version": "4.2.0",
      "resolved": "https://registry.npmjs.org/postcss-value-parser/-/postcss-value-parser-4.2.0.tgz",
      "integrity": "sha512-1NNCs6uurfkVbeXG4S8JFT9t19m45ICnif8zWLd5oPSZ50QnwMfK+H3jv408d4jw/7Bttv5axS5IiHoLaVNHeQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/postgres": {
      "version": "3.4.7",
      "resolved": "https://registry.npmjs.org/postgres/-/postgres-3.4.7.tgz",
      "integrity": "sha512-Jtc2612XINuBjIl/QTWsV5UvE8UHuNblcO3vVADSrKsrc6RqGX6lOW1cEo3CM2v0XG4Nat8nI+YM7/f26VxXLw==",
      "license": "Unlicense",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "type": "individual",
        "url": "https://github.com/sponsors/porsager"
      }
    },
    "node_modules/postgres-array": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/postgres-array/-/postgres-array-2.0.0.tgz",
      "integrity": "sha512-VpZrUqU5A69eQyW2c5CA1jtLecCsN2U/bD6VilrFDWq5+5UIEVO7nazS3TEcHf1zuPYO/sqGvUvW62g86RXZuA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/postgres-bytea": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/postgres-bytea/-/postgres-bytea-1.0.0.tgz",
      "integrity": "sha512-xy3pmLuQqRBZBXDULy7KbaitYqLcmxigw14Q5sj8QBVLqEwXfeybIKVWiqAXTlcvdvb0+xkOtDbfQMOf4lST1w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/postgres-date": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/postgres-date/-/postgres-date-1.0.7.tgz",
      "integrity": "sha512-suDmjLVQg78nMK2UZ454hAG+OAW+HQPZ6n++TNDUX+L0+uUlLywnoxJKDou51Zm+zTCjrCl0Nq6J9C5hP9vK/Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/postgres-interval": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/postgres-interval/-/postgres-interval-1.2.0.tgz",
      "integrity": "sha512-9ZhXKM/rw350N1ovuWHbGxnGh/SNJ4cnxHiM0rxE4VN41wsg8P8zWn9hv/buK00RP4WvlOyr/RBDiptyxVbkZQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "xtend": "^4.0.0"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/prelude-ls": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/prelude-ls/-/prelude-ls-1.2.1.tgz",
      "integrity": "sha512-vkcDPrRZo1QZLbn5RLGPpg/WmIQ65qoWWhcGKf/b5eplkkarX0m9z8ppCat4mlOqUsWpyNuYgO3VRyrYHSzX5g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/proc-log": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/proc-log/-/proc-log-5.0.0.tgz",
      "integrity": "sha512-Azwzvl90HaF0aCz1JrDdXQykFakSSNPaPoiZ9fm5qJIMHioDZEi7OAdRwSm6rSoPtY3Qutnm3L7ogmg3dc+wbQ==",
      "dev": true,
      "license": "ISC",
      "optional": true,
      "engines": {
        "node": "^18.17.0 || >=20.5.0"
      }
    },
    "node_modules/process": {
      "version": "0.11.10",
      "resolved": "https://registry.npmjs.org/process/-/process-0.11.10.tgz",
      "integrity": "sha512-cdGef/drWFoydD1JsMzuFf8100nZl+GT+yacc2bEced5f9Rjk4z+WtFUTBu9PhOi9j/jfmBPu0mMEY4wIdAF8A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.6.0"
      }
    },
    "node_modules/process-nextick-args": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/process-nextick-args/-/process-nextick-args-2.0.1.tgz",
      "integrity": "sha512-3ouUOpQhtgrbOa17J7+uxOTpITYWaGP7/AhoR3+A+/1e9skrzelGi/dXzEYyvbxubEF6Wn2ypscTKiKJFFn1ag==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/progress": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/progress/-/progress-2.0.3.tgz",
      "integrity": "sha512-7PiHtLll5LdnKIMw100I+8xJXR5gW2QwWYkT6iJva0bXitZKa/XMrSbdmg3r2Xnaidz9Qumd0VPaMrZlF9V9sA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/promise-breaker": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/promise-breaker/-/promise-breaker-6.0.0.tgz",
      "integrity": "sha512-BthzO9yTPswGf7etOBiHCVuugs2N01/Q/94dIPls48z2zCmrnDptUUZzfIb+41xq0MnYZ/BzmOd6ikDR4ibNZA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/promise-retry": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/promise-retry/-/promise-retry-2.0.1.tgz",
      "integrity": "sha512-y+WKFlBR8BGXnsNlIHFGPZmyDf3DFMoLhaflAnyZgV6rG6xu+JwesTo2Q9R6XwYmtmwAFCkAk3e35jEdoeh/3g==",
      "dev": true,
      "license": "MIT",
      "optional": true,
      "dependencies": {
        "err-code": "^2.0.2",
        "retry": "^0.12.0"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/promise-retry/node_modules/retry": {
      "version": "0.12.0",
      "resolved": "https://registry.npmjs.org/retry/-/retry-0.12.0.tgz",
      "integrity": "sha512-9LkiTwjUh6rT555DtE9rTX+BKByPfrMzEAtnlEtdEwr3Nkffwiihqe2bWADg+OQRjt9gl6ICdmB/ZFDCGAtSow==",
      "dev": true,
      "license": "MIT",
      "optional": true,
      "engines": {
        "node": ">= 4"
      }
    },
    "node_modules/property-information": {
      "version": "7.1.0",
      "resolved": "https://registry.npmjs.org/property-information/-/property-information-7.1.0.tgz",
      "integrity": "sha512-TwEZ+X+yCJmYfL7TPUOcvBZ4QfoT5YenQiJuX//0th53DE6w0xxLEtfK3iyryQFddXuvkIk51EEgrJQ0WJkOmQ==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/proto-list": {
      "version": "1.2.4",
      "resolved": "https://registry.npmjs.org/proto-list/-/proto-list-1.2.4.tgz",
      "integrity": "sha512-vtK/94akxsTMhe0/cbfpR+syPuszcuwhqVjJq26CuNDgFGj682oRBXOP5MJpv2r7JtE8MsiepGIqvvOTBwn2vA==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/proto3-json-serializer": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/proto3-json-serializer/-/proto3-json-serializer-2.0.2.tgz",
      "integrity": "sha512-SAzp/O4Yh02jGdRc+uIrGoe87dkN/XtwxfZ4ZyafJHymd79ozp5VG5nyZ7ygqPM5+cpLDjjGnYFUkngonyDPOQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "protobufjs": "^7.2.5"
      },
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/protobufjs": {
      "version": "7.5.4",
      "resolved": "https://registry.npmjs.org/protobufjs/-/protobufjs-7.5.4.tgz",
      "integrity": "sha512-CvexbZtbov6jW2eXAvLukXjXUW1TzFaivC46BpWc/3BpcCysb5Vffu+B3XHMm8lVEuy2Mm4XGex8hBSg1yapPg==",
      "dev": true,
      "hasInstallScript": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "@protobufjs/aspromise": "^1.1.2",
        "@protobufjs/base64": "^1.1.2",
        "@protobufjs/codegen": "^2.0.4",
        "@protobufjs/eventemitter": "^1.1.0",
        "@protobufjs/fetch": "^1.1.0",
        "@protobufjs/float": "^1.0.2",
        "@protobufjs/inquire": "^1.1.0",
        "@protobufjs/path": "^1.1.2",
        "@protobufjs/pool": "^1.1.0",
        "@protobufjs/utf8": "^1.1.0",
        "@types/node": ">=13.7.0",
        "long": "^5.0.0"
      },
      "engines": {
        "node": ">=12.0.0"
      }
    },
    "node_modules/proxy-addr": {
      "version": "2.0.7",
      "resolved": "https://registry.npmjs.org/proxy-addr/-/proxy-addr-2.0.7.tgz",
      "integrity": "sha512-llQsMLSUDUPT44jdrU/O37qlnifitDP+ZwrmmZcoSKyLKvtZxpyV0n2/bD/N4tBAAZ/gJEdZU7KMraoK1+XYAg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "forwarded": "0.2.0",
        "ipaddr.js": "1.9.1"
      },
      "engines": {
        "node": ">= 0.10"
      }
    },
    "node_modules/proxy-agent": {
      "version": "6.5.0",
      "resolved": "https://registry.npmjs.org/proxy-agent/-/proxy-agent-6.5.0.tgz",
      "integrity": "sha512-TmatMXdr2KlRiA2CyDu8GqR8EjahTG3aY3nXjdzFyoZbmB8hrBsTyMezhULIXKnC0jpfjlmiZ3+EaCzoInSu/A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "agent-base": "^7.1.2",
        "debug": "^4.3.4",
        "http-proxy-agent": "^7.0.1",
        "https-proxy-agent": "^7.0.6",
        "lru-cache": "^7.14.1",
        "pac-proxy-agent": "^7.1.0",
        "proxy-from-env": "^1.1.0",
        "socks-proxy-agent": "^8.0.5"
      },
      "engines": {
        "node": ">= 14"
      }
    },
    "node_modules/proxy-agent/node_modules/lru-cache": {
      "version": "7.18.3",
      "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-7.18.3.tgz",
      "integrity": "sha512-jumlc0BIUrS3qJGgIkWZsyfAM7NCWiBcCDhnd+3NNM5KbBmLTgHVfWBcg6W+rLUsIpzpERPsvwUP7CckAQSOoA==",
      "dev": true,
      "license": "ISC",
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/proxy-from-env": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/proxy-from-env/-/proxy-from-env-1.1.0.tgz",
      "integrity": "sha512-D+zkORCbA9f1tdWRK0RaCR3GPv50cMxcrz4X8k5LTSUD1Dkw47mKJEZQNunItRTkWwgtaUSo1RVFRIG9ZXiFYg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/punycode": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/punycode/-/punycode-2.3.1.tgz",
      "integrity": "sha512-vYt7UD1U9Wg6138shLtLOvdAu+8DsC/ilFtEVHcH+wydcSpNE20AfSOduf6MkRFahL5FY7X1oU7nKVZFtfq8Fg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/pupa": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/pupa/-/pupa-2.1.1.tgz",
      "integrity": "sha512-l1jNAspIBSFqbT+y+5FosojNpVpF94nlI+wDUpqP9enwOTfHx9f0gh5nB96vl+6yTpsJsypeNrwfzPrKuHB41A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "escape-goat": "^2.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/qs": {
      "version": "6.13.0",
      "resolved": "https://registry.npmjs.org/qs/-/qs-6.13.0.tgz",
      "integrity": "sha512-+38qI9SOr8tfZ4QmJNplMUxqjbe7LKvvZgWdExBOmd+egZTtjLB67Gu0HRX3u/XOq7UU2Nx6nsjvS16Z9uwfpg==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "side-channel": "^1.0.6"
      },
      "engines": {
        "node": ">=0.6"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/queue-microtask": {
      "version": "1.2.3",
      "resolved": "https://registry.npmjs.org/queue-microtask/-/queue-microtask-1.2.3.tgz",
      "integrity": "sha512-NuaNSa6flKT5JaSYQzJok04JzTL1CA6aGhv5rfLW3PgqA+M2ChpZQnAC8h8i4ZFkBS8X5RqkDBHA7r4hej3K9A==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT"
    },
    "node_modules/railroad-diagrams": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/railroad-diagrams/-/railroad-diagrams-1.0.0.tgz",
      "integrity": "sha512-cz93DjNeLY0idrCNOH6PviZGRN9GJhsdm9hpn1YCS879fj4W+x5IFJhhkRZcwVgMmFF7R82UA/7Oh+R8lLZg6A==",
      "dev": true,
      "license": "CC0-1.0"
    },
    "node_modules/randexp": {
      "version": "0.4.6",
      "resolved": "https://registry.npmjs.org/randexp/-/randexp-0.4.6.tgz",
      "integrity": "sha512-80WNmd9DA0tmZrw9qQa62GPPWfuXJknrmVmLcxvq4uZBdYqb1wYoKTmnlGUchvVWe0XiLupYkBoXVOxz3C8DYQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "discontinuous-range": "1.0.0",
        "ret": "~0.1.10"
      },
      "engines": {
        "node": ">=0.12"
      }
    },
    "node_modules/range-parser": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/range-parser/-/range-parser-1.2.1.tgz",
      "integrity": "sha512-Hrgsx+orqoygnmhFbKaHE6c296J+HTAQXoxEF6gNupROmmGJRoyzfG3ccAveqCBrwr/2yxQ5BVd/GTl5agOwSg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/raw-body": {
      "version": "2.5.2",
      "resolved": "https://registry.npmjs.org/raw-body/-/raw-body-2.5.2.tgz",
      "integrity": "sha512-8zGqypfENjCIqGhgXToC8aB2r7YrBX+AQAfIPs/Mlk+BtPTztOvTS01NRW/3Eh60J+a48lt8qsCzirQ6loCVfA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "bytes": "3.1.2",
        "http-errors": "2.0.0",
        "iconv-lite": "0.4.24",
        "unpipe": "1.0.0"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/rc": {
      "version": "1.2.8",
      "resolved": "https://registry.npmjs.org/rc/-/rc-1.2.8.tgz",
      "integrity": "sha512-y3bGgqKj3QBdxLbLkomlohkvsA8gdAiUQlSBJnBhfn+BPxg4bc62d8TcBW15wavDfgexCgccckhcZvywyQYPOw==",
      "dev": true,
      "license": "(BSD-2-Clause OR MIT OR Apache-2.0)",
      "dependencies": {
        "deep-extend": "^0.6.0",
        "ini": "~1.3.0",
        "minimist": "^1.2.0",
        "strip-json-comments": "~2.0.1"
      },
      "bin": {
        "rc": "cli.js"
      }
    },
    "node_modules/rc/node_modules/ini": {
      "version": "1.3.8",
      "resolved": "https://registry.npmjs.org/ini/-/ini-1.3.8.tgz",
      "integrity": "sha512-JV/yugV2uzW5iMRSiZAyDtQd+nxtUnjeLt0acNdw98kKLrvuRVyB80tsREOE7yvGVgalhZ6RNXCmEHkUKBKxew==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/rc/node_modules/strip-json-comments": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/strip-json-comments/-/strip-json-comments-2.0.1.tgz",
      "integrity": "sha512-4gB8na07fecVVkOI6Rs4e7T6NOTki5EmL7TUduTs6bu3EdnSycntVJ4re8kgZA+wx9IueI2Y11bfbgwtzuE0KQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/re2": {
      "version": "1.22.1",
      "resolved": "https://registry.npmjs.org/re2/-/re2-1.22.1.tgz",
      "integrity": "sha512-E4J0EtgyNLdIr0wTg0dQPefuiqNY29KaLacytiUAYYRzxCG+zOkWoUygt1rI+TA1LrhN49/njrfSO1DHtVC5Vw==",
      "dev": true,
      "hasInstallScript": true,
      "license": "BSD-3-Clause",
      "optional": true,
      "dependencies": {
        "install-artifact-from-github": "^1.4.0",
        "nan": "^2.22.2",
        "node-gyp": "^11.2.0"
      }
    },
    "node_modules/react": {
      "version": "18.3.1",
      "resolved": "https://registry.npmjs.org/react/-/react-18.3.1.tgz",
      "integrity": "sha512-wS+hAgJShR0KhEvPJArfuPVN1+Hz1t0Y6n5jLrGQbkb4urgPE/0Rve+1kMB1v/oWgHgm4WIcV+i7F2pTVj+2iQ==",
      "license": "MIT",
      "dependencies": {
        "loose-envify": "^1.1.0"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/react-dom": {
      "version": "18.3.1",
      "resolved": "https://registry.npmjs.org/react-dom/-/react-dom-18.3.1.tgz",
      "integrity": "sha512-5m4nQKp+rZRb09LNH59GM4BxTh9251/ylbKIbpe7TpGxfJ+9kv6BLkLBXIjjspbgbnIBNqlI23tRnTWT0snUIw==",
      "license": "MIT",
      "dependencies": {
        "loose-envify": "^1.1.0",
        "scheduler": "^0.23.2"
      },
      "peerDependencies": {
        "react": "^18.3.1"
      }
    },
    "node_modules/react-markdown": {
      "version": "9.1.0",
      "resolved": "https://registry.npmjs.org/react-markdown/-/react-markdown-9.1.0.tgz",
      "integrity": "sha512-xaijuJB0kzGiUdG7nc2MOMDUDBWPyGAjZtUrow9XxUeua8IqeP+VlIfAZ3bphpcLTnSZXz6z9jcVC/TCwbfgdw==",
      "license": "MIT",
      "dependencies": {
        "@types/hast": "^3.0.0",
        "@types/mdast": "^4.0.0",
        "devlop": "^1.0.0",
        "hast-util-to-jsx-runtime": "^2.0.0",
        "html-url-attributes": "^3.0.0",
        "mdast-util-to-hast": "^13.0.0",
        "remark-parse": "^11.0.0",
        "remark-rehype": "^11.0.0",
        "unified": "^11.0.0",
        "unist-util-visit": "^5.0.0",
        "vfile": "^6.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      },
      "peerDependencies": {
        "@types/react": ">=18",
        "react": ">=18"
      }
    },
    "node_modules/react-refresh": {
      "version": "0.17.0",
      "resolved": "https://registry.npmjs.org/react-refresh/-/react-refresh-0.17.0.tgz",
      "integrity": "sha512-z6F7K9bV85EfseRCp2bzrpyQ0Gkw1uLoCel9XBVWPg/TjRj94SkJzUTGfOa4bs7iJvBWtQG0Wq7wnI0syw3EBQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/react-router-dom": {
      "version": "6.30.1",
      "resolved": "https://registry.npmjs.org/react-router-dom/-/react-router-dom-6.30.1.tgz",
      "integrity": "sha512-llKsgOkZdbPU1Eg3zK8lCn+sjD9wMRZZPuzmdWWX5SUs8OFkN5HnFVC0u5KMeMaC9aoancFI/KoLuKPqN+hxHw==",
      "license": "MIT",
      "dependencies": {
        "@remix-run/router": "1.23.0",
        "react-router": "6.30.1"
      },
      "engines": {
        "node": ">=14.0.0"
      },
      "peerDependencies": {
        "react": ">=16.8",
        "react-dom": ">=16.8"
      }
    },
    "node_modules/react-router-dom/node_modules/react-router": {
      "version": "6.30.1",
      "resolved": "https://registry.npmjs.org/react-router/-/react-router-6.30.1.tgz",
      "integrity": "sha512-X1m21aEmxGXqENEPG3T6u0Th7g0aS4ZmoNynhbs+Cn+q+QGTLt+d5IQ2bHAXKzKcxGJjxACpVbnYQSCRcfxHlQ==",
      "license": "MIT",
      "dependencies": {
        "@remix-run/router": "1.23.0"
      },
      "engines": {
        "node": ">=14.0.0"
      },
      "peerDependencies": {
        "react": ">=16.8"
      }
    },
    "node_modules/read-cache": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/read-cache/-/read-cache-1.0.0.tgz",
      "integrity": "sha512-Owdv/Ft7IjOgm/i0xvNDZ1LrRANRfew4b2prF3OWMQLxLfu3bS8FVhCsrSCMK4lR56Y9ya+AThoTpDCTxCmpRA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "pify": "^2.3.0"
      }
    },
    "node_modules/readable-stream": {
      "version": "4.7.0",
      "resolved": "https://registry.npmjs.org/readable-stream/-/readable-stream-4.7.0.tgz",
      "integrity": "sha512-oIGGmcpTLwPga8Bn6/Z75SVaH1z5dUut2ibSyAMVhmUggWpmDn2dapB0n7f8nwaSiRtepAsfJyfXIO5DCVAODg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "abort-controller": "^3.0.0",
        "buffer": "^6.0.3",
        "events": "^3.3.0",
        "process": "^0.11.10",
        "string_decoder": "^1.3.0"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      }
    },
    "node_modules/readable-stream/node_modules/buffer": {
      "version": "6.0.3",
      "resolved": "https://registry.npmjs.org/buffer/-/buffer-6.0.3.tgz",
      "integrity": "sha512-FTiCpNxtwiZZHEZbcbTIcZjERVICn9yq/pDFkTl95/AxzD1naBctN7YO68riM/gLSDY7sdrMby8hofADYuuqOA==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "base64-js": "^1.3.1",
        "ieee754": "^1.2.1"
      }
    },
    "node_modules/readdir-glob": {
      "version": "1.1.3",
      "resolved": "https://registry.npmjs.org/readdir-glob/-/readdir-glob-1.1.3.tgz",
      "integrity": "sha512-v05I2k7xN8zXvPD9N+z/uhXPaj0sUFCe2rcWZIpBsqxfP7xXFQ0tipAd/wjj1YxWyWtUS5IDJpOG82JKt2EAVA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "minimatch": "^5.1.0"
      }
    },
    "node_modules/readdir-glob/node_modules/minimatch": {
      "version": "5.1.6",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-5.1.6.tgz",
      "integrity": "sha512-lKwV/1brpG6mBUFHtb7NUmtABCb2WZZmm2wNiOA5hAb8VdCS4B3dtMWyvcoViccwAW/COERjXLt0zP1zXUN26g==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^2.0.1"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/readdirp": {
      "version": "3.6.0",
      "resolved": "https://registry.npmjs.org/readdirp/-/readdirp-3.6.0.tgz",
      "integrity": "sha512-hOS089on8RduqdbhvQ5Z37A0ESjsqz6qnRcffsMU3495FuTdqSm+7bhJ29JvIOsBDEEnan5DPu9t3To9VRlMzA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "picomatch": "^2.2.1"
      },
      "engines": {
        "node": ">=8.10.0"
      }
    },
    "node_modules/registry-auth-token": {
      "version": "5.1.0",
      "resolved": "https://registry.npmjs.org/registry-auth-token/-/registry-auth-token-5.1.0.tgz",
      "integrity": "sha512-GdekYuwLXLxMuFTwAPg5UKGLW/UXzQrZvH/Zj791BQif5T05T0RsaLfHc9q3ZOKi7n+BoprPD9mJ0O0k4xzUlw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@pnpm/npm-conf": "^2.1.0"
      },
      "engines": {
        "node": ">=14"
      }
    },
    "node_modules/registry-url": {
      "version": "5.1.0",
      "resolved": "https://registry.npmjs.org/registry-url/-/registry-url-5.1.0.tgz",
      "integrity": "sha512-8acYXXTI0AkQv6RAOjE3vOaIXZkT9wo4LOFbBKYQEEnnMNBpKqdUrI6S4NT0KPIo/WVvJ5tE/X5LF/TQUf0ekw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "rc": "^1.2.8"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/remark-gfm": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/remark-gfm/-/remark-gfm-4.0.1.tgz",
      "integrity": "sha512-1quofZ2RQ9EWdeN34S79+KExV1764+wCUGop5CPL1WGdD0ocPpu91lzPGbwWMECpEpd42kJGQwzRfyov9j4yNg==",
      "license": "MIT",
      "dependencies": {
        "@types/mdast": "^4.0.0",
        "mdast-util-gfm": "^3.0.0",
        "micromark-extension-gfm": "^3.0.0",
        "remark-parse": "^11.0.0",
        "remark-stringify": "^11.0.0",
        "unified": "^11.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/remark-parse": {
      "version": "11.0.0",
      "resolved": "https://registry.npmjs.org/remark-parse/-/remark-parse-11.0.0.tgz",
      "integrity": "sha512-FCxlKLNGknS5ba/1lmpYijMUzX2esxW5xQqjWxw2eHFfS2MSdaHVINFmhjo+qN1WhZhNimq0dZATN9pH0IDrpA==",
      "license": "MIT",
      "dependencies": {
        "@types/mdast": "^4.0.0",
        "mdast-util-from-markdown": "^2.0.0",
        "micromark-util-types": "^2.0.0",
        "unified": "^11.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/remark-rehype": {
      "version": "11.1.2",
      "resolved": "https://registry.npmjs.org/remark-rehype/-/remark-rehype-11.1.2.tgz",
      "integrity": "sha512-Dh7l57ianaEoIpzbp0PC9UKAdCSVklD8E5Rpw7ETfbTl3FqcOOgq5q2LVDhgGCkaBv7p24JXikPdvhhmHvKMsw==",
      "license": "MIT",
      "dependencies": {
        "@types/hast": "^3.0.0",
        "@types/mdast": "^4.0.0",
        "mdast-util-to-hast": "^13.0.0",
        "unified": "^11.0.0",
        "vfile": "^6.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/remark-stringify": {
      "version": "11.0.0",
      "resolved": "https://registry.npmjs.org/remark-stringify/-/remark-stringify-11.0.0.tgz",
      "integrity": "sha512-1OSmLd3awB/t8qdoEOMazZkNsfVTeY4fTsgzcQFdXNq8ToTN4ZGwrMnlda4K6smTFKD+GRV6O48i6Z4iKgPPpw==",
      "license": "MIT",
      "dependencies": {
        "@types/mdast": "^4.0.0",
        "mdast-util-to-markdown": "^2.0.0",
        "unified": "^11.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/require-directory": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/require-directory/-/require-directory-2.1.1.tgz",
      "integrity": "sha512-fGxEI7+wsG9xrvdjsrlmL22OMTTiHRwAMroiEeMgq8gzoLC/PQr7RsRDSTLUg/bZAZtF+TVIkHc6/4RIKrui+Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/require-from-string": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/require-from-string/-/require-from-string-2.0.2.tgz",
      "integrity": "sha512-Xf0nWe6RseziFMu+Ap9biiUbmplq6S9/p+7w7YXP/JBHhrUDDUhwa+vANyubuqfZWTveU//DYVGsDG7RKL/vEw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/resolve": {
      "version": "1.22.10",
      "resolved": "https://registry.npmjs.org/resolve/-/resolve-1.22.10.tgz",
      "integrity": "sha512-NPRy+/ncIMeDlTAsuqwKIiferiawhefFJtkNSW0qZJEqMEb+qBt/77B/jGeeek+F0uOeN05CDa6HXbbIgtVX4w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-core-module": "^2.16.0",
        "path-parse": "^1.0.7",
        "supports-preserve-symlinks-flag": "^1.0.0"
      },
      "bin": {
        "resolve": "bin/resolve"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/resolve-from": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/resolve-from/-/resolve-from-4.0.0.tgz",
      "integrity": "sha512-pb/MYmXstAkysRFx8piNI1tGFNQIFA3vkE3Gq4EuA1dF6gHp/+vgZqsCGJapvy8N3Q+4o7FwvquPJcnZ7RYy4g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/restore-cursor": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/restore-cursor/-/restore-cursor-3.1.0.tgz",
      "integrity": "sha512-l+sSefzHpj5qimhFSE5a8nufZYAM3sBSVMAPtYkmC+4EH2anSGaEMXSD0izRQbu9nfyQ9y5JrVmp7E8oZrUjvA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "onetime": "^5.1.0",
        "signal-exit": "^3.0.2"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/restore-cursor/node_modules/signal-exit": {
      "version": "3.0.7",
      "resolved": "https://registry.npmjs.org/signal-exit/-/signal-exit-3.0.7.tgz",
      "integrity": "sha512-wnD2ZE+l+SPC/uoS0vXeE9L1+0wuaMqKlfz9AMUo38JsyLSBWSFcHR1Rri62LZc12vLr1gb3jl7iwQhgwpAbGQ==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/ret": {
      "version": "0.1.15",
      "resolved": "https://registry.npmjs.org/ret/-/ret-0.1.15.tgz",
      "integrity": "sha512-TTlYpa+OL+vMMNG24xSlQGEJ3B/RzEfUlLct7b5G/ytav+wPrplCpVMFuwzXbkecJrb6IYo1iFb0S9v37754mg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.12"
      }
    },
    "node_modules/retry": {
      "version": "0.13.1",
      "resolved": "https://registry.npmjs.org/retry/-/retry-0.13.1.tgz",
      "integrity": "sha512-XQBQ3I8W1Cge0Seh+6gjj03LbmRFWuoszgK9ooCpwYIrhhoO80pfq4cUkU5DkknwfOfFteRwlZ56PYOGYyFWdg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 4"
      }
    },
    "node_modules/retry-request": {
      "version": "7.0.2",
      "resolved": "https://registry.npmjs.org/retry-request/-/retry-request-7.0.2.tgz",
      "integrity": "sha512-dUOvLMJ0/JJYEn8NrpOaGNE7X3vpI5XlZS/u0ANjqtcZVKnIxP7IgCFwrKTxENw29emmwug53awKtaMm4i9g5w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/request": "^2.48.8",
        "extend": "^3.0.2",
        "teeny-request": "^9.0.0"
      },
      "engines": {
        "node": ">=14"
      }
    },
    "node_modules/reusify": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/reusify/-/reusify-1.1.0.tgz",
      "integrity": "sha512-g6QUff04oZpHs0eG5p83rFLhHeV00ug/Yf9nZM6fLeUrPguBTkTQOdpAWWspMh55TZfVQDPaN3NQJfbVRAxdIw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "iojs": ">=1.0.0",
        "node": ">=0.10.0"
      }
    },
    "node_modules/rollup": {
      "version": "4.52.5",
      "resolved": "https://registry.npmjs.org/rollup/-/rollup-4.52.5.tgz",
      "integrity": "sha512-3GuObel8h7Kqdjt0gxkEzaifHTqLVW56Y/bjN7PSQtkKr0w3V/QYSdt6QWYtd7A1xUtYQigtdUfgj1RvWVtorw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/estree": "1.0.8"
      },
      "bin": {
        "rollup": "dist/bin/rollup"
      },
      "engines": {
        "node": ">=18.0.0",
        "npm": ">=8.0.0"
      },
      "optionalDependencies": {
        "@rollup/rollup-android-arm-eabi": "4.52.5",
        "@rollup/rollup-android-arm64": "4.52.5",
        "@rollup/rollup-darwin-arm64": "4.52.5",
        "@rollup/rollup-darwin-x64": "4.52.5",
        "@rollup/rollup-freebsd-arm64": "4.52.5",
        "@rollup/rollup-freebsd-x64": "4.52.5",
        "@rollup/rollup-linux-arm-gnueabihf": "4.52.5",
        "@rollup/rollup-linux-arm-musleabihf": "4.52.5",
        "@rollup/rollup-linux-arm64-gnu": "4.52.5",
        "@rollup/rollup-linux-arm64-musl": "4.52.5",
        "@rollup/rollup-linux-loong64-gnu": "4.52.5",
        "@rollup/rollup-linux-ppc64-gnu": "4.52.5",
        "@rollup/rollup-linux-riscv64-gnu": "4.52.5",
        "@rollup/rollup-linux-riscv64-musl": "4.52.5",
        "@rollup/rollup-linux-s390x-gnu": "4.52.5",
        "@rollup/rollup-linux-x64-gnu": "4.52.5",
        "@rollup/rollup-linux-x64-musl": "4.52.5",
        "@rollup/rollup-openharmony-arm64": "4.52.5",
        "@rollup/rollup-win32-arm64-msvc": "4.52.5",
        "@rollup/rollup-win32-ia32-msvc": "4.52.5",
        "@rollup/rollup-win32-x64-gnu": "4.52.5",
        "@rollup/rollup-win32-x64-msvc": "4.52.5",
        "fsevents": "~2.3.2"
      }
    },
    "node_modules/router": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/router/-/router-2.2.0.tgz",
      "integrity": "sha512-nLTrUKm2UyiL7rlhapu/Zl45FwNgkZGaCpZbIHajDYgwlJCOzLSk+cIPAnsEqV955GjILJnKbdQC1nVPz+gAYQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "debug": "^4.4.0",
        "depd": "^2.0.0",
        "is-promise": "^4.0.0",
        "parseurl": "^1.3.3",
        "path-to-regexp": "^8.0.0"
      },
      "engines": {
        "node": ">= 18"
      }
    },
    "node_modules/router/node_modules/path-to-regexp": {
      "version": "8.3.0",
      "resolved": "https://registry.npmjs.org/path-to-regexp/-/path-to-regexp-8.3.0.tgz",
      "integrity": "sha512-7jdwVIRtsP8MYpdXSwOS0YdD0Du+qOoF/AEPIt88PcCFrZCzx41oxku1jD88hZBwbNUIEfpqvuhjFaMAqMTWnA==",
      "dev": true,
      "license": "MIT",
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/express"
      }
    },
    "node_modules/run-async": {
      "version": "2.4.1",
      "resolved": "https://registry.npmjs.org/run-async/-/run-async-2.4.1.tgz",
      "integrity": "sha512-tvVnVv01b8c1RrA6Ep7JkStj85Guv/YrMcwqYQnwjsAS2cTmmPGBBjAjpCW7RrSodNSoE2/qg9O4bceNvUuDgQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.12.0"
      }
    },
    "node_modules/run-parallel": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/run-parallel/-/run-parallel-1.2.0.tgz",
      "integrity": "sha512-5l4VyZR86LZ/lDxZTR6jqL8AFE2S0IFLMP26AbjsLVADxHdhB/c0GUsH+y39UfCi3dzz8OlQuPmnaJOMoDHQBA==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "queue-microtask": "^1.2.2"
      }
    },
    "node_modules/rxjs": {
      "version": "7.8.2",
      "resolved": "https://registry.npmjs.org/rxjs/-/rxjs-7.8.2.tgz",
      "integrity": "sha512-dhKf903U/PQZY6boNNtAGdWbG85WAbjT/1xYoZIC7FAY0yWapOBQVsVrDl58W86//e1VpMNBtRV4MaXfdMySFA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "tslib": "^2.1.0"
      }
    },
    "node_modules/safe-buffer": {
      "version": "5.2.1",
      "resolved": "https://registry.npmjs.org/safe-buffer/-/safe-buffer-5.2.1.tgz",
      "integrity": "sha512-rp3So07KcdmmKbGvgaNxQSJr7bGVSVk5S9Eq1F+ppbRo70+YeaDxkw5Dd8NPN+GD6bjnYm2VuPuCXmpuYvmCXQ==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT"
    },
    "node_modules/safe-stable-stringify": {
      "version": "2.5.0",
      "resolved": "https://registry.npmjs.org/safe-stable-stringify/-/safe-stable-stringify-2.5.0.tgz",
      "integrity": "sha512-b3rppTKm9T+PsVCBEOUR46GWI7fdOs00VKZ1+9c1EWDaDMvjQc6tUwuFyIprgGgTcWoVHSKrU8H31ZHA2e0RHA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/safer-buffer": {
      "version": "2.1.2",
      "resolved": "https://registry.npmjs.org/safer-buffer/-/safer-buffer-2.1.2.tgz",
      "integrity": "sha512-YZo3K82SD7Riyi0E1EQPojLz7kpepnSQI9IyPbHHg1XXXevb5dJI7tpyN2ADxGcQbHG7vcyRHk0cbwqcQriUtg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/scheduler": {
      "version": "0.23.2",
      "resolved": "https://registry.npmjs.org/scheduler/-/scheduler-0.23.2.tgz",
      "integrity": "sha512-UOShsPwz7NrMUqhR6t0hWjFduvOzbtv7toDH1/hIrfRNIDBnnBWd0CwJTGvTpngVlmwGCdP9/Zl/tVrDqcuYzQ==",
      "license": "MIT",
      "dependencies": {
        "loose-envify": "^1.1.0"
      }
    },
    "node_modules/semver": {
      "version": "7.7.3",
      "resolved": "https://registry.npmjs.org/semver/-/semver-7.7.3.tgz",
      "integrity": "sha512-SdsKMrI9TdgjdweUSR9MweHA4EJ8YxHn8DFaDisvhVlUOe4BF1tLD7GAj0lIqWVl+dPb/rExr0Btby5loQm20Q==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/semver-diff": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/semver-diff/-/semver-diff-3.1.1.tgz",
      "integrity": "sha512-GX0Ix/CJcHyB8c4ykpHGIAvLyOwOobtM/8d+TQkAd81/bEjgPHrfba41Vpesr7jX/t8Uh+R3EX9eAS5be+jQYg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "semver": "^6.3.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/semver-diff/node_modules/semver": {
      "version": "6.3.1",
      "resolved": "https://registry.npmjs.org/semver/-/semver-6.3.1.tgz",
      "integrity": "sha512-BR7VvDCVHO+q2xBEWskxS6DJE1qRnb7DxzUrogb71CWoSficBxYsiAGd+Kl0mmq/MprG9yArRkyrQxTO6XjMzA==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      }
    },
    "node_modules/send": {
      "version": "0.19.0",
      "resolved": "https://registry.npmjs.org/send/-/send-0.19.0.tgz",
      "integrity": "sha512-dW41u5VfLXu8SJh5bwRmyYUbAoSB3c9uQh6L8h/KtsFREPWpbX1lrljJo186Jc4nmci/sGUZ9a0a0J2zgfq2hw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "debug": "2.6.9",
        "depd": "2.0.0",
        "destroy": "1.2.0",
        "encodeurl": "~1.0.2",
        "escape-html": "~1.0.3",
        "etag": "~1.8.1",
        "fresh": "0.5.2",
        "http-errors": "2.0.0",
        "mime": "1.6.0",
        "ms": "2.1.3",
        "on-finished": "2.4.1",
        "range-parser": "~1.2.1",
        "statuses": "2.0.1"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/send/node_modules/debug": {
      "version": "2.6.9",
      "resolved": "https://registry.npmjs.org/debug/-/debug-2.6.9.tgz",
      "integrity": "sha512-bC7ElrdJaJnPbAP+1EotYvqZsb3ecl5wi6Bfi6BJTUcNowp6cvspg0jXznRTKDjm/E7AdgFBVeAPVMNcKGsHMA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ms": "2.0.0"
      }
    },
    "node_modules/send/node_modules/debug/node_modules/ms": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.0.0.tgz",
      "integrity": "sha512-Tpp60P6IUJDTuOq/5Z8cdskzJujfwqfOTkrwIwj7IRISpnkJnT6SyJ4PCPnGMoFjC9ddhal5KVIYtAt97ix05A==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/send/node_modules/encodeurl": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/encodeurl/-/encodeurl-1.0.2.tgz",
      "integrity": "sha512-TPJXq8JqFaVYm2CWmPvnP2Iyo4ZSM7/QKcSmuMLDObfpH5fi7RUGmd/rTDf+rut/saiDiQEeVTNgAmJEdAOx0w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/send/node_modules/mime": {
      "version": "1.6.0",
      "resolved": "https://registry.npmjs.org/mime/-/mime-1.6.0.tgz",
      "integrity": "sha512-x0Vn8spI+wuJ1O6S7gnbaQg8Pxh4NNHb7KSINmEWKiPE4RKOplvijn+NkmYmmRgP68mc70j2EbeTFRsrswaQeg==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "mime": "cli.js"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/serve-static": {
      "version": "1.16.2",
      "resolved": "https://registry.npmjs.org/serve-static/-/serve-static-1.16.2.tgz",
      "integrity": "sha512-VqpjJZKadQB/PEbEwvFdO43Ax5dFBZ2UECszz8bQ7pi7wt//PWe1P6MN7eCnjsatYtBT6EuiClbjSWP2WrIoTw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "encodeurl": "~2.0.0",
        "escape-html": "~1.0.3",
        "parseurl": "~1.3.3",
        "send": "0.19.0"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/setprototypeof": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/setprototypeof/-/setprototypeof-1.2.0.tgz",
      "integrity": "sha512-E5LDX7Wrp85Kil5bhZv46j8jOeboKq5JMmYM3gVGdGH8xFpPWXUMsNrlODCrkoxMEeNi/XZIwuRvY4XNwYMJpw==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/shebang-command": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/shebang-command/-/shebang-command-2.0.0.tgz",
      "integrity": "sha512-kHxr2zZpYtdmrN1qDjrrX/Z1rR1kG8Dx+gkpK1G4eXmvXswmcE1hTWBWYUzlraYw1/yZp6YuDY77YtvbN0dmDA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "shebang-regex": "^3.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/shebang-regex": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/shebang-regex/-/shebang-regex-3.0.0.tgz",
      "integrity": "sha512-7++dFhtcx3353uBaq8DDR4NuxBetBzC7ZQOhmTQInHEd6bSrXdiEyzCvG07Z44UYdLShWUyXt5M/yhz8ekcb1A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/side-channel": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/side-channel/-/side-channel-1.1.0.tgz",
      "integrity": "sha512-ZX99e6tRweoUXqR+VBrslhda51Nh5MTQwou5tnUDgbtyM0dBgmhEDtWGP/xbKn6hqfPRHujUNwz5fy/wbbhnpw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "object-inspect": "^1.13.3",
        "side-channel-list": "^1.0.0",
        "side-channel-map": "^1.0.1",
        "side-channel-weakmap": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/side-channel-list": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/side-channel-list/-/side-channel-list-1.0.0.tgz",
      "integrity": "sha512-FCLHtRD/gnpCiCHEiJLOwdmFP+wzCmDEkc9y7NsYxeF4u7Btsn1ZuwgwJGxImImHicJArLP4R0yX4c2KCrMrTA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "object-inspect": "^1.13.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/side-channel-map": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/side-channel-map/-/side-channel-map-1.0.1.tgz",
      "integrity": "sha512-VCjCNfgMsby3tTdo02nbjtM/ewra6jPHmpThenkTYh8pG9ucZ/1P8So4u4FGBek/BjpOVsDCMoLA/iuBKIFXRA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.5",
        "object-inspect": "^1.13.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/side-channel-weakmap": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/side-channel-weakmap/-/side-channel-weakmap-1.0.2.tgz",
      "integrity": "sha512-WPS/HvHQTYnHisLo9McqBHOJk2FkHO/tlpvldyrnem4aeQp4hai3gythswg6p01oSoTl58rcpiFAjF2br2Ak2A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.5",
        "object-inspect": "^1.13.3",
        "side-channel-map": "^1.0.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/signal-exit": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/signal-exit/-/signal-exit-4.1.0.tgz",
      "integrity": "sha512-bzyZ1e88w9O1iNJbKnOlvYTrWPDl46O1bG0D3XInv+9tkPrxrN8jUUTiFlDkkmKWgn1M6CfIA13SuGqOa9Korw==",
      "dev": true,
      "license": "ISC",
      "engines": {
        "node": ">=14"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/skin-tone": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/skin-tone/-/skin-tone-2.0.0.tgz",
      "integrity": "sha512-kUMbT1oBJCpgrnKoSr0o6wPtvRWT9W9UKvGLwfJYO2WuahZRHOpEyL1ckyMGgMWh0UdpmaoFqKKD29WTomNEGA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "unicode-emoji-modifier-base": "^1.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/smart-buffer": {
      "version": "4.2.0",
      "resolved": "https://registry.npmjs.org/smart-buffer/-/smart-buffer-4.2.0.tgz",
      "integrity": "sha512-94hK0Hh8rPqQl2xXc3HsaBoOXKV20MToPkcXvwbISWLEs+64sBq5kFgn2kJDHb1Pry9yrP0dxrCI9RRci7RXKg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 6.0.0",
        "npm": ">= 3.0.0"
      }
    },
    "node_modules/socks": {
      "version": "2.8.7",
      "resolved": "https://registry.npmjs.org/socks/-/socks-2.8.7.tgz",
      "integrity": "sha512-HLpt+uLy/pxB+bum/9DzAgiKS8CX1EvbWxI4zlmgGCExImLdiad2iCwXT5Z4c9c3Eq8rP2318mPW2c+QbtjK8A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ip-address": "^10.0.1",
        "smart-buffer": "^4.2.0"
      },
      "engines": {
        "node": ">= 10.0.0",
        "npm": ">= 3.0.0"
      }
    },
    "node_modules/socks-proxy-agent": {
      "version": "8.0.5",
      "resolved": "https://registry.npmjs.org/socks-proxy-agent/-/socks-proxy-agent-8.0.5.tgz",
      "integrity": "sha512-HehCEsotFqbPW9sJ8WVYB6UbmIMv7kUUORIF2Nncq4VQvBfNBLibW9YZR5dlYCSUhwcD628pRllm7n+E+YTzJw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "agent-base": "^7.1.2",
        "debug": "^4.3.4",
        "socks": "^2.8.3"
      },
      "engines": {
        "node": ">= 14"
      }
    },
    "node_modules/sort-any": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/sort-any/-/sort-any-2.0.0.tgz",
      "integrity": "sha512-T9JoiDewQEmWcnmPn/s9h/PH9t3d/LSWi0RgVmXSuDYeZXTZOZ1/wrK2PHaptuR1VXe3clLLt0pD6sgVOwjNEA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "lodash": "^4.17.21"
      }
    },
    "node_modules/source-map": {
      "version": "0.6.1",
      "resolved": "https://registry.npmjs.org/source-map/-/source-map-0.6.1.tgz",
      "integrity": "sha512-UjgapumWlbMhkBgzT7Ykc5YXUT46F0iKu8SGXq0bcwP5dz/h0Plj6enJqjz1Zbq2l5WaqYnrVbwWOWMyF3F47g==",
      "dev": true,
      "license": "BSD-3-Clause",
      "optional": true,
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/source-map-js": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/source-map-js/-/source-map-js-1.2.1.tgz",
      "integrity": "sha512-UXWMKhLOwVKb728IUtQPXxfYU+usdybtUrK/8uGE8CQMvrhOpwvzDBwj0QhSL7MQc7vIsISBG8VQ8+IDQxpfQA==",
      "dev": true,
      "license": "BSD-3-Clause",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/space-separated-tokens": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/space-separated-tokens/-/space-separated-tokens-2.0.2.tgz",
      "integrity": "sha512-PEGlAwrG8yXGXRjW32fGbg66JAlOAwbObuqVoJpv/mRgoWDQfgH1wDPvtzWyUSNAXBGSk8h755YDbbcEy3SH2Q==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/split2": {
      "version": "4.2.0",
      "resolved": "https://registry.npmjs.org/split2/-/split2-4.2.0.tgz",
      "integrity": "sha512-UcjcJOWknrNkF6PLX83qcHM6KHgVKNkV62Y8a5uYDVv9ydGQVwAHMKqHdJje1VTWpljG0WYpCDhrCdAOYH4TWg==",
      "dev": true,
      "license": "ISC",
      "engines": {
        "node": ">= 10.x"
      }
    },
    "node_modules/sprintf-js": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/sprintf-js/-/sprintf-js-1.0.3.tgz",
      "integrity": "sha512-D9cPgkvLlV3t3IzL0D0YLvGA9Ahk4PcvVwUbN0dSGr1aP0Nrt4AEnTUbuGvquEC0mA64Gqt1fzirlRs5ibXx8g==",
      "dev": true,
      "license": "BSD-3-Clause"
    },
    "node_modules/sql-formatter": {
      "version": "15.6.10",
      "resolved": "https://registry.npmjs.org/sql-formatter/-/sql-formatter-15.6.10.tgz",
      "integrity": "sha512-0bJOPQrRO/JkjQhiThVayq0hOKnI1tHI+2OTkmT7TGtc6kqS+V7kveeMzRW+RNQGxofmTmet9ILvztyuxv0cJQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "argparse": "^2.0.1",
        "nearley": "^2.20.1"
      },
      "bin": {
        "sql-formatter": "bin/sql-formatter-cli.cjs"
      }
    },
    "node_modules/ssri": {
      "version": "12.0.0",
      "resolved": "https://registry.npmjs.org/ssri/-/ssri-12.0.0.tgz",
      "integrity": "sha512-S7iGNosepx9RadX82oimUkvr0Ct7IjJbEbs4mJcTxst8um95J3sDYU1RBEOvdu6oL1Wek2ODI5i4MAw+dZ6cAQ==",
      "dev": true,
      "license": "ISC",
      "optional": true,
      "dependencies": {
        "minipass": "^7.0.3"
      },
      "engines": {
        "node": "^18.17.0 || >=20.5.0"
      }
    },
    "node_modules/stack-trace": {
      "version": "0.0.10",
      "resolved": "https://registry.npmjs.org/stack-trace/-/stack-trace-0.0.10.tgz",
      "integrity": "sha512-KGzahc7puUKkzyMt+IqAep+TVNbKP+k2Lmwhub39m1AsTSkaDutx56aDCo+HLDzf/D26BIHTJWNiTG1KAJiQCg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "*"
      }
    },
    "node_modules/statuses": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/statuses/-/statuses-2.0.1.tgz",
      "integrity": "sha512-RwNA9Z/7PrK06rYLIzFMlaF+l73iwpzsqRIFgbMLbTcLD6cOao82TaWefPXQvB2fOC4AjuYSEndS7N/mTCbkdQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/stream-chain": {
      "version": "2.2.5",
      "resolved": "https://registry.npmjs.org/stream-chain/-/stream-chain-2.2.5.tgz",
      "integrity": "sha512-1TJmBx6aSWqZ4tx7aTpBDXK0/e2hhcNSTV8+CbFJtDjbb+I1mZ8lHit0Grw9GRT+6JbIrrDd8esncgBi8aBXGA==",
      "dev": true,
      "license": "BSD-3-Clause"
    },
    "node_modules/stream-events": {
      "version": "1.0.5",
      "resolved": "https://registry.npmjs.org/stream-events/-/stream-events-1.0.5.tgz",
      "integrity": "sha512-E1GUzBSgvct8Jsb3v2X15pjzN1tYebtbLaMg+eBOUOAxgbLoSbT2NS91ckc5lJD1KfLjId+jXJRgo0qnV5Nerg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "stubs": "^3.0.0"
      }
    },
    "node_modules/stream-json": {
      "version": "1.9.1",
      "resolved": "https://registry.npmjs.org/stream-json/-/stream-json-1.9.1.tgz",
      "integrity": "sha512-uWkjJ+2Nt/LO9Z/JyKZbMusL8Dkh97uUBTv3AJQ74y07lVahLY4eEFsPsE97pxYBwr8nnjMAIch5eqI0gPShyw==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "stream-chain": "^2.2.5"
      }
    },
    "node_modules/stream-shift": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/stream-shift/-/stream-shift-1.0.3.tgz",
      "integrity": "sha512-76ORR0DO1o1hlKwTbi/DM3EXWGf3ZJYO8cXX5RJwnul2DEg2oyoZyjLNoQM8WsvZiFKCRfC1O0J7iCvie3RZmQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/streamx": {
      "version": "2.23.0",
      "resolved": "https://registry.npmjs.org/streamx/-/streamx-2.23.0.tgz",
      "integrity": "sha512-kn+e44esVfn2Fa/O0CPFcex27fjIL6MkVae0Mm6q+E6f0hWv578YCERbv+4m02cjxvDsPKLnmxral/rR6lBMAg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "events-universal": "^1.0.0",
        "fast-fifo": "^1.3.2",
        "text-decoder": "^1.1.0"
      }
    },
    "node_modules/string_decoder": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/string_decoder/-/string_decoder-1.3.0.tgz",
      "integrity": "sha512-hkRX8U1WjJFd8LsDJ2yQ/wWWxaopEsABU1XfkM8A+j0+85JAGppt16cr1Whg6KIbb4okU6Mql6BOj+uup/wKeA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "safe-buffer": "~5.2.0"
      }
    },
    "node_modules/string-width": {
      "version": "4.2.3",
      "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
      "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "emoji-regex": "^8.0.0",
        "is-fullwidth-code-point": "^3.0.0",
        "strip-ansi": "^6.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/string-width-cjs": {
      "name": "string-width",
      "version": "4.2.3",
      "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
      "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "emoji-regex": "^8.0.0",
        "is-fullwidth-code-point": "^3.0.0",
        "strip-ansi": "^6.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/stringify-entities": {
      "version": "4.0.4",
      "resolved": "https://registry.npmjs.org/stringify-entities/-/stringify-entities-4.0.4.tgz",
      "integrity": "sha512-IwfBptatlO+QCJUo19AqvrPNqlVMpW9YEL2LIVY+Rpv2qsjCGxaDLNRgeGsQWJhfItebuJhsGSLjaBbNSQ+ieg==",
      "license": "MIT",
      "dependencies": {
        "character-entities-html4": "^2.0.0",
        "character-entities-legacy": "^3.0.0"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/strip-ansi": {
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-6.0.1.tgz",
      "integrity": "sha512-Y38VPSHcqkFrCpFnQ9vuSXmquuv5oXOKpGeT6aGrr3o3Gc9AlVa6JBfUSOCnbxGGZF+/0ooI7KrPuUSztUdU5A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-regex": "^5.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/strip-ansi-cjs": {
      "name": "strip-ansi",
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-6.0.1.tgz",
      "integrity": "sha512-Y38VPSHcqkFrCpFnQ9vuSXmquuv5oXOKpGeT6aGrr3o3Gc9AlVa6JBfUSOCnbxGGZF+/0ooI7KrPuUSztUdU5A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-regex": "^5.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/strip-ansi-cjs/node_modules/ansi-regex": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/ansi-regex/-/ansi-regex-5.0.1.tgz",
      "integrity": "sha512-quJQXlTSUGL2LH9SUXo8VwsY4soanhgo6LNSm84E1LBcE8s3O0wpdiRzyR9z/ZZJMlMWv37qOOb9pdJlMUEKFQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/strip-ansi/node_modules/ansi-regex": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/ansi-regex/-/ansi-regex-5.0.1.tgz",
      "integrity": "sha512-quJQXlTSUGL2LH9SUXo8VwsY4soanhgo6LNSm84E1LBcE8s3O0wpdiRzyR9z/ZZJMlMWv37qOOb9pdJlMUEKFQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/strip-json-comments": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/strip-json-comments/-/strip-json-comments-3.1.1.tgz",
      "integrity": "sha512-6fPc+R4ihwqP6N/aIv2f1gMH8lOVtWQHoqC4yK6oSDVVocumAsfCqjkXnqiYMhmMwS/mEHLp7Vehlt3ql6lEig==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/stubs": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/stubs/-/stubs-3.0.0.tgz",
      "integrity": "sha512-PdHt7hHUJKxvTCgbKX9C1V/ftOcjJQgz8BZwNfV5c4B6dcGqlpelTbJ999jBGZ2jYiPAwcX5dP6oBwVlBlUbxw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/style-to-js": {
      "version": "1.1.18",
      "resolved": "https://registry.npmjs.org/style-to-js/-/style-to-js-1.1.18.tgz",
      "integrity": "sha512-JFPn62D4kJaPTnhFUI244MThx+FEGbi+9dw1b9yBBQ+1CZpV7QAT8kUtJ7b7EUNdHajjF/0x8fT+16oLJoojLg==",
      "license": "MIT",
      "dependencies": {
        "style-to-object": "1.0.11"
      }
    },
    "node_modules/style-to-object": {
      "version": "1.0.11",
      "resolved": "https://registry.npmjs.org/style-to-object/-/style-to-object-1.0.11.tgz",
      "integrity": "sha512-5A560JmXr7wDyGLK12Nq/EYS38VkGlglVzkis1JEdbGWSnbQIEhZzTJhzURXN5/8WwwFCs/f/VVcmkTppbXLow==",
      "license": "MIT",
      "dependencies": {
        "inline-style-parser": "0.2.4"
      }
    },
    "node_modules/sucrase": {
      "version": "3.35.0",
      "resolved": "https://registry.npmjs.org/sucrase/-/sucrase-3.35.0.tgz",
      "integrity": "sha512-8EbVDiu9iN/nESwxeSxDKe0dunta1GOlHufmSSXxMD2z2/tMZpDMpvXQGsc+ajGo8y2uYUmixaSRUc/QPoQ0GA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/gen-mapping": "^0.3.2",
        "commander": "^4.0.0",
        "glob": "^10.3.10",
        "lines-and-columns": "^1.1.6",
        "mz": "^2.7.0",
        "pirates": "^4.0.1",
        "ts-interface-checker": "^0.1.9"
      },
      "bin": {
        "sucrase": "bin/sucrase",
        "sucrase-node": "bin/sucrase-node"
      },
      "engines": {
        "node": ">=16 || 14 >=14.17"
      }
    },
    "node_modules/sucrase/node_modules/commander": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/commander/-/commander-4.1.1.tgz",
      "integrity": "sha512-NOKm8xhkzAjzFx8B2v5OAHT+u5pRQc2UCa2Vq9jYL/31o2wi9mxBA7LIFs3sV5VSC49z6pEhfbMULvShKj26WA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/superstatic": {
      "version": "9.2.0",
      "resolved": "https://registry.npmjs.org/superstatic/-/superstatic-9.2.0.tgz",
      "integrity": "sha512-QrJAJIpAij0jJT1nEwYTB0SzDi4k0wYygu6GxK0ko8twiQgfgaOAZ7Hu99p02MTAsGho753zhzSvsw8We4PBEQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "basic-auth-connect": "^1.1.0",
        "commander": "^10.0.0",
        "compression": "^1.7.0",
        "connect": "^3.7.0",
        "destroy": "^1.0.4",
        "glob-slasher": "^1.0.1",
        "is-url": "^1.2.2",
        "join-path": "^1.1.1",
        "lodash": "^4.17.19",
        "mime-types": "^2.1.35",
        "minimatch": "^6.1.6",
        "morgan": "^1.8.2",
        "on-finished": "^2.2.0",
        "on-headers": "^1.0.0",
        "path-to-regexp": "^1.9.0",
        "router": "^2.0.0",
        "update-notifier-cjs": "^5.1.6"
      },
      "bin": {
        "superstatic": "lib/bin/server.js"
      },
      "engines": {
        "node": "18 || 20 || 22"
      },
      "optionalDependencies": {
        "re2": "^1.17.7"
      }
    },
    "node_modules/superstatic/node_modules/commander": {
      "version": "10.0.1",
      "resolved": "https://registry.npmjs.org/commander/-/commander-10.0.1.tgz",
      "integrity": "sha512-y4Mg2tXshplEbSGzx7amzPwKKOCGuoSRP/CjEdwwk0FOGlUbq6lKuoyDZTNZkmxHdJtp54hdfY/JUrdL7Xfdug==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=14"
      }
    },
    "node_modules/superstatic/node_modules/isarray": {
      "version": "0.0.1",
      "resolved": "https://registry.npmjs.org/isarray/-/isarray-0.0.1.tgz",
      "integrity": "sha512-D2S+3GLxWH+uhrNEcoh/fnmYeP8E8/zHl644d/jdA0g2uyXvy3sb0qxotE+ne0LtccHknQzWwZEzhak7oJ0COQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/superstatic/node_modules/minimatch": {
      "version": "6.2.0",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-6.2.0.tgz",
      "integrity": "sha512-sauLxniAmvnhhRjFwPNnJKaPFYyddAgbYdeUpHULtCT/GhzdCx/MDNy+Y40lBxTQUrMzDE8e0S43Z5uqfO0REg==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^2.0.1"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/superstatic/node_modules/path-to-regexp": {
      "version": "1.9.0",
      "resolved": "https://registry.npmjs.org/path-to-regexp/-/path-to-regexp-1.9.0.tgz",
      "integrity": "sha512-xIp7/apCFJuUHdDLWe8O1HIkb0kQrOMb/0u6FXQjemHn/ii5LrIzU6bdECnsiTF/GjZkMEKg1xdiZwNqDYlZ6g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "isarray": "0.0.1"
      }
    },
    "node_modules/supports-color": {
      "version": "7.2.0",
      "resolved": "https://registry.npmjs.org/supports-color/-/supports-color-7.2.0.tgz",
      "integrity": "sha512-qpCAvRl9stuOHveKsn7HncJRvv501qIacKzQlO/+Lwxc9+0q2wLyv4Dfvt80/DPn2pqOBsJdDiogXGR9+OvwRw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "has-flag": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/supports-hyperlinks": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/supports-hyperlinks/-/supports-hyperlinks-3.2.0.tgz",
      "integrity": "sha512-zFObLMyZeEwzAoKCyu1B91U79K2t7ApXuQfo8OuxwXLDgcKxuwM+YvcbIhm6QWqz7mHUH1TVytR1PwVVjEuMig==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "has-flag": "^4.0.0",
        "supports-color": "^7.0.0"
      },
      "engines": {
        "node": ">=14.18"
      },
      "funding": {
        "url": "https://github.com/chalk/supports-hyperlinks?sponsor=1"
      }
    },
    "node_modules/supports-preserve-symlinks-flag": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/supports-preserve-symlinks-flag/-/supports-preserve-symlinks-flag-1.0.0.tgz",
      "integrity": "sha512-ot0WnXS9fgdkgIcePe6RHNk1WA8+muPa6cSjeR3V8K27q9BB1rTE3R1p7Hv0z1ZyAc8s6Vvv8DIyWf681MAt0w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/tailwind-merge": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/tailwind-merge/-/tailwind-merge-3.3.1.tgz",
      "integrity": "sha512-gBXpgUm/3rp1lMZZrM/w7D8GKqshif0zAymAhbCyIt8KMe+0v9DQ7cdYLR4FHH/cKpdTXb+A/tKKU3eolfsI+g==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/dcastil"
      }
    },
    "node_modules/tailwindcss": {
      "version": "3.4.18",
      "resolved": "https://registry.npmjs.org/tailwindcss/-/tailwindcss-3.4.18.tgz",
      "integrity": "sha512-6A2rnmW5xZMdw11LYjhcI5846rt9pbLSabY5XPxo+XWdxwZaFEn47Go4NzFiHu9sNNmr/kXivP1vStfvMaK1GQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@alloc/quick-lru": "^5.2.0",
        "arg": "^5.0.2",
        "chokidar": "^3.6.0",
        "didyoumean": "^1.2.2",
        "dlv": "^1.1.3",
        "fast-glob": "^3.3.2",
        "glob-parent": "^6.0.2",
        "is-glob": "^4.0.3",
        "jiti": "^1.21.7",
        "lilconfig": "^3.1.3",
        "micromatch": "^4.0.8",
        "normalize-path": "^3.0.0",
        "object-hash": "^3.0.0",
        "picocolors": "^1.1.1",
        "postcss": "^8.4.47",
        "postcss-import": "^15.1.0",
        "postcss-js": "^4.0.1",
        "postcss-load-config": "^4.0.2 || ^5.0 || ^6.0",
        "postcss-nested": "^6.2.0",
        "postcss-selector-parser": "^6.1.2",
        "resolve": "^1.22.8",
        "sucrase": "^3.35.0"
      },
      "bin": {
        "tailwind": "lib/cli.js",
        "tailwindcss": "lib/cli.js"
      },
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/tar": {
      "version": "6.2.1",
      "resolved": "https://registry.npmjs.org/tar/-/tar-6.2.1.tgz",
      "integrity": "sha512-DZ4yORTwrbTj/7MZYq2w+/ZFdI6OZ/f9SFHR+71gIVUZhOQPHzVCLpvRnPgyaMpfWxxk/4ONva3GQSyNIKRv6A==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "chownr": "^2.0.0",
        "fs-minipass": "^2.0.0",
        "minipass": "^5.0.0",
        "minizlib": "^2.1.1",
        "mkdirp": "^1.0.3",
        "yallist": "^4.0.0"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/tar-stream": {
      "version": "3.1.7",
      "resolved": "https://registry.npmjs.org/tar-stream/-/tar-stream-3.1.7.tgz",
      "integrity": "sha512-qJj60CXt7IU1Ffyc3NJMjh6EkuCFej46zUqJ4J7pqYlThyd9bO0XBTmcOIhSzZJVWfsLks0+nle/j538YAW9RQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "b4a": "^1.6.4",
        "fast-fifo": "^1.2.0",
        "streamx": "^2.15.0"
      }
    },
    "node_modules/tar-stream/node_modules/b4a": {
      "version": "1.7.3",
      "resolved": "https://registry.npmjs.org/b4a/-/b4a-1.7.3.tgz",
      "integrity": "sha512-5Q2mfq2WfGuFp3uS//0s6baOJLMoVduPYVeNmDYxu5OUA1/cBfvr2RIS7vi62LdNj/urk1hfmj867I3qt6uZ7Q==",
      "dev": true,
      "license": "Apache-2.0",
      "peerDependencies": {
        "react-native-b4a": "*"
      },
      "peerDependenciesMeta": {
        "react-native-b4a": {
          "optional": true
        }
      }
    },
    "node_modules/tar/node_modules/fs-minipass": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/fs-minipass/-/fs-minipass-2.1.0.tgz",
      "integrity": "sha512-V/JgOLFCS+R6Vcq0slCuaeWEdNC3ouDlJMNIsacH2VtALiu9mV4LPrHc5cDl8k5aw6J8jwgWWpiTo5RYhmIzvg==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "minipass": "^3.0.0"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/tar/node_modules/fs-minipass/node_modules/minipass": {
      "version": "3.3.6",
      "resolved": "https://registry.npmjs.org/minipass/-/minipass-3.3.6.tgz",
      "integrity": "sha512-DxiNidxSEK+tHG6zOIklvNOwm3hvCrbUrdtzY74U6HKTJxvIDfOUL5W5P2Ghd3DTkhhKPYGqeNUIh5qcM4YBfw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "yallist": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/tar/node_modules/minipass": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/minipass/-/minipass-5.0.0.tgz",
      "integrity": "sha512-3FnjYuehv9k6ovOEbyOswadCDPX1piCfhV8ncmYtHOjuPwylVWsghTLo7rabjC3Rx5xD4HDx8Wm1xnMF7S5qFQ==",
      "dev": true,
      "license": "ISC",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/tar/node_modules/minizlib": {
      "version": "2.1.2",
      "resolved": "https://registry.npmjs.org/minizlib/-/minizlib-2.1.2.tgz",
      "integrity": "sha512-bAxsR8BVfj60DWXHE3u30oHzfl4G7khkSuPW+qvpd7jFRHm7dLxOjUk1EHACJ/hxLY8phGJ0YhYHZo7jil7Qdg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "minipass": "^3.0.0",
        "yallist": "^4.0.0"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/tar/node_modules/minizlib/node_modules/minipass": {
      "version": "3.3.6",
      "resolved": "https://registry.npmjs.org/minipass/-/minipass-3.3.6.tgz",
      "integrity": "sha512-DxiNidxSEK+tHG6zOIklvNOwm3hvCrbUrdtzY74U6HKTJxvIDfOUL5W5P2Ghd3DTkhhKPYGqeNUIh5qcM4YBfw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "yallist": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/tar/node_modules/yallist": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/yallist/-/yallist-4.0.0.tgz",
      "integrity": "sha512-3wdGidZyq5PB084XLES5TpOSRA3wjXAlIWMhum2kRcv/41Sn2emQ0dycQW4uZXLejwKvg6EsvbdlVL+FYEct7A==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/tcp-port-used": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/tcp-port-used/-/tcp-port-used-1.0.2.tgz",
      "integrity": "sha512-l7ar8lLUD3XS1V2lfoJlCBaeoaWo/2xfYt81hM7VlvR4RrMVFqfmzfhLVk40hAb368uitje5gPtBRL1m/DGvLA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "debug": "4.3.1",
        "is2": "^2.0.6"
      }
    },
    "node_modules/tcp-port-used/node_modules/debug": {
      "version": "4.3.1",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.3.1.tgz",
      "integrity": "sha512-doEwdvm4PCeK4K3RQN2ZC2BYUBaxwLARCqZmMjtF8a51J2Rb0xpVloFRnCODwqjpwnAoao4pelN8l3RJdv3gRQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ms": "2.1.2"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/tcp-port-used/node_modules/ms": {
      "version": "2.1.2",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.2.tgz",
      "integrity": "sha512-sGkPx+VjMtmA6MX27oA4FBFELFCZZ4S4XqeGOXCv68tT+jb3vk/RyaKWP0PTKyWtmLSM0b+adUTEvbs1PEaH2w==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/teeny-request": {
      "version": "9.0.0",
      "resolved": "https://registry.npmjs.org/teeny-request/-/teeny-request-9.0.0.tgz",
      "integrity": "sha512-resvxdc6Mgb7YEThw6G6bExlXKkv6+YbuzGg9xuXxSgxJF7Ozs+o8Y9+2R3sArdWdW8nOokoQb1yrpFB0pQK2g==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "http-proxy-agent": "^5.0.0",
        "https-proxy-agent": "^5.0.0",
        "node-fetch": "^2.6.9",
        "stream-events": "^1.0.5",
        "uuid": "^9.0.0"
      },
      "engines": {
        "node": ">=14"
      }
    },
    "node_modules/teeny-request/node_modules/agent-base": {
      "version": "6.0.2",
      "resolved": "https://registry.npmjs.org/agent-base/-/agent-base-6.0.2.tgz",
      "integrity": "sha512-RZNwNclF7+MS/8bDg70amg32dyeZGZxiDuQmZxKLAlQjr3jGyLx+4Kkk58UO7D2QdgFIQCovuSuZESne6RG6XQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "debug": "4"
      },
      "engines": {
        "node": ">= 6.0.0"
      }
    },
    "node_modules/teeny-request/node_modules/http-proxy-agent": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/http-proxy-agent/-/http-proxy-agent-5.0.0.tgz",
      "integrity": "sha512-n2hY8YdoRE1i7r6M0w9DIw5GgZN0G25P8zLCRQ8rjXtTU3vsNFBI/vWK/UIeE6g5MUUz6avwAPXmL6Fy9D/90w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@tootallnate/once": "2",
        "agent-base": "6",
        "debug": "4"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/teeny-request/node_modules/https-proxy-agent": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/https-proxy-agent/-/https-proxy-agent-5.0.1.tgz",
      "integrity": "sha512-dFcAjpTQFgoLMzC2VwU+C/CbS7uRL0lWmxDITmqm7C+7F0Odmj6s9l6alZc6AELXhrnggM2CeWSXHGOdX2YtwA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "agent-base": "6",
        "debug": "4"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/teeny-request/node_modules/uuid": {
      "version": "9.0.1",
      "resolved": "https://registry.npmjs.org/uuid/-/uuid-9.0.1.tgz",
      "integrity": "sha512-b+1eJOlsR9K8HJpow9Ok3fiWOWSIcIzXodvv0rQjVoOVNpWMpxf1wZNpt4y9h10odCNrqnYp1OBzRktckBe3sA==",
      "dev": true,
      "funding": [
        "https://github.com/sponsors/broofa",
        "https://github.com/sponsors/ctavan"
      ],
      "license": "MIT",
      "bin": {
        "uuid": "dist/bin/uuid"
      }
    },
    "node_modules/text-decoder": {
      "version": "1.2.3",
      "resolved": "https://registry.npmjs.org/text-decoder/-/text-decoder-1.2.3.tgz",
      "integrity": "sha512-3/o9z3X0X0fTupwsYvR03pJ/DjWuqqrfwBgTQzdWDiQSm9KitAyz/9WqsT2JQW7KV2m+bC2ol/zqpW37NHxLaA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "b4a": "^1.6.4"
      }
    },
    "node_modules/text-decoder/node_modules/b4a": {
      "version": "1.7.3",
      "resolved": "https://registry.npmjs.org/b4a/-/b4a-1.7.3.tgz",
      "integrity": "sha512-5Q2mfq2WfGuFp3uS//0s6baOJLMoVduPYVeNmDYxu5OUA1/cBfvr2RIS7vi62LdNj/urk1hfmj867I3qt6uZ7Q==",
      "dev": true,
      "license": "Apache-2.0",
      "peerDependencies": {
        "react-native-b4a": "*"
      },
      "peerDependenciesMeta": {
        "react-native-b4a": {
          "optional": true
        }
      }
    },
    "node_modules/text-hex": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/text-hex/-/text-hex-1.0.0.tgz",
      "integrity": "sha512-uuVGNWzgJ4yhRaNSiubPY7OjISw4sw4E5Uv0wbjp+OzcbmVU/rsT8ujgcXJhn9ypzsgr5vlzpPqP+MBBKcGvbg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/thenify": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/thenify/-/thenify-3.3.1.tgz",
      "integrity": "sha512-RVZSIV5IG10Hk3enotrhvz0T9em6cyHBLkH/YAZuKqd8hRkKhSfCGIcP2KUY0EPxndzANBmNllzWPwak+bheSw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "any-promise": "^1.0.0"
      }
    },
    "node_modules/thenify-all": {
      "version": "1.6.0",
      "resolved": "https://registry.npmjs.org/thenify-all/-/thenify-all-1.6.0.tgz",
      "integrity": "sha512-RNxQH/qI8/t3thXJDwcstUO4zeqo64+Uy/+sNVRBx4Xn2OX+OZ9oP+iJnNFqplFra2ZUVeKCSa2oVWi3T4uVmA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "thenify": ">= 3.1.0 < 4"
      },
      "engines": {
        "node": ">=0.8"
      }
    },
    "node_modules/through": {
      "version": "2.3.8",
      "resolved": "https://registry.npmjs.org/through/-/through-2.3.8.tgz",
      "integrity": "sha512-w89qg7PI8wAdvX60bMDP+bFoD5Dvhm9oLheFp5O4a2QF0cSBGsBX4qZmadPMvVqlLJBBci+WqGGOAPvcDeNSVg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/through2": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/through2/-/through2-2.0.5.tgz",
      "integrity": "sha512-/mrRod8xqpA+IHSLyGCQ2s8SPHiCDEeQJSep1jqLYeEUClOFG2Qsh+4FU6G9VeqpZnGW/Su8LQGc4YKni5rYSQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "readable-stream": "~2.3.6",
        "xtend": "~4.0.1"
      }
    },
    "node_modules/through2/node_modules/readable-stream": {
      "version": "2.3.8",
      "resolved": "https://registry.npmjs.org/readable-stream/-/readable-stream-2.3.8.tgz",
      "integrity": "sha512-8p0AUk4XODgIewSi0l8Epjs+EVnWiK7NoDIEGU0HhE7+ZyY8D1IMY7odu5lRrFXGg71L15KG8QrPmum45RTtdA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "core-util-is": "~1.0.0",
        "inherits": "~2.0.3",
        "isarray": "~1.0.0",
        "process-nextick-args": "~2.0.0",
        "safe-buffer": "~5.1.1",
        "string_decoder": "~1.1.1",
        "util-deprecate": "~1.0.1"
      }
    },
    "node_modules/through2/node_modules/safe-buffer": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/safe-buffer/-/safe-buffer-5.1.2.tgz",
      "integrity": "sha512-Gd2UZBJDkXlY7GbJxfsE8/nvKkUEU1G38c1siN6QP6a9PT9MmHB8GnpscSmMJSoF8LOIrt8ud/wPtojys4G6+g==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/through2/node_modules/string_decoder": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/string_decoder/-/string_decoder-1.1.1.tgz",
      "integrity": "sha512-n/ShnvDi6FHbbVfviro+WojiFzv+s8MPMHBczVePfUpDJLwoLT0ht1l4YwBCbi8pJAveEEdnkHyPyTP/mzRfwg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "safe-buffer": "~5.1.0"
      }
    },
    "node_modules/tinyglobby": {
      "version": "0.2.15",
      "resolved": "https://registry.npmjs.org/tinyglobby/-/tinyglobby-0.2.15.tgz",
      "integrity": "sha512-j2Zq4NyQYG5XMST4cbs02Ak8iJUdxRM0XI5QyxXuZOzKOINmWurp3smXu3y5wDcJrptwpSjgXHzIQxR0omXljQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fdir": "^6.5.0",
        "picomatch": "^4.0.3"
      },
      "engines": {
        "node": ">=12.0.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/SuperchupuDev"
      }
    },
    "node_modules/tinyglobby/node_modules/fdir": {
      "version": "6.5.0",
      "resolved": "https://registry.npmjs.org/fdir/-/fdir-6.5.0.tgz",
      "integrity": "sha512-tIbYtZbucOs0BRGqPJkshJUYdL+SDH7dVM8gjy+ERp3WAUjLEFJE+02kanyHtwjWOnwrKYBiwAmM0p4kLJAnXg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12.0.0"
      },
      "peerDependencies": {
        "picomatch": "^3 || ^4"
      },
      "peerDependenciesMeta": {
        "picomatch": {
          "optional": true
        }
      }
    },
    "node_modules/tinyglobby/node_modules/picomatch": {
      "version": "4.0.3",
      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-4.0.3.tgz",
      "integrity": "sha512-5gTmgEY/sqK6gFXLIsQNH19lWb4ebPDLA4SdLP7dsWkIXHWlG66oPuVvXSGFPppYZz8ZDZq0dYYrbHfBCVUb1Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sponsors/jonschlinkert"
      }
    },
    "node_modules/tmp": {
      "version": "0.2.5",
      "resolved": "https://registry.npmjs.org/tmp/-/tmp-0.2.5.tgz",
      "integrity": "sha512-voyz6MApa1rQGUxT3E+BK7/ROe8itEx7vD8/HEvt4xwXucvQ5G5oeEiHkmHZJuBO21RpOf+YYm9MOivj709jow==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=14.14"
      }
    },
    "node_modules/to-regex-range": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/to-regex-range/-/to-regex-range-5.0.1.tgz",
      "integrity": "sha512-65P7iz6X5yEr1cwcgvQxbbIw7Uk3gOy5dIdtZ4rDveLqhrdJP+Li/Hx6tyK0NEb+2GCyneCMJiGqrADCSNk8sQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-number": "^7.0.0"
      },
      "engines": {
        "node": ">=8.0"
      }
    },
    "node_modules/to-regex-range/node_modules/is-number": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/is-number/-/is-number-7.0.0.tgz",
      "integrity": "sha512-41Cifkg6e8TylSpdtTpeLVMqvSBEVzTttHvERD741+pnZ8ANv0004MRL43QKPDlK9cGvNp6NZWZUBlbGXYxxng==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.12.0"
      }
    },
    "node_modules/toidentifier": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/toidentifier/-/toidentifier-1.0.1.tgz",
      "integrity": "sha512-o5sSPKEkg/DIQNmH43V0/uerLrpzVedkUh8tGNvaeXpfpuwjKenlSox/2O/BTlZUtEe+JG7s5YhEz608PlAHRA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.6"
      }
    },
    "node_modules/toxic": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/toxic/-/toxic-1.0.1.tgz",
      "integrity": "sha512-WI3rIGdcaKULYg7KVoB0zcjikqvcYYvcuT6D89bFPz2rVR0Rl0PK6x8/X62rtdLtBKIE985NzVf/auTtGegIIg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "lodash": "^4.17.10"
      }
    },
    "node_modules/tr46": {
      "version": "0.0.3",
      "resolved": "https://registry.npmjs.org/tr46/-/tr46-0.0.3.tgz",
      "integrity": "sha512-N3WMsuqV66lT30CrXNbEjx4GEwlow3v6rr4mCcv6prnfwhS01rkgyFdjPNBYd9br7LpXV1+Emh01fHnq2Gdgrw==",
      "license": "MIT"
    },
    "node_modules/trim-lines": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/trim-lines/-/trim-lines-3.0.1.tgz",
      "integrity": "sha512-kRj8B+YHZCc9kQYdWfJB2/oUl9rA99qbowYYBtr4ui4mZyAQ2JpvVBd/6U2YloATfqBhBTSMhTpgBHtU0Mf3Rg==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/triple-beam": {
      "version": "1.4.1",
      "resolved": "https://registry.npmjs.org/triple-beam/-/triple-beam-1.4.1.tgz",
      "integrity": "sha512-aZbgViZrg1QNcG+LULa7nhZpJTZSLm/mXnHXnbAbjmN5aSa0y7V+wvv6+4WaBtpISJzThKy+PIPxc1Nq1EJ9mg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 14.0.0"
      }
    },
    "node_modules/trough": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/trough/-/trough-2.2.0.tgz",
      "integrity": "sha512-tmMpK00BjZiUyVyvrBK7knerNgmgvcV/KLVyuma/SC+TQN167GrMRciANTz09+k3zW8L8t60jWO1GpfkZdjTaw==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    },
    "node_modules/ts-api-utils": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/ts-api-utils/-/ts-api-utils-2.1.0.tgz",
      "integrity": "sha512-CUgTZL1irw8u29bzrOD/nH85jqyc74D6SshFgujOIA7osm2Rz7dYH77agkx7H4FBNxDq7Cjf+IjaX/8zwFW+ZQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=18.12"
      },
      "peerDependencies": {
        "typescript": ">=4.8.4"
      }
    },
    "node_modules/ts-interface-checker": {
      "version": "0.1.13",
      "resolved": "https://registry.npmjs.org/ts-interface-checker/-/ts-interface-checker-0.1.13.tgz",
      "integrity": "sha512-Y/arvbn+rrz3JCKl9C4kVNfTfSm2/mEp5FSz5EsZSANGPSlQrpRI5M4PKF+mJnE52jOO90PnPSc3Ur3bTQw0gA==",
      "dev": true,
      "license": "Apache-2.0"
    },
    "node_modules/tslib": {
      "version": "2.8.1",
      "resolved": "https://registry.npmjs.org/tslib/-/tslib-2.8.1.tgz",
      "integrity": "sha512-oJFu94HQb+KVduSUQL7wnpmqnfmLsOA/nAh6b6EH0wCEoK0/mPeXU6c3wKDV83MkOuHPRHtSXKKU99IBazS/2w==",
      "dev": true,
      "license": "0BSD"
    },
    "node_modules/tsscmp": {
      "version": "1.0.6",
      "resolved": "https://registry.npmjs.org/tsscmp/-/tsscmp-1.0.6.tgz",
      "integrity": "sha512-LxhtAkPDTkVCMQjt2h6eBVY28KCjikZqZfMcC15YBeNjkgUpdCfBu5HoiOTDu86v6smE8yOjyEktJ8hlbANHQA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.6.x"
      }
    },
    "node_modules/type-check": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/type-check/-/type-check-0.4.0.tgz",
      "integrity": "sha512-XleUoc9uwGXqjWwXaUTZAmzMcFZ5858QA2vvx1Ur5xIcixXIP+8LnFDgRplU30us6teqdlskFfu+ae4K79Ooew==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "prelude-ls": "^1.2.1"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/type-fest": {
      "version": "0.21.3",
      "resolved": "https://registry.npmjs.org/type-fest/-/type-fest-0.21.3.tgz",
      "integrity": "sha512-t0rzBq87m3fVcduHDUFhKmyyX+9eo6WQjZvf51Ea/M0Q7+T374Jp1aUiyUl0GKxp8M/OETVHSDvmkyPgvX+X2w==",
      "dev": true,
      "license": "(MIT OR CC0-1.0)",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/type-is": {
      "version": "1.6.18",
      "resolved": "https://registry.npmjs.org/type-is/-/type-is-1.6.18.tgz",
      "integrity": "sha512-TkRKr9sUTxEH8MdfuCSP7VizJyzRNMjj2J2do2Jr3Kym598JVdEksuzPQCnlFPW4ky9Q+iA+ma9BGm06XQBy8g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "media-typer": "0.3.0",
        "mime-types": "~2.1.24"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/typedarray-to-buffer": {
      "version": "3.1.5",
      "resolved": "https://registry.npmjs.org/typedarray-to-buffer/-/typedarray-to-buffer-3.1.5.tgz",
      "integrity": "sha512-zdu8XMNEDepKKR+XYOXAVPtWui0ly0NtohUscw+UmaHiAWT8hrV1rr//H6V+0DvJ3OQ19S979M0laLfX8rm82Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-typedarray": "^1.0.0"
      }
    },
    "node_modules/typescript": {
      "version": "5.6.3",
      "resolved": "https://registry.npmjs.org/typescript/-/typescript-5.6.3.tgz",
      "integrity": "sha512-hjcS1mhfuyi4WW8IWtjP7brDrG2cuDZukyrYrSauoXGNgx0S7zceP07adYkJycEr56BOUTNPzbInooiN3fn1qw==",
      "dev": true,
      "license": "Apache-2.0",
      "bin": {
        "tsc": "bin/tsc",
        "tsserver": "bin/tsserver"
      },
      "engines": {
        "node": ">=14.17"
      }
    },
    "node_modules/undici-types": {
      "version": "6.21.0",
      "resolved": "https://registry.npmjs.org/undici-types/-/undici-types-6.21.0.tgz",
      "integrity": "sha512-iwDZqg0QAGrg9Rav5H4n0M64c3mkR59cJ6wQp+7C4nI0gsmExaedaYLNO44eT4AtBBwjbTiGPMlt2Md0T9H9JQ==",
      "license": "MIT"
    },
    "node_modules/unicode-emoji-modifier-base": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/unicode-emoji-modifier-base/-/unicode-emoji-modifier-base-1.0.0.tgz",
      "integrity": "sha512-yLSH4py7oFH3oG/9K+XWrz1pSi3dfUrWEnInbxMfArOfc1+33BlGPQtLsOYwvdMy11AwUBetYuaRxSPqgkq+8g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/unified": {
      "version": "11.0.5",
      "resolved": "https://registry.npmjs.org/unified/-/unified-11.0.5.tgz",
      "integrity": "sha512-xKvGhPWw3k84Qjh8bI3ZeJjqnyadK+GEFtazSfZv/rKeTkTjOJho6mFqh2SM96iIcZokxiOpg78GazTSg8+KHA==",
      "license": "MIT",
      "dependencies": {
        "@types/unist": "^3.0.0",
        "bail": "^2.0.0",
        "devlop": "^1.0.0",
        "extend": "^3.0.0",
        "is-plain-obj": "^4.0.0",
        "trough": "^2.0.0",
        "vfile": "^6.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/unique-filename": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/unique-filename/-/unique-filename-4.0.0.tgz",
      "integrity": "sha512-XSnEewXmQ+veP7xX2dS5Q4yZAvO40cBN2MWkJ7D/6sW4Dg6wYBNwM1Vrnz1FhH5AdeLIlUXRI9e28z1YZi71NQ==",
      "dev": true,
      "license": "ISC",
      "optional": true,
      "dependencies": {
        "unique-slug": "^5.0.0"
      },
      "engines": {
        "node": "^18.17.0 || >=20.5.0"
      }
    },
    "node_modules/unique-slug": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/unique-slug/-/unique-slug-5.0.0.tgz",
      "integrity": "sha512-9OdaqO5kwqR+1kVgHAhsp5vPNU0hnxRa26rBFNfNgM7M6pNtgzeBn3s/xbyCQL3dcjzOatcef6UUHpB/6MaETg==",
      "dev": true,
      "license": "ISC",
      "optional": true,
      "dependencies": {
        "imurmurhash": "^0.1.4"
      },
      "engines": {
        "node": "^18.17.0 || >=20.5.0"
      }
    },
    "node_modules/unique-string": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/unique-string/-/unique-string-2.0.0.tgz",
      "integrity": "sha512-uNaeirEPvpZWSgzwsPGtU2zVSTrn/8L5q/IexZmH0eH6SA73CmAA5U4GwORTxQAZs95TAXLNqeLoPPNO5gZfWg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "crypto-random-string": "^2.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/unist-util-is": {
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/unist-util-is/-/unist-util-is-6.0.1.tgz",
      "integrity": "sha512-LsiILbtBETkDz8I9p1dQ0uyRUWuaQzd/cuEeS1hoRSyW5E5XGmTzlwY1OrNzzakGowI9Dr/I8HVaw4hTtnxy8g==",
      "license": "MIT",
      "dependencies": {
        "@types/unist": "^3.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/unist-util-position": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/unist-util-position/-/unist-util-position-5.0.0.tgz",
      "integrity": "sha512-fucsC7HjXvkB5R3kTCO7kUjRdrS0BJt3M/FPxmHMBOm8JQi2BsHAHFsy27E0EolP8rp0NzXsJ+jNPyDWvOJZPA==",
      "license": "MIT",
      "dependencies": {
        "@types/unist": "^3.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/unist-util-stringify-position": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/unist-util-stringify-position/-/unist-util-stringify-position-4.0.0.tgz",
      "integrity": "sha512-0ASV06AAoKCDkS2+xw5RXJywruurpbC4JZSm7nr7MOt1ojAzvyyaO+UxZf18j8FCF6kmzCZKcAgN/yu2gm2XgQ==",
      "license": "MIT",
      "dependencies": {
        "@types/unist": "^3.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/unist-util-visit": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/unist-util-visit/-/unist-util-visit-5.0.0.tgz",
      "integrity": "sha512-MR04uvD+07cwl/yhVuVWAtw+3GOR/knlL55Nd/wAdblk27GCVt3lqpTivy/tkJcZoNPzTwS1Y+KMojlLDhoTzg==",
      "license": "MIT",
      "dependencies": {
        "@types/unist": "^3.0.0",
        "unist-util-is": "^6.0.0",
        "unist-util-visit-parents": "^6.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/unist-util-visit-parents": {
      "version": "6.0.2",
      "resolved": "https://registry.npmjs.org/unist-util-visit-parents/-/unist-util-visit-parents-6.0.2.tgz",
      "integrity": "sha512-goh1s1TBrqSqukSc8wrjwWhL0hiJxgA8m4kFxGlQ+8FYQ3C/m11FcTs4YYem7V664AhHVvgoQLk890Ssdsr2IQ==",
      "license": "MIT",
      "dependencies": {
        "@types/unist": "^3.0.0",
        "unist-util-is": "^6.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/universal-analytics": {
      "version": "0.5.3",
      "resolved": "https://registry.npmjs.org/universal-analytics/-/universal-analytics-0.5.3.tgz",
      "integrity": "sha512-HXSMyIcf2XTvwZ6ZZQLfxfViRm/yTGoRgDeTbojtq6rezeyKB0sTBcKH2fhddnteAHRcHiKgr/ACpbgjGOC6RQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "debug": "^4.3.1",
        "uuid": "^8.0.0"
      },
      "engines": {
        "node": ">=12.18.2"
      }
    },
    "node_modules/universalify": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/universalify/-/universalify-2.0.1.tgz",
      "integrity": "sha512-gptHNQghINnc/vTGIk0SOFGFNXw7JVrlRUtConJRlvaw6DuX0wO5Jeko9sWrMBhh+PsYAZ7oXAiOnf/UKogyiw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 10.0.0"
      }
    },
    "node_modules/unpipe": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/unpipe/-/unpipe-1.0.0.tgz",
      "integrity": "sha512-pjy2bYhSsufwWlKwPc+l3cN7+wuJlK6uz0YdJEOlQDbl6jo/YlPi4mb8agUkVC8BF7V8NuzeyPNqRksA3hztKQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/update-browserslist-db": {
      "version": "1.1.3",
      "resolved": "https://registry.npmjs.org/update-browserslist-db/-/update-browserslist-db-1.1.3.tgz",
      "integrity": "sha512-UxhIZQ+QInVdunkDAaiazvvT/+fXL5Osr0JZlJulepYu6Jd7qJtDZjlur0emRlT71EN3ScPoE7gvsuIKKNavKw==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/browserslist"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "escalade": "^3.2.0",
        "picocolors": "^1.1.1"
      },
      "bin": {
        "update-browserslist-db": "cli.js"
      },
      "peerDependencies": {
        "browserslist": ">= 4.21.0"
      }
    },
    "node_modules/update-notifier-cjs": {
      "version": "5.1.7",
      "resolved": "https://registry.npmjs.org/update-notifier-cjs/-/update-notifier-cjs-5.1.7.tgz",
      "integrity": "sha512-eZWTh8F+VCEoC4UIh0pKmh8h4izj65VvLhCpJpVefUxdYe0fU3GBrC4Sbh1AoWA/miNPAb6UVlp2fUQNsfp+3g==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "boxen": "^5.0.0",
        "chalk": "^4.1.0",
        "configstore": "^5.0.1",
        "has-yarn": "^2.1.0",
        "import-lazy": "^2.1.0",
        "is-ci": "^2.0.0",
        "is-installed-globally": "^0.4.0",
        "is-npm": "^5.0.0",
        "is-yarn-global": "^0.3.0",
        "isomorphic-fetch": "^3.0.0",
        "pupa": "^2.1.1",
        "registry-auth-token": "^5.0.1",
        "registry-url": "^5.1.0",
        "semver": "^7.3.7",
        "semver-diff": "^3.1.1",
        "xdg-basedir": "^4.0.0"
      },
      "engines": {
        "node": ">=14"
      }
    },
    "node_modules/uri-js": {
      "version": "4.4.1",
      "resolved": "https://registry.npmjs.org/uri-js/-/uri-js-4.4.1.tgz",
      "integrity": "sha512-7rKUyy33Q1yc98pQ1DAmLtwX109F7TIfWlW1Ydo8Wl1ii1SeHieeh0HHfPeL2fMXK6z0s8ecKs9frCuLJvndBg==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "punycode": "^2.1.0"
      }
    },
    "node_modules/url-join": {
      "version": "0.0.1",
      "resolved": "https://registry.npmjs.org/url-join/-/url-join-0.0.1.tgz",
      "integrity": "sha512-H6dnQ/yPAAVzMQRvEvyz01hhfQL5qRWSEt7BX8t9DqnPw9BjMb64fjIRq76Uvf1hkHp+mTZvEVJ5guXOT0Xqaw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/url-template": {
      "version": "2.0.8",
      "resolved": "https://registry.npmjs.org/url-template/-/url-template-2.0.8.tgz",
      "integrity": "sha512-XdVKMF4SJ0nP/O7XIPB0JwAEuT9lDIYnNsK8yGVe43y0AWoKeJNdv3ZNWh7ksJ6KqQFjOO6ox/VEitLnaVNufw==",
      "dev": true,
      "license": "BSD"
    },
    "node_modules/util-deprecate": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/util-deprecate/-/util-deprecate-1.0.2.tgz",
      "integrity": "sha512-EPD5q1uXyFxJpCrLnCc1nHnq3gOa6DZBocAIiI2TaSCA7VCJ1UJDMagCzIkXNsUYfD1daK//LTEQ8xiIbrHtcw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/utils-merge": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/utils-merge/-/utils-merge-1.0.1.tgz",
      "integrity": "sha512-pMZTvIkT1d+TFGvDOqodOclx0QWkkgi6Tdoa8gC8ffGAAqz9pzPTZWAybbsHHoED/ztMtkv/VoYTYyShUn81hA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4.0"
      }
    },
    "node_modules/uuid": {
      "version": "8.3.2",
      "resolved": "https://registry.npmjs.org/uuid/-/uuid-8.3.2.tgz",
      "integrity": "sha512-+NYs2QeMWy+GWFOEm9xnn6HCDp0l7QBD7ml8zLUmJ+93Q5NF0NocErnwkTkXVFNiX3/fpC6afS8Dhb/gz7R7eg==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "uuid": "dist/bin/uuid"
      }
    },
    "node_modules/valid-url": {
      "version": "1.0.9",
      "resolved": "https://registry.npmjs.org/valid-url/-/valid-url-1.0.9.tgz",
      "integrity": "sha512-QQDsV8OnSf5Uc30CKSwG9lnhMPe6exHtTXLRYX8uMwKENy640pU+2BgBL0LRbDh/eYRahNCS7aewCx0wf3NYVA==",
      "dev": true
    },
    "node_modules/vary": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/vary/-/vary-1.1.2.tgz",
      "integrity": "sha512-BNGbWLfd0eUPabhkXUVm0j8uuvREyTh5ovRa/dyow/BqAbZJyC+5fU+IzQOzmAKzYqYRAISoRhdQr3eIZ/PXqg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/vfile": {
      "version": "6.0.3",
      "resolved": "https://registry.npmjs.org/vfile/-/vfile-6.0.3.tgz",
      "integrity": "sha512-KzIbH/9tXat2u30jf+smMwFCsno4wHVdNmzFyL+T/L3UGqqk6JKfVqOFOZEpZSHADH1k40ab6NUIXZq422ov3Q==",
      "license": "MIT",
      "dependencies": {
        "@types/unist": "^3.0.0",
        "vfile-message": "^4.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/vfile-message": {
      "version": "4.0.3",
      "resolved": "https://registry.npmjs.org/vfile-message/-/vfile-message-4.0.3.tgz",
      "integrity": "sha512-QTHzsGd1EhbZs4AsQ20JX1rC3cOlt/IWJruk893DfLRr57lcnOeMaWG4K0JrRta4mIJZKth2Au3mM3u03/JWKw==",
      "license": "MIT",
      "dependencies": {
        "@types/unist": "^3.0.0",
        "unist-util-stringify-position": "^4.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/unified"
      }
    },
    "node_modules/vite": {
      "version": "6.4.1",
      "resolved": "https://registry.npmjs.org/vite/-/vite-6.4.1.tgz",
      "integrity": "sha512-+Oxm7q9hDoLMyJOYfUYBuHQo+dkAloi33apOPP56pzj+vsdJDzr+j1NISE5pyaAuKL4A3UD34qd0lx5+kfKp2g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "esbuild": "^0.25.0",
        "fdir": "^6.4.4",
        "picomatch": "^4.0.2",
        "postcss": "^8.5.3",
        "rollup": "^4.34.9",
        "tinyglobby": "^0.2.13"
      },
      "bin": {
        "vite": "bin/vite.js"
      },
      "engines": {
        "node": "^18.0.0 || ^20.0.0 || >=22.0.0"
      },
      "funding": {
        "url": "https://github.com/vitejs/vite?sponsor=1"
      },
      "optionalDependencies": {
        "fsevents": "~2.3.3"
      },
      "peerDependencies": {
        "@types/node": "^18.0.0 || ^20.0.0 || >=22.0.0",
        "jiti": ">=1.21.0",
        "less": "*",
        "lightningcss": "^1.21.0",
        "sass": "*",
        "sass-embedded": "*",
        "stylus": "*",
        "sugarss": "*",
        "terser": "^5.16.0",
        "tsx": "^4.8.1",
        "yaml": "^2.4.2"
      },
      "peerDependenciesMeta": {
        "@types/node": {
          "optional": true
        },
        "jiti": {
          "optional": true
        },
        "less": {
          "optional": true
        },
        "lightningcss": {
          "optional": true
        },
        "sass": {
          "optional": true
        },
        "sass-embedded": {
          "optional": true
        },
        "stylus": {
          "optional": true
        },
        "sugarss": {
          "optional": true
        },
        "terser": {
          "optional": true
        },
        "tsx": {
          "optional": true
        },
        "yaml": {
          "optional": true
        }
      }
    },
    "node_modules/vite/node_modules/fdir": {
      "version": "6.5.0",
      "resolved": "https://registry.npmjs.org/fdir/-/fdir-6.5.0.tgz",
      "integrity": "sha512-tIbYtZbucOs0BRGqPJkshJUYdL+SDH7dVM8gjy+ERp3WAUjLEFJE+02kanyHtwjWOnwrKYBiwAmM0p4kLJAnXg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12.0.0"
      },
      "peerDependencies": {
        "picomatch": "^3 || ^4"
      },
      "peerDependenciesMeta": {
        "picomatch": {
          "optional": true
        }
      }
    },
    "node_modules/vite/node_modules/picomatch": {
      "version": "4.0.3",
      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-4.0.3.tgz",
      "integrity": "sha512-5gTmgEY/sqK6gFXLIsQNH19lWb4ebPDLA4SdLP7dsWkIXHWlG66oPuVvXSGFPppYZz8ZDZq0dYYrbHfBCVUb1Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sponsors/jonschlinkert"
      }
    },
    "node_modules/wcwidth": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/wcwidth/-/wcwidth-1.0.1.tgz",
      "integrity": "sha512-XHPEwS0q6TaxcvG85+8EYkbiCux2XtWG2mkc47Ng2A77BQu9+DqIOJldST4HgPkuea7dvKSj5VgX3P1d4rW8Tg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "defaults": "^1.0.3"
      }
    },
    "node_modules/web-streams-polyfill": {
      "version": "3.3.3",
      "resolved": "https://registry.npmjs.org/web-streams-polyfill/-/web-streams-polyfill-3.3.3.tgz",
      "integrity": "sha512-d2JWLCivmZYTSIoge9MsgFCZrt571BikcWGYkjC1khllbTeDlGqZ2D8vD8E/lJa8WGWbb7Plm8/XJYV7IJHZZw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/webidl-conversions": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/webidl-conversions/-/webidl-conversions-3.0.1.tgz",
      "integrity": "sha512-2JAn3z8AR6rjK8Sm8orRC0h/bcl/DqL7tRPdGZ4I1CjdF+EaMLmYxBHyXuKL849eucPFhvBoxMsflfOb8kxaeQ==",
      "license": "BSD-2-Clause"
    },
    "node_modules/whatwg-fetch": {
      "version": "3.6.20",
      "resolved": "https://registry.npmjs.org/whatwg-fetch/-/whatwg-fetch-3.6.20.tgz",
      "integrity": "sha512-EqhiFU6daOA8kpjOWTL0olhVOF3i7OrFzSYiGsEMB8GcXS+RrzauAERX65xMeNWVqxA6HXH2m69Z9LaKKdisfg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/whatwg-url": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/whatwg-url/-/whatwg-url-5.0.0.tgz",
      "integrity": "sha512-saE57nupxk6v3HY35+jzBwYa0rKSy0XR8JSxZPwgLr7ys0IBzhGviA1/TUGJLmSVqs8pb9AnvICXEuOHLprYTw==",
      "license": "MIT",
      "dependencies": {
        "tr46": "~0.0.3",
        "webidl-conversions": "^3.0.0"
      }
    },
    "node_modules/which": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/which/-/which-2.0.2.tgz",
      "integrity": "sha512-BLI3Tl1TW3Pvl70l3yq3Y64i+awpwXqsGBYWkkqMtnbXgrMD+yj7rhW0kuEDxzJaYXGjEW5ogapKNMEKNMjibA==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "isexe": "^2.0.0"
      },
      "bin": {
        "node-which": "bin/node-which"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/widest-line": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/widest-line/-/widest-line-3.1.0.tgz",
      "integrity": "sha512-NsmoXalsWVDMGupxZ5R08ka9flZjjiLvHVAWYOKtiKM8ujtZWr9cRffak+uSE48+Ob8ObalXpwyeUiyDD6QFgg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "string-width": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/winston": {
      "version": "3.18.3",
      "resolved": "https://registry.npmjs.org/winston/-/winston-3.18.3.tgz",
      "integrity": "sha512-NoBZauFNNWENgsnC9YpgyYwOVrl2m58PpQ8lNHjV3kosGs7KJ7Npk9pCUE+WJlawVSe8mykWDKWFSVfs3QO9ww==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@colors/colors": "^1.6.0",
        "@dabh/diagnostics": "^2.0.8",
        "async": "^3.2.3",
        "is-stream": "^2.0.0",
        "logform": "^2.7.0",
        "one-time": "^1.0.0",
        "readable-stream": "^3.4.0",
        "safe-stable-stringify": "^2.3.1",
        "stack-trace": "0.0.x",
        "triple-beam": "^1.3.0",
        "winston-transport": "^4.9.0"
      },
      "engines": {
        "node": ">= 12.0.0"
      }
    },
    "node_modules/winston-transport": {
      "version": "4.9.0",
      "resolved": "https://registry.npmjs.org/winston-transport/-/winston-transport-4.9.0.tgz",
      "integrity": "sha512-8drMJ4rkgaPo1Me4zD/3WLfI/zPdA9o2IipKODunnGDcuqbHwjsbB79ylv04LCGGzU0xQ6vTznOMpQGaLhhm6A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "logform": "^2.7.0",
        "readable-stream": "^3.6.2",
        "triple-beam": "^1.3.0"
      },
      "engines": {
        "node": ">= 12.0.0"
      }
    },
    "node_modules/winston-transport/node_modules/readable-stream": {
      "version": "3.6.2",
      "resolved": "https://registry.npmjs.org/readable-stream/-/readable-stream-3.6.2.tgz",
      "integrity": "sha512-9u/sniCrY3D5WdsERHzHE4G2YCXqoG5FTHUiCC4SIbr6XcLZBY05ya9EKjYek9O5xOAwjGq+1JdGBAS7Q9ScoA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "inherits": "^2.0.3",
        "string_decoder": "^1.1.1",
        "util-deprecate": "^1.0.1"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/winston/node_modules/@colors/colors": {
      "version": "1.6.0",
      "resolved": "https://registry.npmjs.org/@colors/colors/-/colors-1.6.0.tgz",
      "integrity": "sha512-Ir+AOibqzrIsL6ajt3Rz3LskB7OiMVHqltZmspbW/TJuTVuyOMirVqAkjfY6JISiLHgyNqicAC8AyHHGzNd/dA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.1.90"
      }
    },
    "node_modules/winston/node_modules/readable-stream": {
      "version": "3.6.2",
      "resolved": "https://registry.npmjs.org/readable-stream/-/readable-stream-3.6.2.tgz",
      "integrity": "sha512-9u/sniCrY3D5WdsERHzHE4G2YCXqoG5FTHUiCC4SIbr6XcLZBY05ya9EKjYek9O5xOAwjGq+1JdGBAS7Q9ScoA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "inherits": "^2.0.3",
        "string_decoder": "^1.1.1",
        "util-deprecate": "^1.0.1"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/word-wrap": {
      "version": "1.2.5",
      "resolved": "https://registry.npmjs.org/word-wrap/-/word-wrap-1.2.5.tgz",
      "integrity": "sha512-BN22B5eaMMI9UMtjrGd5g5eCYPpCPDUy0FJXbYsaT5zYxjFOckS53SQDE3pWkVoWpHXVb3BrYcEN4Twa55B5cA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/wrap-ansi": {
      "version": "6.2.0",
      "resolved": "https://registry.npmjs.org/wrap-ansi/-/wrap-ansi-6.2.0.tgz",
      "integrity": "sha512-r6lPcBGxZXlIcymEu7InxDMhdW0KDxpLgoFLcguasxCaJ/SOIZwINatK9KY/tf+ZrlywOKU0UDj3ATXUBfxJXA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-styles": "^4.0.0",
        "string-width": "^4.1.0",
        "strip-ansi": "^6.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/wrap-ansi-cjs": {
      "name": "wrap-ansi",
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/wrap-ansi/-/wrap-ansi-7.0.0.tgz",
      "integrity": "sha512-YVGIj2kamLSTxw6NsZjoBxfSwsn0ycdesmc4p+Q21c5zPuZ1pl+NfxVdxPtdHvmNVOQ6XSYG4AUtyt/Fi7D16Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-styles": "^4.0.0",
        "string-width": "^4.1.0",
        "strip-ansi": "^6.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/wrap-ansi?sponsor=1"
      }
    },
    "node_modules/wrappy": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/wrappy/-/wrappy-1.0.2.tgz",
      "integrity": "sha512-l4Sp/DRseor9wL6EvV2+TuQn63dMkPjZ/sp9XkghTEbV9KlPS1xUsZ3u7/IQO4wxtcFB4bgpQPRcR3QCvezPcQ==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/write-file-atomic": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/write-file-atomic/-/write-file-atomic-3.0.3.tgz",
      "integrity": "sha512-AvHcyZ5JnSfq3ioSyjrBkH9yW4m7Ayk8/9My/DD9onKeu/94fwrMocemO2QAJFAlnnDN+ZDS+ZjAR5ua1/PV/Q==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "imurmurhash": "^0.1.4",
        "is-typedarray": "^1.0.0",
        "signal-exit": "^3.0.2",
        "typedarray-to-buffer": "^3.1.5"
      }
    },
    "node_modules/write-file-atomic/node_modules/signal-exit": {
      "version": "3.0.7",
      "resolved": "https://registry.npmjs.org/signal-exit/-/signal-exit-3.0.7.tgz",
      "integrity": "sha512-wnD2ZE+l+SPC/uoS0vXeE9L1+0wuaMqKlfz9AMUo38JsyLSBWSFcHR1Rri62LZc12vLr1gb3jl7iwQhgwpAbGQ==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/ws": {
      "version": "8.18.3",
      "resolved": "https://registry.npmjs.org/ws/-/ws-8.18.3.tgz",
      "integrity": "sha512-PEIGCY5tSlUt50cqyMXfCzX+oOPqN0vuGqWzbcJ2xvnkzkq46oOpz7dQaTDBdfICb4N14+GARUDw2XV2N4tvzg==",
      "license": "MIT",
      "engines": {
        "node": ">=10.0.0"
      },
      "peerDependencies": {
        "bufferutil": "^4.0.1",
        "utf-8-validate": ">=5.0.2"
      },
      "peerDependenciesMeta": {
        "bufferutil": {
          "optional": true
        },
        "utf-8-validate": {
          "optional": true
        }
      }
    },
    "node_modules/xdg-basedir": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/xdg-basedir/-/xdg-basedir-4.0.0.tgz",
      "integrity": "sha512-PSNhEJDejZYV7h50BohL09Er9VaIefr2LMAf3OEmpCkjOi34eYyQYAXUTjEQtZJTKcF0E2UKTh+osDLsgNim9Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/xtend": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/xtend/-/xtend-4.0.2.tgz",
      "integrity": "sha512-LKYU1iAXJXUgAXn9URjiu+MWhyUXHsvfp7mcuYm9dSUKK0/CjtrUwFAxD82/mCWbtLsGjFIad0wIsod4zrTAEQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.4"
      }
    },
    "node_modules/y18n": {
      "version": "5.0.8",
      "resolved": "https://registry.npmjs.org/y18n/-/y18n-5.0.8.tgz",
      "integrity": "sha512-0pfFzegeDWJHJIAmTLRP2DwHjdF5s7jo9tuztdQxAhINCdvS+3nGINqPd00AphqJR/0LhANUS6/+7SCb98YOfA==",
      "dev": true,
      "license": "ISC",
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/yallist": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/yallist/-/yallist-3.1.1.tgz",
      "integrity": "sha512-a4UGQaWPH59mOXUYnAG2ewncQS4i4F43Tv3JoAM+s2VDAmS9NsK8GpDMLrCHPksFT7h3K6TOoUNn2pb7RoXx4g==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/yaml": {
      "version": "2.8.1",
      "resolved": "https://registry.npmjs.org/yaml/-/yaml-2.8.1.tgz",
      "integrity": "sha512-lcYcMxX2PO9XMGvAJkJ3OsNMw+/7FKes7/hgerGUYWIoWu5j/+YQqcZr5JnPZWzOsEBgMbSbiSTn/dv/69Mkpw==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "yaml": "bin.mjs"
      },
      "engines": {
        "node": ">= 14.6"
      }
    },
    "node_modules/yargs": {
      "version": "17.7.2",
      "resolved": "https://registry.npmjs.org/yargs/-/yargs-17.7.2.tgz",
      "integrity": "sha512-7dSzzRQ++CKnNI/krKnYRV7JKKPUXMEh61soaHKg9mrWEhzFWhFnxPxGl+69cD1Ou63C13NUPCnmIcrvqCuM6w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "cliui": "^8.0.1",
        "escalade": "^3.1.1",
        "get-caller-file": "^2.0.5",
        "require-directory": "^2.1.1",
        "string-width": "^4.2.3",
        "y18n": "^5.0.5",
        "yargs-parser": "^21.1.1"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/yargs-parser": {
      "version": "21.1.1",
      "resolved": "https://registry.npmjs.org/yargs-parser/-/yargs-parser-21.1.1.tgz",
      "integrity": "sha512-tVpsJW7DdjecAiFpbIB1e3qxIQsE6NoPc5/eTdrbbIC4h0LVsWhnoa3g+m2HclBIujHzsxZ4VJVA+GUuc2/LBw==",
      "dev": true,
      "license": "ISC",
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/yocto-queue": {
      "version": "0.1.0",
      "resolved": "https://registry.npmjs.org/yocto-queue/-/yocto-queue-0.1.0.tgz",
      "integrity": "sha512-rVksvsnNCdJ/ohGc6xgPwyN8eheCxsiLM8mxuE/t/mOVqJewPuO1miLpTHQiRgTKCLexL4MeAFVagts7HmNZ2Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/zip-stream": {
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/zip-stream/-/zip-stream-6.0.1.tgz",
      "integrity": "sha512-zK7YHHz4ZXpW89AHXUPbQVGKI7uvkd3hzusTdotCg1UxyaVtg0zFJSTfW/Dq5f7OBBVnq6cZIaC8Ti4hb6dtCA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "archiver-utils": "^5.0.0",
        "compress-commons": "^6.0.2",
        "readable-stream": "^4.0.0"
      },
      "engines": {
        "node": ">= 14"
      }
    },
    "node_modules/zwitch": {
      "version": "2.0.4",
      "resolved": "https://registry.npmjs.org/zwitch/-/zwitch-2.0.4.tgz",
      "integrity": "sha512-bXE4cR/kVZhKZX/RjPEflHaKVhUVl85noU3v6b8apfQEc1x4A+zBxjZ4lN8LqGd6WZ3dl98pY4o717VFmoPp+A==",
      "license": "MIT",
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wooorm"
      }
    }
  }
}


```n

## package.json

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\package.json.Extension.TrimStart('.'))

{
  "name": "otagon-new",
  "private": true,
  "version": "1.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "tsc && vite build",
    "preview": "vite preview",
    "lint": "eslint . --ext ts,tsx --report-unused-disable-directives --max-warnings 0",
    "type-check": "tsc --noEmit",
    "firebase:init": "firebase init hosting",
    "firebase:deploy": "npm run build && firebase deploy",
    "firebase:serve": "firebase serve",
    "deploy": "npm run build && firebase deploy --only hosting"
  },
  "dependencies": {
    "@google/generative-ai": "^0.24.1",
    "@heroicons/react": "^2.2.0",
    "@supabase/supabase-js": "^2.58.0",
    "clsx": "^2.1.1",
    "postgres": "^3.4.7",
    "react": "^18.3.1",
    "react-dom": "^18.3.1",
    "react-markdown": "^9.1.0",
    "react-router-dom": "^6.23.1",
    "remark-gfm": "^4.0.1",
    "tailwind-merge": "^3.3.1"
  },
  "devDependencies": {
    "@types/node": "^22.14.0",
    "@types/react": "^18.3.12",
    "@types/react-dom": "^18.3.1",
    "@typescript-eslint/eslint-plugin": "^8.15.0",
    "@typescript-eslint/parser": "^8.15.0",
    "@vitejs/plugin-react": "^4.3.3",
    "autoprefixer": "^10.4.21",
    "eslint": "^9.15.0",
    "eslint-plugin-react-hooks": "^5.0.0",
    "eslint-plugin-react-refresh": "^0.4.14",
    "firebase-tools": "^13.0.0",
    "postcss": "^8.5.6",
    "tailwindcss": "^3.4.17",
    "typescript": "~5.6.2",
    "vite": "^6.0.1"
  }
}


```n

## postcss.config.js

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\postcss.config.js.Extension.TrimStart('.'))

export default {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}


```n

## tailwind.config.js

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\tailwind.config.js.Extension.TrimStart('.'))

/** @type {import('tailwindcss').Config} */
export default {
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
  ],
  theme: {
    extend: {
      colors: {
        primary: {
          DEFAULT: '#E53A3A',
          light: '#FF6B6B',
        },
        secondary: {
          DEFAULT: '#D98C1F',
          light: '#FFB366',
        },
        accent: {
          DEFAULT: '#5CBB7B',
          light: '#7DD3A3',
        },
        background: '#0A0A0A',
        surface: '#1C1C1C',
        'surface-light': '#2E2E2E',
        'text-primary': '#F5F5F5',
        'text-secondary': '#CFCFCF',
        'text-muted': '#A3A3A3',
      },
      fontFamily: {
        sans: ['-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', 'sans-serif'],
      },
      animation: {
        'shimmer': 'shimmer 2s infinite',
        'modal-enter': 'modal-enter 0.3s ease-out',
        'fade-slide-up': 'fade-slide-up 0.8s ease-out',
        'fade-in': 'fade-in 0.6s ease-out',
        'scale-in': 'scale-in 0.4s ease-out',
        'glow-pulse': 'glow-pulse 2s ease-in-out infinite',
        'slide-in': 'slide-in 0.3s ease-out',
        'slide-out': 'slide-out 0.2s ease-in',
      },
      keyframes: {
        shimmer: {
          '0%': { backgroundPosition: '-200% 0' },
          '100%': { backgroundPosition: '200% 0' },
        },
        'modal-enter': {
          from: { opacity: '0', transform: 'scale(0.9) translateY(-20px)' },
          to: { opacity: '1', transform: 'scale(1) translateY(0)' },
        },
        'fade-slide-up': {
          from: { opacity: '0', transform: 'translateY(20px)' },
          to: { opacity: '1', transform: 'translateY(0)' },
        },
        'slide-in': {
          from: { opacity: '0', transform: 'translateX(100%) scale(0.95)' },
          to: { opacity: '1', transform: 'translateX(0) scale(1)' },
        },
        'slide-out': {
          from: { opacity: '1', transform: 'translateX(0) scale(1)' },
          to: { opacity: '0', transform: 'translateX(100%) scale(0.95)' },
        },
        'fade-in': { from: { opacity: '0' }, to: { opacity: '1' } },
        'scale-in': {
          from: { opacity: '0', transform: 'scale(0.9)' },
          to: { opacity: '1', transform: 'scale(1)' },
        },
        'glow-pulse': {
          '0%, 100%': { boxShadow: '0 0 20px rgba(229, 61, 61, 0.3)' },
          '50%': { boxShadow: '0 0 30px rgba(229, 61, 61, 0.6)' },
        },
      },
    },
  },
  plugins: [],
}


```n

## tsconfig.json

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\tsconfig.json.Extension.TrimStart('.'))

{
  "compilerOptions": {
    "target": "ES2020",
    "useDefineForClassFields": true,
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "skipLibCheck": true,
    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "jsx": "react-jsx",
    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noFallthroughCasesInSwitch": true,
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    }
  },
  "include": ["src"],
  "references": [{ "path": "./tsconfig.node.json" }]
}


```n

## tsconfig.node.json

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\tsconfig.node.json.Extension.TrimStart('.'))

{
  "compilerOptions": {
    "composite": true,
    "skipLibCheck": true,
    "module": "ESNext",
    "moduleResolution": "bundler",
    "allowSyntheticDefaultImports": true
  },
  "include": ["vite.config.ts"]
}


```n

## vite.config.ts

`$(C:\Users\mdamk\OneDrive\Desktop\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh (2)\otakon-cursor-fix-supabase-cache-persistence-and-ui-refresh\vite.config.ts.Extension.TrimStart('.'))

import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'
import path from 'path'

export default defineConfig({
  plugins: [react()],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
    },
  },
  build: {
    outDir: 'dist',
    sourcemap: true,
    chunkSizeWarningLimit: 300, // Lower threshold for warnings
    rollupOptions: {
      output: {
        manualChunks: (id) => {
          // Vendor chunks - Core libraries
          if (id.includes('node_modules')) {
            // React ecosystem
            if (id.includes('react') || id.includes('react-dom')) {
              return 'react-vendor';
            }
            // Router
            if (id.includes('react-router')) {
              return 'router-vendor';
            }
            // Supabase
            if (id.includes('@supabase') || id.includes('postgres')) {
              return 'supabase-vendor';
            }
            // Google AI
            if (id.includes('@google/generative-ai')) {
              return 'ai-vendor';
            }
            // Markdown (heavy library)
            if (id.includes('react-markdown') || id.includes('remark')) {
              return 'markdown-vendor';
            }
            // Icons
            if (id.includes('@heroicons')) {
              return 'icons-vendor';
            }
            // Other vendor code
            return 'vendor';
          }
          
          // Application code splitting
          // Services - lazy load non-critical services
          if (id.includes('/src/services/')) {
            if (id.includes('authService') || id.includes('supabaseService')) {
              return 'core-services'; // Critical services
            }
            if (id.includes('aiService') || id.includes('conversationService')) {
              return 'chat-services';
            }
            return 'services';
          }
          
          // Components
          if (id.includes('/src/components/')) {
            // Modals - lazy loaded
            if (id.includes('/modals/')) {
              return 'modals';
            }
            // Auth components
            if (id.includes('/auth/')) {
              return 'auth';
            }
            // Feature components
            if (id.includes('/features/')) {
              return 'features';
            }
          }
        },
      },
    },
  },
  server: {
    port: 5173,
    host: true,
  },
})


```n

